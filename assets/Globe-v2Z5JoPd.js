import{C as Sd,V as Re,G as xs,M as Sn,S as Ea,a as Fs,F as Xg,b as mn,c as Zs,T as Yg,d as m1,B as bi,e as Bo,f as Ui,I as So,g as Kg,h as To,i as mT,j as C4,k as gT,l as yT,m as Md,n as Ed,o as Un,H as Rr,N as bA,p as Ut,P as vT,q as g1,r as bn,s as Ot,R as qo,L as zs,t as Ii,u as _T,v as Tr,w as Ol,D as pi,W as dc,x as hA,y as ki,z as xT,A as bT,E as TT,J as Nd,K as wT,O as ST,Q as MT,U as ET,X as NT,Y as RT,Z as CT,_ as PT,$ as BT,a0 as Tu,a1 as Jl,a2 as fA,a3 as zA,a4 as H0,a5 as Zg,a6 as Ul,a7 as P4,a8 as Os,a9 as Rd,aa as Mo,ab as DT,ac as FT,ad as Gi,ae as Xr,af as Eo,ag as In,ah as No,ai as Ro,aj as kl,ak as Ls,al as mo,am as Jg,an as Uh,ao as LT,ap as Cd,aq as Pd,ar as kh,as as dt,at as Bd,au as IT,av as e6,aw as vr,ax as y1,ay as Dd,az as v1,aA as pa,aB as Gh,aC as eu,aD as t6,aE as Fi,aF as n6,aG as r6,aH as i6,aI as s6,aJ as o6,aK as Fd,aL as a6,aM as A6,aN as B4,aO as RA,aP as ci,aQ as qT,aR as l6,aS as u6,aT as c6,aU as h6,aV as f6,aW as d6,aX as p6,aY as m6,aZ as g6,a_ as y6,a$ as v6,b0 as _6,b1 as OT,b2 as UT,b3 as kT,b4 as tu,b5 as pc,b6 as mc,b7 as gc,b8 as x6,b9 as b6,ba as T6,bb as w6,bc as S6,bd as M6,be as E6,bf as N6,bg as GT,bh as VT,bi as R6,bj as C6,bk as Gl,bl as Vl,bm as dA,bn as zT,bo as Ld,bp as Id,bq as qd,br as la,bs as Od,bt as Ud,bu as j0,bv as W0,bw as Q0,bx as X0,by as D4,bz as F4,bA as L4,bB as I4,bC as Vh,bD as zh,bE as $h,bF as Hh,bG as jh,bH as Wh,bI as Qh,bJ as Xh,bK as Yh,bL as Kh,bM as Zh,bN as Jh,bO as ef,bP as tf,bQ as nf,bR as rf,bS as sf,bT as of,bU as af,bV as Af,bW as lf,bX as uf,bY as $T,bZ as P6,b_ as HT,b$ as jT,c0 as WT,c1 as QT,c2 as XT,c3 as _1,c4 as YT,c5 as B6,c6 as KT,c7 as ZT,c8 as D6,c9 as F6,ca as kd,cb as yc,cc as vc,cd as JT,ce as Gd,cf as q4,cg as ew,ch as tw,ci as _c,cj as nw,ck as rw,cl as iw,cm as sw,cn as ow,co as aw,cp as Aw,cq as lw,cr as uw,cs as cw,ct as hw,cu as fw,cv as dw,cw as pw,cx as mw,cy as gw,cz as yw,cA as vw,cB as _w,cC as xw,cD as bw,cE as Tw,cF as ww,cG as L6,cH as Sw,cI as Mw,cJ as Ew,cK as Nw,cL as x1,cM as Rw,cN as Vd,cO as Cw,cP as Pw,cQ as Bw,cR as Dw,cS as Fw,cT as zd,cU as b1,cV as Y0,cW as I6,cX as K0,cY as Lw,cZ as Iw,c_ as qw,c$ as $d,d0 as Ow,d1 as Uw,d2 as kw,d3 as q6,d4 as O6,d5 as Gw,d6 as sl,d7 as O4,d8 as $a,d9 as Ha,da as Vw,db as ui,dc as Cs,dd as zw,de as $w,df as Di,dg as Hw,dh as jw,di as Ww}from"./index-CO0ZrbTV.js";function cf(r){var e=typeof r;return r!=null&&(e=="object"||e=="function")}var Qw=typeof global=="object"&&global&&global.Object===Object&&global,Xw=typeof self=="object"&&self&&self.Object===Object&&self,U6=Qw||Xw||Function("return this")(),k2=function(){return U6.Date.now()},Yw=/\s/;function Kw(r){for(var e=r.length;e--&&Yw.test(r.charAt(e)););return e}var Zw=/^\s+/;function Jw(r){return r&&r.slice(0,Kw(r)+1).replace(Zw,"")}var xc=U6.Symbol,k6=Object.prototype,eS=k6.hasOwnProperty,tS=k6.toString,ol=xc?xc.toStringTag:void 0;function nS(r){var e=eS.call(r,ol),t=r[ol];try{r[ol]=void 0;var n=!0}catch{}var i=tS.call(r);return n&&(e?r[ol]=t:delete r[ol]),i}var rS=Object.prototype,iS=rS.toString;function sS(r){return iS.call(r)}var oS="[object Null]",aS="[object Undefined]",U4=xc?xc.toStringTag:void 0;function AS(r){return r==null?r===void 0?aS:oS:U4&&U4 in Object(r)?nS(r):sS(r)}function lS(r){return r!=null&&typeof r=="object"}var uS="[object Symbol]";function cS(r){return typeof r=="symbol"||lS(r)&&AS(r)==uS}var k4=NaN,hS=/^[-+]0x[0-9a-f]+$/i,fS=/^0b[01]+$/i,dS=/^0o[0-7]+$/i,pS=parseInt;function G4(r){if(typeof r=="number")return r;if(cS(r))return k4;if(cf(r)){var e=typeof r.valueOf=="function"?r.valueOf():r;r=cf(e)?e+"":e}if(typeof r!="string")return r===0?r:+r;r=Jw(r);var t=fS.test(r);return t||dS.test(r)?pS(r.slice(2),t?2:8):hS.test(r)?k4:+r}var mS="Expected a function",gS=Math.max,yS=Math.min;function vS(r,e,t){var n,i,s,o,u,h,d=0,m=!1,y=!1,x=!0;if(typeof r!="function")throw new TypeError(mS);e=G4(e)||0,cf(t)&&(m=!!t.leading,y="maxWait"in t,s=y?gS(G4(t.maxWait)||0,e):s,x="trailing"in t?!!t.trailing:x);function b(q){var O=n,k=i;return n=i=void 0,d=q,o=r.apply(k,O),o}function T(q){return d=q,u=setTimeout(C,e),m?b(q):o}function M(q){var O=q-h,k=q-d,z=e-O;return y?yS(z,s-k):z}function N(q){var O=q-h,k=q-d;return h===void 0||O>=e||O<0||y&&k>=s}function C(){var q=k2();if(N(q))return B(q);u=setTimeout(C,M(q))}function B(q){return u=void 0,x&&n?b(q):(n=i=void 0,o)}function P(){u!==void 0&&clearTimeout(u),d=0,n=h=i=u=void 0}function I(){return u===void 0?o:B(k2())}function D(){var q=k2(),O=N(q);if(n=arguments,i=this,h=q,O){if(u===void 0)return T(h);if(y)return clearTimeout(u),u=setTimeout(C,e),b(h)}return u===void 0&&(u=setTimeout(C,e)),o}return D.cancel=P,D.flush=I,D}function V4(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function _S(r){if(Array.isArray(r))return r}function xS(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function bS(r,e,t){return Object.defineProperty(r,"prototype",{writable:!1}),r}function TS(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n,i,s,o,u=[],h=!0,d=!1;try{if(s=(t=t.call(r)).next,e!==0)for(;!(h=(n=s.call(t)).done)&&(u.push(n.value),u.length!==e);h=!0);}catch(m){d=!0,i=m}finally{try{if(!h&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(d)throw i}}return u}}function wS(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function SS(r,e){return _S(r)||TS(r,e)||MS(r,e)||wS()}function MS(r,e){if(r){if(typeof r=="string")return V4(r,e);var t={}.toString.call(r).slice(8,-1);return t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set"?Array.from(r):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?V4(r,e):void 0}}var ES=bS(function r(e,t){var n=t.default,i=n===void 0?null:n,s=t.triggerUpdate,o=s===void 0?!0:s,u=t.onChange,h=u===void 0?function(d,m){}:u;xS(this,r),this.name=e,this.defaultVal=i,this.triggerUpdate=o,this.onChange=h});function dr(r){var e=r.stateInit,t=e===void 0?function(){return{}}:e,n=r.props,i=n===void 0?{}:n,s=r.methods,o=s===void 0?{}:s,u=r.aliases,h=u===void 0?{}:u,d=r.init,m=d===void 0?function(){}:d,y=r.update,x=y===void 0?function(){}:y,b=Object.keys(i).map(function(T){return new ES(T,i[T])});return function T(){for(var M=arguments.length,N=new Array(M),C=0;C<M;C++)N[C]=arguments[C];var B=!!(this instanceof T&&this.constructor),P=B?N.shift():void 0,I=N[0],D=I===void 0?{}:I,q=Object.assign({},t instanceof Function?t(D):t,{initialised:!1}),O={};function k(W){return z(W,D),X(),k}var z=function(K,Z){m.call(k,K,q,Z),q.initialised=!0},X=vS(function(){q.initialised&&(x.call(k,q,O),O={})},1);return b.forEach(function(W){k[W.name]=K(W);function K(Z){var se=Z.name,Y=Z.triggerUpdate,oe=Y===void 0?!1:Y,he=Z.onChange,_e=he===void 0?function(qe,Ye){}:he,ye=Z.defaultVal,Pe=ye===void 0?null:ye;return function(qe){var Ye=q[se];if(!arguments.length)return Ye;var He=qe===void 0?Pe:qe;return q[se]=He,_e.call(k,He,q,Ye),!O.hasOwnProperty(se)&&(O[se]=Ye),oe&&X(),k}}}),Object.keys(o).forEach(function(W){k[W]=function(){for(var K,Z=arguments.length,se=new Array(Z),Y=0;Y<Z;Y++)se[Y]=arguments[Y];return(K=o[W]).call.apply(K,[k,q].concat(se))}}),Object.entries(h).forEach(function(W){var K=SS(W,2),Z=K[0],se=K[1];return k[Z]=k[se]}),k.resetProps=function(){return b.forEach(function(W){k[W.name](W.defaultVal)}),k},k.resetProps(),q._rerender=X,B&&P&&k(P),k}}var er=Object.freeze({Linear:Object.freeze({None:function(r){return r},In:function(r){return r},Out:function(r){return r},InOut:function(r){return r}}),Quadratic:Object.freeze({In:function(r){return r*r},Out:function(r){return r*(2-r)},InOut:function(r){return(r*=2)<1?.5*r*r:-.5*(--r*(r-2)-1)}}),Cubic:Object.freeze({In:function(r){return r*r*r},Out:function(r){return--r*r*r+1},InOut:function(r){return(r*=2)<1?.5*r*r*r:.5*((r-=2)*r*r+2)}}),Quartic:Object.freeze({In:function(r){return r*r*r*r},Out:function(r){return 1- --r*r*r*r},InOut:function(r){return(r*=2)<1?.5*r*r*r*r:-.5*((r-=2)*r*r*r-2)}}),Quintic:Object.freeze({In:function(r){return r*r*r*r*r},Out:function(r){return--r*r*r*r*r+1},InOut:function(r){return(r*=2)<1?.5*r*r*r*r*r:.5*((r-=2)*r*r*r*r+2)}}),Sinusoidal:Object.freeze({In:function(r){return 1-Math.sin((1-r)*Math.PI/2)},Out:function(r){return Math.sin(r*Math.PI/2)},InOut:function(r){return .5*(1-Math.sin(Math.PI*(.5-r)))}}),Exponential:Object.freeze({In:function(r){return r===0?0:Math.pow(1024,r-1)},Out:function(r){return r===1?1:1-Math.pow(2,-10*r)},InOut:function(r){return r===0?0:r===1?1:(r*=2)<1?.5*Math.pow(1024,r-1):.5*(-Math.pow(2,-10*(r-1))+2)}}),Circular:Object.freeze({In:function(r){return 1-Math.sqrt(1-r*r)},Out:function(r){return Math.sqrt(1- --r*r)},InOut:function(r){return(r*=2)<1?-.5*(Math.sqrt(1-r*r)-1):.5*(Math.sqrt(1-(r-=2)*r)+1)}}),Elastic:Object.freeze({In:function(r){return r===0?0:r===1?1:-Math.pow(2,10*(r-1))*Math.sin((r-1.1)*5*Math.PI)},Out:function(r){return r===0?0:r===1?1:Math.pow(2,-10*r)*Math.sin((r-.1)*5*Math.PI)+1},InOut:function(r){return r===0?0:r===1?1:(r*=2,r<1?-.5*Math.pow(2,10*(r-1))*Math.sin((r-1.1)*5*Math.PI):.5*Math.pow(2,-10*(r-1))*Math.sin((r-1.1)*5*Math.PI)+1)}}),Back:Object.freeze({In:function(r){var e=1.70158;return r===1?1:r*r*((e+1)*r-e)},Out:function(r){var e=1.70158;return r===0?0:--r*r*((e+1)*r+e)+1},InOut:function(r){var e=2.5949095;return(r*=2)<1?.5*(r*r*((e+1)*r-e)):.5*((r-=2)*r*((e+1)*r+e)+2)}}),Bounce:Object.freeze({In:function(r){return 1-er.Bounce.Out(1-r)},Out:function(r){return r<1/2.75?7.5625*r*r:r<2/2.75?7.5625*(r-=1.5/2.75)*r+.75:r<2.5/2.75?7.5625*(r-=2.25/2.75)*r+.9375:7.5625*(r-=2.625/2.75)*r+.984375},InOut:function(r){return r<.5?er.Bounce.In(r*2)*.5:er.Bounce.Out(r*2-1)*.5+.5}}),generatePow:function(r){return r===void 0&&(r=4),r=r<Number.EPSILON?Number.EPSILON:r,r=r>1e4?1e4:r,{In:function(e){return Math.pow(e,r)},Out:function(e){return 1-Math.pow(1-e,r)},InOut:function(e){return e<.5?Math.pow(e*2,r)/2:(1-Math.pow(2-e*2,r))/2+.5}}}}),Rl=function(){return performance.now()},G6=(function(){function r(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._tweens={},this._tweensAddedDuringUpdate={},this.add.apply(this,e)}return r.prototype.getAll=function(){var e=this;return Object.keys(this._tweens).map(function(t){return e._tweens[t]})},r.prototype.removeAll=function(){this._tweens={}},r.prototype.add=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var i=0,s=t;i<s.length;i++){var o=s[i];(e=o._group)===null||e===void 0||e.remove(o),o._group=this,this._tweens[o.getId()]=o,this._tweensAddedDuringUpdate[o.getId()]=o}},r.prototype.remove=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=0,i=e;n<i.length;n++){var s=i[n];s._group=void 0,delete this._tweens[s.getId()],delete this._tweensAddedDuringUpdate[s.getId()]}},r.prototype.allStopped=function(){return this.getAll().every(function(e){return!e.isPlaying()})},r.prototype.update=function(e,t){e===void 0&&(e=Rl()),t===void 0&&(t=!0);var n=Object.keys(this._tweens);if(n.length!==0)for(;n.length>0;){this._tweensAddedDuringUpdate={};for(var i=0;i<n.length;i++){var s=this._tweens[n[i]],o=!t;s&&s.update(e,o)===!1&&!t&&this.remove(s)}n=Object.keys(this._tweensAddedDuringUpdate)}},r})(),hf={Linear:function(r,e){var t=r.length-1,n=t*e,i=Math.floor(n),s=hf.Utils.Linear;return e<0?s(r[0],r[1],n):e>1?s(r[t],r[t-1],t-n):s(r[i],r[i+1>t?t:i+1],n-i)},Utils:{Linear:function(r,e,t){return(e-r)*t+r}}},V6=(function(){function r(){}return r.nextId=function(){return r._nextId++},r._nextId=0,r})(),ff=new G6,Yr=(function(){function r(e,t){this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._isDynamic=!1,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=er.Linear.None,this._interpolationFunction=hf.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._id=V6.nextId(),this._isChainStopped=!1,this._propertiesAreSetUp=!1,this._goToEnd=!1,this._object=e,typeof t=="object"?(this._group=t,t.add(this)):t===!0&&(this._group=ff,ff.add(this))}return r.prototype.getId=function(){return this._id},r.prototype.isPlaying=function(){return this._isPlaying},r.prototype.isPaused=function(){return this._isPaused},r.prototype.getDuration=function(){return this._duration},r.prototype.to=function(e,t){if(t===void 0&&(t=1e3),this._isPlaying)throw new Error("Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.");return this._valuesEnd=e,this._propertiesAreSetUp=!1,this._duration=t<0?0:t,this},r.prototype.duration=function(e){return e===void 0&&(e=1e3),this._duration=e<0?0:e,this},r.prototype.dynamic=function(e){return e===void 0&&(e=!1),this._isDynamic=e,this},r.prototype.start=function(e,t){if(e===void 0&&(e=Rl()),t===void 0&&(t=!1),this._isPlaying)return this;if(this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var n in this._valuesStartRepeat)this._swapEndStartRepeatValues(n),this._valuesStart[n]=this._valuesStartRepeat[n]}if(this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=e,this._startTime+=this._delayTime,!this._propertiesAreSetUp||t){if(this._propertiesAreSetUp=!0,!this._isDynamic){var i={};for(var s in this._valuesEnd)i[s]=this._valuesEnd[s];this._valuesEnd=i}this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat,t)}return this},r.prototype.startFromCurrentValues=function(e){return this.start(e,!0)},r.prototype._setupProperties=function(e,t,n,i,s){for(var o in n){var u=e[o],h=Array.isArray(u),d=h?"array":typeof u,m=!h&&Array.isArray(n[o]);if(!(d==="undefined"||d==="function")){if(m){var y=n[o];if(y.length===0)continue;for(var x=[u],b=0,T=y.length;b<T;b+=1){var M=this._handleRelativeValue(u,y[b]);if(isNaN(M)){m=!1,console.warn("Found invalid interpolation list. Skipping.");break}x.push(M)}m&&(n[o]=x)}if((d==="object"||h)&&u&&!m){t[o]=h?[]:{};var N=u;for(var C in N)t[o][C]=N[C];i[o]=h?[]:{};var y=n[o];if(!this._isDynamic){var B={};for(var C in y)B[C]=y[C];n[o]=y=B}this._setupProperties(N,t[o],y,i[o],s)}else(typeof t[o]>"u"||s)&&(t[o]=u),h||(t[o]*=1),m?i[o]=n[o].slice().reverse():i[o]=t[o]||0}}},r.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},r.prototype.end=function(){return this._goToEnd=!0,this.update(this._startTime+this._duration),this},r.prototype.pause=function(e){return e===void 0&&(e=Rl()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=e,this)},r.prototype.resume=function(e){return e===void 0&&(e=Rl()),!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._startTime+=e-this._pauseStart,this._pauseStart=0,this)},r.prototype.stopChainedTweens=function(){for(var e=0,t=this._chainedTweens.length;e<t;e++)this._chainedTweens[e].stop();return this},r.prototype.group=function(e){return e?(e.add(this),this):(console.warn("tween.group() without args has been removed, use group.add(tween) instead."),this)},r.prototype.remove=function(){var e;return(e=this._group)===null||e===void 0||e.remove(this),this},r.prototype.delay=function(e){return e===void 0&&(e=0),this._delayTime=e,this},r.prototype.repeat=function(e){return e===void 0&&(e=0),this._initialRepeat=e,this._repeat=e,this},r.prototype.repeatDelay=function(e){return this._repeatDelayTime=e,this},r.prototype.yoyo=function(e){return e===void 0&&(e=!1),this._yoyo=e,this},r.prototype.easing=function(e){return e===void 0&&(e=er.Linear.None),this._easingFunction=e,this},r.prototype.interpolation=function(e){return e===void 0&&(e=hf.Linear),this._interpolationFunction=e,this},r.prototype.chain=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this._chainedTweens=e,this},r.prototype.onStart=function(e){return this._onStartCallback=e,this},r.prototype.onEveryStart=function(e){return this._onEveryStartCallback=e,this},r.prototype.onUpdate=function(e){return this._onUpdateCallback=e,this},r.prototype.onRepeat=function(e){return this._onRepeatCallback=e,this},r.prototype.onComplete=function(e){return this._onCompleteCallback=e,this},r.prototype.onStop=function(e){return this._onStopCallback=e,this},r.prototype.update=function(e,t){var n=this,i;if(e===void 0&&(e=Rl()),t===void 0&&(t=r.autoStartOnUpdate),this._isPaused)return!0;var s;if(!this._goToEnd&&!this._isPlaying)if(t)this.start(e,!0);else return!1;if(this._goToEnd=!1,e<this._startTime)return!0;this._onStartCallbackFired===!1&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),this._onEveryStartCallbackFired===!1&&(this._onEveryStartCallback&&this._onEveryStartCallback(this._object),this._onEveryStartCallbackFired=!0);var o=e-this._startTime,u=this._duration+((i=this._repeatDelayTime)!==null&&i!==void 0?i:this._delayTime),h=this._duration+this._repeat*u,d=function(){if(n._duration===0||o>h)return 1;var M=Math.trunc(o/u),N=o-M*u,C=Math.min(N/n._duration,1);return C===0&&o===n._duration?1:C},m=d(),y=this._easingFunction(m);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,y),this._onUpdateCallback&&this._onUpdateCallback(this._object,m),this._duration===0||o>=this._duration)if(this._repeat>0){var x=Math.min(Math.trunc((o-this._duration)/u)+1,this._repeat);isFinite(this._repeat)&&(this._repeat-=x);for(s in this._valuesStartRepeat)!this._yoyo&&typeof this._valuesEnd[s]=="string"&&(this._valuesStartRepeat[s]=this._valuesStartRepeat[s]+parseFloat(this._valuesEnd[s])),this._yoyo&&this._swapEndStartRepeatValues(s),this._valuesStart[s]=this._valuesStartRepeat[s];return this._yoyo&&(this._reversed=!this._reversed),this._startTime+=u*x,this._onRepeatCallback&&this._onRepeatCallback(this._object),this._onEveryStartCallbackFired=!1,!0}else{this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var b=0,T=this._chainedTweens.length;b<T;b++)this._chainedTweens[b].start(this._startTime+this._duration,!1);return this._isPlaying=!1,!1}return!0},r.prototype._updateProperties=function(e,t,n,i){for(var s in n)if(t[s]!==void 0){var o=t[s]||0,u=n[s],h=Array.isArray(e[s]),d=Array.isArray(u),m=!h&&d;m?e[s]=this._interpolationFunction(u,i):typeof u=="object"&&u?this._updateProperties(e[s],o,u,i):(u=this._handleRelativeValue(o,u),typeof u=="number"&&(e[s]=o+(u-o)*i))}},r.prototype._handleRelativeValue=function(e,t){return typeof t!="string"?t:t.charAt(0)==="+"||t.charAt(0)==="-"?e+parseFloat(t):parseFloat(t)},r.prototype._swapEndStartRepeatValues=function(e){var t=this._valuesStartRepeat[e],n=this._valuesEnd[e];typeof n=="string"?this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(n):this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=t},r.autoStartOnUpdate=!1,r})();V6.nextId;var ps=ff;ps.getAll.bind(ps);ps.removeAll.bind(ps);ps.add.bind(ps);ps.remove.bind(ps);ps.update.bind(ps);function NS(r){const e=+this._x.call(null,r),t=+this._y.call(null,r),n=+this._z.call(null,r);return z6(this.cover(e,t,n),e,t,n,r)}function z6(r,e,t,n,i){if(isNaN(e)||isNaN(t)||isNaN(n))return r;var s,o=r._root,u={data:i},h=r._x0,d=r._y0,m=r._z0,y=r._x1,x=r._y1,b=r._z1,T,M,N,C,B,P,I,D,q,O,k;if(!o)return r._root=u,r;for(;o.length;)if((I=e>=(T=(h+y)/2))?h=T:y=T,(D=t>=(M=(d+x)/2))?d=M:x=M,(q=n>=(N=(m+b)/2))?m=N:b=N,s=o,!(o=o[O=q<<2|D<<1|I]))return s[O]=u,r;if(C=+r._x.call(null,o.data),B=+r._y.call(null,o.data),P=+r._z.call(null,o.data),e===C&&t===B&&n===P)return u.next=o,s?s[O]=u:r._root=u,r;do s=s?s[O]=new Array(8):r._root=new Array(8),(I=e>=(T=(h+y)/2))?h=T:y=T,(D=t>=(M=(d+x)/2))?d=M:x=M,(q=n>=(N=(m+b)/2))?m=N:b=N;while((O=q<<2|D<<1|I)===(k=(P>=N)<<2|(B>=M)<<1|C>=T));return s[k]=o,s[O]=u,r}function RS(r){Array.isArray(r)||(r=Array.from(r));const e=r.length,t=new Float64Array(e),n=new Float64Array(e),i=new Float64Array(e);let s=1/0,o=1/0,u=1/0,h=-1/0,d=-1/0,m=-1/0;for(let y=0,x,b,T,M;y<e;++y)isNaN(b=+this._x.call(null,x=r[y]))||isNaN(T=+this._y.call(null,x))||isNaN(M=+this._z.call(null,x))||(t[y]=b,n[y]=T,i[y]=M,b<s&&(s=b),b>h&&(h=b),T<o&&(o=T),T>d&&(d=T),M<u&&(u=M),M>m&&(m=M));if(s>h||o>d||u>m)return this;this.cover(s,o,u).cover(h,d,m);for(let y=0;y<e;++y)z6(this,t[y],n[y],i[y],r[y]);return this}function CS(r,e,t){if(isNaN(r=+r)||isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,i=this._y0,s=this._z0,o=this._x1,u=this._y1,h=this._z1;if(isNaN(n))o=(n=Math.floor(r))+1,u=(i=Math.floor(e))+1,h=(s=Math.floor(t))+1;else{for(var d=o-n||1,m=this._root,y,x;n>r||r>=o||i>e||e>=u||s>t||t>=h;)switch(x=(t<s)<<2|(e<i)<<1|r<n,y=new Array(8),y[x]=m,m=y,d*=2,x){case 0:o=n+d,u=i+d,h=s+d;break;case 1:n=o-d,u=i+d,h=s+d;break;case 2:o=n+d,i=u-d,h=s+d;break;case 3:n=o-d,i=u-d,h=s+d;break;case 4:o=n+d,u=i+d,s=h-d;break;case 5:n=o-d,u=i+d,s=h-d;break;case 6:o=n+d,i=u-d,s=h-d;break;case 7:n=o-d,i=u-d,s=h-d;break}this._root&&this._root.length&&(this._root=m)}return this._x0=n,this._y0=i,this._z0=s,this._x1=o,this._y1=u,this._z1=h,this}function PS(){var r=[];return this.visit(function(e){if(!e.length)do r.push(e.data);while(e=e.next)}),r}function BS(r){return arguments.length?this.cover(+r[0][0],+r[0][1],+r[0][2]).cover(+r[1][0],+r[1][1],+r[1][2]):isNaN(this._x0)?void 0:[[this._x0,this._y0,this._z0],[this._x1,this._y1,this._z1]]}function tn(r,e,t,n,i,s,o){this.node=r,this.x0=e,this.y0=t,this.z0=n,this.x1=i,this.y1=s,this.z1=o}function DS(r,e,t,n){var i,s=this._x0,o=this._y0,u=this._z0,h,d,m,y,x,b,T=this._x1,M=this._y1,N=this._z1,C=[],B=this._root,P,I;for(B&&C.push(new tn(B,s,o,u,T,M,N)),n==null?n=1/0:(s=r-n,o=e-n,u=t-n,T=r+n,M=e+n,N=t+n,n*=n);P=C.pop();)if(!(!(B=P.node)||(h=P.x0)>T||(d=P.y0)>M||(m=P.z0)>N||(y=P.x1)<s||(x=P.y1)<o||(b=P.z1)<u))if(B.length){var D=(h+y)/2,q=(d+x)/2,O=(m+b)/2;C.push(new tn(B[7],D,q,O,y,x,b),new tn(B[6],h,q,O,D,x,b),new tn(B[5],D,d,O,y,q,b),new tn(B[4],h,d,O,D,q,b),new tn(B[3],D,q,m,y,x,O),new tn(B[2],h,q,m,D,x,O),new tn(B[1],D,d,m,y,q,O),new tn(B[0],h,d,m,D,q,O)),(I=(t>=O)<<2|(e>=q)<<1|r>=D)&&(P=C[C.length-1],C[C.length-1]=C[C.length-1-I],C[C.length-1-I]=P)}else{var k=r-+this._x.call(null,B.data),z=e-+this._y.call(null,B.data),X=t-+this._z.call(null,B.data),W=k*k+z*z+X*X;if(W<n){var K=Math.sqrt(n=W);s=r-K,o=e-K,u=t-K,T=r+K,M=e+K,N=t+K,i=B.data}}return i}const FS=(r,e,t,n,i,s)=>Math.sqrt((r-n)**2+(e-i)**2+(t-s)**2);function LS(r,e,t,n){const i=[],s=r-n,o=e-n,u=t-n,h=r+n,d=e+n,m=t+n;return this.visit((y,x,b,T,M,N,C)=>{if(!y.length)do{const B=y.data;FS(r,e,t,this._x(B),this._y(B),this._z(B))<=n&&i.push(B)}while(y=y.next);return x>h||b>d||T>m||M<s||N<o||C<u}),i}function IS(r){if(isNaN(x=+this._x.call(null,r))||isNaN(b=+this._y.call(null,r))||isNaN(T=+this._z.call(null,r)))return this;var e,t=this._root,n,i,s,o=this._x0,u=this._y0,h=this._z0,d=this._x1,m=this._y1,y=this._z1,x,b,T,M,N,C,B,P,I,D,q;if(!t)return this;if(t.length)for(;;){if((B=x>=(M=(o+d)/2))?o=M:d=M,(P=b>=(N=(u+m)/2))?u=N:m=N,(I=T>=(C=(h+y)/2))?h=C:y=C,e=t,!(t=t[D=I<<2|P<<1|B]))return this;if(!t.length)break;(e[D+1&7]||e[D+2&7]||e[D+3&7]||e[D+4&7]||e[D+5&7]||e[D+6&7]||e[D+7&7])&&(n=e,q=D)}for(;t.data!==r;)if(i=t,!(t=t.next))return this;return(s=t.next)&&delete t.next,i?(s?i.next=s:delete i.next,this):e?(s?e[D]=s:delete e[D],(t=e[0]||e[1]||e[2]||e[3]||e[4]||e[5]||e[6]||e[7])&&t===(e[7]||e[6]||e[5]||e[4]||e[3]||e[2]||e[1]||e[0])&&!t.length&&(n?n[q]=t:this._root=t),this):(this._root=s,this)}function qS(r){for(var e=0,t=r.length;e<t;++e)this.remove(r[e]);return this}function OS(){return this._root}function US(){var r=0;return this.visit(function(e){if(!e.length)do++r;while(e=e.next)}),r}function kS(r){var e=[],t,n=this._root,i,s,o,u,h,d,m;for(n&&e.push(new tn(n,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));t=e.pop();)if(!r(n=t.node,s=t.x0,o=t.y0,u=t.z0,h=t.x1,d=t.y1,m=t.z1)&&n.length){var y=(s+h)/2,x=(o+d)/2,b=(u+m)/2;(i=n[7])&&e.push(new tn(i,y,x,b,h,d,m)),(i=n[6])&&e.push(new tn(i,s,x,b,y,d,m)),(i=n[5])&&e.push(new tn(i,y,o,b,h,x,m)),(i=n[4])&&e.push(new tn(i,s,o,b,y,x,m)),(i=n[3])&&e.push(new tn(i,y,x,u,h,d,b)),(i=n[2])&&e.push(new tn(i,s,x,u,y,d,b)),(i=n[1])&&e.push(new tn(i,y,o,u,h,x,b)),(i=n[0])&&e.push(new tn(i,s,o,u,y,x,b))}return this}function GS(r){var e=[],t=[],n;for(this._root&&e.push(new tn(this._root,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));n=e.pop();){var i=n.node;if(i.length){var s,o=n.x0,u=n.y0,h=n.z0,d=n.x1,m=n.y1,y=n.z1,x=(o+d)/2,b=(u+m)/2,T=(h+y)/2;(s=i[0])&&e.push(new tn(s,o,u,h,x,b,T)),(s=i[1])&&e.push(new tn(s,x,u,h,d,b,T)),(s=i[2])&&e.push(new tn(s,o,b,h,x,m,T)),(s=i[3])&&e.push(new tn(s,x,b,h,d,m,T)),(s=i[4])&&e.push(new tn(s,o,u,T,x,b,y)),(s=i[5])&&e.push(new tn(s,x,u,T,d,b,y)),(s=i[6])&&e.push(new tn(s,o,b,T,x,m,y)),(s=i[7])&&e.push(new tn(s,x,b,T,d,m,y))}t.push(n)}for(;n=t.pop();)r(n.node,n.x0,n.y0,n.z0,n.x1,n.y1,n.z1);return this}function VS(r){return r[0]}function zS(r){return arguments.length?(this._x=r,this):this._x}function $S(r){return r[1]}function HS(r){return arguments.length?(this._y=r,this):this._y}function jS(r){return r[2]}function WS(r){return arguments.length?(this._z=r,this):this._z}function $6(r,e,t,n){var i=new Hd(e??VS,t??$S,n??jS,NaN,NaN,NaN,NaN,NaN,NaN);return r==null?i:i.addAll(r)}function Hd(r,e,t,n,i,s,o,u,h){this._x=r,this._y=e,this._z=t,this._x0=n,this._y0=i,this._z0=s,this._x1=o,this._y1=u,this._z1=h,this._root=void 0}function z4(r){for(var e={data:r.data},t=e;r=r.next;)t=t.next={data:r.data};return e}var tr=$6.prototype=Hd.prototype;tr.copy=function(){var r=new Hd(this._x,this._y,this._z,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1),e=this._root,t,n;if(!e)return r;if(!e.length)return r._root=z4(e),r;for(t=[{source:e,target:r._root=new Array(8)}];e=t.pop();)for(var i=0;i<8;++i)(n=e.source[i])&&(n.length?t.push({source:n,target:e.target[i]=new Array(8)}):e.target[i]=z4(n));return r};tr.add=NS;tr.addAll=RS;tr.cover=CS;tr.data=PS;tr.extent=BS;tr.find=DS;tr.findAllWithinRadius=LS;tr.remove=IS;tr.removeAll=qS;tr.root=OS;tr.size=US;tr.visit=kS;tr.visitAfter=GS;tr.x=zS;tr.y=HS;tr.z=WS;function Z0(r,e){return r==null||e==null?NaN:r<e?-1:r>e?1:r>=e?0:NaN}function QS(r,e){return r==null||e==null?NaN:e<r?-1:e>r?1:e>=r?0:NaN}function H6(r){let e,t,n;r.length!==2?(e=Z0,t=(u,h)=>Z0(r(u),h),n=(u,h)=>r(u)-h):(e=r===Z0||r===QS?r:XS,t=r,n=r);function i(u,h,d=0,m=u.length){if(d<m){if(e(h,h)!==0)return m;do{const y=d+m>>>1;t(u[y],h)<0?d=y+1:m=y}while(d<m)}return d}function s(u,h,d=0,m=u.length){if(d<m){if(e(h,h)!==0)return m;do{const y=d+m>>>1;t(u[y],h)<=0?d=y+1:m=y}while(d<m)}return d}function o(u,h,d=0,m=u.length){const y=i(u,h,d,m-1);return y>d&&n(u[y-1],h)>-n(u[y],h)?y-1:y}return{left:i,center:o,right:s}}function XS(){return 0}function YS(r){return r===null?NaN:+r}const KS=H6(Z0),j6=KS.right;H6(YS).center;function bc(r,e){let t,n;if(e===void 0)for(const i of r)i!=null&&(t===void 0?i>=i&&(t=n=i):(t>i&&(t=i),n<i&&(n=i)));else{let i=-1;for(let s of r)(s=e(s,++i,r))!=null&&(t===void 0?s>=s&&(t=n=s):(t>s&&(t=s),n<s&&(n=s)))}return[t,n]}class Us{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){const t=this._partials;let n=0;for(let i=0;i<this._n&&i<32;i++){const s=t[i],o=e+s,u=Math.abs(e)<Math.abs(s)?e-(o-s):s-(o-e);u&&(t[n++]=u),e=o}return t[n]=e,this._n=n+1,this}valueOf(){const e=this._partials;let t=this._n,n,i,s,o=0;if(t>0){for(o=e[--t];t>0&&(n=o,i=e[--t],o=n+i,s=i-(o-n),!s););t>0&&(s<0&&e[t-1]<0||s>0&&e[t-1]>0)&&(i=s*2,n=o+i,i==n-o&&(o=n))}return o}}const ZS=Math.sqrt(50),JS=Math.sqrt(10),eM=Math.sqrt(2);function Tc(r,e,t){const n=(e-r)/Math.max(0,t),i=Math.floor(Math.log10(n)),s=n/Math.pow(10,i),o=s>=ZS?10:s>=JS?5:s>=eM?2:1;let u,h,d;return i<0?(d=Math.pow(10,-i)/o,u=Math.round(r*d),h=Math.round(e*d),u/d<r&&++u,h/d>e&&--h,d=-d):(d=Math.pow(10,i)*o,u=Math.round(r/d),h=Math.round(e/d),u*d<r&&++u,h*d>e&&--h),h<u&&.5<=t&&t<2?Tc(r,e,t*2):[u,h,d]}function tM(r,e,t){if(e=+e,r=+r,t=+t,!(t>0))return[];if(r===e)return[r];const n=e<r,[i,s,o]=n?Tc(e,r,t):Tc(r,e,t);if(!(s>=i))return[];const u=s-i+1,h=new Array(u);if(n)if(o<0)for(let d=0;d<u;++d)h[d]=(s-d)/-o;else for(let d=0;d<u;++d)h[d]=(s-d)*o;else if(o<0)for(let d=0;d<u;++d)h[d]=(i+d)/-o;else for(let d=0;d<u;++d)h[d]=(i+d)*o;return h}function df(r,e,t){return e=+e,r=+r,t=+t,Tc(r,e,t)[2]}function nM(r,e,t){e=+e,r=+r,t=+t;const n=e<r,i=n?df(e,r,t):df(r,e,t);return(n?-1:1)*(i<0?1/-i:i)}function rM(r,e){let t;for(const n of r)n!=null&&(t<n||t===void 0&&n>=n)&&(t=n);return t}function iM(r,e){let t=0,n=0;if(e===void 0)for(let i of r)i!=null&&(i=+i)>=i&&(++t,n+=i);else{let i=-1;for(let s of r)(s=e(s,++i,r))!=null&&(s=+s)>=s&&(++t,n+=s)}if(t)return n/t}function*sM(r){for(const e of r)yield*e}function nu(r){return Array.from(sM(r))}function pA(r,e,t){r=+r,e=+e,t=(i=arguments.length)<2?(e=r,r=0,1):i<3?1:+t;for(var n=-1,i=Math.max(0,Math.ceil((e-r)/t))|0,s=new Array(i);++n<i;)s[n]=r+n*t;return s}function oM(r,e){let t=0;for(let n of r)(n=+n)&&(t+=n);return t}function W6(r,e){switch(arguments.length){case 0:break;case 1:this.range(r);break;default:this.range(e).domain(r);break}return this}function jd(r,e,t){r.prototype=e.prototype=t,t.constructor=r}function Q6(r,e){var t=Object.create(r.prototype);for(var n in e)t[n]=e[n];return t}function wu(){}var ru=.7,wc=1/ru,TA="\\s*([+-]?\\d+)\\s*",iu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",As="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",aM=/^#([0-9a-f]{3,8})$/,AM=new RegExp(`^rgb\\(${TA},${TA},${TA}\\)$`),lM=new RegExp(`^rgb\\(${As},${As},${As}\\)$`),uM=new RegExp(`^rgba\\(${TA},${TA},${TA},${iu}\\)$`),cM=new RegExp(`^rgba\\(${As},${As},${As},${iu}\\)$`),hM=new RegExp(`^hsl\\(${iu},${As},${As}\\)$`),fM=new RegExp(`^hsla\\(${iu},${As},${As},${iu}\\)$`),$4={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};jd(wu,ba,{copy(r){return Object.assign(new this.constructor,this,r)},displayable(){return this.rgb().displayable()},hex:H4,formatHex:H4,formatHex8:dM,formatHsl:pM,formatRgb:j4,toString:j4});function H4(){return this.rgb().formatHex()}function dM(){return this.rgb().formatHex8()}function pM(){return X6(this).formatHsl()}function j4(){return this.rgb().formatRgb()}function ba(r){var e,t;return r=(r+"").trim().toLowerCase(),(e=aM.exec(r))?(t=e[1].length,e=parseInt(e[1],16),t===6?W4(e):t===3?new Cr(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?Ju(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?Ju(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=AM.exec(r))?new Cr(e[1],e[2],e[3],1):(e=lM.exec(r))?new Cr(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=uM.exec(r))?Ju(e[1],e[2],e[3],e[4]):(e=cM.exec(r))?Ju(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=hM.exec(r))?Y4(e[1],e[2]/100,e[3]/100,1):(e=fM.exec(r))?Y4(e[1],e[2]/100,e[3]/100,e[4]):$4.hasOwnProperty(r)?W4($4[r]):r==="transparent"?new Cr(NaN,NaN,NaN,0):null}function W4(r){return new Cr(r>>16&255,r>>8&255,r&255,1)}function Ju(r,e,t,n){return n<=0&&(r=e=t=NaN),new Cr(r,e,t,n)}function mM(r){return r instanceof wu||(r=ba(r)),r?(r=r.rgb(),new Cr(r.r,r.g,r.b,r.opacity)):new Cr}function pf(r,e,t,n){return arguments.length===1?mM(r):new Cr(r,e,t,n??1)}function Cr(r,e,t,n){this.r=+r,this.g=+e,this.b=+t,this.opacity=+n}jd(Cr,pf,Q6(wu,{brighter(r){return r=r==null?wc:Math.pow(wc,r),new Cr(this.r*r,this.g*r,this.b*r,this.opacity)},darker(r){return r=r==null?ru:Math.pow(ru,r),new Cr(this.r*r,this.g*r,this.b*r,this.opacity)},rgb(){return this},clamp(){return new Cr(ma(this.r),ma(this.g),ma(this.b),Sc(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Q4,formatHex:Q4,formatHex8:gM,formatRgb:X4,toString:X4}));function Q4(){return`#${ua(this.r)}${ua(this.g)}${ua(this.b)}`}function gM(){return`#${ua(this.r)}${ua(this.g)}${ua(this.b)}${ua((isNaN(this.opacity)?1:this.opacity)*255)}`}function X4(){const r=Sc(this.opacity);return`${r===1?"rgb(":"rgba("}${ma(this.r)}, ${ma(this.g)}, ${ma(this.b)}${r===1?")":`, ${r})`}`}function Sc(r){return isNaN(r)?1:Math.max(0,Math.min(1,r))}function ma(r){return Math.max(0,Math.min(255,Math.round(r)||0))}function ua(r){return r=ma(r),(r<16?"0":"")+r.toString(16)}function Y4(r,e,t,n){return n<=0?r=e=t=NaN:t<=0||t>=1?r=e=NaN:e<=0&&(r=NaN),new Li(r,e,t,n)}function X6(r){if(r instanceof Li)return new Li(r.h,r.s,r.l,r.opacity);if(r instanceof wu||(r=ba(r)),!r)return new Li;if(r instanceof Li)return r;r=r.rgb();var e=r.r/255,t=r.g/255,n=r.b/255,i=Math.min(e,t,n),s=Math.max(e,t,n),o=NaN,u=s-i,h=(s+i)/2;return u?(e===s?o=(t-n)/u+(t<n)*6:t===s?o=(n-e)/u+2:o=(e-t)/u+4,u/=h<.5?s+i:2-s-i,o*=60):u=h>0&&h<1?0:o,new Li(o,u,h,r.opacity)}function yM(r,e,t,n){return arguments.length===1?X6(r):new Li(r,e,t,n??1)}function Li(r,e,t,n){this.h=+r,this.s=+e,this.l=+t,this.opacity=+n}jd(Li,yM,Q6(wu,{brighter(r){return r=r==null?wc:Math.pow(wc,r),new Li(this.h,this.s,this.l*r,this.opacity)},darker(r){return r=r==null?ru:Math.pow(ru,r),new Li(this.h,this.s,this.l*r,this.opacity)},rgb(){var r=this.h%360+(this.h<0)*360,e=isNaN(r)||isNaN(this.s)?0:this.s,t=this.l,n=t+(t<.5?t:1-t)*e,i=2*t-n;return new Cr(G2(r>=240?r-240:r+120,i,n),G2(r,i,n),G2(r<120?r+240:r-120,i,n),this.opacity)},clamp(){return new Li(K4(this.h),e0(this.s),e0(this.l),Sc(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const r=Sc(this.opacity);return`${r===1?"hsl(":"hsla("}${K4(this.h)}, ${e0(this.s)*100}%, ${e0(this.l)*100}%${r===1?")":`, ${r})`}`}}));function K4(r){return r=(r||0)%360,r<0?r+360:r}function e0(r){return Math.max(0,Math.min(1,r||0))}function G2(r,e,t){return(r<60?e+(t-e)*r/60:r<180?t:r<240?e+(t-e)*(240-r)/60:e)*255}const Wd=r=>()=>r;function vM(r,e){return function(t){return r+t*e}}function _M(r,e,t){return r=Math.pow(r,t),e=Math.pow(e,t)-r,t=1/t,function(n){return Math.pow(r+n*e,t)}}function xM(r){return(r=+r)==1?Y6:function(e,t){return t-e?_M(e,t,r):Wd(isNaN(e)?t:e)}}function Y6(r,e){var t=e-r;return t?vM(r,t):Wd(isNaN(r)?e:r)}const Z4=(function r(e){var t=xM(e);function n(i,s){var o=t((i=pf(i)).r,(s=pf(s)).r),u=t(i.g,s.g),h=t(i.b,s.b),d=Y6(i.opacity,s.opacity);return function(m){return i.r=o(m),i.g=u(m),i.b=h(m),i.opacity=d(m),i+""}}return n.gamma=r,n})(1);function K6(r,e){e||(e=[]);var t=r?Math.min(e.length,r.length):0,n=e.slice(),i;return function(s){for(i=0;i<t;++i)n[i]=r[i]*(1-s)+e[i]*s;return n}}function Z6(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}function bM(r,e){return(Z6(e)?K6:J6)(r,e)}function J6(r,e){var t=e?e.length:0,n=r?Math.min(t,r.length):0,i=new Array(n),s=new Array(t),o;for(o=0;o<n;++o)i[o]=Qd(r[o],e[o]);for(;o<t;++o)s[o]=e[o];return function(u){for(o=0;o<n;++o)s[o]=i[o](u);return s}}function TM(r,e){var t=new Date;return r=+r,e=+e,function(n){return t.setTime(r*(1-n)+e*n),t}}function su(r,e){return r=+r,e=+e,function(t){return r*(1-t)+e*t}}function wM(r,e){var t={},n={},i;(r===null||typeof r!="object")&&(r={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in r?t[i]=Qd(r[i],e[i]):n[i]=e[i];return function(s){for(i in t)n[i]=t[i](s);return n}}var mf=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,V2=new RegExp(mf.source,"g");function SM(r){return function(){return r}}function MM(r){return function(e){return r(e)+""}}function EM(r,e){var t=mf.lastIndex=V2.lastIndex=0,n,i,s,o=-1,u=[],h=[];for(r=r+"",e=e+"";(n=mf.exec(r))&&(i=V2.exec(e));)(s=i.index)>t&&(s=e.slice(t,s),u[o]?u[o]+=s:u[++o]=s),(n=n[0])===(i=i[0])?u[o]?u[o]+=i:u[++o]=i:(u[++o]=null,h.push({i:o,x:su(n,i)})),t=V2.lastIndex;return t<e.length&&(s=e.slice(t),u[o]?u[o]+=s:u[++o]=s),u.length<2?h[0]?MM(h[0].x):SM(e):(e=h.length,function(d){for(var m=0,y;m<e;++m)u[(y=h[m]).i]=y.x(d);return u.join("")})}function Qd(r,e){var t=typeof e,n;return e==null||t==="boolean"?Wd(e):(t==="number"?su:t==="string"?(n=ba(e))?(e=n,Z4):EM:e instanceof ba?Z4:e instanceof Date?TM:Z6(e)?K6:Array.isArray(e)?J6:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?wM:su)(r,e)}function NM(r,e){return r=+r,e=+e,function(t){return Math.round(r*(1-t)+e*t)}}function RM(r){return function(){return r}}function CM(r){return+r}var J4=[0,1];function mA(r){return r}function gf(r,e){return(e-=r=+r)?function(t){return(t-r)/e}:RM(isNaN(e)?NaN:.5)}function PM(r,e){var t;return r>e&&(t=r,r=e,e=t),function(n){return Math.max(r,Math.min(e,n))}}function BM(r,e,t){var n=r[0],i=r[1],s=e[0],o=e[1];return i<n?(n=gf(i,n),s=t(o,s)):(n=gf(n,i),s=t(s,o)),function(u){return s(n(u))}}function DM(r,e,t){var n=Math.min(r.length,e.length)-1,i=new Array(n),s=new Array(n),o=-1;for(r[n]<r[0]&&(r=r.slice().reverse(),e=e.slice().reverse());++o<n;)i[o]=gf(r[o],r[o+1]),s[o]=t(e[o],e[o+1]);return function(u){var h=j6(r,u,1,n)-1;return s[h](i[h](u))}}function FM(r,e){return e.domain(r.domain()).range(r.range()).interpolate(r.interpolate()).clamp(r.clamp()).unknown(r.unknown())}function LM(){var r=J4,e=J4,t=Qd,n,i,s,o=mA,u,h,d;function m(){var x=Math.min(r.length,e.length);return o!==mA&&(o=PM(r[0],r[x-1])),u=x>2?DM:BM,h=d=null,y}function y(x){return x==null||isNaN(x=+x)?s:(h||(h=u(r.map(n),e,t)))(n(o(x)))}return y.invert=function(x){return o(i((d||(d=u(e,r.map(n),su)))(x)))},y.domain=function(x){return arguments.length?(r=Array.from(x,CM),m()):r.slice()},y.range=function(x){return arguments.length?(e=Array.from(x),m()):e.slice()},y.rangeRound=function(x){return e=Array.from(x),t=NM,m()},y.clamp=function(x){return arguments.length?(o=x?!0:mA,m()):o!==mA},y.interpolate=function(x){return arguments.length?(t=x,m()):t},y.unknown=function(x){return arguments.length?(s=x,y):s},function(x,b){return n=x,i=b,m()}}function IM(){return LM()(mA,mA)}function qM(r){return Math.abs(r=Math.round(r))>=1e21?r.toLocaleString("en").replace(/,/g,""):r.toString(10)}function Mc(r,e){if((t=(r=e?r.toExponential(e-1):r.toExponential()).indexOf("e"))<0)return null;var t,n=r.slice(0,t);return[n.length>1?n[0]+n.slice(2):n,+r.slice(t+1)]}function CA(r){return r=Mc(Math.abs(r)),r?r[1]:NaN}function OM(r,e){return function(t,n){for(var i=t.length,s=[],o=0,u=r[0],h=0;i>0&&u>0&&(h+u+1>n&&(u=Math.max(1,n-h)),s.push(t.substring(i-=u,i+u)),!((h+=u+1)>n));)u=r[o=(o+1)%r.length];return s.reverse().join(e)}}function UM(r){return function(e){return e.replace(/[0-9]/g,function(t){return r[+t]})}}var kM=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ec(r){if(!(e=kM.exec(r)))throw new Error("invalid format: "+r);var e;return new Xd({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Ec.prototype=Xd.prototype;function Xd(r){this.fill=r.fill===void 0?" ":r.fill+"",this.align=r.align===void 0?">":r.align+"",this.sign=r.sign===void 0?"-":r.sign+"",this.symbol=r.symbol===void 0?"":r.symbol+"",this.zero=!!r.zero,this.width=r.width===void 0?void 0:+r.width,this.comma=!!r.comma,this.precision=r.precision===void 0?void 0:+r.precision,this.trim=!!r.trim,this.type=r.type===void 0?"":r.type+""}Xd.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function GM(r){e:for(var e=r.length,t=1,n=-1,i;t<e;++t)switch(r[t]){case".":n=i=t;break;case"0":n===0&&(n=t),i=t;break;default:if(!+r[t])break e;n>0&&(n=0);break}return n>0?r.slice(0,n)+r.slice(i+1):r}var e7;function VM(r,e){var t=Mc(r,e);if(!t)return r+"";var n=t[0],i=t[1],s=i-(e7=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=n.length;return s===o?n:s>o?n+new Array(s-o+1).join("0"):s>0?n.slice(0,s)+"."+n.slice(s):"0."+new Array(1-s).join("0")+Mc(r,Math.max(0,e+s-1))[0]}function em(r,e){var t=Mc(r,e);if(!t)return r+"";var n=t[0],i=t[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}const tm={"%":(r,e)=>(r*100).toFixed(e),b:r=>Math.round(r).toString(2),c:r=>r+"",d:qM,e:(r,e)=>r.toExponential(e),f:(r,e)=>r.toFixed(e),g:(r,e)=>r.toPrecision(e),o:r=>Math.round(r).toString(8),p:(r,e)=>em(r*100,e),r:em,s:VM,X:r=>Math.round(r).toString(16).toUpperCase(),x:r=>Math.round(r).toString(16)};function nm(r){return r}var rm=Array.prototype.map,im=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function zM(r){var e=r.grouping===void 0||r.thousands===void 0?nm:OM(rm.call(r.grouping,Number),r.thousands+""),t=r.currency===void 0?"":r.currency[0]+"",n=r.currency===void 0?"":r.currency[1]+"",i=r.decimal===void 0?".":r.decimal+"",s=r.numerals===void 0?nm:UM(rm.call(r.numerals,String)),o=r.percent===void 0?"%":r.percent+"",u=r.minus===void 0?"−":r.minus+"",h=r.nan===void 0?"NaN":r.nan+"";function d(y){y=Ec(y);var x=y.fill,b=y.align,T=y.sign,M=y.symbol,N=y.zero,C=y.width,B=y.comma,P=y.precision,I=y.trim,D=y.type;D==="n"?(B=!0,D="g"):tm[D]||(P===void 0&&(P=12),I=!0,D="g"),(N||x==="0"&&b==="=")&&(N=!0,x="0",b="=");var q=M==="$"?t:M==="#"&&/[boxX]/.test(D)?"0"+D.toLowerCase():"",O=M==="$"?n:/[%p]/.test(D)?o:"",k=tm[D],z=/[defgprs%]/.test(D);P=P===void 0?6:/[gprs]/.test(D)?Math.max(1,Math.min(21,P)):Math.max(0,Math.min(20,P));function X(W){var K=q,Z=O,se,Y,oe;if(D==="c")Z=k(W)+Z,W="";else{W=+W;var he=W<0||1/W<0;if(W=isNaN(W)?h:k(Math.abs(W),P),I&&(W=GM(W)),he&&+W==0&&T!=="+"&&(he=!1),K=(he?T==="("?T:u:T==="-"||T==="("?"":T)+K,Z=(D==="s"?im[8+e7/3]:"")+Z+(he&&T==="("?")":""),z){for(se=-1,Y=W.length;++se<Y;)if(oe=W.charCodeAt(se),48>oe||oe>57){Z=(oe===46?i+W.slice(se+1):W.slice(se))+Z,W=W.slice(0,se);break}}}B&&!N&&(W=e(W,1/0));var _e=K.length+W.length+Z.length,ye=_e<C?new Array(C-_e+1).join(x):"";switch(B&&N&&(W=e(ye+W,ye.length?C-Z.length:1/0),ye=""),b){case"<":W=K+W+Z+ye;break;case"=":W=K+ye+W+Z;break;case"^":W=ye.slice(0,_e=ye.length>>1)+K+W+Z+ye.slice(_e);break;default:W=ye+K+W+Z;break}return s(W)}return X.toString=function(){return y+""},X}function m(y,x){var b=d((y=Ec(y),y.type="f",y)),T=Math.max(-8,Math.min(8,Math.floor(CA(x)/3)))*3,M=Math.pow(10,-T),N=im[8+T/3];return function(C){return b(M*C)+N}}return{format:d,formatPrefix:m}}var t0,t7,n7;$M({thousands:",",grouping:[3],currency:["$",""]});function $M(r){return t0=zM(r),t7=t0.format,n7=t0.formatPrefix,t0}function HM(r){return Math.max(0,-CA(Math.abs(r)))}function jM(r,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(CA(e)/3)))*3-CA(Math.abs(r)))}function WM(r,e){return r=Math.abs(r),e=Math.abs(e)-r,Math.max(0,CA(e)-CA(r))+1}function QM(r,e,t,n){var i=nM(r,e,t),s;switch(n=Ec(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(r),Math.abs(e));return n.precision==null&&!isNaN(s=jM(i,o))&&(n.precision=s),n7(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(s=WM(i,Math.max(Math.abs(r),Math.abs(e))))&&(n.precision=s-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(s=HM(i))&&(n.precision=s-(n.type==="%")*2);break}}return t7(n)}function r7(r){var e=r.domain;return r.ticks=function(t){var n=e();return tM(n[0],n[n.length-1],t??10)},r.tickFormat=function(t,n){var i=e();return QM(i[0],i[i.length-1],t??10,n)},r.nice=function(t){t==null&&(t=10);var n=e(),i=0,s=n.length-1,o=n[i],u=n[s],h,d,m=10;for(u<o&&(d=o,o=u,u=d,d=i,i=s,s=d);m-- >0;){if(d=df(o,u,t),d===h)return n[i]=o,n[s]=u,e(n);if(d>0)o=Math.floor(o/d)*d,u=Math.ceil(u/d)*d;else if(d<0)o=Math.ceil(o*d)/d,u=Math.floor(u*d)/d;else break;h=d}return r},r}function $s(){var r=IM();return r.copy=function(){return FM(r,$s())},W6.apply(r,arguments),r7(r)}function i7(){var r=0,e=1,t=1,n=[.5],i=[0,1],s;function o(h){return h!=null&&h<=h?i[j6(n,h,0,t)]:s}function u(){var h=-1;for(n=new Array(t);++h<t;)n[h]=((h+1)*e-(h-t)*r)/(t+1);return o}return o.domain=function(h){return arguments.length?([r,e]=h,r=+r,e=+e,u()):[r,e]},o.range=function(h){return arguments.length?(t=(i=Array.from(h)).length-1,u()):i.slice()},o.invertExtent=function(h){var d=i.indexOf(h);return d<0?[NaN,NaN]:d<1?[r,n[0]]:d>=t?[n[t-1],e]:[n[d-1],n[d]]},o.unknown=function(h){return arguments.length&&(s=h),o},o.thresholds=function(){return n.slice()},o.copy=function(){return i7().domain([r,e]).range(i).unknown(s)},W6.apply(r7(o),arguments)}var St=1e-6,Nc=1e-12,Dt=Math.PI,Pr=Dt/2,Rc=Dt/4,Kr=Dt*2,xn=180/Dt,ht=Dt/180,Jt=Math.abs,Yd=Math.atan,gi=Math.atan2,mt=Math.cos,n0=Math.ceil,XM=Math.exp,yf=Math.hypot,YM=Math.log,at=Math.sin,KM=Math.sign||function(r){return r>0?1:r<0?-1:0},Hs=Math.sqrt,ZM=Math.tan;function JM(r){return r>1?0:r<-1?Dt:Math.acos(r)}function js(r){return r>1?Pr:r<-1?-Pr:Math.asin(r)}function sm(r){return(r=at(r/2))*r}function ur(){}function Cc(r,e){r&&am.hasOwnProperty(r.type)&&am[r.type](r,e)}var om={Feature:function(r,e){Cc(r.geometry,e)},FeatureCollection:function(r,e){for(var t=r.features,n=-1,i=t.length;++n<i;)Cc(t[n].geometry,e)}},am={Sphere:function(r,e){e.sphere()},Point:function(r,e){r=r.coordinates,e.point(r[0],r[1],r[2])},MultiPoint:function(r,e){for(var t=r.coordinates,n=-1,i=t.length;++n<i;)r=t[n],e.point(r[0],r[1],r[2])},LineString:function(r,e){vf(r.coordinates,e,0)},MultiLineString:function(r,e){for(var t=r.coordinates,n=-1,i=t.length;++n<i;)vf(t[n],e,0)},Polygon:function(r,e){Am(r.coordinates,e)},MultiPolygon:function(r,e){for(var t=r.coordinates,n=-1,i=t.length;++n<i;)Am(t[n],e)},GeometryCollection:function(r,e){for(var t=r.geometries,n=-1,i=t.length;++n<i;)Cc(t[n],e)}};function vf(r,e,t){var n=-1,i=r.length-t,s;for(e.lineStart();++n<i;)s=r[n],e.point(s[0],s[1],s[2]);e.lineEnd()}function Am(r,e){var t=-1,n=r.length;for(e.polygonStart();++t<n;)vf(r[t],e,1);e.polygonEnd()}function T1(r,e){r&&om.hasOwnProperty(r.type)?om[r.type](r,e):Cc(r,e)}var Pc=new Us,lm=new Us,s7,o7,_f,xf,bf,Ws={point:ur,lineStart:ur,lineEnd:ur,polygonStart:function(){Pc=new Us,Ws.lineStart=eE,Ws.lineEnd=tE},polygonEnd:function(){var r=+Pc;lm.add(r<0?Kr+r:r),this.lineStart=this.lineEnd=this.point=ur},sphere:function(){lm.add(Kr)}};function eE(){Ws.point=nE}function tE(){a7(s7,o7)}function nE(r,e){Ws.point=a7,s7=r,o7=e,r*=ht,e*=ht,_f=r,xf=mt(e=e/2+Rc),bf=at(e)}function a7(r,e){r*=ht,e*=ht,e=e/2+Rc;var t=r-_f,n=t>=0?1:-1,i=n*t,s=mt(e),o=at(e),u=bf*o,h=xf*s+u*mt(i),d=u*n*at(i);Pc.add(gi(d,h)),_f=r,xf=s,bf=o}function Bc(r){return[gi(r[1],r[0]),js(r[2])]}function Ta(r){var e=r[0],t=r[1],n=mt(t);return[n*mt(e),n*at(e),at(t)]}function r0(r,e){return r[0]*e[0]+r[1]*e[1]+r[2]*e[2]}function PA(r,e){return[r[1]*e[2]-r[2]*e[1],r[2]*e[0]-r[0]*e[2],r[0]*e[1]-r[1]*e[0]]}function z2(r,e){r[0]+=e[0],r[1]+=e[1],r[2]+=e[2]}function i0(r,e){return[r[0]*e,r[1]*e,r[2]*e]}function Dc(r){var e=Hs(r[0]*r[0]+r[1]*r[1]+r[2]*r[2]);r[0]/=e,r[1]/=e,r[2]/=e}var pn,Nr,vn,Wr,ia,A7,l7,wA,zl,go,Qs,Ps={point:Tf,lineStart:um,lineEnd:cm,polygonStart:function(){Ps.point=c7,Ps.lineStart=rE,Ps.lineEnd=iE,zl=new Us,Ws.polygonStart()},polygonEnd:function(){Ws.polygonEnd(),Ps.point=Tf,Ps.lineStart=um,Ps.lineEnd=cm,Pc<0?(pn=-(vn=180),Nr=-(Wr=90)):zl>St?Wr=90:zl<-St&&(Nr=-90),Qs[0]=pn,Qs[1]=vn},sphere:function(){pn=-(vn=180),Nr=-(Wr=90)}};function Tf(r,e){go.push(Qs=[pn=r,vn=r]),e<Nr&&(Nr=e),e>Wr&&(Wr=e)}function u7(r,e){var t=Ta([r*ht,e*ht]);if(wA){var n=PA(wA,t),i=[n[1],-n[0],0],s=PA(i,n);Dc(s),s=Bc(s);var o=r-ia,u=o>0?1:-1,h=s[0]*xn*u,d,m=Jt(o)>180;m^(u*ia<h&&h<u*r)?(d=s[1]*xn,d>Wr&&(Wr=d)):(h=(h+360)%360-180,m^(u*ia<h&&h<u*r)?(d=-s[1]*xn,d<Nr&&(Nr=d)):(e<Nr&&(Nr=e),e>Wr&&(Wr=e))),m?r<ia?$r(pn,r)>$r(pn,vn)&&(vn=r):$r(r,vn)>$r(pn,vn)&&(pn=r):vn>=pn?(r<pn&&(pn=r),r>vn&&(vn=r)):r>ia?$r(pn,r)>$r(pn,vn)&&(vn=r):$r(r,vn)>$r(pn,vn)&&(pn=r)}else go.push(Qs=[pn=r,vn=r]);e<Nr&&(Nr=e),e>Wr&&(Wr=e),wA=t,ia=r}function um(){Ps.point=u7}function cm(){Qs[0]=pn,Qs[1]=vn,Ps.point=Tf,wA=null}function c7(r,e){if(wA){var t=r-ia;zl.add(Jt(t)>180?t+(t>0?360:-360):t)}else A7=r,l7=e;Ws.point(r,e),u7(r,e)}function rE(){Ws.lineStart()}function iE(){c7(A7,l7),Ws.lineEnd(),Jt(zl)>St&&(pn=-(vn=180)),Qs[0]=pn,Qs[1]=vn,wA=null}function $r(r,e){return(e-=r)<0?e+360:e}function sE(r,e){return r[0]-e[0]}function hm(r,e){return r[0]<=r[1]?r[0]<=e&&e<=r[1]:e<r[0]||r[1]<e}function h7(r){var e,t,n,i,s,o,u;if(Wr=vn=-(pn=Nr=1/0),go=[],T1(r,Ps),t=go.length){for(go.sort(sE),e=1,n=go[0],s=[n];e<t;++e)i=go[e],hm(n,i[0])||hm(n,i[1])?($r(n[0],i[1])>$r(n[0],n[1])&&(n[1]=i[1]),$r(i[0],n[1])>$r(n[0],n[1])&&(n[0]=i[0])):s.push(n=i);for(o=-1/0,t=s.length-1,e=0,n=s[t];e<=t;n=i,++e)i=s[e],(u=$r(n[1],i[0]))>o&&(o=u,pn=i[0],vn=n[1])}return go=Qs=null,pn===1/0||Nr===1/0?[[NaN,NaN],[NaN,NaN]]:[[pn,Nr],[vn,Wr]]}var Cl,Fc,Lc,Ic,qc,Oc,Uc,kc,wf,Sf,Mf,f7,d7,_r,xr,br,qi={sphere:ur,point:Kd,lineStart:fm,lineEnd:dm,polygonStart:function(){qi.lineStart=AE,qi.lineEnd=lE},polygonEnd:function(){qi.lineStart=fm,qi.lineEnd=dm}};function Kd(r,e){r*=ht,e*=ht;var t=mt(e);Su(t*mt(r),t*at(r),at(e))}function Su(r,e,t){++Cl,Lc+=(r-Lc)/Cl,Ic+=(e-Ic)/Cl,qc+=(t-qc)/Cl}function fm(){qi.point=oE}function oE(r,e){r*=ht,e*=ht;var t=mt(e);_r=t*mt(r),xr=t*at(r),br=at(e),qi.point=aE,Su(_r,xr,br)}function aE(r,e){r*=ht,e*=ht;var t=mt(e),n=t*mt(r),i=t*at(r),s=at(e),o=gi(Hs((o=xr*s-br*i)*o+(o=br*n-_r*s)*o+(o=_r*i-xr*n)*o),_r*n+xr*i+br*s);Fc+=o,Oc+=o*(_r+(_r=n)),Uc+=o*(xr+(xr=i)),kc+=o*(br+(br=s)),Su(_r,xr,br)}function dm(){qi.point=Kd}function AE(){qi.point=uE}function lE(){p7(f7,d7),qi.point=Kd}function uE(r,e){f7=r,d7=e,r*=ht,e*=ht,qi.point=p7;var t=mt(e);_r=t*mt(r),xr=t*at(r),br=at(e),Su(_r,xr,br)}function p7(r,e){r*=ht,e*=ht;var t=mt(e),n=t*mt(r),i=t*at(r),s=at(e),o=xr*s-br*i,u=br*n-_r*s,h=_r*i-xr*n,d=yf(o,u,h),m=js(d),y=d&&-m/d;wf.add(y*o),Sf.add(y*u),Mf.add(y*h),Fc+=m,Oc+=m*(_r+(_r=n)),Uc+=m*(xr+(xr=i)),kc+=m*(br+(br=s)),Su(_r,xr,br)}function pm(r){Cl=Fc=Lc=Ic=qc=Oc=Uc=kc=0,wf=new Us,Sf=new Us,Mf=new Us,T1(r,qi);var e=+wf,t=+Sf,n=+Mf,i=yf(e,t,n);return i<Nc&&(e=Oc,t=Uc,n=kc,Fc<St&&(e=Lc,t=Ic,n=qc),i=yf(e,t,n),i<Nc)?[NaN,NaN]:[gi(t,e)*xn,js(n/i)*xn]}function Ef(r,e){function t(n,i){return n=r(n,i),e(n[0],n[1])}return r.invert&&e.invert&&(t.invert=function(n,i){return n=e.invert(n,i),n&&r.invert(n[0],n[1])}),t}function Nf(r,e){return Jt(r)>Dt&&(r-=Math.round(r/Kr)*Kr),[r,e]}Nf.invert=Nf;function m7(r,e,t){return(r%=Kr)?e||t?Ef(gm(r),ym(e,t)):gm(r):e||t?ym(e,t):Nf}function mm(r){return function(e,t){return e+=r,Jt(e)>Dt&&(e-=Math.round(e/Kr)*Kr),[e,t]}}function gm(r){var e=mm(r);return e.invert=mm(-r),e}function ym(r,e){var t=mt(r),n=at(r),i=mt(e),s=at(e);function o(u,h){var d=mt(h),m=mt(u)*d,y=at(u)*d,x=at(h),b=x*t+m*n;return[gi(y*i-b*s,m*t-x*n),js(b*i+y*s)]}return o.invert=function(u,h){var d=mt(h),m=mt(u)*d,y=at(u)*d,x=at(h),b=x*i-y*s;return[gi(y*i+x*s,m*t+b*n),js(b*t-m*n)]},o}function cE(r){r=m7(r[0]*ht,r[1]*ht,r.length>2?r[2]*ht:0);function e(t){return t=r(t[0]*ht,t[1]*ht),t[0]*=xn,t[1]*=xn,t}return e.invert=function(t){return t=r.invert(t[0]*ht,t[1]*ht),t[0]*=xn,t[1]*=xn,t},e}function hE(r,e,t,n,i,s){if(t){var o=mt(e),u=at(e),h=n*t;i==null?(i=e+n*Kr,s=e-h/2):(i=vm(o,i),s=vm(o,s),(n>0?i<s:i>s)&&(i+=n*Kr));for(var d,m=i;n>0?m>s:m<s;m-=h)d=Bc([o,-u*mt(m),-u*at(m)]),r.point(d[0],d[1])}}function vm(r,e){e=Ta(e),e[0]-=r,Dc(e);var t=JM(-e[1]);return((-e[2]<0?-t:t)+Kr-St)%Kr}function g7(){var r=[],e;return{point:function(t,n,i){e.push([t,n,i])},lineStart:function(){r.push(e=[])},lineEnd:ur,rejoin:function(){r.length>1&&r.push(r.pop().concat(r.shift()))},result:function(){var t=r;return r=[],e=null,t}}}function J0(r,e){return Jt(r[0]-e[0])<St&&Jt(r[1]-e[1])<St}function s0(r,e,t,n){this.x=r,this.z=e,this.o=t,this.e=n,this.v=!1,this.n=this.p=null}function y7(r,e,t,n,i){var s=[],o=[],u,h;if(r.forEach(function(T){if(!((M=T.length-1)<=0)){var M,N=T[0],C=T[M],B;if(J0(N,C)){if(!N[2]&&!C[2]){for(i.lineStart(),u=0;u<M;++u)i.point((N=T[u])[0],N[1]);i.lineEnd();return}C[0]+=2*St}s.push(B=new s0(N,T,null,!0)),o.push(B.o=new s0(N,null,B,!1)),s.push(B=new s0(C,T,null,!1)),o.push(B.o=new s0(C,null,B,!0))}}),!!s.length){for(o.sort(e),_m(s),_m(o),u=0,h=o.length;u<h;++u)o[u].e=t=!t;for(var d=s[0],m,y;;){for(var x=d,b=!0;x.v;)if((x=x.n)===d)return;m=x.z,i.lineStart();do{if(x.v=x.o.v=!0,x.e){if(b)for(u=0,h=m.length;u<h;++u)i.point((y=m[u])[0],y[1]);else n(x.x,x.n.x,1,i);x=x.n}else{if(b)for(m=x.p.z,u=m.length-1;u>=0;--u)i.point((y=m[u])[0],y[1]);else n(x.x,x.p.x,-1,i);x=x.p}x=x.o,m=x.z,b=!b}while(!x.v);i.lineEnd()}}}function _m(r){if(e=r.length){for(var e,t=0,n=r[0],i;++t<e;)n.n=i=r[t],i.p=n,n=i;n.n=i=r[0],i.p=n}}function $2(r){return Jt(r[0])<=Dt?r[0]:KM(r[0])*((Jt(r[0])+Dt)%Kr-Dt)}function v7(r,e){var t=$2(e),n=e[1],i=at(n),s=[at(t),-mt(t),0],o=0,u=0,h=new Us;i===1?n=Pr+St:i===-1&&(n=-Pr-St);for(var d=0,m=r.length;d<m;++d)if(x=(y=r[d]).length)for(var y,x,b=y[x-1],T=$2(b),M=b[1]/2+Rc,N=at(M),C=mt(M),B=0;B<x;++B,T=I,N=q,C=O,b=P){var P=y[B],I=$2(P),D=P[1]/2+Rc,q=at(D),O=mt(D),k=I-T,z=k>=0?1:-1,X=z*k,W=X>Dt,K=N*q;if(h.add(gi(K*z*at(X),C*O+K*mt(X))),o+=W?k+z*Kr:k,W^T>=t^I>=t){var Z=PA(Ta(b),Ta(P));Dc(Z);var se=PA(s,Z);Dc(se);var Y=(W^k>=0?-1:1)*js(se[2]);(n>Y||n===Y&&(Z[0]||Z[1]))&&(u+=W^k>=0?1:-1)}}return(o<-St||o<St&&h<-Nc)^u&1}function _7(r,e,t,n){return function(i){var s=e(i),o=g7(),u=e(o),h=!1,d,m,y,x={point:b,lineStart:M,lineEnd:N,polygonStart:function(){x.point=C,x.lineStart=B,x.lineEnd=P,m=[],d=[]},polygonEnd:function(){x.point=b,x.lineStart=M,x.lineEnd=N,m=nu(m);var I=v7(d,n);m.length?(h||(i.polygonStart(),h=!0),y7(m,dE,I,t,i)):I&&(h||(i.polygonStart(),h=!0),i.lineStart(),t(null,null,1,i),i.lineEnd()),h&&(i.polygonEnd(),h=!1),m=d=null},sphere:function(){i.polygonStart(),i.lineStart(),t(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function b(I,D){r(I,D)&&i.point(I,D)}function T(I,D){s.point(I,D)}function M(){x.point=T,s.lineStart()}function N(){x.point=b,s.lineEnd()}function C(I,D){y.push([I,D]),u.point(I,D)}function B(){u.lineStart(),y=[]}function P(){C(y[0][0],y[0][1]),u.lineEnd();var I=u.clean(),D=o.result(),q,O=D.length,k,z,X;if(y.pop(),d.push(y),y=null,!!O){if(I&1){if(z=D[0],(k=z.length-1)>0){for(h||(i.polygonStart(),h=!0),i.lineStart(),q=0;q<k;++q)i.point((X=z[q])[0],X[1]);i.lineEnd()}return}O>1&&I&2&&D.push(D.pop().concat(D.shift())),m.push(D.filter(fE))}}return x}}function fE(r){return r.length>1}function dE(r,e){return((r=r.x)[0]<0?r[1]-Pr-St:Pr-r[1])-((e=e.x)[0]<0?e[1]-Pr-St:Pr-e[1])}const xm=_7(function(){return!0},pE,gE,[-Dt,-Pr]);function pE(r){var e=NaN,t=NaN,n=NaN,i;return{lineStart:function(){r.lineStart(),i=1},point:function(s,o){var u=s>0?Dt:-Dt,h=Jt(s-e);Jt(h-Dt)<St?(r.point(e,t=(t+o)/2>0?Pr:-Pr),r.point(n,t),r.lineEnd(),r.lineStart(),r.point(u,t),r.point(s,t),i=0):n!==u&&h>=Dt&&(Jt(e-n)<St&&(e-=n*St),Jt(s-u)<St&&(s-=u*St),t=mE(e,t,s,o),r.point(n,t),r.lineEnd(),r.lineStart(),r.point(u,t),i=0),r.point(e=s,t=o),n=u},lineEnd:function(){r.lineEnd(),e=t=NaN},clean:function(){return 2-i}}}function mE(r,e,t,n){var i,s,o=at(r-t);return Jt(o)>St?Yd((at(e)*(s=mt(n))*at(t)-at(n)*(i=mt(e))*at(r))/(i*s*o)):(e+n)/2}function gE(r,e,t,n){var i;if(r==null)i=t*Pr,n.point(-Dt,i),n.point(0,i),n.point(Dt,i),n.point(Dt,0),n.point(Dt,-i),n.point(0,-i),n.point(-Dt,-i),n.point(-Dt,0),n.point(-Dt,i);else if(Jt(r[0]-e[0])>St){var s=r[0]<e[0]?Dt:-Dt;i=t*s/2,n.point(-s,i),n.point(0,i),n.point(s,i)}else n.point(e[0],e[1])}function yE(r){var e=mt(r),t=2*ht,n=e>0,i=Jt(e)>St;function s(m,y,x,b){hE(b,r,t,x,m,y)}function o(m,y){return mt(m)*mt(y)>e}function u(m){var y,x,b,T,M;return{lineStart:function(){T=b=!1,M=1},point:function(N,C){var B=[N,C],P,I=o(N,C),D=n?I?0:d(N,C):I?d(N+(N<0?Dt:-Dt),C):0;if(!y&&(T=b=I)&&m.lineStart(),I!==b&&(P=h(y,B),(!P||J0(y,P)||J0(B,P))&&(B[2]=1)),I!==b)M=0,I?(m.lineStart(),P=h(B,y),m.point(P[0],P[1])):(P=h(y,B),m.point(P[0],P[1],2),m.lineEnd()),y=P;else if(i&&y&&n^I){var q;!(D&x)&&(q=h(B,y,!0))&&(M=0,n?(m.lineStart(),m.point(q[0][0],q[0][1]),m.point(q[1][0],q[1][1]),m.lineEnd()):(m.point(q[1][0],q[1][1]),m.lineEnd(),m.lineStart(),m.point(q[0][0],q[0][1],3)))}I&&(!y||!J0(y,B))&&m.point(B[0],B[1]),y=B,b=I,x=D},lineEnd:function(){b&&m.lineEnd(),y=null},clean:function(){return M|(T&&b)<<1}}}function h(m,y,x){var b=Ta(m),T=Ta(y),M=[1,0,0],N=PA(b,T),C=r0(N,N),B=N[0],P=C-B*B;if(!P)return!x&&m;var I=e*C/P,D=-e*B/P,q=PA(M,N),O=i0(M,I),k=i0(N,D);z2(O,k);var z=q,X=r0(O,z),W=r0(z,z),K=X*X-W*(r0(O,O)-1);if(!(K<0)){var Z=Hs(K),se=i0(z,(-X-Z)/W);if(z2(se,O),se=Bc(se),!x)return se;var Y=m[0],oe=y[0],he=m[1],_e=y[1],ye;oe<Y&&(ye=Y,Y=oe,oe=ye);var Pe=oe-Y,qe=Jt(Pe-Dt)<St,Ye=qe||Pe<St;if(!qe&&_e<he&&(ye=he,he=_e,_e=ye),Ye?qe?he+_e>0^se[1]<(Jt(se[0]-Y)<St?he:_e):he<=se[1]&&se[1]<=_e:Pe>Dt^(Y<=se[0]&&se[0]<=oe)){var He=i0(z,(-X+Z)/W);return z2(He,O),[se,Bc(He)]}}}function d(m,y){var x=n?r:Dt-r,b=0;return m<-x?b|=1:m>x&&(b|=2),y<-x?b|=4:y>x&&(b|=8),b}return _7(o,u,s,n?[0,-r]:[-Dt,r-Dt])}function vE(r,e,t,n,i,s){var o=r[0],u=r[1],h=e[0],d=e[1],m=0,y=1,x=h-o,b=d-u,T;if(T=t-o,!(!x&&T>0)){if(T/=x,x<0){if(T<m)return;T<y&&(y=T)}else if(x>0){if(T>y)return;T>m&&(m=T)}if(T=i-o,!(!x&&T<0)){if(T/=x,x<0){if(T>y)return;T>m&&(m=T)}else if(x>0){if(T<m)return;T<y&&(y=T)}if(T=n-u,!(!b&&T>0)){if(T/=b,b<0){if(T<m)return;T<y&&(y=T)}else if(b>0){if(T>y)return;T>m&&(m=T)}if(T=s-u,!(!b&&T<0)){if(T/=b,b<0){if(T>y)return;T>m&&(m=T)}else if(b>0){if(T<m)return;T<y&&(y=T)}return m>0&&(r[0]=o+m*x,r[1]=u+m*b),y<1&&(e[0]=o+y*x,e[1]=u+y*b),!0}}}}}var Pl=1e9,o0=-Pl;function _E(r,e,t,n){function i(d,m){return r<=d&&d<=t&&e<=m&&m<=n}function s(d,m,y,x){var b=0,T=0;if(d==null||(b=o(d,y))!==(T=o(m,y))||h(d,m)<0^y>0)do x.point(b===0||b===3?r:t,b>1?n:e);while((b=(b+y+4)%4)!==T);else x.point(m[0],m[1])}function o(d,m){return Jt(d[0]-r)<St?m>0?0:3:Jt(d[0]-t)<St?m>0?2:1:Jt(d[1]-e)<St?m>0?1:0:m>0?3:2}function u(d,m){return h(d.x,m.x)}function h(d,m){var y=o(d,1),x=o(m,1);return y!==x?y-x:y===0?m[1]-d[1]:y===1?d[0]-m[0]:y===2?d[1]-m[1]:m[0]-d[0]}return function(d){var m=d,y=g7(),x,b,T,M,N,C,B,P,I,D,q,O={point:k,lineStart:K,lineEnd:Z,polygonStart:X,polygonEnd:W};function k(Y,oe){i(Y,oe)&&m.point(Y,oe)}function z(){for(var Y=0,oe=0,he=b.length;oe<he;++oe)for(var _e=b[oe],ye=1,Pe=_e.length,qe=_e[0],Ye,He,Rt=qe[0],pt=qe[1];ye<Pe;++ye)Ye=Rt,He=pt,qe=_e[ye],Rt=qe[0],pt=qe[1],He<=n?pt>n&&(Rt-Ye)*(n-He)>(pt-He)*(r-Ye)&&++Y:pt<=n&&(Rt-Ye)*(n-He)<(pt-He)*(r-Ye)&&--Y;return Y}function X(){m=y,x=[],b=[],q=!0}function W(){var Y=z(),oe=q&&Y,he=(x=nu(x)).length;(oe||he)&&(d.polygonStart(),oe&&(d.lineStart(),s(null,null,1,d),d.lineEnd()),he&&y7(x,u,Y,s,d),d.polygonEnd()),m=d,x=b=T=null}function K(){O.point=se,b&&b.push(T=[]),D=!0,I=!1,B=P=NaN}function Z(){x&&(se(M,N),C&&I&&y.rejoin(),x.push(y.result())),O.point=k,I&&m.lineEnd()}function se(Y,oe){var he=i(Y,oe);if(b&&T.push([Y,oe]),D)M=Y,N=oe,C=he,D=!1,he&&(m.lineStart(),m.point(Y,oe));else if(he&&I)m.point(Y,oe);else{var _e=[B=Math.max(o0,Math.min(Pl,B)),P=Math.max(o0,Math.min(Pl,P))],ye=[Y=Math.max(o0,Math.min(Pl,Y)),oe=Math.max(o0,Math.min(Pl,oe))];vE(_e,ye,r,e,t,n)?(I||(m.lineStart(),m.point(_e[0],_e[1])),m.point(ye[0],ye[1]),he||m.lineEnd(),q=!1):he&&(m.lineStart(),m.point(Y,oe),q=!1)}B=Y,P=oe,I=he}return O}}var Rf,Cf,ec,tc,BA={sphere:ur,point:ur,lineStart:xE,lineEnd:ur,polygonStart:ur,polygonEnd:ur};function xE(){BA.point=TE,BA.lineEnd=bE}function bE(){BA.point=BA.lineEnd=ur}function TE(r,e){r*=ht,e*=ht,Cf=r,ec=at(e),tc=mt(e),BA.point=wE}function wE(r,e){r*=ht,e*=ht;var t=at(e),n=mt(e),i=Jt(r-Cf),s=mt(i),o=at(i),u=n*o,h=tc*t-ec*n*s,d=ec*t+tc*n*s;Rf.add(gi(Hs(u*u+h*h),d)),Cf=r,ec=t,tc=n}function SE(r){return Rf=new Us,T1(r,BA),+Rf}var Pf=[null,null],ME={type:"LineString",coordinates:Pf};function Do(r,e){return Pf[0]=r,Pf[1]=e,SE(ME)}var bm={Feature:function(r,e){return Gc(r.geometry,e)},FeatureCollection:function(r,e){for(var t=r.features,n=-1,i=t.length;++n<i;)if(Gc(t[n].geometry,e))return!0;return!1}},Tm={Sphere:function(){return!0},Point:function(r,e){return wm(r.coordinates,e)},MultiPoint:function(r,e){for(var t=r.coordinates,n=-1,i=t.length;++n<i;)if(wm(t[n],e))return!0;return!1},LineString:function(r,e){return Sm(r.coordinates,e)},MultiLineString:function(r,e){for(var t=r.coordinates,n=-1,i=t.length;++n<i;)if(Sm(t[n],e))return!0;return!1},Polygon:function(r,e){return Mm(r.coordinates,e)},MultiPolygon:function(r,e){for(var t=r.coordinates,n=-1,i=t.length;++n<i;)if(Mm(t[n],e))return!0;return!1},GeometryCollection:function(r,e){for(var t=r.geometries,n=-1,i=t.length;++n<i;)if(Gc(t[n],e))return!0;return!1}};function Gc(r,e){return r&&Tm.hasOwnProperty(r.type)?Tm[r.type](r,e):!1}function wm(r,e){return Do(r,e)===0}function Sm(r,e){for(var t,n,i,s=0,o=r.length;s<o;s++){if(n=Do(r[s],e),n===0||s>0&&(i=Do(r[s],r[s-1]),i>0&&t<=i&&n<=i&&(t+n-i)*(1-Math.pow((t-n)/i,2))<Nc*i))return!0;t=n}return!1}function Mm(r,e){return!!v7(r.map(EE),x7(e))}function EE(r){return r=r.map(x7),r.pop(),r}function x7(r){return[r[0]*ht,r[1]*ht]}function NE(r,e){return(r&&bm.hasOwnProperty(r.type)?bm[r.type]:Gc)(r,e)}function Em(r,e,t){var n=pA(r,e-St,t).concat(e);return function(i){return n.map(function(s){return[i,s]})}}function Nm(r,e,t){var n=pA(r,e-St,t).concat(e);return function(i){return n.map(function(s){return[s,i]})}}function RE(){var r,e,t,n,i,s,o,u,h=10,d=h,m=90,y=360,x,b,T,M,N=2.5;function C(){return{type:"MultiLineString",coordinates:B()}}function B(){return pA(n0(n/m)*m,t,m).map(T).concat(pA(n0(u/y)*y,o,y).map(M)).concat(pA(n0(e/h)*h,r,h).filter(function(P){return Jt(P%m)>St}).map(x)).concat(pA(n0(s/d)*d,i,d).filter(function(P){return Jt(P%y)>St}).map(b))}return C.lines=function(){return B().map(function(P){return{type:"LineString",coordinates:P}})},C.outline=function(){return{type:"Polygon",coordinates:[T(n).concat(M(o).slice(1),T(t).reverse().slice(1),M(u).reverse().slice(1))]}},C.extent=function(P){return arguments.length?C.extentMajor(P).extentMinor(P):C.extentMinor()},C.extentMajor=function(P){return arguments.length?(n=+P[0][0],t=+P[1][0],u=+P[0][1],o=+P[1][1],n>t&&(P=n,n=t,t=P),u>o&&(P=u,u=o,o=P),C.precision(N)):[[n,u],[t,o]]},C.extentMinor=function(P){return arguments.length?(e=+P[0][0],r=+P[1][0],s=+P[0][1],i=+P[1][1],e>r&&(P=e,e=r,r=P),s>i&&(P=s,s=i,i=P),C.precision(N)):[[e,s],[r,i]]},C.step=function(P){return arguments.length?C.stepMajor(P).stepMinor(P):C.stepMinor()},C.stepMajor=function(P){return arguments.length?(m=+P[0],y=+P[1],C):[m,y]},C.stepMinor=function(P){return arguments.length?(h=+P[0],d=+P[1],C):[h,d]},C.precision=function(P){return arguments.length?(N=+P,x=Em(s,i,90),b=Nm(e,r,N),T=Em(u,o,90),M=Nm(n,t,N),C):N},C.extentMajor([[-180,-90+St],[180,90-St]]).extentMinor([[-180,-80-St],[180,80+St]])}function CE(){return RE()()}function Zd(r,e){var t=r[0]*ht,n=r[1]*ht,i=e[0]*ht,s=e[1]*ht,o=mt(n),u=at(n),h=mt(s),d=at(s),m=o*mt(t),y=o*at(t),x=h*mt(i),b=h*at(i),T=2*js(Hs(sm(s-n)+o*h*sm(i-t))),M=at(T),N=T?function(C){var B=at(C*=T)/M,P=at(T-C)/M,I=P*m+B*x,D=P*y+B*b,q=P*u+B*d;return[gi(D,I)*xn,gi(q,Hs(I*I+D*D))*xn]}:function(){return[t*xn,n*xn]};return N.distance=T,N}const Rm=r=>r;var DA=1/0,Vc=DA,ou=-DA,zc=ou,Cm={point:PE,lineStart:ur,lineEnd:ur,polygonStart:ur,polygonEnd:ur,result:function(){var r=[[DA,Vc],[ou,zc]];return ou=zc=-(Vc=DA=1/0),r}};function PE(r,e){r<DA&&(DA=r),r>ou&&(ou=r),e<Vc&&(Vc=e),e>zc&&(zc=e)}function Jd(r){return function(e){var t=new Bf;for(var n in r)t[n]=r[n];return t.stream=e,t}}function Bf(){}Bf.prototype={constructor:Bf,point:function(r,e){this.stream.point(r,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function ep(r,e,t){var n=r.clipExtent&&r.clipExtent();return r.scale(150).translate([0,0]),n!=null&&r.clipExtent(null),T1(t,r.stream(Cm)),e(Cm.result()),n!=null&&r.clipExtent(n),r}function b7(r,e,t){return ep(r,function(n){var i=e[1][0]-e[0][0],s=e[1][1]-e[0][1],o=Math.min(i/(n[1][0]-n[0][0]),s/(n[1][1]-n[0][1])),u=+e[0][0]+(i-o*(n[1][0]+n[0][0]))/2,h=+e[0][1]+(s-o*(n[1][1]+n[0][1]))/2;r.scale(150*o).translate([u,h])},t)}function BE(r,e,t){return b7(r,[[0,0],e],t)}function DE(r,e,t){return ep(r,function(n){var i=+e,s=i/(n[1][0]-n[0][0]),o=(i-s*(n[1][0]+n[0][0]))/2,u=-s*n[0][1];r.scale(150*s).translate([o,u])},t)}function FE(r,e,t){return ep(r,function(n){var i=+e,s=i/(n[1][1]-n[0][1]),o=-s*n[0][0],u=(i-s*(n[1][1]+n[0][1]))/2;r.scale(150*s).translate([o,u])},t)}var Pm=16,LE=mt(30*ht);function Bm(r,e){return+e?qE(r,e):IE(r)}function IE(r){return Jd({point:function(e,t){e=r(e,t),this.stream.point(e[0],e[1])}})}function qE(r,e){function t(n,i,s,o,u,h,d,m,y,x,b,T,M,N){var C=d-n,B=m-i,P=C*C+B*B;if(P>4*e&&M--){var I=o+x,D=u+b,q=h+T,O=Hs(I*I+D*D+q*q),k=js(q/=O),z=Jt(Jt(q)-1)<St||Jt(s-y)<St?(s+y)/2:gi(D,I),X=r(z,k),W=X[0],K=X[1],Z=W-n,se=K-i,Y=B*Z-C*se;(Y*Y/P>e||Jt((C*Z+B*se)/P-.5)>.3||o*x+u*b+h*T<LE)&&(t(n,i,s,o,u,h,W,K,z,I/=O,D/=O,q,M,N),N.point(W,K),t(W,K,z,I,D,q,d,m,y,x,b,T,M,N))}}return function(n){var i,s,o,u,h,d,m,y,x,b,T,M,N={point:C,lineStart:B,lineEnd:I,polygonStart:function(){n.polygonStart(),N.lineStart=D},polygonEnd:function(){n.polygonEnd(),N.lineStart=B}};function C(k,z){k=r(k,z),n.point(k[0],k[1])}function B(){y=NaN,N.point=P,n.lineStart()}function P(k,z){var X=Ta([k,z]),W=r(k,z);t(y,x,m,b,T,M,y=W[0],x=W[1],m=k,b=X[0],T=X[1],M=X[2],Pm,n),n.point(y,x)}function I(){N.point=C,n.lineEnd()}function D(){B(),N.point=q,N.lineEnd=O}function q(k,z){P(i=k,z),s=y,o=x,u=b,h=T,d=M,N.point=P}function O(){t(y,x,m,b,T,M,s,o,i,u,h,d,Pm,n),N.lineEnd=I,I()}return N}}var OE=Jd({point:function(r,e){this.stream.point(r*ht,e*ht)}});function UE(r){return Jd({point:function(e,t){var n=r(e,t);return this.stream.point(n[0],n[1])}})}function kE(r,e,t,n,i){function s(o,u){return o*=n,u*=i,[e+r*o,t-r*u]}return s.invert=function(o,u){return[(o-e)/r*n,(t-u)/r*i]},s}function Dm(r,e,t,n,i,s){if(!s)return kE(r,e,t,n,i);var o=mt(s),u=at(s),h=o*r,d=u*r,m=o/r,y=u/r,x=(u*t-o*e)/r,b=(u*e+o*t)/r;function T(M,N){return M*=n,N*=i,[h*M-d*N+e,t-d*M-h*N]}return T.invert=function(M,N){return[n*(m*M-y*N+x),i*(b-y*M-m*N)]},T}function GE(r){return VE(function(){return r})()}function VE(r){var e,t=150,n=480,i=250,s=0,o=0,u=0,h=0,d=0,m,y=0,x=1,b=1,T=null,M=xm,N=null,C,B,P,I=Rm,D=.5,q,O,k,z,X;function W(Y){return k(Y[0]*ht,Y[1]*ht)}function K(Y){return Y=k.invert(Y[0],Y[1]),Y&&[Y[0]*xn,Y[1]*xn]}W.stream=function(Y){return z&&X===Y?z:z=OE(UE(m)(M(q(I(X=Y)))))},W.preclip=function(Y){return arguments.length?(M=Y,T=void 0,se()):M},W.postclip=function(Y){return arguments.length?(I=Y,N=C=B=P=null,se()):I},W.clipAngle=function(Y){return arguments.length?(M=+Y?yE(T=Y*ht):(T=null,xm),se()):T*xn},W.clipExtent=function(Y){return arguments.length?(I=Y==null?(N=C=B=P=null,Rm):_E(N=+Y[0][0],C=+Y[0][1],B=+Y[1][0],P=+Y[1][1]),se()):N==null?null:[[N,C],[B,P]]},W.scale=function(Y){return arguments.length?(t=+Y,Z()):t},W.translate=function(Y){return arguments.length?(n=+Y[0],i=+Y[1],Z()):[n,i]},W.center=function(Y){return arguments.length?(s=Y[0]%360*ht,o=Y[1]%360*ht,Z()):[s*xn,o*xn]},W.rotate=function(Y){return arguments.length?(u=Y[0]%360*ht,h=Y[1]%360*ht,d=Y.length>2?Y[2]%360*ht:0,Z()):[u*xn,h*xn,d*xn]},W.angle=function(Y){return arguments.length?(y=Y%360*ht,Z()):y*xn},W.reflectX=function(Y){return arguments.length?(x=Y?-1:1,Z()):x<0},W.reflectY=function(Y){return arguments.length?(b=Y?-1:1,Z()):b<0},W.precision=function(Y){return arguments.length?(q=Bm(O,D=Y*Y),se()):Hs(D)},W.fitExtent=function(Y,oe){return b7(W,Y,oe)},W.fitSize=function(Y,oe){return BE(W,Y,oe)},W.fitWidth=function(Y,oe){return DE(W,Y,oe)},W.fitHeight=function(Y,oe){return FE(W,Y,oe)};function Z(){var Y=Dm(t,0,0,x,b,y).apply(null,e(s,o)),oe=Dm(t,n-Y[0],i-Y[1],x,b,y);return m=m7(u,h,d),O=Ef(e,oe),k=Ef(m,O),q=Bm(O,D),se()}function se(){return z=X=null,W}return function(){return e=r.apply(this,arguments),W.invert=e.invert&&K,Z()}}function zE(r){return function(e,t){var n=Hs(e*e+t*t),i=r(n),s=at(i),o=mt(i);return[gi(e*s,n*o),js(n&&t*s/n)]}}function tp(r,e){return[r,YM(ZM((Pr+e)/2))]}tp.invert=function(r,e){return[r,2*Yd(XM(e))-Pr]};function T7(r,e){var t=mt(e),n=1+mt(r)*t;return[t*at(r)/n,at(e)/n]}T7.invert=zE(function(r){return 2*Yd(r)});function $E(){return GE(T7).scale(250).clipAngle(142)}function Df(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function HE(r){if(Array.isArray(r))return r}function jE(r){if(Array.isArray(r))return Df(r)}function $l(r,e,t){if(typeof r=="function"?r===e:r.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}function WE(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function QE(r,e,t){return e=$c(e),iN(r,S7()?Reflect.construct(e,[],$c(r).constructor):e.apply(r,t))}function w7(r,e){if(e.has(r))throw new TypeError("Cannot initialize the same private elements twice on an object")}function XE(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function Tt(r,e){return r.get($l(r,e))}function uo(r,e,t){w7(r,e),e.set(r,t)}function co(r,e,t){return r.set($l(r,e),t),t}function YE(r,e){w7(r,e),e.add(r)}function KE(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,E7(n.key),n)}}function ZE(r,e,t){return KE(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r}function ja(r,e,t){return(e=E7(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function $c(r){return $c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},$c(r)}function JE(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&Ff(r,e)}function S7(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(S7=function(){return!!r})()}function eN(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function tN(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n,i,s,o,u=[],h=!0,d=!1;try{if(s=(t=t.call(r)).next,e!==0)for(;!(h=(n=s.call(t)).done)&&(u.push(n.value),u.length!==e);h=!0);}catch(m){d=!0,i=m}finally{try{if(!h&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(d)throw i}}return u}}function nN(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rN(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iN(r,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return WE(r)}function Ff(r,e){return Ff=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},Ff(r,e)}function nc(r,e){return HE(r)||tN(r,e)||N7(r,e)||nN()}function M7(r){return jE(r)||eN(r)||N7(r)||rN()}function sN(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}function E7(r){var e=sN(r,"string");return typeof e=="symbol"?e:e+""}function N7(r,e){if(r){if(typeof r=="string")return Df(r,e);var t={}.toString.call(r).slice(8,-1);return t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set"?Array.from(r):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Df(r,e):void 0}}var R7=function(e){e instanceof Array?e.forEach(R7):(e.map&&e.map.dispose(),e.dispose())},C7=function(e){e.geometry&&e.geometry.dispose(),e.material&&R7(e.material),e.texture&&e.texture.dispose(),e.children&&e.children.forEach(C7)},Fm=function(e){if(e&&e.children)for(;e.children.length;){var t=e.children[0];e.remove(t),C7(t)}};function P7(r,e,t){var n=(90-r)*Math.PI/180,i=(90-e)*Math.PI/180;return{x:t*Math.sin(n)*Math.cos(i),y:t*Math.cos(n),z:t*Math.sin(n)*Math.sin(i)}}function oN(r){var e=r.x,t=r.y,n=r.z,i=Math.sqrt(e*e+t*t+n*n),s=Math.acos(t/i),o=Math.atan2(n,e);return{lat:90-s*180/Math.PI,lng:90-o*180/Math.PI-(o<-Math.PI/2?360:0),r:i}}function Qo(r){return r*Math.PI/180}var B7=function(e){return 1-(tp(0,(.5-e)*Math.PI)[1]/Math.PI+1)/2},H2=function(e){return Math.max(0,Math.min(1,B7(e)))},Lm=function(e){return .5-tp.invert(0,(2*(1-e)-1)*Math.PI)[1]/Math.PI},aN=function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,i=$s().domain([1,0]).range([t,n]).clamp(!0),s=$s().domain([H2(t),H2(n)]).range([1,0]).clamp(!0),o=function(y){return s(H2(i(y)))},u=e.array,h=0,d=u.length;h<d;h+=2)u[h+1]=o(u[h+1]);e.needsUpdate=!0},Im=function(e,t,n,i){var s=Math.pow(2,e),o=Math.max(0,Math.min(s-1,Math.floor((n+180)*s/360))),u=(90-i)/180;t&&(u=Math.max(0,Math.min(1,B7(u))));var h=Math.floor(u*s);return[o,h]},Lf=function(e,t){for(var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,s=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0,u=[],h=Math.pow(2,e),d=360/h,m=180/h,y=s===void 0?h-1:s,x=o===void 0?h-1:o,b=n,T=Math.min(h-1,y);b<=T;b++)for(var M=i,N=Math.min(h-1,x);M<=N;M++){var C=M,B=m;if(t){C=M===0?M:Lm(M/h)*h;var P=M+1===h?M+1:Lm((M+1)/h)*h;B=(P-C)*180/h}var I=-180+(b+.5)*d,D=90-(C*180/h+B/2),q=B;u.push({x:b,y:M,lng:I,lat:D,latLen:q})}return u},AN=6,lN=7,uN=3,cN=90,is=new WeakMap,vo=new WeakMap,j2=new WeakMap,a0=new WeakMap,ai=new WeakMap,Hc=new WeakMap,SA=new WeakMap,Xo=new WeakMap,A0=new WeakSet,hN=(function(r){function e(t){var n,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=i.tileUrl,o=i.minLevel,u=o===void 0?0:o,h=i.maxLevel,d=h===void 0?17:h,m=i.mercatorProjection,y=m===void 0?!0:m;return XE(this,e),n=QE(this,e),YE(n,A0),uo(n,is,void 0),uo(n,vo,void 0),uo(n,j2,void 0),uo(n,a0,void 0),uo(n,ai,{}),uo(n,Hc,void 0),uo(n,SA,void 0),uo(n,Xo,void 0),ja(n,"minLevel",void 0),ja(n,"maxLevel",void 0),ja(n,"thresholds",M7(new Array(30)).map(function(x,b){return 8/Math.pow(2,b)})),ja(n,"curvatureResolution",5),ja(n,"tileMargin",0),ja(n,"clearTiles",function(){Object.values(Tt(ai,n)).forEach(function(x){x.forEach(function(b){b.obj&&(n.remove(b.obj),Fm(b.obj),delete b.obj)})}),co(ai,n,{})}),co(is,n,t),n.tileUrl=s,co(vo,n,y),n.minLevel=u,n.maxLevel=d,n.level=0,n.add(co(Xo,n,new Sn(new Ea(Tt(is,n)*.99,180,90),new Fs({color:0})))),Tt(Xo,n).visible=!1,Tt(Xo,n).material.polygonOffset=!0,Tt(Xo,n).material.polygonOffsetUnits=3,Tt(Xo,n).material.polygonOffsetFactor=1,n}return JE(e,r),ZE(e,[{key:"tileUrl",get:function(){return Tt(j2,this)},set:function(n){co(j2,this,n),this.updatePov(Tt(SA,this))}},{key:"level",get:function(){return Tt(a0,this)},set:function(n){var i=this;Tt(ai,this)[n]||$l(A0,this,fN).call(this,n);var s=Tt(a0,this);if(co(a0,this,n),!(n===s||s===void 0)){if(Tt(Xo,this).visible=n>0,Tt(ai,this)[n].forEach(function(u){return u.obj&&(u.obj.material.depthWrite=!0)}),s<n&&Tt(ai,this)[s].forEach(function(u){return u.obj&&(u.obj.material.depthWrite=!1)}),s>n)for(var o=n+1;o<=s;o++)Tt(ai,this)[o]&&Tt(ai,this)[o].forEach(function(u){u.obj&&(i.remove(u.obj),Fm(u.obj),delete u.obj)});$l(A0,this,qm).call(this)}}},{key:"updatePov",value:function(n){var i=this;if(!(!n||!(n instanceof Sd))){co(SA,this,n);var s;if(co(Hc,this,function(m){if(!m.hullPnts){var y=360/Math.pow(2,i.level),x=m.lng,b=m.lat,T=m.latLen,M=x-y/2,N=x+y/2,C=b-T/2,B=b+T/2;m.hullPnts=[[b,x],[C,M],[B,M],[C,N],[B,N]].map(function(P){var I=nc(P,2),D=I[0],q=I[1];return P7(D,q,Tt(is,i))}).map(function(P){var I=P.x,D=P.y,q=P.z;return new Re(I,D,q)})}return s||(s=new Xg,n.updateMatrix(),n.updateMatrixWorld(),s.setFromProjectionMatrix(new mn().multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse))),m.hullPnts.some(function(P){return s.containsPoint(P.clone().applyMatrix4(i.matrixWorld))})}),this.tileUrl){var o=n.position.clone(),u=o.distanceTo(this.getWorldPosition(new Re)),h=(u-Tt(is,this))/Tt(is,this),d=this.thresholds.findIndex(function(m){return m&&m<=h});this.level=Math.min(this.maxLevel,Math.max(this.minLevel,d<0?this.thresholds.length:d)),$l(A0,this,qm).call(this)}}}}])})(xs);function fN(r){var e=this;if(r>lN){Tt(ai,this)[r]=[];return}var t=Tt(ai,this)[r]=Lf(r,Tt(vo,this));t.forEach(function(n){return n.centroid=P7(n.lat,n.lng,Tt(is,e))}),t.octree=$6().x(function(n){return n.centroid.x}).y(function(n){return n.centroid.y}).z(function(n){return n.centroid.z}).addAll(t)}function qm(){var r=this;if(!(!this.tileUrl||this.level===void 0||!Tt(ai,this).hasOwnProperty(this.level))&&!(!Tt(Hc,this)&&this.level>AN)){var e=Tt(ai,this)[this.level];if(Tt(SA,this)){var t=this.worldToLocal(Tt(SA,this).position.clone());if(e.octree){var n,i=this.worldToLocal(Tt(SA,this).position.clone()),s=(i.length()-Tt(is,this))*uN;e=(n=e.octree).findAllWithinRadius.apply(n,M7(i).concat([s]))}else{var o=oN(t),u=(o.r/Tt(is,this)-1)*cN,h=u/Math.cos(Qo(o.lat)),d=[o.lng-h,o.lng+h],m=[o.lat+u,o.lat-u],y=Im(this.level,Tt(vo,this),d[0],m[0]),x=nc(y,2),b=x[0],T=x[1],M=Im(this.level,Tt(vo,this),d[1],m[1]),N=nc(M,2),C=N[0],B=N[1];!e.record&&(e.record={});var P=e.record;if(!P.hasOwnProperty("".concat(Math.round((b+C)/2),"_").concat(Math.round((T+B)/2))))e=Lf(this.level,Tt(vo,this),b,T,C,B).map(function(k){var z="".concat(k.x,"_").concat(k.y);return P.hasOwnProperty(z)?P[z]:(P[z]=k,e.push(k),k)});else{for(var I=[],D=b;D<=C;D++)for(var q=T;q<=B;q++){var O="".concat(D,"_").concat(q);P.hasOwnProperty(O)||(P[O]=Lf(this.level,Tt(vo,this),D,q,D,q)[0],e.push(P[O])),I.push(P[O])}e=I}}}e.filter(function(k){return!k.obj}).filter(Tt(Hc,this)||function(){return!0}).forEach(function(k){var z=k.x,X=k.y,W=k.lng,K=k.lat,Z=k.latLen,se=360/Math.pow(2,r.level);if(!k.obj){var Y=se*(1-r.tileMargin),oe=Z*(1-r.tileMargin),he=Qo(W),_e=Qo(-K),ye=new Sn(new Ea(Tt(is,r),Math.ceil(Y/r.curvatureResolution),Math.ceil(oe/r.curvatureResolution),Qo(90-Y/2)+he,Qo(Y),Qo(90-oe/2)+_e,Qo(oe)),new Zs);if(Tt(vo,r)){var Pe=[K+Z/2,K-Z/2].map(function(Rt){return .5-Rt/180}),qe=nc(Pe,2),Ye=qe[0],He=qe[1];aN(ye.geometry.attributes.uv,Ye,He)}k.obj=ye}k.loading||(k.loading=!0,new Yg().load(r.tileUrl(z,X,r.level),function(Rt){var pt=k.obj;pt&&(Rt.colorSpace=m1,pt.material.map=Rt,pt.material.color=null,pt.material.needsUpdate=!0,r.add(pt)),k.loading=!1}))})}}function dN(r,e,t=2){const n=e&&e.length,i=n?e[0]*t:r.length;let s=D7(r,0,i,t,!0);const o=[];if(!s||s.next===s.prev)return o;let u,h,d;if(n&&(s=vN(r,e,s,t)),r.length>80*t){u=r[0],h=r[1];let m=u,y=h;for(let x=t;x<i;x+=t){const b=r[x],T=r[x+1];b<u&&(u=b),T<h&&(h=T),b>m&&(m=b),T>y&&(y=T)}d=Math.max(m-u,y-h),d=d!==0?32767/d:0}return au(s,o,t,u,h,d,0),o}function D7(r,e,t,n,i){let s;if(i===CN(r,e,t,n)>0)for(let o=e;o<t;o+=n)s=Om(o/n|0,r[o],r[o+1],s);else for(let o=t-n;o>=e;o-=n)s=Om(o/n|0,r[o],r[o+1],s);return s&&FA(s,s.next)&&(lu(s),s=s.next),s}function wa(r,e){if(!r)return r;e||(e=r);let t=r,n;do if(n=!1,!t.steiner&&(FA(t,t.next)||gn(t.prev,t,t.next)===0)){if(lu(t),t=e=t.prev,t===t.next)break;n=!0}else t=t.next;while(n||t!==e);return e}function au(r,e,t,n,i,s,o){if(!r)return;!o&&s&&wN(r,n,i,s);let u=r;for(;r.prev!==r.next;){const h=r.prev,d=r.next;if(s?mN(r,n,i,s):pN(r)){e.push(h.i,r.i,d.i),lu(r),r=d.next,u=d.next;continue}if(r=d,r===u){o?o===1?(r=gN(wa(r),e),au(r,e,t,n,i,s,2)):o===2&&yN(r,e,t,n,i,s):au(wa(r),e,t,n,i,s,1);break}}}function pN(r){const e=r.prev,t=r,n=r.next;if(gn(e,t,n)>=0)return!1;const i=e.x,s=t.x,o=n.x,u=e.y,h=t.y,d=n.y,m=Math.min(i,s,o),y=Math.min(u,h,d),x=Math.max(i,s,o),b=Math.max(u,h,d);let T=n.next;for(;T!==e;){if(T.x>=m&&T.x<=x&&T.y>=y&&T.y<=b&&Bl(i,u,s,h,o,d,T.x,T.y)&&gn(T.prev,T,T.next)>=0)return!1;T=T.next}return!0}function mN(r,e,t,n){const i=r.prev,s=r,o=r.next;if(gn(i,s,o)>=0)return!1;const u=i.x,h=s.x,d=o.x,m=i.y,y=s.y,x=o.y,b=Math.min(u,h,d),T=Math.min(m,y,x),M=Math.max(u,h,d),N=Math.max(m,y,x),C=If(b,T,e,t,n),B=If(M,N,e,t,n);let P=r.prevZ,I=r.nextZ;for(;P&&P.z>=C&&I&&I.z<=B;){if(P.x>=b&&P.x<=M&&P.y>=T&&P.y<=N&&P!==i&&P!==o&&Bl(u,m,h,y,d,x,P.x,P.y)&&gn(P.prev,P,P.next)>=0||(P=P.prevZ,I.x>=b&&I.x<=M&&I.y>=T&&I.y<=N&&I!==i&&I!==o&&Bl(u,m,h,y,d,x,I.x,I.y)&&gn(I.prev,I,I.next)>=0))return!1;I=I.nextZ}for(;P&&P.z>=C;){if(P.x>=b&&P.x<=M&&P.y>=T&&P.y<=N&&P!==i&&P!==o&&Bl(u,m,h,y,d,x,P.x,P.y)&&gn(P.prev,P,P.next)>=0)return!1;P=P.prevZ}for(;I&&I.z<=B;){if(I.x>=b&&I.x<=M&&I.y>=T&&I.y<=N&&I!==i&&I!==o&&Bl(u,m,h,y,d,x,I.x,I.y)&&gn(I.prev,I,I.next)>=0)return!1;I=I.nextZ}return!0}function gN(r,e){let t=r;do{const n=t.prev,i=t.next.next;!FA(n,i)&&L7(n,t,t.next,i)&&Au(n,i)&&Au(i,n)&&(e.push(n.i,t.i,i.i),lu(t),lu(t.next),t=r=i),t=t.next}while(t!==r);return wa(t)}function yN(r,e,t,n,i,s){let o=r;do{let u=o.next.next;for(;u!==o.prev;){if(o.i!==u.i&&EN(o,u)){let h=I7(o,u);o=wa(o,o.next),h=wa(h,h.next),au(o,e,t,n,i,s,0),au(h,e,t,n,i,s,0);return}u=u.next}o=o.next}while(o!==r)}function vN(r,e,t,n){const i=[];for(let s=0,o=e.length;s<o;s++){const u=e[s]*n,h=s<o-1?e[s+1]*n:r.length,d=D7(r,u,h,n,!1);d===d.next&&(d.steiner=!0),i.push(MN(d))}i.sort(_N);for(let s=0;s<i.length;s++)t=xN(i[s],t);return t}function _N(r,e){let t=r.x-e.x;if(t===0&&(t=r.y-e.y,t===0)){const n=(r.next.y-r.y)/(r.next.x-r.x),i=(e.next.y-e.y)/(e.next.x-e.x);t=n-i}return t}function xN(r,e){const t=bN(r,e);if(!t)return e;const n=I7(t,r);return wa(n,n.next),wa(t,t.next)}function bN(r,e){let t=e;const n=r.x,i=r.y;let s=-1/0,o;if(FA(r,t))return t;do{if(FA(r,t.next))return t.next;if(i<=t.y&&i>=t.next.y&&t.next.y!==t.y){const y=t.x+(i-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(y<=n&&y>s&&(s=y,o=t.x<t.next.x?t:t.next,y===n))return o}t=t.next}while(t!==e);if(!o)return null;const u=o,h=o.x,d=o.y;let m=1/0;t=o;do{if(n>=t.x&&t.x>=h&&n!==t.x&&F7(i<d?n:s,i,h,d,i<d?s:n,i,t.x,t.y)){const y=Math.abs(i-t.y)/(n-t.x);Au(t,r)&&(y<m||y===m&&(t.x>o.x||t.x===o.x&&TN(o,t)))&&(o=t,m=y)}t=t.next}while(t!==u);return o}function TN(r,e){return gn(r.prev,r,e.prev)<0&&gn(e.next,r,r.next)<0}function wN(r,e,t,n){let i=r;do i.z===0&&(i.z=If(i.x,i.y,e,t,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==r);i.prevZ.nextZ=null,i.prevZ=null,SN(i)}function SN(r){let e,t=1;do{let n=r,i;r=null;let s=null;for(e=0;n;){e++;let o=n,u=0;for(let d=0;d<t&&(u++,o=o.nextZ,!!o);d++);let h=t;for(;u>0||h>0&&o;)u!==0&&(h===0||!o||n.z<=o.z)?(i=n,n=n.nextZ,u--):(i=o,o=o.nextZ,h--),s?s.nextZ=i:r=i,i.prevZ=s,s=i;n=o}s.nextZ=null,t*=2}while(e>1);return r}function If(r,e,t,n,i){return r=(r-t)*i|0,e=(e-n)*i|0,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,r|e<<1}function MN(r){let e=r,t=r;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==r);return t}function F7(r,e,t,n,i,s,o,u){return(i-o)*(e-u)>=(r-o)*(s-u)&&(r-o)*(n-u)>=(t-o)*(e-u)&&(t-o)*(s-u)>=(i-o)*(n-u)}function Bl(r,e,t,n,i,s,o,u){return!(r===o&&e===u)&&F7(r,e,t,n,i,s,o,u)}function EN(r,e){return r.next.i!==e.i&&r.prev.i!==e.i&&!NN(r,e)&&(Au(r,e)&&Au(e,r)&&RN(r,e)&&(gn(r.prev,r,e.prev)||gn(r,e.prev,e))||FA(r,e)&&gn(r.prev,r,r.next)>0&&gn(e.prev,e,e.next)>0)}function gn(r,e,t){return(e.y-r.y)*(t.x-e.x)-(e.x-r.x)*(t.y-e.y)}function FA(r,e){return r.x===e.x&&r.y===e.y}function L7(r,e,t,n){const i=u0(gn(r,e,t)),s=u0(gn(r,e,n)),o=u0(gn(t,n,r)),u=u0(gn(t,n,e));return!!(i!==s&&o!==u||i===0&&l0(r,t,e)||s===0&&l0(r,n,e)||o===0&&l0(t,r,n)||u===0&&l0(t,e,n))}function l0(r,e,t){return e.x<=Math.max(r.x,t.x)&&e.x>=Math.min(r.x,t.x)&&e.y<=Math.max(r.y,t.y)&&e.y>=Math.min(r.y,t.y)}function u0(r){return r>0?1:r<0?-1:0}function NN(r,e){let t=r;do{if(t.i!==r.i&&t.next.i!==r.i&&t.i!==e.i&&t.next.i!==e.i&&L7(t,t.next,r,e))return!0;t=t.next}while(t!==r);return!1}function Au(r,e){return gn(r.prev,r,r.next)<0?gn(r,e,r.next)>=0&&gn(r,r.prev,e)>=0:gn(r,e,r.prev)<0||gn(r,r.next,e)<0}function RN(r,e){let t=r,n=!1;const i=(r.x+e.x)/2,s=(r.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&i<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next;while(t!==r);return n}function I7(r,e){const t=qf(r.i,r.x,r.y),n=qf(e.i,e.x,e.y),i=r.next,s=e.prev;return r.next=e,e.prev=r,t.next=i,i.prev=t,n.next=t,t.prev=n,s.next=n,n.prev=s,n}function Om(r,e,t,n){const i=qf(r,e,t);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function lu(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function qf(r,e,t){return{i:r,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function CN(r,e,t,n){let i=0;for(let s=e,o=t-n;s<t;s+=n)i+=(r[o]-r[s])*(r[s+1]+r[o+1]),o=s;return i}function jc(r){const e=[],t=[],n=r[0][0].length;let i=0,s=0;for(const o of r){for(const u of o)for(let h=0;h<n;h++)e.push(u[h]);s&&(i+=s,t.push(i)),s=o.length}return{vertices:e,holes:t,dimensions:n}}function Of(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function PN(r){if(Array.isArray(r))return r}function BN(r){if(Array.isArray(r))return Of(r)}function DN(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function FN(r,e,t){return e=Wc(e),zN(r,q7()?Reflect.construct(e,[],Wc(r).constructor):e.apply(r,t))}function LN(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function IN(r,e,t){return Object.defineProperty(r,"prototype",{writable:!1}),r}function qN(r,e){var t=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=np(r))||e){t&&(r=t);var n=0,i=function(){};return{s:i,n:function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}},e:function(h){throw h},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s,o=!0,u=!1;return{s:function(){t=t.call(r)},n:function(){var h=t.next();return o=h.done,h},e:function(h){u=!0,s=h},f:function(){try{o||t.return==null||t.return()}finally{if(u)throw s}}}}function Wc(r){return Wc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Wc(r)}function ON(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&Uf(r,e)}function q7(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(q7=function(){return!!r})()}function UN(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function kN(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n,i,s,o,u=[],h=!0,d=!1;try{if(s=(t=t.call(r)).next,e===0){if(Object(t)!==t)return;h=!1}else for(;!(h=(n=s.call(t)).done)&&(u.push(n.value),u.length!==e);h=!0);}catch(m){d=!0,i=m}finally{try{if(!h&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(d)throw i}}return u}}function GN(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function VN(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zN(r,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return DN(r)}function Uf(r,e){return Uf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},Uf(r,e)}function al(r,e){return PN(r)||kN(r,e)||np(r,e)||GN()}function $N(r){return BN(r)||UN(r)||np(r)||VN()}function np(r,e){if(r){if(typeof r=="string")return Of(r,e);var t={}.toString.call(r).slice(8,-1);return t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set"?Array.from(r):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Of(r,e):void 0}}var Um=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,n=[],i=null;return e.forEach(function(s){if(i){var o=Do(s,i)*180/Math.PI;if(o>t)for(var u=Zd(i,s),h=i.length>2||s.length>2?su(i[2]||0,s[2]||0):null,d=h?function(x){return[].concat($N(u(x)),[h(x)])}:u,m=1/Math.ceil(o/t),y=m;y<1;)n.push(d(y)),y+=m}n.push(i=s)}),n},kf=typeof window<"u"&&window.THREE?window.THREE:{BufferGeometry:bi,Float32BufferAttribute:Bo},HN=new kf.BufferGeometry().setAttribute?"setAttribute":"addAttribute",O7=(function(r){function e(t){var n,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:5;LN(this,e),n=FN(this,e),n.type="GeoJsonGeometry",n.parameters={geoJson:t,radius:i,resolution:s};var o=({Point:m,MultiPoint:y,LineString:x,MultiLineString:b,Polygon:T,MultiPolygon:M}[t.type]||function(){return[]})(t.coordinates,i),u=[],h=[],d=0;o.forEach(function(N){var C=u.length;Al({indices:u,vertices:h},N),n.addGroup(C,u.length-C,d++)}),u.length&&n.setIndex(u),h.length&&n[HN]("position",new kf.Float32BufferAttribute(h,3));function m(N,C){var B=W2(N[1],N[0],C+(N[2]||0)),P=[];return[{vertices:B,indices:P}]}function y(N,C){var B={vertices:[],indices:[]};return N.map(function(P){return m(P,C)}).forEach(function(P){var I=al(P,1),D=I[0];Al(B,D)}),[B]}function x(N,C){for(var B=Um(N,s).map(function(k){var z=al(k,3),X=z[0],W=z[1],K=z[2],Z=K===void 0?0:K;return W2(W,X,C+Z)}),P=jc([B]),I=P.vertices,D=Math.round(I.length/3),q=[],O=1;O<D;O++)q.push(O-1,O);return[{vertices:I,indices:q}]}function b(N,C){var B={vertices:[],indices:[]};return N.map(function(P){return x(P,C)}).forEach(function(P){var I=al(P,1),D=I[0];Al(B,D)}),[B]}function T(N,C){for(var B=N.map(function(Y){return Um(Y,s).map(function(oe){var he=al(oe,3),_e=he[0],ye=he[1],Pe=he[2],qe=Pe===void 0?0:Pe;return W2(ye,_e,C+qe)})}),P=jc(B),I=P.vertices,D=P.holes,q=D[0]||1/0,O=I.slice(0,q*3),k=I.slice(q*3),z=new Set(D),X=Math.round(I.length/3),W=[],K=[],Z=1;Z<X;Z++)z.has(Z)||(Z<q?W.push(Z-1,Z):K.push(Z-1-q,Z-q));var se=[{indices:W,vertices:O}];return D.length&&se.push({indices:K,vertices:k}),se}function M(N,C){var B={vertices:[],indices:[]},P={vertices:[],indices:[]};N.map(function(D){return T(D,C)}).forEach(function(D){var q=al(D,2),O=q[0],k=q[1];Al(B,O),k&&Al(P,k)});var I=[B];return P.vertices.length&&I.push(P),I}return n}return ON(e,r),IN(e)})(kf.BufferGeometry);function Al(r,e){var t=Math.round(r.vertices.length/3);km(r.vertices,e.vertices),km(r.indices,e.indices.map(function(n){return n+t}))}function km(r,e){var t=qN(e),n;try{for(t.s();!(n=t.n()).done;){var i=n.value;r.push(i)}}catch(s){t.e(s)}finally{t.f()}}function W2(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=(90-r)*Math.PI/180,i=(90-e)*Math.PI/180;return[t*Math.sin(n)*Math.cos(i),t*Math.cos(n),t*Math.sin(n)*Math.sin(i)]}function jN(r,e,t=!0){if(!e||!e.isReady)throw new Error("BufferGeometryUtils: Initialized MikkTSpace library required.");if(!r.hasAttribute("position")||!r.hasAttribute("normal")||!r.hasAttribute("uv"))throw new Error('BufferGeometryUtils: Tangents require "position", "normal", and "uv" attributes.');function n(o){if(o.normalized||o.isInterleavedBufferAttribute){const u=new Float32Array(o.count*o.itemSize);for(let h=0,d=0;h<o.count;h++)u[d++]=o.getX(h),u[d++]=o.getY(h),o.itemSize>2&&(u[d++]=o.getZ(h));return u}return o.array instanceof Float32Array?o.array:new Float32Array(o.array)}const i=r.index?r.toNonIndexed():r,s=e.generateTangents(n(i.attributes.position),n(i.attributes.normal),n(i.attributes.uv));if(t)for(let o=3;o<s.length;o+=4)s[o]*=-1;return i.setAttribute("tangent",new Ui(s,4)),r!==i&&r.copy(i),r}function WN(r,e=!1){const t=r[0].index!==null,n=new Set(Object.keys(r[0].attributes)),i=new Set(Object.keys(r[0].morphAttributes)),s={},o={},u=r[0].morphTargetsRelative,h=new bi;let d=0;for(let m=0;m<r.length;++m){const y=r[m];let x=0;if(t!==(y.index!==null))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+m+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(const b in y.attributes){if(!n.has(b))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+m+'. All geometries must have compatible attributes; make sure "'+b+'" attribute exists among all geometries, or in none of them.'),null;s[b]===void 0&&(s[b]=[]),s[b].push(y.attributes[b]),x++}if(x!==n.size)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+m+". Make sure all geometries have the same number of attributes."),null;if(u!==y.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+m+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(const b in y.morphAttributes){if(!i.has(b))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+m+".  .morphAttributes must be consistent throughout all geometries."),null;o[b]===void 0&&(o[b]=[]),o[b].push(y.morphAttributes[b])}if(e){let b;if(t)b=y.index.count;else if(y.attributes.position!==void 0)b=y.attributes.position.count;else return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+m+". The geometry must have either an index or a position attribute"),null;h.addGroup(d,b,m),d+=b}}if(t){let m=0;const y=[];for(let x=0;x<r.length;++x){const b=r[x].index;for(let T=0;T<b.count;++T)y.push(b.getX(T)+m);m+=r[x].attributes.position.count}h.setIndex(y)}for(const m in s){const y=Gf(s[m]);if(!y)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the "+m+" attribute."),null;h.setAttribute(m,y)}for(const m in o){const y=o[m][0].length;if(y===0)break;h.morphAttributes=h.morphAttributes||{},h.morphAttributes[m]=[];for(let x=0;x<y;++x){const b=[];for(let M=0;M<o[m].length;++M)b.push(o[m][M][x]);const T=Gf(b);if(!T)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the "+m+" morphAttribute."),null;h.morphAttributes[m].push(T)}}return h}function Gf(r){let e,t,n,i=-1,s=0;for(let d=0;d<r.length;++d){const m=r[d];if(e===void 0&&(e=m.array.constructor),e!==m.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(t===void 0&&(t=m.itemSize),t!==m.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(n===void 0&&(n=m.normalized),n!==m.normalized)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;if(i===-1&&(i=m.gpuType),i!==m.gpuType)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.gpuType must be consistent across matching attributes."),null;s+=m.count*t}const o=new e(s),u=new Ui(o,t,n);let h=0;for(let d=0;d<r.length;++d){const m=r[d];if(m.isInterleavedBufferAttribute){const y=h/t;for(let x=0,b=m.count;x<b;x++)for(let T=0;T<t;T++){const M=m.getComponent(x,T);u.setComponent(x+y,T,M)}}else o.set(m.array,h);h+=m.count*t}return i!==void 0&&(u.gpuType=i),u}function QN(r){return r.isInstancedInterleavedBufferAttribute||r.isInterleavedBufferAttribute?Qc(r):r.isInstancedBufferAttribute?new So().copy(r):new Ui().copy(r)}function XN(r){let e,t=0,n=0;for(let d=0,m=r.length;d<m;++d){const y=r[d];if(e===void 0&&(e=y.array.constructor),e!==y.array.constructor)return console.error("AttributeBuffers of different types cannot be interleaved"),null;t+=y.array.length,n+=y.itemSize}const i=new Kg(new e(t),n);let s=0;const o=[],u=["getX","getY","getZ","getW"],h=["setX","setY","setZ","setW"];for(let d=0,m=r.length;d<m;d++){const y=r[d],x=y.itemSize,b=y.count,T=new To(i,x,s,y.normalized);o.push(T),s+=x;for(let M=0;M<b;M++)for(let N=0;N<x;N++)T[h[N]](M,y[u[N]](M))}return o}function Qc(r){const e=r.data.array.constructor,t=r.count,n=r.itemSize,i=r.normalized,s=new e(t*n);let o;r.isInstancedInterleavedBufferAttribute?o=new So(s,n,i,r.meshPerAttribute):o=new Ui(s,n,i);for(let u=0;u<t;u++)o.setX(u,r.getX(u)),n>=2&&o.setY(u,r.getY(u)),n>=3&&o.setZ(u,r.getZ(u)),n>=4&&o.setW(u,r.getW(u));return o}function YN(r){const e=r.attributes,t=r.morphTargets,n=new Map;for(const i in e){const s=e[i];s.isInterleavedBufferAttribute&&(n.has(s)||n.set(s,Qc(s)),e[i]=n.get(s))}for(const i in t){const s=t[i];s.isInterleavedBufferAttribute&&(n.has(s)||n.set(s,Qc(s)),t[i]=n.get(s))}}function KN(r){let e=0;for(const n in r.attributes){const i=r.getAttribute(n);e+=i.count*i.itemSize*i.array.BYTES_PER_ELEMENT}const t=r.getIndex();return e+=t?t.count*t.itemSize*t.array.BYTES_PER_ELEMENT:0,e}function ZN(r,e=1e-4){e=Math.max(e,Number.EPSILON);const t={},n=r.getIndex(),i=r.getAttribute("position"),s=n?n.count:i.count;let o=0;const u=Object.keys(r.attributes),h={},d={},m=[],y=["getX","getY","getZ","getW"],x=["setX","setY","setZ","setW"];for(let B=0,P=u.length;B<P;B++){const I=u[B],D=r.attributes[I];h[I]=new D.constructor(new D.array.constructor(D.count*D.itemSize),D.itemSize,D.normalized);const q=r.morphAttributes[I];q&&(d[I]||(d[I]=[]),q.forEach((O,k)=>{const z=new O.array.constructor(O.count*O.itemSize);d[I][k]=new O.constructor(z,O.itemSize,O.normalized)}))}const b=e*.5,T=Math.log10(1/e),M=Math.pow(10,T),N=b*M;for(let B=0;B<s;B++){const P=n?n.getX(B):B;let I="";for(let D=0,q=u.length;D<q;D++){const O=u[D],k=r.getAttribute(O),z=k.itemSize;for(let X=0;X<z;X++)I+=`${~~(k[y[X]](P)*M+N)},`}if(I in t)m.push(t[I]);else{for(let D=0,q=u.length;D<q;D++){const O=u[D],k=r.getAttribute(O),z=r.morphAttributes[O],X=k.itemSize,W=h[O],K=d[O];for(let Z=0;Z<X;Z++){const se=y[Z],Y=x[Z];if(W[Y](o,k[se](P)),z)for(let oe=0,he=z.length;oe<he;oe++)K[oe][Y](o,z[oe][se](P))}}t[I]=o,m.push(o),o++}}const C=r.clone();for(const B in r.attributes){const P=h[B];if(C.setAttribute(B,new P.constructor(P.array.slice(0,o*P.itemSize),P.itemSize,P.normalized)),B in d)for(let I=0;I<d[B].length;I++){const D=d[B][I];C.morphAttributes[B][I]=new D.constructor(D.array.slice(0,o*D.itemSize),D.itemSize,D.normalized)}}return C.setIndex(m),C}function JN(r,e){if(e===mT)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),r;if(e===C4||e===gT){let t=r.getIndex();if(t===null){const o=[],u=r.getAttribute("position");if(u!==void 0){for(let h=0;h<u.count;h++)o.push(h);r.setIndex(o),t=r.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),r}const n=t.count-2,i=[];if(e===C4)for(let o=1;o<=n;o++)i.push(t.getX(0)),i.push(t.getX(o)),i.push(t.getX(o+1));else for(let o=0;o<n;o++)o%2===0?(i.push(t.getX(o)),i.push(t.getX(o+1)),i.push(t.getX(o+2))):(i.push(t.getX(o+2)),i.push(t.getX(o+1)),i.push(t.getX(o)));i.length/3!==n&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=r.clone();return s.setIndex(i),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),r}function eR(r){const e=new Re,t=new Re,n=new Re,i=new Re,s=new Re,o=new Re,u=new Re,h=new Re,d=new Re;function m(ye,Pe,qe,Ye,He,Rt,pt,Nt){e.fromBufferAttribute(Pe,He),t.fromBufferAttribute(Pe,Rt),n.fromBufferAttribute(Pe,pt);const It=ye.morphTargetInfluences;if(qe&&It){u.set(0,0,0),h.set(0,0,0),d.set(0,0,0);for(let dn=0,Nn=qe.length;dn<Nn;dn++){const sn=It[dn],Bn=qe[dn];sn!==0&&(i.fromBufferAttribute(Bn,He),s.fromBufferAttribute(Bn,Rt),o.fromBufferAttribute(Bn,pt),Ye?(u.addScaledVector(i,sn),h.addScaledVector(s,sn),d.addScaledVector(o,sn)):(u.addScaledVector(i.sub(e),sn),h.addScaledVector(s.sub(t),sn),d.addScaledVector(o.sub(n),sn)))}e.add(u),t.add(h),n.add(d)}ye.isSkinnedMesh&&(ye.applyBoneTransform(He,e),ye.applyBoneTransform(Rt,t),ye.applyBoneTransform(pt,n)),Nt[He*3+0]=e.x,Nt[He*3+1]=e.y,Nt[He*3+2]=e.z,Nt[Rt*3+0]=t.x,Nt[Rt*3+1]=t.y,Nt[Rt*3+2]=t.z,Nt[pt*3+0]=n.x,Nt[pt*3+1]=n.y,Nt[pt*3+2]=n.z}const y=r.geometry,x=r.material;let b,T,M;const N=y.index,C=y.attributes.position,B=y.morphAttributes.position,P=y.morphTargetsRelative,I=y.attributes.normal,D=y.morphAttributes.position,q=y.groups,O=y.drawRange;let k,z,X,W,K,Z,se;const Y=new Float32Array(C.count*C.itemSize),oe=new Float32Array(I.count*I.itemSize);if(N!==null)if(Array.isArray(x))for(k=0,X=q.length;k<X;k++)for(K=q[k],Z=Math.max(K.start,O.start),se=Math.min(K.start+K.count,O.start+O.count),z=Z,W=se;z<W;z+=3)b=N.getX(z),T=N.getX(z+1),M=N.getX(z+2),m(r,C,B,P,b,T,M,Y),m(r,I,D,P,b,T,M,oe);else for(Z=Math.max(0,O.start),se=Math.min(N.count,O.start+O.count),k=Z,X=se;k<X;k+=3)b=N.getX(k),T=N.getX(k+1),M=N.getX(k+2),m(r,C,B,P,b,T,M,Y),m(r,I,D,P,b,T,M,oe);else if(Array.isArray(x))for(k=0,X=q.length;k<X;k++)for(K=q[k],Z=Math.max(K.start,O.start),se=Math.min(K.start+K.count,O.start+O.count),z=Z,W=se;z<W;z+=3)b=z,T=z+1,M=z+2,m(r,C,B,P,b,T,M,Y),m(r,I,D,P,b,T,M,oe);else for(Z=Math.max(0,O.start),se=Math.min(C.count,O.start+O.count),k=Z,X=se;k<X;k+=3)b=k,T=k+1,M=k+2,m(r,C,B,P,b,T,M,Y),m(r,I,D,P,b,T,M,oe);const he=new Bo(Y,3),_e=new Bo(oe,3);return{positionAttribute:C,normalAttribute:I,morphedPositionAttribute:he,morphedNormalAttribute:_e}}function tR(r){if(r.groups.length===0)return console.warn("THREE.BufferGeometryUtils.mergeGroups(): No groups are defined. Nothing to merge."),r;let e=r.groups;if(e=e.sort((o,u)=>o.materialIndex!==u.materialIndex?o.materialIndex-u.materialIndex:o.start-u.start),r.getIndex()===null){const o=r.getAttribute("position"),u=[];for(let h=0;h<o.count;h+=3)u.push(h,h+1,h+2);r.setIndex(u)}const t=r.getIndex(),n=[];for(let o=0;o<e.length;o++){const u=e[o],h=u.start,d=h+u.count;for(let m=h;m<d;m++)n.push(t.getX(m))}r.dispose(),r.setIndex(n);let i=0;for(let o=0;o<e.length;o++){const u=e[o];u.start=i,i+=u.count}let s=e[0];r.groups=[s];for(let o=1;o<e.length;o++){const u=e[o];s.materialIndex===u.materialIndex?s.count+=u.count:(s=u,r.groups.push(s))}return r}function nR(r,e=Math.PI/3){const t=Math.cos(e),n=(1+1e-10)*100,i=[new Re,new Re,new Re],s=new Re,o=new Re,u=new Re,h=new Re;function d(M){const N=~~(M.x*n),C=~~(M.y*n),B=~~(M.z*n);return`${N},${C},${B}`}const m=r.index?r.toNonIndexed():r,y=m.attributes.position,x={};for(let M=0,N=y.count/3;M<N;M++){const C=3*M,B=i[0].fromBufferAttribute(y,C+0),P=i[1].fromBufferAttribute(y,C+1),I=i[2].fromBufferAttribute(y,C+2);s.subVectors(I,P),o.subVectors(B,P);const D=new Re().crossVectors(s,o).normalize();for(let q=0;q<3;q++){const O=i[q],k=d(O);k in x||(x[k]=[]),x[k].push(D)}}const b=new Float32Array(y.count*3),T=new Ui(b,3,!1);for(let M=0,N=y.count/3;M<N;M++){const C=3*M,B=i[0].fromBufferAttribute(y,C+0),P=i[1].fromBufferAttribute(y,C+1),I=i[2].fromBufferAttribute(y,C+2);s.subVectors(I,P),o.subVectors(B,P),u.crossVectors(s,o).normalize();for(let D=0;D<3;D++){const q=i[D],O=d(q),k=x[O];h.set(0,0,0);for(let z=0,X=k.length;z<X;z++){const W=k[z];u.dot(W)>t&&h.add(W)}h.normalize(),T.setXYZ(C+D,h.x,h.y,h.z)}}return m.setAttribute("normal",T),m}const rp=Object.freeze(Object.defineProperty({__proto__:null,computeMikkTSpaceTangents:jN,computeMorphedAttributes:eR,deepCloneAttribute:QN,deinterleaveAttribute:Qc,deinterleaveGeometry:YN,estimateBytesUsed:KN,interleaveAttributes:XN,mergeAttributes:Gf,mergeGeometries:WN,mergeGroups:tR,mergeVertices:ZN,toCreasedNormals:nR,toTrianglesDrawMode:JN},Symbol.toStringTag,{value:"Module"}));var Te=(function(r){return typeof r=="function"?r:typeof r=="string"?function(e){return e[r]}:function(e){return r}});function Xc(r){"@babel/helpers - typeof";return Xc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xc(r)}var rR=/^\s+/,iR=/\s+$/;function Qe(r,e){if(r=r||"",e=e||{},r instanceof Qe)return r;if(!(this instanceof Qe))return new Qe(r,e);var t=sR(r);this._originalInput=r,this._r=t.r,this._g=t.g,this._b=t.b,this._a=t.a,this._roundA=Math.round(100*this._a)/100,this._format=e.format||t.format,this._gradientType=e.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=t.ok}Qe.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},getLuminance:function(){var e=this.toRgb(),t,n,i,s,o,u;return t=e.r/255,n=e.g/255,i=e.b/255,t<=.03928?s=t/12.92:s=Math.pow((t+.055)/1.055,2.4),n<=.03928?o=n/12.92:o=Math.pow((n+.055)/1.055,2.4),i<=.03928?u=i/12.92:u=Math.pow((i+.055)/1.055,2.4),.2126*s+.7152*o+.0722*u},setAlpha:function(e){return this._a=U7(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=Vm(this._r,this._g,this._b);return{h:e.h*360,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=Vm(this._r,this._g,this._b),t=Math.round(e.h*360),n=Math.round(e.s*100),i=Math.round(e.v*100);return this._a==1?"hsv("+t+", "+n+"%, "+i+"%)":"hsva("+t+", "+n+"%, "+i+"%, "+this._roundA+")"},toHsl:function(){var e=Gm(this._r,this._g,this._b);return{h:e.h*360,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=Gm(this._r,this._g,this._b),t=Math.round(e.h*360),n=Math.round(e.s*100),i=Math.round(e.l*100);return this._a==1?"hsl("+t+", "+n+"%, "+i+"%)":"hsla("+t+", "+n+"%, "+i+"%, "+this._roundA+")"},toHex:function(e){return zm(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return lR(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(hn(this._r,255)*100)+"%",g:Math.round(hn(this._g,255)*100)+"%",b:Math.round(hn(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(hn(this._r,255)*100)+"%, "+Math.round(hn(this._g,255)*100)+"%, "+Math.round(hn(this._b,255)*100)+"%)":"rgba("+Math.round(hn(this._r,255)*100)+"%, "+Math.round(hn(this._g,255)*100)+"%, "+Math.round(hn(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:xR[zm(this._r,this._g,this._b,!0)]||!1},toFilter:function(e){var t="#"+$m(this._r,this._g,this._b,this._a),n=t,i=this._gradientType?"GradientType = 1, ":"";if(e){var s=Qe(e);n="#"+$m(s._r,s._g,s._b,s._a)}return"progid:DXImageTransform.Microsoft.gradient("+i+"startColorstr="+t+",endColorstr="+n+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,i=this._a<1&&this._a>=0,s=!t&&i&&(e==="hex"||e==="hex6"||e==="hex3"||e==="hex4"||e==="hex8"||e==="name");return s?e==="name"&&this._a===0?this.toName():this.toRgbString():(e==="rgb"&&(n=this.toRgbString()),e==="prgb"&&(n=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(n=this.toHexString()),e==="hex3"&&(n=this.toHexString(!0)),e==="hex4"&&(n=this.toHex8String(!0)),e==="hex8"&&(n=this.toHex8String()),e==="name"&&(n=this.toName()),e==="hsl"&&(n=this.toHslString()),e==="hsv"&&(n=this.toHsvString()),n||this.toHexString())},clone:function(){return Qe(this.toString())},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(fR,arguments)},brighten:function(){return this._applyModification(dR,arguments)},darken:function(){return this._applyModification(pR,arguments)},desaturate:function(){return this._applyModification(uR,arguments)},saturate:function(){return this._applyModification(cR,arguments)},greyscale:function(){return this._applyModification(hR,arguments)},spin:function(){return this._applyModification(mR,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(vR,arguments)},complement:function(){return this._applyCombination(gR,arguments)},monochromatic:function(){return this._applyCombination(_R,arguments)},splitcomplement:function(){return this._applyCombination(yR,arguments)},triad:function(){return this._applyCombination(Hm,[3])},tetrad:function(){return this._applyCombination(Hm,[4])}};Qe.fromRatio=function(r,e){if(Xc(r)=="object"){var t={};for(var n in r)r.hasOwnProperty(n)&&(n==="a"?t[n]=r[n]:t[n]=Dl(r[n]));r=t}return Qe(r,e)};function sR(r){var e={r:0,g:0,b:0},t=1,n=null,i=null,s=null,o=!1,u=!1;return typeof r=="string"&&(r=SR(r)),Xc(r)=="object"&&(Ns(r.r)&&Ns(r.g)&&Ns(r.b)?(e=oR(r.r,r.g,r.b),o=!0,u=String(r.r).substr(-1)==="%"?"prgb":"rgb"):Ns(r.h)&&Ns(r.s)&&Ns(r.v)?(n=Dl(r.s),i=Dl(r.v),e=AR(r.h,n,i),o=!0,u="hsv"):Ns(r.h)&&Ns(r.s)&&Ns(r.l)&&(n=Dl(r.s),s=Dl(r.l),e=aR(r.h,n,s),o=!0,u="hsl"),r.hasOwnProperty("a")&&(t=r.a)),t=U7(t),{ok:o,format:r.format||u,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:t}}function oR(r,e,t){return{r:hn(r,255)*255,g:hn(e,255)*255,b:hn(t,255)*255}}function Gm(r,e,t){r=hn(r,255),e=hn(e,255),t=hn(t,255);var n=Math.max(r,e,t),i=Math.min(r,e,t),s,o,u=(n+i)/2;if(n==i)s=o=0;else{var h=n-i;switch(o=u>.5?h/(2-n-i):h/(n+i),n){case r:s=(e-t)/h+(e<t?6:0);break;case e:s=(t-r)/h+2;break;case t:s=(r-e)/h+4;break}s/=6}return{h:s,s:o,l:u}}function aR(r,e,t){var n,i,s;r=hn(r,360),e=hn(e,100),t=hn(t,100);function o(d,m,y){return y<0&&(y+=1),y>1&&(y-=1),y<1/6?d+(m-d)*6*y:y<1/2?m:y<2/3?d+(m-d)*(2/3-y)*6:d}if(e===0)n=i=s=t;else{var u=t<.5?t*(1+e):t+e-t*e,h=2*t-u;n=o(h,u,r+1/3),i=o(h,u,r),s=o(h,u,r-1/3)}return{r:n*255,g:i*255,b:s*255}}function Vm(r,e,t){r=hn(r,255),e=hn(e,255),t=hn(t,255);var n=Math.max(r,e,t),i=Math.min(r,e,t),s,o,u=n,h=n-i;if(o=n===0?0:h/n,n==i)s=0;else{switch(n){case r:s=(e-t)/h+(e<t?6:0);break;case e:s=(t-r)/h+2;break;case t:s=(r-e)/h+4;break}s/=6}return{h:s,s:o,v:u}}function AR(r,e,t){r=hn(r,360)*6,e=hn(e,100),t=hn(t,100);var n=Math.floor(r),i=r-n,s=t*(1-e),o=t*(1-i*e),u=t*(1-(1-i)*e),h=n%6,d=[t,o,s,s,u,t][h],m=[u,t,t,o,s,s][h],y=[s,s,u,t,t,o][h];return{r:d*255,g:m*255,b:y*255}}function zm(r,e,t,n){var i=[Oi(Math.round(r).toString(16)),Oi(Math.round(e).toString(16)),Oi(Math.round(t).toString(16))];return n&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function lR(r,e,t,n,i){var s=[Oi(Math.round(r).toString(16)),Oi(Math.round(e).toString(16)),Oi(Math.round(t).toString(16)),Oi(k7(n))];return i&&s[0].charAt(0)==s[0].charAt(1)&&s[1].charAt(0)==s[1].charAt(1)&&s[2].charAt(0)==s[2].charAt(1)&&s[3].charAt(0)==s[3].charAt(1)?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0)+s[3].charAt(0):s.join("")}function $m(r,e,t,n){var i=[Oi(k7(n)),Oi(Math.round(r).toString(16)),Oi(Math.round(e).toString(16)),Oi(Math.round(t).toString(16))];return i.join("")}Qe.equals=function(r,e){return!r||!e?!1:Qe(r).toRgbString()==Qe(e).toRgbString()};Qe.random=function(){return Qe.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function uR(r,e){e=e===0?0:e||10;var t=Qe(r).toHsl();return t.s-=e/100,t.s=w1(t.s),Qe(t)}function cR(r,e){e=e===0?0:e||10;var t=Qe(r).toHsl();return t.s+=e/100,t.s=w1(t.s),Qe(t)}function hR(r){return Qe(r).desaturate(100)}function fR(r,e){e=e===0?0:e||10;var t=Qe(r).toHsl();return t.l+=e/100,t.l=w1(t.l),Qe(t)}function dR(r,e){e=e===0?0:e||10;var t=Qe(r).toRgb();return t.r=Math.max(0,Math.min(255,t.r-Math.round(255*-(e/100)))),t.g=Math.max(0,Math.min(255,t.g-Math.round(255*-(e/100)))),t.b=Math.max(0,Math.min(255,t.b-Math.round(255*-(e/100)))),Qe(t)}function pR(r,e){e=e===0?0:e||10;var t=Qe(r).toHsl();return t.l-=e/100,t.l=w1(t.l),Qe(t)}function mR(r,e){var t=Qe(r).toHsl(),n=(t.h+e)%360;return t.h=n<0?360+n:n,Qe(t)}function gR(r){var e=Qe(r).toHsl();return e.h=(e.h+180)%360,Qe(e)}function Hm(r,e){if(isNaN(e)||e<=0)throw new Error("Argument to polyad must be a positive number");for(var t=Qe(r).toHsl(),n=[Qe(r)],i=360/e,s=1;s<e;s++)n.push(Qe({h:(t.h+s*i)%360,s:t.s,l:t.l}));return n}function yR(r){var e=Qe(r).toHsl(),t=e.h;return[Qe(r),Qe({h:(t+72)%360,s:e.s,l:e.l}),Qe({h:(t+216)%360,s:e.s,l:e.l})]}function vR(r,e,t){e=e||6,t=t||30;var n=Qe(r).toHsl(),i=360/t,s=[Qe(r)];for(n.h=(n.h-(i*e>>1)+720)%360;--e;)n.h=(n.h+i)%360,s.push(Qe(n));return s}function _R(r,e){e=e||6;for(var t=Qe(r).toHsv(),n=t.h,i=t.s,s=t.v,o=[],u=1/e;e--;)o.push(Qe({h:n,s:i,v:s})),s=(s+u)%1;return o}Qe.mix=function(r,e,t){t=t===0?0:t||50;var n=Qe(r).toRgb(),i=Qe(e).toRgb(),s=t/100,o={r:(i.r-n.r)*s+n.r,g:(i.g-n.g)*s+n.g,b:(i.b-n.b)*s+n.b,a:(i.a-n.a)*s+n.a};return Qe(o)};Qe.readability=function(r,e){var t=Qe(r),n=Qe(e);return(Math.max(t.getLuminance(),n.getLuminance())+.05)/(Math.min(t.getLuminance(),n.getLuminance())+.05)};Qe.isReadable=function(r,e,t){var n=Qe.readability(r,e),i,s;switch(s=!1,i=MR(t),i.level+i.size){case"AAsmall":case"AAAlarge":s=n>=4.5;break;case"AAlarge":s=n>=3;break;case"AAAsmall":s=n>=7;break}return s};Qe.mostReadable=function(r,e,t){var n=null,i=0,s,o,u,h;t=t||{},o=t.includeFallbackColors,u=t.level,h=t.size;for(var d=0;d<e.length;d++)s=Qe.readability(r,e[d]),s>i&&(i=s,n=Qe(e[d]));return Qe.isReadable(r,n,{level:u,size:h})||!o?n:(t.includeFallbackColors=!1,Qe.mostReadable(r,["#fff","#000"],t))};var Vf=Qe.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},xR=Qe.hexNames=bR(Vf);function bR(r){var e={};for(var t in r)r.hasOwnProperty(t)&&(e[r[t]]=t);return e}function U7(r){return r=parseFloat(r),(isNaN(r)||r<0||r>1)&&(r=1),r}function hn(r,e){TR(r)&&(r="100%");var t=wR(r);return r=Math.min(e,Math.max(0,parseFloat(r))),t&&(r=parseInt(r*e,10)/100),Math.abs(r-e)<1e-6?1:r%e/parseFloat(e)}function w1(r){return Math.min(1,Math.max(0,r))}function Vr(r){return parseInt(r,16)}function TR(r){return typeof r=="string"&&r.indexOf(".")!=-1&&parseFloat(r)===1}function wR(r){return typeof r=="string"&&r.indexOf("%")!=-1}function Oi(r){return r.length==1?"0"+r:""+r}function Dl(r){return r<=1&&(r=r*100+"%"),r}function k7(r){return Math.round(parseFloat(r)*255).toString(16)}function jm(r){return Vr(r)/255}var Pi=(function(){var r="[-\\+]?\\d+%?",e="[-\\+]?\\d*\\.\\d+%?",t="(?:"+e+")|(?:"+r+")",n="[\\s|\\(]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")\\s*\\)?",i="[\\s|\\(]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")\\s*\\)?";return{CSS_UNIT:new RegExp(t),rgb:new RegExp("rgb"+n),rgba:new RegExp("rgba"+i),hsl:new RegExp("hsl"+n),hsla:new RegExp("hsla"+i),hsv:new RegExp("hsv"+n),hsva:new RegExp("hsva"+i),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}})();function Ns(r){return!!Pi.CSS_UNIT.exec(r)}function SR(r){r=r.replace(rR,"").replace(iR,"").toLowerCase();var e=!1;if(Vf[r])r=Vf[r],e=!0;else if(r=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var t;return(t=Pi.rgb.exec(r))?{r:t[1],g:t[2],b:t[3]}:(t=Pi.rgba.exec(r))?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=Pi.hsl.exec(r))?{h:t[1],s:t[2],l:t[3]}:(t=Pi.hsla.exec(r))?{h:t[1],s:t[2],l:t[3],a:t[4]}:(t=Pi.hsv.exec(r))?{h:t[1],s:t[2],v:t[3]}:(t=Pi.hsva.exec(r))?{h:t[1],s:t[2],v:t[3],a:t[4]}:(t=Pi.hex8.exec(r))?{r:Vr(t[1]),g:Vr(t[2]),b:Vr(t[3]),a:jm(t[4]),format:e?"name":"hex8"}:(t=Pi.hex6.exec(r))?{r:Vr(t[1]),g:Vr(t[2]),b:Vr(t[3]),format:e?"name":"hex"}:(t=Pi.hex4.exec(r))?{r:Vr(t[1]+""+t[1]),g:Vr(t[2]+""+t[2]),b:Vr(t[3]+""+t[3]),a:jm(t[4]+""+t[4]),format:e?"name":"hex8"}:(t=Pi.hex3.exec(r))?{r:Vr(t[1]+""+t[1]),g:Vr(t[2]+""+t[2]),b:Vr(t[3]+""+t[3]),format:e?"name":"hex"}:!1}function MR(r){var e,t;return r=r||{level:"AA",size:"small"},e=(r.level||"AA").toUpperCase(),t=(r.size||"small").toLowerCase(),e!=="AA"&&e!=="AAA"&&(e="AA"),t!=="small"&&t!=="large"&&(t="small"),{level:e,size:t}}function zf(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function ER(r){if(Array.isArray(r))return r}function NR(r){if(Array.isArray(r))return zf(r)}function G7(r,e,t){if(typeof r=="function"?r===e:r.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}function RR(r,e){if(e.has(r))throw new TypeError("Cannot initialize the same private elements twice on an object")}function CR(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function ar(r,e){return r.get(G7(r,e))}function Wa(r,e,t){RR(r,e),e.set(r,t)}function c0(r,e,t){return r.set(G7(r,e),t),t}function PR(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,kR(n.key),n)}}function BR(r,e,t){return e&&PR(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r}function DR(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function FR(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n,i,s,o,u=[],h=!0,d=!1;try{if(s=(t=t.call(r)).next,e!==0)for(;!(h=(n=s.call(t)).done)&&(u.push(n.value),u.length!==e);h=!0);}catch(m){d=!0,i=m}finally{try{if(!h&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(d)throw i}}return u}}function LR(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function IR(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qR(r,e){return ER(r)||FR(r,e)||V7(r,e)||LR()}function OR(r){return NR(r)||DR(r)||V7(r)||IR()}function UR(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}function kR(r){var e=UR(r,"string");return typeof e=="symbol"?e:e+""}function V7(r,e){if(r){if(typeof r=="string")return zf(r,e);var t={}.toString.call(r).slice(8,-1);return t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set"?Array.from(r):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?zf(r,e):void 0}}var Qa=new WeakMap,ll=new WeakMap,Xa=new WeakMap,Q2=new WeakMap,X2=new WeakMap,Y2=new WeakMap,GR=(function(){function r(){CR(this,r),Wa(this,Qa,new Map),Wa(this,ll,new Map),Wa(this,Xa,function(e){return e}),Wa(this,Q2,function(){return{}}),Wa(this,X2,function(){}),Wa(this,Y2,function(){})}return BR(r,[{key:"getObj",value:function(t){return ar(Qa,this).get(ar(Xa,this).call(this,t))}},{key:"getData",value:function(t){return ar(ll,this).get(t)}},{key:"entries",value:function(){return OR(ar(ll,this).entries()).map(function(t){var n=qR(t,2),i=n[0],s=n[1];return[s,i]})}},{key:"id",value:function(t){return c0(Xa,this,Te(t)),this}},{key:"onCreateObj",value:function(t){return c0(Q2,this,t),this}},{key:"onUpdateObj",value:function(t){return c0(X2,this,t),this}},{key:"onRemoveObj",value:function(t){return c0(Y2,this,t),this}},{key:"digest",value:function(t){var n=this;t.filter(function(s){return!ar(Qa,n).has(ar(Xa,n).call(n,s))}).forEach(function(s){var o=ar(Q2,n).call(n,s);ar(Qa,n).set(ar(Xa,n).call(n,s),o),ar(ll,n).set(o,s)});var i=new Map(t.map(function(s){return[ar(Xa,n).call(n,s),s]}));return ar(Qa,this).forEach(function(s,o){i.has(o)?ar(X2,n).call(n,s,i.get(o)):(ar(Y2,n).call(n,s,o),ar(Qa,n).delete(o),ar(ll,n).delete(s))}),this}},{key:"clear",value:function(){return this.digest([]),this}}])})(),rc={exports:{}},VR=rc.exports,Wm;function zR(){return Wm||(Wm=1,(function(r,e){(function(t,n){r.exports=n()})(VR,function(){return(function(t){function n(s){if(i[s])return i[s].exports;var o=i[s]={exports:{},id:s,loaded:!1};return t[s].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}var i={};return n.m=t,n.c=i,n.p="",n(0)})([function(t,n,i){var s=i(1),o=(function(){function u(h,d,m){h===void 0&&(h=NaN),d===void 0&&(d=NaN),m===void 0&&(m=!1),this._minFPS=d,this._maxFPS=h,this._timeScale=1,this._currentTick=0,this._currentTime=0,this._tickDeltaTime=0,this._isRunning=!1,this._maxInterval=isNaN(this._minFPS)?NaN:1e3/this._minFPS,this._minInterval=isNaN(this._maxFPS)?NaN:1e3/this._maxFPS,this._onResume=new s.default,this._onPause=new s.default,this._onTick=new s.default,this._onTickOncePerFrame=new s.default,m||this.resume()}return u.prototype.updateOnce=function(h){h(this.currentTimeSeconds,this.tickDeltaTimeSeconds,this.currentTick)},u.prototype.resume=function(){this._isRunning||(this._isRunning=!0,this._lastTimeUpdated=this.getTimer(),this._onResume.dispatch(),this.animateOnce())},u.prototype.pause=function(){this._isRunning&&(this._isRunning=!1,this._onPause.dispatch(),window.cancelAnimationFrame(this._animationFrameHandle))},u.prototype.dispose=function(){this.pause(),this._onResume.removeAll(),this._onPause.removeAll(),this._onTick.removeAll()},Object.defineProperty(u.prototype,"currentTick",{get:function(){return this._currentTick},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"currentTimeSeconds",{get:function(){return this._currentTime/1e3},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"tickDeltaTimeSeconds",{get:function(){return this._tickDeltaTime/1e3},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"timeScale",{get:function(){return this._timeScale},set:function(h){this._timeScale!==h&&(this._timeScale=h)},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"onResume",{get:function(){return this._onResume},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"onPause",{get:function(){return this._onPause},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"onTick",{get:function(){return this._onTick},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"onTickOncePerFrame",{get:function(){return this._onTickOncePerFrame},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"isRunning",{get:function(){return this._isRunning},enumerable:!0,configurable:!0}),u.prototype.animateOnce=function(){var h=this;this._animationFrameHandle=window.requestAnimationFrame(function(){return h.onFrame()})},u.prototype.onFrame=function(){if(this._now=this.getTimer(),this._frameDeltaTime=this._now-this._lastTimeUpdated,isNaN(this._minInterval)||this._frameDeltaTime>=this._minInterval)if(isNaN(this._maxInterval))this.update(this._frameDeltaTime*this._timeScale,!0),this._lastTimeUpdated=this._now;else for(this._interval=Math.min(this._frameDeltaTime,this._maxInterval);this._now>=this._lastTimeUpdated+this._interval;)this.update(this._interval*this._timeScale,this._now<=this._lastTimeUpdated+2*this._maxInterval),this._lastTimeUpdated+=this._interval;this._isRunning&&this.animateOnce()},u.prototype.update=function(h,d){d===void 0&&(d=!0),this._currentTick++,this._currentTime+=h,this._tickDeltaTime=h,this._onTick.dispatch(this.currentTimeSeconds,this.tickDeltaTimeSeconds,this.currentTick),d&&this._onTickOncePerFrame.dispatch(this.currentTimeSeconds,this.tickDeltaTimeSeconds,this.currentTick)},u.prototype.getTimer=function(){return Date.now()},u})();Object.defineProperty(n,"__esModule",{value:!0}),n.default=o},function(t,n,i){(function(s,o){t.exports=o()})(this,function(){return(function(s){function o(h){if(u[h])return u[h].exports;var d=u[h]={exports:{},id:h,loaded:!1};return s[h].call(d.exports,d,d.exports,o),d.loaded=!0,d.exports}var u={};return o.m=s,o.c=u,o.p="",o(0)})([function(s,o){var u=(function(){function h(){this.functions=[]}return h.prototype.add=function(d){return this.functions.indexOf(d)===-1&&(this.functions.push(d),!0)},h.prototype.remove=function(d){var m=this.functions.indexOf(d);return m>-1&&(this.functions.splice(m,1),!0)},h.prototype.removeAll=function(){return this.functions.length>0&&(this.functions.length=0,!0)},h.prototype.dispatch=function(){for(var d=[],m=0;m<arguments.length;m++)d[m]=arguments[m];var y=this.functions.concat();y.forEach(function(x){x.apply(void 0,d)})},Object.defineProperty(h.prototype,"numItems",{get:function(){return this.functions.length},enumerable:!0,configurable:!0}),h})();Object.defineProperty(o,"__esModule",{value:!0}),o.default=u}])})}])})})(rc)),rc.exports}var $R=zR();const LA=yT($R),ks=11102230246251565e-32,Ar=134217729,HR=(3+8*ks)*ks;function K2(r,e,t,n,i){let s,o,u,h,d=e[0],m=n[0],y=0,x=0;m>d==m>-d?(s=d,d=e[++y]):(s=m,m=n[++x]);let b=0;if(y<r&&x<t)for(m>d==m>-d?(o=d+s,u=s-(o-d),d=e[++y]):(o=m+s,u=s-(o-m),m=n[++x]),s=o,u!==0&&(i[b++]=u);y<r&&x<t;)m>d==m>-d?(o=s+d,h=o-s,u=s-(o-h)+(d-h),d=e[++y]):(o=s+m,h=o-s,u=s-(o-h)+(m-h),m=n[++x]),s=o,u!==0&&(i[b++]=u);for(;y<r;)o=s+d,h=o-s,u=s-(o-h)+(d-h),d=e[++y],s=o,u!==0&&(i[b++]=u);for(;x<t;)o=s+m,h=o-s,u=s-(o-h)+(m-h),m=n[++x],s=o,u!==0&&(i[b++]=u);return(s!==0||b===0)&&(i[b++]=s),b}function jR(r,e){let t=e[0];for(let n=1;n<r;n++)t+=e[n];return t}function Mu(r){return new Float64Array(r)}const WR=(3+16*ks)*ks,QR=(2+12*ks)*ks,XR=(9+64*ks)*ks*ks,Ya=Mu(4),Qm=Mu(8),Xm=Mu(12),Ym=Mu(16),gr=Mu(4);function YR(r,e,t,n,i,s,o){let u,h,d,m,y,x,b,T,M,N,C,B,P,I,D,q,O,k;const z=r-i,X=t-i,W=e-s,K=n-s;I=z*K,x=Ar*z,b=x-(x-z),T=z-b,x=Ar*K,M=x-(x-K),N=K-M,D=T*N-(I-b*M-T*M-b*N),q=W*X,x=Ar*W,b=x-(x-W),T=W-b,x=Ar*X,M=x-(x-X),N=X-M,O=T*N-(q-b*M-T*M-b*N),C=D-O,y=D-C,Ya[0]=D-(C+y)+(y-O),B=I+C,y=B-I,P=I-(B-y)+(C-y),C=P-q,y=P-C,Ya[1]=P-(C+y)+(y-q),k=B+C,y=k-B,Ya[2]=B-(k-y)+(C-y),Ya[3]=k;let Z=jR(4,Ya),se=QR*o;if(Z>=se||-Z>=se||(y=r-z,u=r-(z+y)+(y-i),y=t-X,d=t-(X+y)+(y-i),y=e-W,h=e-(W+y)+(y-s),y=n-K,m=n-(K+y)+(y-s),u===0&&h===0&&d===0&&m===0)||(se=XR*o+HR*Math.abs(Z),Z+=z*m+K*u-(W*d+X*h),Z>=se||-Z>=se))return Z;I=u*K,x=Ar*u,b=x-(x-u),T=u-b,x=Ar*K,M=x-(x-K),N=K-M,D=T*N-(I-b*M-T*M-b*N),q=h*X,x=Ar*h,b=x-(x-h),T=h-b,x=Ar*X,M=x-(x-X),N=X-M,O=T*N-(q-b*M-T*M-b*N),C=D-O,y=D-C,gr[0]=D-(C+y)+(y-O),B=I+C,y=B-I,P=I-(B-y)+(C-y),C=P-q,y=P-C,gr[1]=P-(C+y)+(y-q),k=B+C,y=k-B,gr[2]=B-(k-y)+(C-y),gr[3]=k;const Y=K2(4,Ya,4,gr,Qm);I=z*m,x=Ar*z,b=x-(x-z),T=z-b,x=Ar*m,M=x-(x-m),N=m-M,D=T*N-(I-b*M-T*M-b*N),q=W*d,x=Ar*W,b=x-(x-W),T=W-b,x=Ar*d,M=x-(x-d),N=d-M,O=T*N-(q-b*M-T*M-b*N),C=D-O,y=D-C,gr[0]=D-(C+y)+(y-O),B=I+C,y=B-I,P=I-(B-y)+(C-y),C=P-q,y=P-C,gr[1]=P-(C+y)+(y-q),k=B+C,y=k-B,gr[2]=B-(k-y)+(C-y),gr[3]=k;const oe=K2(Y,Qm,4,gr,Xm);I=u*m,x=Ar*u,b=x-(x-u),T=u-b,x=Ar*m,M=x-(x-m),N=m-M,D=T*N-(I-b*M-T*M-b*N),q=h*d,x=Ar*h,b=x-(x-h),T=h-b,x=Ar*d,M=x-(x-d),N=d-M,O=T*N-(q-b*M-T*M-b*N),C=D-O,y=D-C,gr[0]=D-(C+y)+(y-O),B=I+C,y=B-I,P=I-(B-y)+(C-y),C=P-q,y=P-C,gr[1]=P-(C+y)+(y-q),k=B+C,y=k-B,gr[2]=B-(k-y)+(C-y),gr[3]=k;const he=K2(oe,Xm,4,gr,Ym);return Ym[he-1]}function Fl(r,e,t,n,i,s){const o=(e-s)*(t-i),u=(r-i)*(n-s),h=o-u,d=Math.abs(o+u);return Math.abs(h)>=WR*d?h:-YR(r,e,t,n,i,s,d)}const Km=Math.pow(2,-52),h0=new Uint32Array(512);class uu{static from(e,t=tC,n=nC){const i=e.length,s=new Float64Array(i*2);for(let o=0;o<i;o++){const u=e[o];s[2*o]=t(u),s[2*o+1]=n(u)}return new uu(s)}constructor(e){const t=e.length>>1;if(t>0&&typeof e[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=e;const n=Math.max(2*t-5,0);this._triangles=new Uint32Array(n*3),this._halfedges=new Int32Array(n*3),this._hashSize=Math.ceil(Math.sqrt(t)),this._hullPrev=new Uint32Array(t),this._hullNext=new Uint32Array(t),this._hullTri=new Uint32Array(t),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(t),this._dists=new Float64Array(t),this.update()}update(){const{coords:e,_hullPrev:t,_hullNext:n,_hullTri:i,_hullHash:s}=this,o=e.length>>1;let u=1/0,h=1/0,d=-1/0,m=-1/0;for(let z=0;z<o;z++){const X=e[2*z],W=e[2*z+1];X<u&&(u=X),W<h&&(h=W),X>d&&(d=X),W>m&&(m=W),this._ids[z]=z}const y=(u+d)/2,x=(h+m)/2;let b,T,M;for(let z=0,X=1/0;z<o;z++){const W=Z2(y,x,e[2*z],e[2*z+1]);W<X&&(b=z,X=W)}const N=e[2*b],C=e[2*b+1];for(let z=0,X=1/0;z<o;z++){if(z===b)continue;const W=Z2(N,C,e[2*z],e[2*z+1]);W<X&&W>0&&(T=z,X=W)}let B=e[2*T],P=e[2*T+1],I=1/0;for(let z=0;z<o;z++){if(z===b||z===T)continue;const X=JR(N,C,B,P,e[2*z],e[2*z+1]);X<I&&(M=z,I=X)}let D=e[2*M],q=e[2*M+1];if(I===1/0){for(let W=0;W<o;W++)this._dists[W]=e[2*W]-e[0]||e[2*W+1]-e[1];gA(this._ids,this._dists,0,o-1);const z=new Uint32Array(o);let X=0;for(let W=0,K=-1/0;W<o;W++){const Z=this._ids[W],se=this._dists[Z];se>K&&(z[X++]=Z,K=se)}this.hull=z.subarray(0,X),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(Fl(N,C,B,P,D,q)<0){const z=T,X=B,W=P;T=M,B=D,P=q,M=z,D=X,q=W}const O=eC(N,C,B,P,D,q);this._cx=O.x,this._cy=O.y;for(let z=0;z<o;z++)this._dists[z]=Z2(e[2*z],e[2*z+1],O.x,O.y);gA(this._ids,this._dists,0,o-1),this._hullStart=b;let k=3;n[b]=t[M]=T,n[T]=t[b]=M,n[M]=t[T]=b,i[b]=0,i[T]=1,i[M]=2,s.fill(-1),s[this._hashKey(N,C)]=b,s[this._hashKey(B,P)]=T,s[this._hashKey(D,q)]=M,this.trianglesLen=0,this._addTriangle(b,T,M,-1,-1,-1);for(let z=0,X,W;z<this._ids.length;z++){const K=this._ids[z],Z=e[2*K],se=e[2*K+1];if(z>0&&Math.abs(Z-X)<=Km&&Math.abs(se-W)<=Km||(X=Z,W=se,K===b||K===T||K===M))continue;let Y=0;for(let Pe=0,qe=this._hashKey(Z,se);Pe<this._hashSize&&(Y=s[(qe+Pe)%this._hashSize],!(Y!==-1&&Y!==n[Y]));Pe++);Y=t[Y];let oe=Y,he;for(;he=n[oe],Fl(Z,se,e[2*oe],e[2*oe+1],e[2*he],e[2*he+1])>=0;)if(oe=he,oe===Y){oe=-1;break}if(oe===-1)continue;let _e=this._addTriangle(oe,K,n[oe],-1,-1,i[oe]);i[K]=this._legalize(_e+2),i[oe]=_e,k++;let ye=n[oe];for(;he=n[ye],Fl(Z,se,e[2*ye],e[2*ye+1],e[2*he],e[2*he+1])<0;)_e=this._addTriangle(ye,K,he,i[K],-1,i[ye]),i[K]=this._legalize(_e+2),n[ye]=ye,k--,ye=he;if(oe===Y)for(;he=t[oe],Fl(Z,se,e[2*he],e[2*he+1],e[2*oe],e[2*oe+1])<0;)_e=this._addTriangle(he,K,oe,-1,i[oe],i[he]),this._legalize(_e+2),i[he]=_e,n[oe]=oe,k--,oe=he;this._hullStart=t[K]=oe,n[oe]=t[ye]=K,n[K]=ye,s[this._hashKey(Z,se)]=K,s[this._hashKey(e[2*oe],e[2*oe+1])]=oe}this.hull=new Uint32Array(k);for(let z=0,X=this._hullStart;z<k;z++)this.hull[z]=X,X=n[X];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(e,t){return Math.floor(KR(e-this._cx,t-this._cy)*this._hashSize)%this._hashSize}_legalize(e){const{_triangles:t,_halfedges:n,coords:i}=this;let s=0,o=0;for(;;){const u=n[e],h=e-e%3;if(o=h+(e+2)%3,u===-1){if(s===0)break;e=h0[--s];continue}const d=u-u%3,m=h+(e+1)%3,y=d+(u+2)%3,x=t[o],b=t[e],T=t[m],M=t[y];if(ZR(i[2*x],i[2*x+1],i[2*b],i[2*b+1],i[2*T],i[2*T+1],i[2*M],i[2*M+1])){t[e]=M,t[u]=x;const C=n[y];if(C===-1){let P=this._hullStart;do{if(this._hullTri[P]===y){this._hullTri[P]=e;break}P=this._hullPrev[P]}while(P!==this._hullStart)}this._link(e,C),this._link(u,n[o]),this._link(o,y);const B=d+(u+1)%3;s<h0.length&&(h0[s++]=B)}else{if(s===0)break;e=h0[--s]}}return o}_link(e,t){this._halfedges[e]=t,t!==-1&&(this._halfedges[t]=e)}_addTriangle(e,t,n,i,s,o){const u=this.trianglesLen;return this._triangles[u]=e,this._triangles[u+1]=t,this._triangles[u+2]=n,this._link(u,i),this._link(u+1,s),this._link(u+2,o),this.trianglesLen+=3,u}}function KR(r,e){const t=r/(Math.abs(r)+Math.abs(e));return(e>0?3-t:1+t)/4}function Z2(r,e,t,n){const i=r-t,s=e-n;return i*i+s*s}function ZR(r,e,t,n,i,s,o,u){const h=r-o,d=e-u,m=t-o,y=n-u,x=i-o,b=s-u,T=h*h+d*d,M=m*m+y*y,N=x*x+b*b;return h*(y*N-M*b)-d*(m*N-M*x)+T*(m*b-y*x)<0}function JR(r,e,t,n,i,s){const o=t-r,u=n-e,h=i-r,d=s-e,m=o*o+u*u,y=h*h+d*d,x=.5/(o*d-u*h),b=(d*m-u*y)*x,T=(o*y-h*m)*x;return b*b+T*T}function eC(r,e,t,n,i,s){const o=t-r,u=n-e,h=i-r,d=s-e,m=o*o+u*u,y=h*h+d*d,x=.5/(o*d-u*h),b=r+(d*m-u*y)*x,T=e+(o*y-h*m)*x;return{x:b,y:T}}function gA(r,e,t,n){if(n-t<=20)for(let i=t+1;i<=n;i++){const s=r[i],o=e[s];let u=i-1;for(;u>=t&&e[r[u]]>o;)r[u+1]=r[u--];r[u+1]=s}else{const i=t+n>>1;let s=t+1,o=n;ul(r,i,s),e[r[t]]>e[r[n]]&&ul(r,t,n),e[r[s]]>e[r[n]]&&ul(r,s,n),e[r[t]]>e[r[s]]&&ul(r,t,s);const u=r[s],h=e[u];for(;;){do s++;while(e[r[s]]<h);do o--;while(e[r[o]]>h);if(o<s)break;ul(r,s,o)}r[t+1]=r[o],r[o]=u,n-s+1>=o-t?(gA(r,e,s,n),gA(r,e,t,o-1)):(gA(r,e,t,o-1),gA(r,e,s,n))}}function ul(r,e,t){const n=r[e];r[e]=r[t],r[t]=n}function tC(r){return r[0]}function nC(r){return r[1]}function rC(r,e){var t,n,i=0,s,o,u,h,d,m,y,x=r[0],b=r[1],T=e.length;for(t=0;t<T;t++){n=0;var M=e[t],N=M.length-1;if(m=M[0],m[0]!==M[N][0]&&m[1]!==M[N][1])throw new Error("First and last coordinates in a ring must be the same");for(o=m[0]-x,u=m[1]-b,n;n<N;n++){if(y=M[n+1],h=y[0]-x,d=y[1]-b,u===0&&d===0){if(h<=0&&o>=0||o<=0&&h>=0)return 0}else if(d>=0&&u<=0||d<=0&&u>=0){if(s=Fl(o,h,u,d,0,0),s===0)return 0;(s>0&&d>0&&u<=0||s<0&&d<=0&&u>0)&&i++}m=y,u=d,o=h}}return i%2!==0}function iC(r){if(!r)throw new Error("coord is required");if(!Array.isArray(r)){if(r.type==="Feature"&&r.geometry!==null&&r.geometry.type==="Point")return[...r.geometry.coordinates];if(r.type==="Point")return[...r.coordinates]}if(Array.isArray(r)&&r.length>=2&&!Array.isArray(r[0])&&!Array.isArray(r[1]))return[...r];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function sC(r){return r.type==="Feature"?r.geometry:r}function oC(r,e,t={}){if(!r)throw new Error("point is required");if(!e)throw new Error("polygon is required");const n=iC(r),i=sC(e),s=i.type,o=e.bbox;let u=i.coordinates;if(o&&aC(n,o)===!1)return!1;s==="Polygon"&&(u=[u]);let h=!1;for(var d=0;d<u.length;++d){const m=rC(n,u[d]);if(m===0)return!t.ignoreBoundary;m&&(h=!0)}return h}function aC(r,e){return e[0]<=r[0]&&e[1]<=r[1]&&e[2]>=r[0]&&e[3]>=r[1]}var AC=oC;const Zm=1e-6;class ca{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(e,t){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(e,t){this._+=`L${this._x1=+e},${this._y1=+t}`}arc(e,t,n){e=+e,t=+t,n=+n;const i=e+n,s=t;if(n<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${s}`:(Math.abs(this._x1-i)>Zm||Math.abs(this._y1-s)>Zm)&&(this._+="L"+i+","+s),n&&(this._+=`A${n},${n},0,1,1,${e-n},${t}A${n},${n},0,1,1,${this._x1=i},${this._y1=s}`)}rect(e,t,n,i){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${+n}v${+i}h${-n}Z`}value(){return this._||null}}class $f{constructor(){this._=[]}moveTo(e,t){this._.push([e,t])}closePath(){this._.push(this._[0].slice())}lineTo(e,t){this._.push([e,t])}value(){return this._.length?this._:null}}class lC{constructor(e,[t,n,i,s]=[0,0,960,500]){if(!((i=+i)>=(t=+t))||!((s=+s)>=(n=+n)))throw new Error("invalid bounds");this.delaunay=e,this._circumcenters=new Float64Array(e.points.length*2),this.vectors=new Float64Array(e.points.length*2),this.xmax=i,this.xmin=t,this.ymax=s,this.ymin=n,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:e,hull:t,triangles:n},vectors:i}=this;let s,o;const u=this.circumcenters=this._circumcenters.subarray(0,n.length/3*2);for(let M=0,N=0,C=n.length,B,P;M<C;M+=3,N+=2){const I=n[M]*2,D=n[M+1]*2,q=n[M+2]*2,O=e[I],k=e[I+1],z=e[D],X=e[D+1],W=e[q],K=e[q+1],Z=z-O,se=X-k,Y=W-O,oe=K-k,he=(Z*oe-se*Y)*2;if(Math.abs(he)<1e-9){if(s===void 0){s=o=0;for(const ye of t)s+=e[ye*2],o+=e[ye*2+1];s/=t.length,o/=t.length}const _e=1e9*Math.sign((s-O)*oe-(o-k)*Y);B=(O+W)/2-_e*oe,P=(k+K)/2+_e*Y}else{const _e=1/he,ye=Z*Z+se*se,Pe=Y*Y+oe*oe;B=O+(oe*ye-se*Pe)*_e,P=k+(Z*Pe-Y*ye)*_e}u[N]=B,u[N+1]=P}let h=t[t.length-1],d,m=h*4,y,x=e[2*h],b,T=e[2*h+1];i.fill(0);for(let M=0;M<t.length;++M)h=t[M],d=m,y=x,b=T,m=h*4,x=e[2*h],T=e[2*h+1],i[d+2]=i[m]=b-T,i[d+3]=i[m+1]=x-y}render(e){const t=e==null?e=new ca:void 0,{delaunay:{halfedges:n,inedges:i,hull:s},circumcenters:o,vectors:u}=this;if(s.length<=1)return null;for(let m=0,y=n.length;m<y;++m){const x=n[m];if(x<m)continue;const b=Math.floor(m/3)*2,T=Math.floor(x/3)*2,M=o[b],N=o[b+1],C=o[T],B=o[T+1];this._renderSegment(M,N,C,B,e)}let h,d=s[s.length-1];for(let m=0;m<s.length;++m){h=d,d=s[m];const y=Math.floor(i[d]/3)*2,x=o[y],b=o[y+1],T=h*4,M=this._project(x,b,u[T+2],u[T+3]);M&&this._renderSegment(x,b,M[0],M[1],e)}return t&&t.value()}renderBounds(e){const t=e==null?e=new ca:void 0;return e.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),t&&t.value()}renderCell(e,t){const n=t==null?t=new ca:void 0,i=this._clip(e);if(i===null||!i.length)return;t.moveTo(i[0],i[1]);let s=i.length;for(;i[0]===i[s-2]&&i[1]===i[s-1]&&s>1;)s-=2;for(let o=2;o<s;o+=2)(i[o]!==i[o-2]||i[o+1]!==i[o-1])&&t.lineTo(i[o],i[o+1]);return t.closePath(),n&&n.value()}*cellPolygons(){const{delaunay:{points:e}}=this;for(let t=0,n=e.length/2;t<n;++t){const i=this.cellPolygon(t);i&&(i.index=t,yield i)}}cellPolygon(e){const t=new $f;return this.renderCell(e,t),t.value()}_renderSegment(e,t,n,i,s){let o;const u=this._regioncode(e,t),h=this._regioncode(n,i);u===0&&h===0?(s.moveTo(e,t),s.lineTo(n,i)):(o=this._clipSegment(e,t,n,i,u,h))&&(s.moveTo(o[0],o[1]),s.lineTo(o[2],o[3]))}contains(e,t,n){return t=+t,t!==t||(n=+n,n!==n)?!1:this.delaunay._step(e,t,n)===e}*neighbors(e){const t=this._clip(e);if(t)for(const n of this.delaunay.neighbors(e)){const i=this._clip(n);if(i){e:for(let s=0,o=t.length;s<o;s+=2)for(let u=0,h=i.length;u<h;u+=2)if(t[s]===i[u]&&t[s+1]===i[u+1]&&t[(s+2)%o]===i[(u+h-2)%h]&&t[(s+3)%o]===i[(u+h-1)%h]){yield n;break e}}}}_cell(e){const{circumcenters:t,delaunay:{inedges:n,halfedges:i,triangles:s}}=this,o=n[e];if(o===-1)return null;const u=[];let h=o;do{const d=Math.floor(h/3);if(u.push(t[d*2],t[d*2+1]),h=h%3===2?h-2:h+1,s[h]!==e)break;h=i[h]}while(h!==o&&h!==-1);return u}_clip(e){if(e===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const t=this._cell(e);if(t===null)return null;const{vectors:n}=this,i=e*4;return this._simplify(n[i]||n[i+1]?this._clipInfinite(e,t,n[i],n[i+1],n[i+2],n[i+3]):this._clipFinite(e,t))}_clipFinite(e,t){const n=t.length;let i=null,s,o,u=t[n-2],h=t[n-1],d,m=this._regioncode(u,h),y,x=0;for(let b=0;b<n;b+=2)if(s=u,o=h,u=t[b],h=t[b+1],d=m,m=this._regioncode(u,h),d===0&&m===0)y=x,x=0,i?i.push(u,h):i=[u,h];else{let T,M,N,C,B;if(d===0){if((T=this._clipSegment(s,o,u,h,d,m))===null)continue;[M,N,C,B]=T}else{if((T=this._clipSegment(u,h,s,o,m,d))===null)continue;[C,B,M,N]=T,y=x,x=this._edgecode(M,N),y&&x&&this._edge(e,y,x,i,i.length),i?i.push(M,N):i=[M,N]}y=x,x=this._edgecode(C,B),y&&x&&this._edge(e,y,x,i,i.length),i?i.push(C,B):i=[C,B]}if(i)y=x,x=this._edgecode(i[0],i[1]),y&&x&&this._edge(e,y,x,i,i.length);else if(this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(e,t,n,i,s,o){const u=s<o;for(u&&([e,t,n,i,s,o]=[n,i,e,t,o,s]);;){if(s===0&&o===0)return u?[n,i,e,t]:[e,t,n,i];if(s&o)return null;let h,d,m=s||o;m&8?(h=e+(n-e)*(this.ymax-t)/(i-t),d=this.ymax):m&4?(h=e+(n-e)*(this.ymin-t)/(i-t),d=this.ymin):m&2?(d=t+(i-t)*(this.xmax-e)/(n-e),h=this.xmax):(d=t+(i-t)*(this.xmin-e)/(n-e),h=this.xmin),s?(e=h,t=d,s=this._regioncode(e,t)):(n=h,i=d,o=this._regioncode(n,i))}}_clipInfinite(e,t,n,i,s,o){let u=Array.from(t),h;if((h=this._project(u[0],u[1],n,i))&&u.unshift(h[0],h[1]),(h=this._project(u[u.length-2],u[u.length-1],s,o))&&u.push(h[0],h[1]),u=this._clipFinite(e,u))for(let d=0,m=u.length,y,x=this._edgecode(u[m-2],u[m-1]);d<m;d+=2)y=x,x=this._edgecode(u[d],u[d+1]),y&&x&&(d=this._edge(e,y,x,u,d),m=u.length);else this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(u=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return u}_edge(e,t,n,i,s){for(;t!==n;){let o,u;switch(t){case 5:t=4;continue;case 4:t=6,o=this.xmax,u=this.ymin;break;case 6:t=2;continue;case 2:t=10,o=this.xmax,u=this.ymax;break;case 10:t=8;continue;case 8:t=9,o=this.xmin,u=this.ymax;break;case 9:t=1;continue;case 1:t=5,o=this.xmin,u=this.ymin;break}(i[s]!==o||i[s+1]!==u)&&this.contains(e,o,u)&&(i.splice(s,0,o,u),s+=2)}return s}_project(e,t,n,i){let s=1/0,o,u,h;if(i<0){if(t<=this.ymin)return null;(o=(this.ymin-t)/i)<s&&(h=this.ymin,u=e+(s=o)*n)}else if(i>0){if(t>=this.ymax)return null;(o=(this.ymax-t)/i)<s&&(h=this.ymax,u=e+(s=o)*n)}if(n>0){if(e>=this.xmax)return null;(o=(this.xmax-e)/n)<s&&(u=this.xmax,h=t+(s=o)*i)}else if(n<0){if(e<=this.xmin)return null;(o=(this.xmin-e)/n)<s&&(u=this.xmin,h=t+(s=o)*i)}return[u,h]}_edgecode(e,t){return(e===this.xmin?1:e===this.xmax?2:0)|(t===this.ymin?4:t===this.ymax?8:0)}_regioncode(e,t){return(e<this.xmin?1:e>this.xmax?2:0)|(t<this.ymin?4:t>this.ymax?8:0)}_simplify(e){if(e&&e.length>4){for(let t=0;t<e.length;t+=2){const n=(t+2)%e.length,i=(t+4)%e.length;(e[t]===e[n]&&e[n]===e[i]||e[t+1]===e[n+1]&&e[n+1]===e[i+1])&&(e.splice(n,2),t-=2)}e.length||(e=null)}return e}}const uC=2*Math.PI,Ka=Math.pow;function cC(r){return r[0]}function hC(r){return r[1]}function fC(r){const{triangles:e,coords:t}=r;for(let n=0;n<e.length;n+=3){const i=2*e[n],s=2*e[n+1],o=2*e[n+2];if((t[o]-t[i])*(t[s+1]-t[i+1])-(t[s]-t[i])*(t[o+1]-t[i+1])>1e-10)return!1}return!0}function dC(r,e,t){return[r+Math.sin(r+e)*t,e+Math.cos(r-e)*t]}class ip{static from(e,t=cC,n=hC,i){return new ip("length"in e?pC(e,t,n,i):Float64Array.from(mC(e,t,n,i)))}constructor(e){this._delaunator=new uu(e),this.inedges=new Int32Array(e.length/2),this._hullIndex=new Int32Array(e.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const e=this._delaunator,t=this.points;if(e.hull&&e.hull.length>2&&fC(e)){this.collinear=Int32Array.from({length:t.length/2},(x,b)=>b).sort((x,b)=>t[2*x]-t[2*b]||t[2*x+1]-t[2*b+1]);const h=this.collinear[0],d=this.collinear[this.collinear.length-1],m=[t[2*h],t[2*h+1],t[2*d],t[2*d+1]],y=1e-8*Math.hypot(m[3]-m[1],m[2]-m[0]);for(let x=0,b=t.length/2;x<b;++x){const T=dC(t[2*x],t[2*x+1],y);t[2*x]=T[0],t[2*x+1]=T[1]}this._delaunator=new uu(t)}else delete this.collinear;const n=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),u=this._hullIndex.fill(-1);for(let h=0,d=n.length;h<d;++h){const m=s[h%3===2?h-2:h+1];(n[h]===-1||o[m]===-1)&&(o[m]=h)}for(let h=0,d=i.length;h<d;++h)u[i[h]]=h;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],o[i[0]]=1,i.length===2&&(o[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(e){return new lC(this,e)}*neighbors(e){const{inedges:t,hull:n,_hullIndex:i,halfedges:s,triangles:o,collinear:u}=this;if(u){const y=u.indexOf(e);y>0&&(yield u[y-1]),y<u.length-1&&(yield u[y+1]);return}const h=t[e];if(h===-1)return;let d=h,m=-1;do{if(yield m=o[d],d=d%3===2?d-2:d+1,o[d]!==e)return;if(d=s[d],d===-1){const y=n[(i[e]+1)%n.length];y!==m&&(yield y);return}}while(d!==h)}find(e,t,n=0){if(e=+e,e!==e||(t=+t,t!==t))return-1;const i=n;let s;for(;(s=this._step(n,e,t))>=0&&s!==n&&s!==i;)n=s;return s}_step(e,t,n){const{inedges:i,hull:s,_hullIndex:o,halfedges:u,triangles:h,points:d}=this;if(i[e]===-1||!d.length)return(e+1)%(d.length>>1);let m=e,y=Ka(t-d[e*2],2)+Ka(n-d[e*2+1],2);const x=i[e];let b=x;do{let T=h[b];const M=Ka(t-d[T*2],2)+Ka(n-d[T*2+1],2);if(M<y&&(y=M,m=T),b=b%3===2?b-2:b+1,h[b]!==e)break;if(b=u[b],b===-1){if(b=s[(o[e]+1)%s.length],b!==T&&Ka(t-d[b*2],2)+Ka(n-d[b*2+1],2)<y)return b;break}}while(b!==x);return m}render(e){const t=e==null?e=new ca:void 0,{points:n,halfedges:i,triangles:s}=this;for(let o=0,u=i.length;o<u;++o){const h=i[o];if(h<o)continue;const d=s[o]*2,m=s[h]*2;e.moveTo(n[d],n[d+1]),e.lineTo(n[m],n[m+1])}return this.renderHull(e),t&&t.value()}renderPoints(e,t){t===void 0&&(!e||typeof e.moveTo!="function")&&(t=e,e=null),t=t==null?2:+t;const n=e==null?e=new ca:void 0,{points:i}=this;for(let s=0,o=i.length;s<o;s+=2){const u=i[s],h=i[s+1];e.moveTo(u+t,h),e.arc(u,h,t,0,uC)}return n&&n.value()}renderHull(e){const t=e==null?e=new ca:void 0,{hull:n,points:i}=this,s=n[0]*2,o=n.length;e.moveTo(i[s],i[s+1]);for(let u=1;u<o;++u){const h=2*n[u];e.lineTo(i[h],i[h+1])}return e.closePath(),t&&t.value()}hullPolygon(){const e=new $f;return this.renderHull(e),e.value()}renderTriangle(e,t){const n=t==null?t=new ca:void 0,{points:i,triangles:s}=this,o=s[e*=3]*2,u=s[e+1]*2,h=s[e+2]*2;return t.moveTo(i[o],i[o+1]),t.lineTo(i[u],i[u+1]),t.lineTo(i[h],i[h+1]),t.closePath(),n&&n.value()}*trianglePolygons(){const{triangles:e}=this;for(let t=0,n=e.length/3;t<n;++t)yield this.trianglePolygon(t)}trianglePolygon(e){const t=new $f;return this.renderTriangle(e,t),t.value()}}function pC(r,e,t,n){const i=r.length,s=new Float64Array(i*2);for(let o=0;o<i;++o){const u=r[o];s[o*2]=e.call(n,u,o,r),s[o*2+1]=t.call(n,u,o,r)}return s}function*mC(r,e,t,n){let i=0;for(const s of r)yield e.call(n,s,i,r),yield t.call(n,s,i,r),++i}const sp=Math.PI,Jm=sp/2,e5=180/sp,t5=sp/180,gC=Math.atan2,n5=Math.cos,yC=Math.max,vC=Math.min,r5=Math.sin,_C=Math.sign||function(r){return r>0?1:r<0?-1:0},z7=Math.sqrt;function xC(r){return r>1?Jm:r<-1?-Jm:Math.asin(r)}function $7(r,e){return r[0]*e[0]+r[1]*e[1]+r[2]*e[2]}function Hr(r,e){return[r[1]*e[2]-r[2]*e[1],r[2]*e[0]-r[0]*e[2],r[0]*e[1]-r[1]*e[0]]}function Yc(r,e){return[r[0]+e[0],r[1]+e[1],r[2]+e[2]]}function Kc(r){var e=z7(r[0]*r[0]+r[1]*r[1]+r[2]*r[2]);return[r[0]/e,r[1]/e,r[2]/e]}function op(r){return[gC(r[1],r[0])*e5,xC(yC(-1,vC(1,r[2])))*e5]}function ls(r){const e=r[0]*t5,t=r[1]*t5,n=n5(t);return[n*n5(e),n*r5(e),r5(t)]}function ap(r){return r=r.map(e=>ls(e)),$7(r[0],Hr(r[2],r[1]))}function bC(r){const e=wC(r),t=MC(e),n=SC(t,r),i=NC(t,r.length),s=TC(i,r),o=EC(t,r),{polygons:u,centers:h}=RC(o,t,r),d=CC(u),m=BC(t,r),y=PC(n,t);return{delaunay:e,edges:n,triangles:t,centers:h,neighbors:i,polygons:u,mesh:d,hull:m,urquhart:y,find:s}}function TC(r,e){function t(n,i){let s=n[0]-i[0],o=n[1]-i[1],u=n[2]-i[2];return s*s+o*o+u*u}return function(i,s,o){o===void 0&&(o=0);let u,h,d=o;const m=ls([i,s]);do u=o,o=null,h=t(m,ls(e[u])),r[u].forEach(y=>{let x=t(m,ls(e[y]));if(x<h){h=x,o=y,d=y;return}});while(o!==null);return d}}function wC(r){if(r.length<2)return{};let e=0;for(;isNaN(r[e][0]+r[e][1])&&e++<r.length;);const t=cE(r[e]),n=$E().translate([0,0]).scale(1).rotate(t.invert([180,0]));r=r.map(n);const i=[];let s=1;for(let y=0,x=r.length;y<x;y++){let b=r[y][0]**2+r[y][1]**2;!isFinite(b)||b>1e32?i.push(y):b>s&&(s=b)}const o=1e6*z7(s);i.forEach(y=>r[y]=[o,0]),r.push([0,o]),r.push([-o,0]),r.push([0,-o]);const u=ip.from(r);u.projection=n;const{triangles:h,halfedges:d,inedges:m}=u;for(let y=0,x=d.length;y<x;y++)if(d[y]<0){const b=y%3==2?y-2:y+1,T=y%3==0?y+2:y-1,M=d[b],N=d[T];d[M]=N,d[N]=M,d[b]=d[T]=-1,h[y]=h[b]=h[T]=e,m[h[M]]=M%3==0?M+2:M-1,m[h[N]]=N%3==0?N+2:N-1,y+=2-y%3}else h[y]>r.length-3-1&&(h[y]=e);return u}function SC(r,e){const t=new Set;return e.length===2?[[0,1]]:(r.forEach(n=>{if(n[0]!==n[1]&&!(ap(n.map(i=>e[i]))<0))for(let i=0,s;i<3;i++)s=(i+1)%3,t.add(bc([n[i],n[s]]).join("-"))}),Array.from(t,n=>n.split("-").map(Number)))}function MC(r){const{triangles:e}=r;if(!e)return[];const t=[];for(let n=0,i=e.length/3;n<i;n++){const s=e[3*n],o=e[3*n+1],u=e[3*n+2];s!==o&&o!==u&&t.push([s,u,o])}return t}function EC(r,e){return r.map(t=>{const n=t.map(s=>e[s]).map(ls),i=Yc(Yc(Hr(n[1],n[0]),Hr(n[2],n[1])),Hr(n[0],n[2]));return op(Kc(i))})}function NC(r,e){const t=[];return r.forEach(n=>{for(let i=0;i<3;i++){const s=n[i],o=n[(i+1)%3];t[s]=t[s]||[],t[s].push(o)}}),r.length===0&&(e===2?(t[0]=[1],t[1]=[0]):e===1&&(t[0]=[])),t}function RC(r,e,t){const n=[],i=r.slice();if(e.length===0){if(t.length<2)return{polygons:n,centers:i};if(t.length===2){const u=ls(t[0]),h=ls(t[1]),d=Kc(Yc(u,h)),m=Kc(Hr(u,h)),y=Hr(d,m),x=[d,Hr(d,y),Hr(Hr(d,y),y),Hr(Hr(Hr(d,y),y),y)].map(op).map(o);return n.push(x),n.push(x.slice().reverse()),{polygons:n,centers:i}}}e.forEach((u,h)=>{for(let d=0;d<3;d++){const m=u[d],y=u[(d+1)%3],x=u[(d+2)%3];n[m]=n[m]||[],n[m].push([y,x,h,[m,y,x]])}});const s=n.map(u=>{const h=[u[0][2]];let d=u[0][1];for(let m=1;m<u.length;m++)for(let y=0;y<u.length;y++)if(u[y][0]==d){d=u[y][1],h.push(u[y][2]);break}if(h.length>2)return h;if(h.length==2){const m=i5(t[u[0][3][0]],t[u[0][3][1]],i[h[0]]),y=i5(t[u[0][3][2]],t[u[0][3][0]],i[h[0]]),x=o(m),b=o(y);return[h[0],b,h[1],x]}});function o(u){let h=-1;return i.slice(e.length,1/0).forEach((d,m)=>{d[0]===u[0]&&d[1]===u[1]&&(h=m+e.length)}),h<0&&(h=i.length,i.push(u)),h}return{polygons:s,centers:i}}function i5(r,e,t){r=ls(r),e=ls(e),t=ls(t);const n=_C($7(Hr(e,r),t));return op(Kc(Yc(r,e)).map(i=>n*i))}function CC(r){const e=[];return r.forEach(t=>{if(!t)return;let n=t[t.length-1];for(let i of t)i>n&&e.push([n,i]),n=i}),e}function PC(r,e){return function(t){const n=new Map,i=new Map;return r.forEach((s,o)=>{const u=s.join("-");n.set(u,t[o]),i.set(u,!0)}),e.forEach(s=>{let o=0,u=-1;for(let h=0;h<3;h++){let d=bc([s[h],s[(h+1)%3]]).join("-");n.get(d)>o&&(o=n.get(d),u=d)}i.set(u,!1)}),r.map(s=>i.get(s.join("-")))}}function BC(r,e){const t=new Set,n=[];r.map(u=>{if(!(ap(u.map(h=>e[h>e.length?0:h]))>1e-12))for(let h=0;h<3;h++){let d=[u[h],u[(h+1)%3]],m=`${d[0]}-${d[1]}`;t.has(m)?t.delete(m):t.add(`${d[1]}-${d[0]}`)}});const i=new Map;let s;if(t.forEach(u=>{u=u.split("-").map(Number),i.set(u[0],u[1]),s=u[0]}),s===void 0)return n;let o=s;do{n.push(o);let u=i.get(o);i.set(o,-1),o=u}while(o>-1&&o!==s);return n}function DC(r){const e=function(t){if(e.delaunay=null,e._data=t,typeof e._data=="object"&&e._data.type==="FeatureCollection"&&(e._data=e._data.features),typeof e._data=="object"){const n=e._data.map(i=>[e._vx(i),e._vy(i),i]).filter(i=>isFinite(i[0]+i[1]));e.points=n.map(i=>[i[0],i[1]]),e.valid=n.map(i=>i[2]),e.delaunay=bC(e.points)}return e};return e._vx=function(t){if(typeof t=="object"&&"type"in t)return pm(t)[0];if(0 in t)return t[0]},e._vy=function(t){if(typeof t=="object"&&"type"in t)return pm(t)[1];if(1 in t)return t[1]},e.x=function(t){return t?(e._vx=t,e):e._vx},e.y=function(t){return t?(e._vy=t,e):e._vy},e.polygons=function(t){if(t!==void 0&&e(t),!e.delaunay)return!1;const n={type:"FeatureCollection",features:[]};return e.valid.length===0||(e.delaunay.polygons.forEach((i,s)=>n.features.push({type:"Feature",geometry:i?{type:"Polygon",coordinates:[[...i,i[0]].map(o=>e.delaunay.centers[o])]}:null,properties:{site:e.valid[s],sitecoordinates:e.points[s],neighbours:e.delaunay.neighbors[s]}})),e.valid.length===1&&n.features.push({type:"Feature",geometry:{type:"Sphere"},properties:{site:e.valid[0],sitecoordinates:e.points[0],neighbours:[]}})),n},e.triangles=function(t){return t!==void 0&&e(t),e.delaunay?{type:"FeatureCollection",features:e.delaunay.triangles.map((n,i)=>(n=n.map(s=>e.points[s]),n.center=e.delaunay.centers[i],n)).filter(n=>ap(n)>0).map(n=>({type:"Feature",properties:{circumcenter:n.center},geometry:{type:"Polygon",coordinates:[[...n,n[0]]]}}))}:!1},e.links=function(t){if(t!==void 0&&e(t),!e.delaunay)return!1;const n=e.delaunay.edges.map(s=>Do(e.points[s[0]],e.points[s[1]])),i=e.delaunay.urquhart(n);return{type:"FeatureCollection",features:e.delaunay.edges.map((s,o)=>({type:"Feature",properties:{source:e.valid[s[0]],target:e.valid[s[1]],length:n[o],urquhart:!!i[o]},geometry:{type:"LineString",coordinates:[e.points[s[0]],e.points[s[1]]]}}))}},e.mesh=function(t){return t!==void 0&&e(t),e.delaunay?{type:"MultiLineString",coordinates:e.delaunay.edges.map(n=>[e.points[n[0]],e.points[n[1]]])}:!1},e.cellMesh=function(t){if(t!==void 0&&e(t),!e.delaunay)return!1;const{centers:n,polygons:i}=e.delaunay,s=[];for(const o of i)if(o)for(let u=o.length,h=o[u-1],d=o[0],m=0;m<u;h=d,d=o[++m])d>h&&s.push([n[h],n[d]]);return{type:"MultiLineString",coordinates:s}},e._found=void 0,e.find=function(t,n,i){if(e._found=e.delaunay.find(t,n,e._found),!i||Do([t,n],e.points[e._found])<i)return e._found},e.hull=function(t){t!==void 0&&e(t);const n=e.delaunay.hull,i=e.points;return n.length===0?null:{type:"Polygon",coordinates:[[...n.map(s=>i[s]),i[n[0]]]]}},r?e(r):e}function Hf(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function FC(r){if(Array.isArray(r))return r}function LC(r){if(Array.isArray(r))return Hf(r)}function IC(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function qC(r,e,t){return e=Zc(e),HC(r,H7()?Reflect.construct(e,[],Zc(r).constructor):e.apply(r,t))}function OC(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function UC(r,e,t){return Object.defineProperty(r,"prototype",{writable:!1}),r}function Zc(r){return Zc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Zc(r)}function kC(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&jf(r,e)}function H7(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(H7=function(){return!!r})()}function GC(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function VC(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n,i,s,o,u=[],h=!0,d=!1;try{if(s=(t=t.call(r)).next,e!==0)for(;!(h=(n=s.call(t)).done)&&(u.push(n.value),u.length!==e);h=!0);}catch(m){d=!0,i=m}finally{try{if(!h&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(d)throw i}}return u}}function zC(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $C(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function HC(r,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return IC(r)}function jf(r,e){return jf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},jf(r,e)}function ss(r,e){return FC(r)||VC(r,e)||j7(r,e)||zC()}function J2(r){return LC(r)||GC(r)||j7(r)||$C()}function j7(r,e){if(r){if(typeof r=="string")return Hf(r,e);var t={}.toString.call(r).slice(8,-1);return t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set"?Array.from(r):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Hf(r,e):void 0}}function jC(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=e.resolution,n=t===void 0?1/0:t,i=WC(r,n),s=nu(i),o=QC(r,n),u=[].concat(J2(s),J2(o)),h={type:"Polygon",coordinates:r},d=h7(h),m=ss(d,2),y=ss(m[0],2),x=y[0],b=y[1],T=ss(m[1],2),M=T[0],N=T[1],C=x>M||N>=89||b<=-89,B=[];if(C){var P=DC(u).triangles(),I=new Map(u.map(function(he,_e){var ye=ss(he,2),Pe=ye[0],qe=ye[1];return["".concat(Pe,"-").concat(qe),_e]}));P.features.forEach(function(he){var _e,ye=he.geometry.coordinates[0].slice(0,3).reverse(),Pe=[];if(ye.forEach(function(Ye){var He=ss(Ye,2),Rt=He[0],pt=He[1],Nt="".concat(Rt,"-").concat(pt);I.has(Nt)&&Pe.push(I.get(Nt))}),Pe.length===3){if(Pe.some(function(Ye){return Ye<s.length})){var qe=he.properties.circumcenter;if(!Wf(qe,h,C))return}(_e=B).push.apply(_e,Pe)}})}else if(o.length)for(var z=uu.from(u),X=function(_e){var ye,Pe=[2,1,0].map(function(He){return z.triangles[_e+He]}),qe=Pe.map(function(He){return u[He]});if(Pe.some(function(He){return He<s.length})){var Ye=[0,1].map(function(He){return iM(qe,function(Rt){return Rt[He]})});if(!Wf(Ye,h,C))return 1}(ye=B).push.apply(ye,J2(Pe))},W=0,K=z.triangles.length;W<K;W+=3)X(W);else{var D=jc(i),q=D.vertices,O=D.holes,k=O===void 0?[]:O;B=dN(q,k,2)}var Z=$s(bc(u,function(he){return he[0]}),[0,1]),se=$s(bc(u,function(he){return he[1]}),[0,1]),Y=u.map(function(he){var _e=ss(he,2),ye=_e[0],Pe=_e[1];return[Z(ye),se(Pe)]}),oe={points:u,indices:B,uvs:Y};return{contour:i,triangles:oe}}function WC(r,e){return r.map(function(t){var n=[],i;return t.forEach(function(s){if(i){var o=Do(s,i)*180/Math.PI;if(o>e)for(var u=Zd(i,s),h=1/Math.ceil(o/e),d=h;d<1;)n.push(u(d)),d+=h}n.push(i=s)}),n})}function QC(r,e){var t={type:"Polygon",coordinates:r},n=h7(t),i=ss(n,2),s=ss(i[0],2),o=s[0],u=s[1],h=ss(i[1],2),d=h[0],m=h[1];if(Math.min(Math.abs(d-o),Math.abs(m-u))<e)return[];var y=o>d||m>=89||u<=-89;return XC(e,{minLng:o,maxLng:d,minLat:u,maxLat:m}).filter(function(x){return Wf(x,t,y)})}function XC(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=e.minLng,n=e.maxLng,i=e.minLat,s=e.maxLat,o=Math.round(Math.pow(360/r,2)/Math.PI),u=(1+Math.sqrt(5))/2,h=function(C){return C/u*360%360-180},d=function(C){return Math.acos(2*C/o-1)/Math.PI*180-90},m=function(C){return o*(Math.cos((C+90)*Math.PI/180)+1)/2},y=[s!==void 0?Math.ceil(m(s)):0,i!==void 0?Math.floor(m(i)):o-1],x=t===void 0&&n===void 0?function(){return!0}:t===void 0?function(N){return N<=n}:n===void 0?function(N){return N>=t}:n>=t?function(N){return N>=t&&N<=n}:function(N){return N>=t||N<=n},b=[],T=y[0];T<=y[1];T++){var M=h(T);x(M)&&b.push([M,d(T)])}return b}function Wf(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return t?NE(e,r):AC(r,e)}var ic=window.THREE?window.THREE:{BufferGeometry:bi,Float32BufferAttribute:Bo},s5=new ic.BufferGeometry().setAttribute?"setAttribute":"addAttribute",Ap=(function(r){function e(t,n,i,s,o,u,h){var d;OC(this,e),d=qC(this,e),d.type="ConicPolygonGeometry",d.parameters={polygonGeoJson:t,bottomHeight:n,topHeight:i,closedBottom:s,closedTop:o,includeSides:u,curvatureResolution:h},n=n||0,i=i||1,s=s!==void 0?s:!0,o=o!==void 0?o:!0,u=u!==void 0?u:!0,h=h||5;var m=jC(t,{resolution:h}),y=m.contour,x=m.triangles,b=nu(x.uvs),T=[],M=[],N=[],C=0,B=function(O){var k=Math.round(T.length/3),z=N.length;T=T.concat(O.vertices),M=M.concat(O.uvs),N=N.concat(k?O.indices.map(function(X){return X+k}):O.indices),d.addGroup(z,N.length-z,C++)};u&&B(I()),s&&B(D(n,!1)),o&&B(D(i,!0)),d.setIndex(N),d[s5]("position",new ic.Float32BufferAttribute(T,3)),d[s5]("uv",new ic.Float32BufferAttribute(M,2)),d.computeVertexNormals();function P(q,O){var k=typeof O=="function"?O:function(){return O},z=q.map(function(X){return X.map(function(W){var K=ss(W,2),Z=K[0],se=K[1];return YC(se,Z,k(Z,se))})});return jc(z)}function I(){for(var q=P(y,n),O=q.vertices,k=q.holes,z=P(y,i),X=z.vertices,W=nu([X,O]),K=Math.round(X.length/3),Z=new Set(k),se=0,Y=[],oe=0;oe<K;oe++){var he=oe+1;if(he===K)he=se;else if(Z.has(he)){var _e=he;he=se,se=_e}Y.push(oe,oe+K,he+K),Y.push(he+K,he,oe)}for(var ye=[],Pe=1;Pe>=0;Pe--)for(var qe=0;qe<K;qe+=1)ye.push(qe/(K-1),Pe);return{indices:Y,vertices:W,uvs:ye}}function D(q){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return{indices:O?x.indices:x.indices.slice().reverse(),vertices:P([x.points],q).vertices,uvs:b}}return d}return kC(e,r),UC(e)})(ic.BufferGeometry);function YC(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=(90-r)*Math.PI/180,i=(90-e)*Math.PI/180;return[t*Math.sin(n)*Math.cos(i),t*Math.cos(n),t*Math.sin(n)*Math.sin(i)]}function Qf(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function KC(r){if(Array.isArray(r))return r}function ZC(r){if(Array.isArray(r))return Qf(r)}function JC(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function eP(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n,i,s,o,u=[],h=!0,d=!1;try{if(s=(t=t.call(r)).next,e!==0)for(;!(h=(n=s.call(t)).done)&&(u.push(n.value),u.length!==e);h=!0);}catch(m){d=!0,i=m}finally{try{if(!h&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(d)throw i}}return u}}function tP(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nP(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rP(r,e){if(r==null)return{};var t,n,i=iP(r,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(n=0;n<s.length;n++)t=s[n],e.includes(t)||{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function iP(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.includes(n))continue;t[n]=r[n]}return t}function sP(r,e){return KC(r)||eP(r,e)||W7(r,e)||tP()}function oP(r){return ZC(r)||JC(r)||W7(r)||nP()}function aP(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}function AP(r){var e=aP(r,"string");return typeof e=="symbol"?e:e+""}function W7(r,e){if(r){if(typeof r=="string")return Qf(r,e);var t={}.toString.call(r).slice(8,-1);return t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set"?Array.from(r):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Qf(r,e):void 0}}var lP=(function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,i=(e instanceof Array?e.length?e:[void 0]:[e]).map(function(u){return{keyAccessor:u,isProp:!(u instanceof Function)}}),s=r.reduce(function(u,h){var d=u,m=h;return i.forEach(function(y,x){var b=y.keyAccessor,T=y.isProp,M;if(T){var N=m,C=N[b],B=rP(N,[b].map(AP));M=C,m=B}else M=b(m,x);x+1<i.length?(d.hasOwnProperty(M)||(d[M]={}),d=d[M]):t?(d.hasOwnProperty(M)||(d[M]=[]),d[M].push(m)):d[M]=m}),u},{});t instanceof Function&&(function u(h){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;d===i.length?Object.keys(h).forEach(function(m){return h[m]=t(h[m])}):Object.values(h).forEach(function(m){return u(m,d+1)})})(s);var o=s;return n&&(o=[],(function u(h){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];d.length===i.length?o.push({keys:d,vals:h}):Object.entries(h).forEach(function(m){var y=sP(m,2),x=y[0],b=y[1];return u(b,[].concat(oP(d),[x]))})})(s),e instanceof Array&&e.length===0&&o.length===1&&(o[0].keys=[])),o}),Et=(function(r){r=r||{};var e=typeof r<"u"?r:{},t={},n;for(n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);var i="";function s(fe){return e.locateFile?e.locateFile(fe,i):i+fe}var o;typeof document<"u"&&document.currentScript&&(i=document.currentScript.src),i.indexOf("blob:")!==0?i=i.substr(0,i.lastIndexOf("/")+1):i="",o=function(xe,Le,we){var A=new XMLHttpRequest;A.open("GET",xe,!0),A.responseType="arraybuffer",A.onload=function(){if(A.status==200||A.status==0&&A.response){Le(A.response);return}var Ct=le(xe);if(Ct){Le(Ct.buffer);return}we()},A.onerror=we,A.send(null)};var u=e.print||console.log.bind(console),h=e.printErr||console.warn.bind(console);for(n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);t=null,e.arguments&&e.arguments;var d=0,m=function(fe){d=fe},y=function(){return d},x=8;function b(fe,xe,Le,we){switch(Le=Le||"i8",Le.charAt(Le.length-1)==="*"&&(Le="i32"),Le){case"i1":K[fe>>0]=xe;break;case"i8":K[fe>>0]=xe;break;case"i16":se[fe>>1]=xe;break;case"i32":Y[fe>>2]=xe;break;case"i64":YA=[xe>>>0,(Jr=xe,+on(Jr)>=1?Jr>0?(to(+Or(Jr/4294967296),4294967295)|0)>>>0:~~+Rn((Jr-+(~~Jr>>>0))/4294967296)>>>0:0)],Y[fe>>2]=YA[0],Y[fe+4>>2]=YA[1];break;case"float":oe[fe>>2]=xe;break;case"double":he[fe>>3]=xe;break;default:Mi("invalid type for setValue: "+Le)}}function T(fe,xe,Le){switch(xe=xe||"i8",xe.charAt(xe.length-1)==="*"&&(xe="i32"),xe){case"i1":return K[fe>>0];case"i8":return K[fe>>0];case"i16":return se[fe>>1];case"i32":return Y[fe>>2];case"i64":return Y[fe>>2];case"float":return oe[fe>>2];case"double":return he[fe>>3];default:Mi("invalid type for getValue: "+xe)}return null}var M=!1;function N(fe,xe){fe||Mi("Assertion failed: "+xe)}function C(fe){var xe=e["_"+fe];return N(xe,"Cannot call unknown function "+fe+", make sure it is exported"),xe}function B(fe,xe,Le,we,A){var F={string:function(vt){var ri=0;if(vt!=null&&vt!==0){var zu=(vt.length<<2)+1;ri=ei(zu),k(vt,ri,zu)}return ri},array:function(vt){var ri=ei(vt.length);return z(vt,ri),ri}};function Ct(vt){return xe==="string"?q(vt):xe==="boolean"?!!vt:vt}var Gt=C(fe),Gn=[],yt=0;if(we)for(var Pt=0;Pt<we.length;Pt++){var ro=F[Le[Pt]];ro?(yt===0&&(yt=I3()),Gn[Pt]=ro(we[Pt])):Gn[Pt]=we[Pt]}var Lt=Gt.apply(null,Gn);return Lt=Ct(Lt),yt!==0&&Hi(yt),Lt}function P(fe,xe,Le,we){Le=Le||[];var A=Le.every(function(Ct){return Ct==="number"}),F=xe!=="string";return F&&A&&!we?C(fe):function(){return B(fe,xe,Le,arguments)}}var I=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function D(fe,xe,Le){for(var we=xe+Le,A=xe;fe[A]&&!(A>=we);)++A;if(A-xe>16&&fe.subarray&&I)return I.decode(fe.subarray(xe,A));for(var F="";xe<A;){var Ct=fe[xe++];if(!(Ct&128)){F+=String.fromCharCode(Ct);continue}var Gt=fe[xe++]&63;if((Ct&224)==192){F+=String.fromCharCode((Ct&31)<<6|Gt);continue}var Gn=fe[xe++]&63;if((Ct&240)==224?Ct=(Ct&15)<<12|Gt<<6|Gn:Ct=(Ct&7)<<18|Gt<<12|Gn<<6|fe[xe++]&63,Ct<65536)F+=String.fromCharCode(Ct);else{var yt=Ct-65536;F+=String.fromCharCode(55296|yt>>10,56320|yt&1023)}}return F}function q(fe,xe){return fe?D(Z,fe,xe):""}function O(fe,xe,Le,we){if(!(we>0))return 0;for(var A=Le,F=Le+we-1,Ct=0;Ct<fe.length;++Ct){var Gt=fe.charCodeAt(Ct);if(Gt>=55296&&Gt<=57343){var Gn=fe.charCodeAt(++Ct);Gt=65536+((Gt&1023)<<10)|Gn&1023}if(Gt<=127){if(Le>=F)break;xe[Le++]=Gt}else if(Gt<=2047){if(Le+1>=F)break;xe[Le++]=192|Gt>>6,xe[Le++]=128|Gt&63}else if(Gt<=65535){if(Le+2>=F)break;xe[Le++]=224|Gt>>12,xe[Le++]=128|Gt>>6&63,xe[Le++]=128|Gt&63}else{if(Le+3>=F)break;xe[Le++]=240|Gt>>18,xe[Le++]=128|Gt>>12&63,xe[Le++]=128|Gt>>6&63,xe[Le++]=128|Gt&63}}return xe[Le]=0,Le-A}function k(fe,xe,Le){return O(fe,Z,xe,Le)}typeof TextDecoder<"u"&&new TextDecoder("utf-16le");function z(fe,xe){K.set(fe,xe)}function X(fe,xe){return fe%xe>0&&(fe+=xe-fe%xe),fe}var W,K,Z,se,Y,oe,he;function _e(fe){W=fe,e.HEAP8=K=new Int8Array(fe),e.HEAP16=se=new Int16Array(fe),e.HEAP32=Y=new Int32Array(fe),e.HEAPU8=Z=new Uint8Array(fe),e.HEAPU16=new Uint16Array(fe),e.HEAPU32=new Uint32Array(fe),e.HEAPF32=oe=new Float32Array(fe),e.HEAPF64=he=new Float64Array(fe)}var ye=5271520,Pe=28608,qe=e.TOTAL_MEMORY||33554432;e.buffer?W=e.buffer:W=new ArrayBuffer(qe),qe=W.byteLength,_e(W),Y[Pe>>2]=ye;function Ye(fe){for(;fe.length>0;){var xe=fe.shift();if(typeof xe=="function"){xe();continue}var Le=xe.func;typeof Le=="number"?xe.arg===void 0?e.dynCall_v(Le):e.dynCall_vi(Le,xe.arg):Le(xe.arg===void 0?null:xe.arg)}}var He=[],Rt=[],pt=[],Nt=[];function It(){if(e.preRun)for(typeof e.preRun=="function"&&(e.preRun=[e.preRun]);e.preRun.length;)Bn(e.preRun.shift());Ye(He)}function dn(){Ye(Rt)}function Nn(){Ye(pt)}function sn(){if(e.postRun)for(typeof e.postRun=="function"&&(e.postRun=[e.postRun]);e.postRun.length;)ir(e.postRun.shift());Ye(Nt)}function Bn(fe){He.unshift(fe)}function ir(fe){Nt.unshift(fe)}var on=Math.abs,Rn=Math.ceil,Or=Math.floor,to=Math.min,sr=0,Ur=null;function $i(fe){sr++,e.monitorRunDependencies&&e.monitorRunDependencies(sr)}function a2(fe){if(sr--,e.monitorRunDependencies&&e.monitorRunDependencies(sr),sr==0&&Ur){var xe=Ur;Ur=null,xe()}}e.preloadedImages={},e.preloadedAudios={};var Si=null,Ba="data:application/octet-stream;base64,";function Da(fe){return String.prototype.startsWith?fe.startsWith(Ba):fe.indexOf(Ba)===0}var Jr,YA;Si="data:application/octet-stream;base64,AAAAAAAAAAAAAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAAAQAAAAQAAAADAAAABgAAAAUAAAACAAAAAAAAAAIAAAADAAAAAQAAAAQAAAAGAAAAAAAAAAUAAAADAAAABgAAAAQAAAAFAAAAAAAAAAEAAAACAAAABAAAAAUAAAAGAAAAAAAAAAIAAAADAAAAAQAAAAUAAAACAAAAAAAAAAEAAAADAAAABgAAAAQAAAAGAAAAAAAAAAUAAAACAAAAAQAAAAQAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAIAAAADAAAAAAAAAAAAAAACAAAAAAAAAAEAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAYAAAAAAAAABQAAAAAAAAAAAAAABAAAAAUAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAYAAAAAAAAABgAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAAAAAAAAgAAAAMAAAAEAAAABQAAAAYAAAAAAAAAAQAAAAMAAAAEAAAABQAAAAYAAAAAAAAAAQAAAAIAAAAEAAAABQAAAAYAAAAAAAAAAQAAAAIAAAADAAAABQAAAAYAAAAAAAAAAQAAAAIAAAADAAAABAAAAAYAAAAAAAAAAQAAAAIAAAADAAAABAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAgAAAAIAAAAAAAAAAAAAAAYAAAAAAAAAAwAAAAIAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAFAAAABAAAAAAAAAABAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAYAAAAAAAAABAAAAAAAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAgAAAAQAAAADAAAACAAAAAEAAAAHAAAABgAAAAkAAAAAAAAAAwAAAAIAAAACAAAABgAAAAoAAAALAAAAAAAAAAEAAAAFAAAAAwAAAA0AAAABAAAABwAAAAQAAAAMAAAAAAAAAAQAAAB/AAAADwAAAAgAAAADAAAAAAAAAAwAAAAFAAAAAgAAABIAAAAKAAAACAAAAAAAAAAQAAAABgAAAA4AAAALAAAAEQAAAAEAAAAJAAAAAgAAAAcAAAAVAAAACQAAABMAAAADAAAADQAAAAEAAAAIAAAABQAAABYAAAAQAAAABAAAAAAAAAAPAAAACQAAABMAAAAOAAAAFAAAAAEAAAAHAAAABgAAAAoAAAALAAAAGAAAABcAAAAFAAAAAgAAABIAAAALAAAAEQAAABcAAAAZAAAAAgAAAAYAAAAKAAAADAAAABwAAAANAAAAGgAAAAQAAAAPAAAAAwAAAA0AAAAaAAAAFQAAAB0AAAADAAAADAAAAAcAAAAOAAAAfwAAABEAAAAbAAAACQAAABQAAAAGAAAADwAAABYAAAAcAAAAHwAAAAQAAAAIAAAADAAAABAAAAASAAAAIQAAAB4AAAAIAAAABQAAABYAAAARAAAACwAAAA4AAAAGAAAAIwAAABkAAAAbAAAAEgAAABgAAAAeAAAAIAAAAAUAAAAKAAAAEAAAABMAAAAiAAAAFAAAACQAAAAHAAAAFQAAAAkAAAAUAAAADgAAABMAAAAJAAAAKAAAABsAAAAkAAAAFQAAACYAAAATAAAAIgAAAA0AAAAdAAAABwAAABYAAAAQAAAAKQAAACEAAAAPAAAACAAAAB8AAAAXAAAAGAAAAAsAAAAKAAAAJwAAACUAAAAZAAAAGAAAAH8AAAAgAAAAJQAAAAoAAAAXAAAAEgAAABkAAAAXAAAAEQAAAAsAAAAtAAAAJwAAACMAAAAaAAAAKgAAAB0AAAArAAAADAAAABwAAAANAAAAGwAAACgAAAAjAAAALgAAAA4AAAAUAAAAEQAAABwAAAAfAAAAKgAAACwAAAAMAAAADwAAABoAAAAdAAAAKwAAACYAAAAvAAAADQAAABoAAAAVAAAAHgAAACAAAAAwAAAAMgAAABAAAAASAAAAIQAAAB8AAAApAAAALAAAADUAAAAPAAAAFgAAABwAAAAgAAAAHgAAABgAAAASAAAANAAAADIAAAAlAAAAIQAAAB4AAAAxAAAAMAAAABYAAAAQAAAAKQAAACIAAAATAAAAJgAAABUAAAA2AAAAJAAAADMAAAAjAAAALgAAAC0AAAA4AAAAEQAAABsAAAAZAAAAJAAAABQAAAAiAAAAEwAAADcAAAAoAAAANgAAACUAAAAnAAAANAAAADkAAAAYAAAAFwAAACAAAAAmAAAAfwAAACIAAAAzAAAAHQAAAC8AAAAVAAAAJwAAACUAAAAZAAAAFwAAADsAAAA5AAAALQAAACgAAAAbAAAAJAAAABQAAAA8AAAALgAAADcAAAApAAAAMQAAADUAAAA9AAAAFgAAACEAAAAfAAAAKgAAADoAAAArAAAAPgAAABwAAAAsAAAAGgAAACsAAAA+AAAALwAAAEAAAAAaAAAAKgAAAB0AAAAsAAAANQAAADoAAABBAAAAHAAAAB8AAAAqAAAALQAAACcAAAAjAAAAGQAAAD8AAAA7AAAAOAAAAC4AAAA8AAAAOAAAAEQAAAAbAAAAKAAAACMAAAAvAAAAJgAAACsAAAAdAAAARQAAADMAAABAAAAAMAAAADEAAAAeAAAAIQAAAEMAAABCAAAAMgAAADEAAAB/AAAAPQAAAEIAAAAhAAAAMAAAACkAAAAyAAAAMAAAACAAAAAeAAAARgAAAEMAAAA0AAAAMwAAAEUAAAA2AAAARwAAACYAAAAvAAAAIgAAADQAAAA5AAAARgAAAEoAAAAgAAAAJQAAADIAAAA1AAAAPQAAAEEAAABLAAAAHwAAACkAAAAsAAAANgAAAEcAAAA3AAAASQAAACIAAAAzAAAAJAAAADcAAAAoAAAANgAAACQAAABIAAAAPAAAAEkAAAA4AAAARAAAAD8AAABNAAAAIwAAAC4AAAAtAAAAOQAAADsAAABKAAAATgAAACUAAAAnAAAANAAAADoAAAB/AAAAPgAAAEwAAAAsAAAAQQAAACoAAAA7AAAAPwAAAE4AAABPAAAAJwAAAC0AAAA5AAAAPAAAAEgAAABEAAAAUAAAACgAAAA3AAAALgAAAD0AAAA1AAAAMQAAACkAAABRAAAASwAAAEIAAAA+AAAAKwAAADoAAAAqAAAAUgAAAEAAAABMAAAAPwAAAH8AAAA4AAAALQAAAE8AAAA7AAAATQAAAEAAAAAvAAAAPgAAACsAAABUAAAARQAAAFIAAABBAAAAOgAAADUAAAAsAAAAVgAAAEwAAABLAAAAQgAAAEMAAABRAAAAVQAAADEAAAAwAAAAPQAAAEMAAABCAAAAMgAAADAAAABXAAAAVQAAAEYAAABEAAAAOAAAADwAAAAuAAAAWgAAAE0AAABQAAAARQAAADMAAABAAAAALwAAAFkAAABHAAAAVAAAAEYAAABDAAAANAAAADIAAABTAAAAVwAAAEoAAABHAAAAWQAAAEkAAABbAAAAMwAAAEUAAAA2AAAASAAAAH8AAABJAAAANwAAAFAAAAA8AAAAWAAAAEkAAABbAAAASAAAAFgAAAA2AAAARwAAADcAAABKAAAATgAAAFMAAABcAAAANAAAADkAAABGAAAASwAAAEEAAAA9AAAANQAAAF4AAABWAAAAUQAAAEwAAABWAAAAUgAAAGAAAAA6AAAAQQAAAD4AAABNAAAAPwAAAEQAAAA4AAAAXQAAAE8AAABaAAAATgAAAEoAAAA7AAAAOQAAAF8AAABcAAAATwAAAE8AAABOAAAAPwAAADsAAABdAAAAXwAAAE0AAABQAAAARAAAAEgAAAA8AAAAYwAAAFoAAABYAAAAUQAAAFUAAABeAAAAZQAAAD0AAABCAAAASwAAAFIAAABgAAAAVAAAAGIAAAA+AAAATAAAAEAAAABTAAAAfwAAAEoAAABGAAAAZAAAAFcAAABcAAAAVAAAAEUAAABSAAAAQAAAAGEAAABZAAAAYgAAAFUAAABXAAAAZQAAAGYAAABCAAAAQwAAAFEAAABWAAAATAAAAEsAAABBAAAAaAAAAGAAAABeAAAAVwAAAFMAAABmAAAAZAAAAEMAAABGAAAAVQAAAFgAAABIAAAAWwAAAEkAAABjAAAAUAAAAGkAAABZAAAAYQAAAFsAAABnAAAARQAAAFQAAABHAAAAWgAAAE0AAABQAAAARAAAAGoAAABdAAAAYwAAAFsAAABJAAAAWQAAAEcAAABpAAAAWAAAAGcAAABcAAAAUwAAAE4AAABKAAAAbAAAAGQAAABfAAAAXQAAAE8AAABaAAAATQAAAG0AAABfAAAAagAAAF4AAABWAAAAUQAAAEsAAABrAAAAaAAAAGUAAABfAAAAXAAAAE8AAABOAAAAbQAAAGwAAABdAAAAYAAAAGgAAABiAAAAbgAAAEwAAABWAAAAUgAAAGEAAAB/AAAAYgAAAFQAAABnAAAAWQAAAG8AAABiAAAAbgAAAGEAAABvAAAAUgAAAGAAAABUAAAAYwAAAFAAAABpAAAAWAAAAGoAAABaAAAAcQAAAGQAAABmAAAAUwAAAFcAAABsAAAAcgAAAFwAAABlAAAAZgAAAGsAAABwAAAAUQAAAFUAAABeAAAAZgAAAGUAAABXAAAAVQAAAHIAAABwAAAAZAAAAGcAAABbAAAAYQAAAFkAAAB0AAAAaQAAAG8AAABoAAAAawAAAG4AAABzAAAAVgAAAF4AAABgAAAAaQAAAFgAAABnAAAAWwAAAHEAAABjAAAAdAAAAGoAAABdAAAAYwAAAFoAAAB1AAAAbQAAAHEAAABrAAAAfwAAAGUAAABeAAAAcwAAAGgAAABwAAAAbAAAAGQAAABfAAAAXAAAAHYAAAByAAAAbQAAAG0AAABsAAAAXQAAAF8AAAB1AAAAdgAAAGoAAABuAAAAYgAAAGgAAABgAAAAdwAAAG8AAABzAAAAbwAAAGEAAABuAAAAYgAAAHQAAABnAAAAdwAAAHAAAABrAAAAZgAAAGUAAAB4AAAAcwAAAHIAAABxAAAAYwAAAHQAAABpAAAAdQAAAGoAAAB5AAAAcgAAAHAAAABkAAAAZgAAAHYAAAB4AAAAbAAAAHMAAABuAAAAawAAAGgAAAB4AAAAdwAAAHAAAAB0AAAAZwAAAHcAAABvAAAAcQAAAGkAAAB5AAAAdQAAAH8AAABtAAAAdgAAAHEAAAB5AAAAagAAAHYAAAB4AAAAbAAAAHIAAAB1AAAAeQAAAG0AAAB3AAAAbwAAAHMAAABuAAAAeQAAAHQAAAB4AAAAeAAAAHMAAAByAAAAcAAAAHkAAAB3AAAAdgAAAHkAAAB0AAAAeAAAAHcAAAB1AAAAcQAAAHYAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAABAAAABQAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAACAAAABQAAAAEAAAAAAAAA/////wEAAAAAAAAAAwAAAAQAAAACAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAFAAAAAQAAAAAAAAAAAAAAAQAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAAAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAADAAAABQAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAEAAAABQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAQAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAADAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAAAAAABAAAAAwAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAADAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAUAAAABAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAABAAAAAUAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAIAAAAFAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAD/////AQAAAAAAAAADAAAABAAAAAIAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAUAAAABAAAAAAAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAEAAAD//////////wEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAADAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAACAAAAAAAAAAAAAAABAAAAAgAAAAYAAAAEAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAcAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAKAAAAAgAAAAAAAAAAAAAAAQAAAAEAAAAFAAAABgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAACAAAAAAAAAAAAAAABAAAAAwAAAAcAAAAGAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAABwAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAGAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAADgAAAAIAAAAAAAAAAAAAAAEAAAAAAAAACQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAMAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAIAAAAAAAAAAAAAAAEAAAAEAAAACAAAAAoAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAALAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAACQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAGAAAAAgAAAAAAAAAAAAAAAQAAAAsAAAAPAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAOAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAIAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAABQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAgAAAAAAAAAAAAAAAQAAAAwAAAAQAAAADAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAoAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAJAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAPAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAADwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAACAAAAAAAAAAAAAAABAAAACgAAABMAAAAIAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAA8AAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAQAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAACQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAIAAAAAAAAAAAAAAAEAAAANAAAAEQAAAA0AAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAARAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAA0AAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAACAAAAAAAAAAAAAAABAAAADgAAABIAAAAPAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAADwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABIAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAASAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABIAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAATAAAAAgAAAAAAAAAAAAAAAQAAAP//////////EwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEgAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAASAAAAAAAAABgAAAAAAAAAIQAAAAAAAAAeAAAAAAAAACAAAAADAAAAMQAAAAEAAAAwAAAAAwAAADIAAAADAAAACAAAAAAAAAAFAAAABQAAAAoAAAAFAAAAFgAAAAAAAAAQAAAAAAAAABIAAAAAAAAAKQAAAAEAAAAhAAAAAAAAAB4AAAAAAAAABAAAAAAAAAAAAAAABQAAAAIAAAAFAAAADwAAAAEAAAAIAAAAAAAAAAUAAAAFAAAAHwAAAAEAAAAWAAAAAAAAABAAAAAAAAAAAgAAAAAAAAAGAAAAAAAAAA4AAAAAAAAACgAAAAAAAAALAAAAAAAAABEAAAADAAAAGAAAAAEAAAAXAAAAAwAAABkAAAADAAAAAAAAAAAAAAABAAAABQAAAAkAAAAFAAAABQAAAAAAAAACAAAAAAAAAAYAAAAAAAAAEgAAAAEAAAAKAAAAAAAAAAsAAAAAAAAABAAAAAEAAAADAAAABQAAAAcAAAAFAAAACAAAAAEAAAAAAAAAAAAAAAEAAAAFAAAAEAAAAAEAAAAFAAAAAAAAAAIAAAAAAAAABwAAAAAAAAAVAAAAAAAAACYAAAAAAAAACQAAAAAAAAATAAAAAAAAACIAAAADAAAADgAAAAEAAAAUAAAAAwAAACQAAAADAAAAAwAAAAAAAAANAAAABQAAAB0AAAAFAAAAAQAAAAAAAAAHAAAAAAAAABUAAAAAAAAABgAAAAEAAAAJAAAAAAAAABMAAAAAAAAABAAAAAIAAAAMAAAABQAAABoAAAAFAAAAAAAAAAEAAAADAAAAAAAAAA0AAAAFAAAAAgAAAAEAAAABAAAAAAAAAAcAAAAAAAAAGgAAAAAAAAAqAAAAAAAAADoAAAAAAAAAHQAAAAAAAAArAAAAAAAAAD4AAAADAAAAJgAAAAEAAAAvAAAAAwAAAEAAAAADAAAADAAAAAAAAAAcAAAABQAAACwAAAAFAAAADQAAAAAAAAAaAAAAAAAAACoAAAAAAAAAFQAAAAEAAAAdAAAAAAAAACsAAAAAAAAABAAAAAMAAAAPAAAABQAAAB8AAAAFAAAAAwAAAAEAAAAMAAAAAAAAABwAAAAFAAAABwAAAAEAAAANAAAAAAAAABoAAAAAAAAAHwAAAAAAAAApAAAAAAAAADEAAAAAAAAALAAAAAAAAAA1AAAAAAAAAD0AAAADAAAAOgAAAAEAAABBAAAAAwAAAEsAAAADAAAADwAAAAAAAAAWAAAABQAAACEAAAAFAAAAHAAAAAAAAAAfAAAAAAAAACkAAAAAAAAAKgAAAAEAAAAsAAAAAAAAADUAAAAAAAAABAAAAAQAAAAIAAAABQAAABAAAAAFAAAADAAAAAEAAAAPAAAAAAAAABYAAAAFAAAAGgAAAAEAAAAcAAAAAAAAAB8AAAAAAAAAMgAAAAAAAAAwAAAAAAAAADEAAAADAAAAIAAAAAAAAAAeAAAAAwAAACEAAAADAAAAGAAAAAMAAAASAAAAAwAAABAAAAADAAAARgAAAAAAAABDAAAAAAAAAEIAAAADAAAANAAAAAMAAAAyAAAAAAAAADAAAAAAAAAAJQAAAAMAAAAgAAAAAAAAAB4AAAADAAAAUwAAAAAAAABXAAAAAwAAAFUAAAADAAAASgAAAAMAAABGAAAAAAAAAEMAAAAAAAAAOQAAAAEAAAA0AAAAAwAAADIAAAAAAAAAGQAAAAAAAAAXAAAAAAAAABgAAAADAAAAEQAAAAAAAAALAAAAAwAAAAoAAAADAAAADgAAAAMAAAAGAAAAAwAAAAIAAAADAAAALQAAAAAAAAAnAAAAAAAAACUAAAADAAAAIwAAAAMAAAAZAAAAAAAAABcAAAAAAAAAGwAAAAMAAAARAAAAAAAAAAsAAAADAAAAPwAAAAAAAAA7AAAAAwAAADkAAAADAAAAOAAAAAMAAAAtAAAAAAAAACcAAAAAAAAALgAAAAMAAAAjAAAAAwAAABkAAAAAAAAAJAAAAAAAAAAUAAAAAAAAAA4AAAADAAAAIgAAAAAAAAATAAAAAwAAAAkAAAADAAAAJgAAAAMAAAAVAAAAAwAAAAcAAAADAAAANwAAAAAAAAAoAAAAAAAAABsAAAADAAAANgAAAAMAAAAkAAAAAAAAABQAAAAAAAAAMwAAAAMAAAAiAAAAAAAAABMAAAADAAAASAAAAAAAAAA8AAAAAwAAAC4AAAADAAAASQAAAAMAAAA3AAAAAAAAACgAAAAAAAAARwAAAAMAAAA2AAAAAwAAACQAAAAAAAAAQAAAAAAAAAAvAAAAAAAAACYAAAADAAAAPgAAAAAAAAArAAAAAwAAAB0AAAADAAAAOgAAAAMAAAAqAAAAAwAAABoAAAADAAAAVAAAAAAAAABFAAAAAAAAADMAAAADAAAAUgAAAAMAAABAAAAAAAAAAC8AAAAAAAAATAAAAAMAAAA+AAAAAAAAACsAAAADAAAAYQAAAAAAAABZAAAAAwAAAEcAAAADAAAAYgAAAAMAAABUAAAAAAAAAEUAAAAAAAAAYAAAAAMAAABSAAAAAwAAAEAAAAAAAAAASwAAAAAAAABBAAAAAAAAADoAAAADAAAAPQAAAAAAAAA1AAAAAwAAACwAAAADAAAAMQAAAAMAAAApAAAAAwAAAB8AAAADAAAAXgAAAAAAAABWAAAAAAAAAEwAAAADAAAAUQAAAAMAAABLAAAAAAAAAEEAAAAAAAAAQgAAAAMAAAA9AAAAAAAAADUAAAADAAAAawAAAAAAAABoAAAAAwAAAGAAAAADAAAAZQAAAAMAAABeAAAAAAAAAFYAAAAAAAAAVQAAAAMAAABRAAAAAwAAAEsAAAAAAAAAOQAAAAAAAAA7AAAAAAAAAD8AAAADAAAASgAAAAAAAABOAAAAAwAAAE8AAAADAAAAUwAAAAMAAABcAAAAAwAAAF8AAAADAAAAJQAAAAAAAAAnAAAAAwAAAC0AAAADAAAANAAAAAAAAAA5AAAAAAAAADsAAAAAAAAARgAAAAMAAABKAAAAAAAAAE4AAAADAAAAGAAAAAAAAAAXAAAAAwAAABkAAAADAAAAIAAAAAMAAAAlAAAAAAAAACcAAAADAAAAMgAAAAMAAAA0AAAAAAAAADkAAAAAAAAALgAAAAAAAAA8AAAAAAAAAEgAAAADAAAAOAAAAAAAAABEAAAAAwAAAFAAAAADAAAAPwAAAAMAAABNAAAAAwAAAFoAAAADAAAAGwAAAAAAAAAoAAAAAwAAADcAAAADAAAAIwAAAAAAAAAuAAAAAAAAADwAAAAAAAAALQAAAAMAAAA4AAAAAAAAAEQAAAADAAAADgAAAAAAAAAUAAAAAwAAACQAAAADAAAAEQAAAAMAAAAbAAAAAAAAACgAAAADAAAAGQAAAAMAAAAjAAAAAAAAAC4AAAAAAAAARwAAAAAAAABZAAAAAAAAAGEAAAADAAAASQAAAAAAAABbAAAAAwAAAGcAAAADAAAASAAAAAMAAABYAAAAAwAAAGkAAAADAAAAMwAAAAAAAABFAAAAAwAAAFQAAAADAAAANgAAAAAAAABHAAAAAAAAAFkAAAAAAAAANwAAAAMAAABJAAAAAAAAAFsAAAADAAAAJgAAAAAAAAAvAAAAAwAAAEAAAAADAAAAIgAAAAMAAAAzAAAAAAAAAEUAAAADAAAAJAAAAAMAAAA2AAAAAAAAAEcAAAAAAAAAYAAAAAAAAABoAAAAAAAAAGsAAAADAAAAYgAAAAAAAABuAAAAAwAAAHMAAAADAAAAYQAAAAMAAABvAAAAAwAAAHcAAAADAAAATAAAAAAAAABWAAAAAwAAAF4AAAADAAAAUgAAAAAAAABgAAAAAAAAAGgAAAAAAAAAVAAAAAMAAABiAAAAAAAAAG4AAAADAAAAOgAAAAAAAABBAAAAAwAAAEsAAAADAAAAPgAAAAMAAABMAAAAAAAAAFYAAAADAAAAQAAAAAMAAABSAAAAAAAAAGAAAAAAAAAAVQAAAAAAAABXAAAAAAAAAFMAAAADAAAAZQAAAAAAAABmAAAAAwAAAGQAAAADAAAAawAAAAMAAABwAAAAAwAAAHIAAAADAAAAQgAAAAAAAABDAAAAAwAAAEYAAAADAAAAUQAAAAAAAABVAAAAAAAAAFcAAAAAAAAAXgAAAAMAAABlAAAAAAAAAGYAAAADAAAAMQAAAAAAAAAwAAAAAwAAADIAAAADAAAAPQAAAAMAAABCAAAAAAAAAEMAAAADAAAASwAAAAMAAABRAAAAAAAAAFUAAAAAAAAAXwAAAAAAAABcAAAAAAAAAFMAAAAAAAAATwAAAAAAAABOAAAAAAAAAEoAAAADAAAAPwAAAAEAAAA7AAAAAwAAADkAAAADAAAAbQAAAAAAAABsAAAAAAAAAGQAAAAFAAAAXQAAAAEAAABfAAAAAAAAAFwAAAAAAAAATQAAAAEAAABPAAAAAAAAAE4AAAAAAAAAdQAAAAQAAAB2AAAABQAAAHIAAAAFAAAAagAAAAEAAABtAAAAAAAAAGwAAAAAAAAAWgAAAAEAAABdAAAAAQAAAF8AAAAAAAAAWgAAAAAAAABNAAAAAAAAAD8AAAAAAAAAUAAAAAAAAABEAAAAAAAAADgAAAADAAAASAAAAAEAAAA8AAAAAwAAAC4AAAADAAAAagAAAAAAAABdAAAAAAAAAE8AAAAFAAAAYwAAAAEAAABaAAAAAAAAAE0AAAAAAAAAWAAAAAEAAABQAAAAAAAAAEQAAAAAAAAAdQAAAAMAAABtAAAABQAAAF8AAAAFAAAAcQAAAAEAAABqAAAAAAAAAF0AAAAAAAAAaQAAAAEAAABjAAAAAQAAAFoAAAAAAAAAaQAAAAAAAABYAAAAAAAAAEgAAAAAAAAAZwAAAAAAAABbAAAAAAAAAEkAAAADAAAAYQAAAAEAAABZAAAAAwAAAEcAAAADAAAAcQAAAAAAAABjAAAAAAAAAFAAAAAFAAAAdAAAAAEAAABpAAAAAAAAAFgAAAAAAAAAbwAAAAEAAABnAAAAAAAAAFsAAAAAAAAAdQAAAAIAAABqAAAABQAAAFoAAAAFAAAAeQAAAAEAAABxAAAAAAAAAGMAAAAAAAAAdwAAAAEAAAB0AAAAAQAAAGkAAAAAAAAAdwAAAAAAAABvAAAAAAAAAGEAAAAAAAAAcwAAAAAAAABuAAAAAAAAAGIAAAADAAAAawAAAAEAAABoAAAAAwAAAGAAAAADAAAAeQAAAAAAAAB0AAAAAAAAAGcAAAAFAAAAeAAAAAEAAAB3AAAAAAAAAG8AAAAAAAAAcAAAAAEAAABzAAAAAAAAAG4AAAAAAAAAdQAAAAEAAABxAAAABQAAAGkAAAAFAAAAdgAAAAEAAAB5AAAAAAAAAHQAAAAAAAAAcgAAAAEAAAB4AAAAAQAAAHcAAAAAAAAAcgAAAAAAAABwAAAAAAAAAGsAAAAAAAAAZAAAAAAAAABmAAAAAAAAAGUAAAADAAAAUwAAAAEAAABXAAAAAwAAAFUAAAADAAAAdgAAAAAAAAB4AAAAAAAAAHMAAAAFAAAAbAAAAAEAAAByAAAAAAAAAHAAAAAAAAAAXAAAAAEAAABkAAAAAAAAAGYAAAAAAAAAdQAAAAAAAAB5AAAABQAAAHcAAAAFAAAAbQAAAAEAAAB2AAAAAAAAAHgAAAAAAAAAXwAAAAEAAABsAAAAAQAAAHIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAGAAAAAgAAAAUAAAABAAAABAAAAAAAAAAAAAAABQAAAAMAAAABAAAABgAAAAQAAAACAAAAAAAAAH6iBfbytuk/Gq6akm/58z/Xrm0Liez0P5doSdOpSwRAWs602ULg8D/dT7Rcbo/1v1N1RQHFNOM/g9Snx7HW3L8HWsP8Q3jfP6VwOLosutk/9rjk1YQcxj+gnmKMsNn6P/HDeuPFY+M/YHwDjqKhB0Ci19/fCVrbP4UxKkDWOP6/pvljWa09tL9wi7wrQXjnv/Z6yLImkM2/3yTlOzY14D+m+WNZrT20PzwKVQnrQwNA9nrIsiaQzT/g40rFrRQFwPa45NWEHMa/kbslHEZq97/xw3rjxWPjv4cLC2SMBci/otff3wla27+rKF5oIAv0P1N1RQHFNOO/iDJPGyWHBUAHWsP8Q3jfvwQf/by16gXAfqIF9vK26b8XrO0Vh0r+v9eubQuJ7PS/BxLrA0ZZ479azrTZQuDwv1MK1EuItPw/yscgV9Z6FkAwHBR2WjQMQJNRzXsQ5vY/GlUHVJYKF0DONuFv2lMNQNCGZ28QJfk/0WUwoIL36D8ggDOMQuATQNqMOeAy/wZAWFYOYM+M2z/LWC4uH3oSQDE+LyTsMgRAkJzhRGWFGEDd4soovCQQQKqk0DJMEP8/rGmNdwOLBUAW2X/9xCbjP4hu3dcqJhNAzuYItRvdB0CgzW3zJW/sPxotm/Y2TxRAQAk9XmdDDEC1Kx9MKgT3P1M+NctcghZAFVqcLlb0C0Bgzd3sB2b2P77mZDPUWhZAFROHJpUGCEDAfma5CxXtPz1DWq/zYxRAmhYY5824F0DOuQKWSbAOQNCMqrvu3fs/L6DR22K2wT9nAAxPBU8RQGiN6mW43AFAZhu25b633D8c1YgmzowSQNM25BRKWARArGS08/lNxD+LFssHwmMRQLC5aNcxBgJABL9HT0WRF0CjCmJmOGEOQHsuaVzMP/s/TWJCaGGwBUCeu1PAPLzjP9nqN9DZOBNAKE4JcydbCkCGtbd1qjPzP8dgm9U8jhVAtPeKTkVwDkCeCLss5l37P401XMPLmBdAFd29VMVQDUBg0yA55h75Pz6odcYLCRdApBM4rBrkAkDyAVWgQxbRP4XDMnK20hFAymLlF7EmzD8GUgo9XBHlP3lbK7T9COc/k+OhPthhy7+YGEpnrOvCPzBFhLs15u4/epbqB6H4uz9IuuLF5svev6lzLKY31es/CaQ0envF5z8ZY0xlUADXv7zaz7HYEuI/CfbK1sn16T8uAQfWwxLWPzKn/YuFN94/5KdbC1AFu793fyCSnlfvPzK2y4doAMY/NRg5t1/X6b/shq4QJaHDP5yNIAKPOeI/vpn7BSE30r/X4YQrO6nrv78Ziv/Thto/DqJ1Y6+y5z9l51NaxFrlv8QlA65HOLS/86dxiEc96z+Hj0+LFjneP6LzBZ8LTc2/DaJ1Y6+y579l51NaxFrlP8QlA65HOLQ/8qdxiEc967+Jj0+LFjnev6LzBZ8LTc0/1qdbC1AFuz93fyCSnlfvvzK2y4doAMa/NRg5t1/X6T/vhq4QJaHDv5yNIAKPOeK/wJn7BSE30j/W4YQrO6nrP78Ziv/Thtq/CaQ0envF578XY0xlUADXP7zaz7HYEuK/CvbK1sn16b8rAQfWwxLWvzKn/YuFN96/zWLlF7EmzL8GUgo9XBHlv3lbK7T9COe/kOOhPthhyz+cGEpnrOvCvzBFhLs15u6/c5bqB6H4u79IuuLF5sveP6lzLKY31eu/AQAAAP////8HAAAA/////zEAAAD/////VwEAAP////9hCQAA/////6dBAAD/////kcsBAP/////3kAwA/////8H2VwAAAAAAAAAAAAAAAAACAAAA/////w4AAAD/////YgAAAP////+uAgAA/////8ISAAD/////ToMAAP////8ilwMA/////+4hGQD/////gu2vAAAAAAAAAAAAAAAAAAAAAAACAAAA//////////8BAAAAAwAAAP//////////////////////////////////////////////////////////////////////////AQAAAAAAAAACAAAA////////////////AwAAAP//////////////////////////////////////////////////////////////////////////AQAAAAAAAAACAAAA////////////////AwAAAP//////////////////////////////////////////////////////////////////////////AQAAAAAAAAACAAAA////////////////AwAAAP//////////////////////////////////////////////////////////AgAAAP//////////AQAAAAAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD/////////////////////AQAAAP///////////////wIAAAD///////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP///////////////////////////////wIAAAD///////////////8BAAAA/////////////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAABAAAA//////////8CAAAA//////////////////////////////////////////////////////////8DAAAA////////////////AgAAAAAAAAABAAAA//////////////////////////////////////////////////////////////////////////8DAAAA////////////////AgAAAAAAAAABAAAA//////////////////////////////////////////////////////////////////////////8DAAAA////////////////AgAAAAAAAAABAAAA//////////////////////////////////////////////////////////////////////////8DAAAAAQAAAP//////////AgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAACAAAAAAAAAAIAAAABAAAAAQAAAAIAAAACAAAAAAAAAAUAAAAFAAAAAAAAAAIAAAACAAAAAwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAgAAAAEAAAACAAAAAgAAAAIAAAAAAAAABQAAAAYAAAAAAAAAAgAAAAIAAAADAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAgAAAAAAAAACAAAAAQAAAAMAAAACAAAAAgAAAAAAAAAFAAAABwAAAAAAAAACAAAAAgAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAACAAAAAAAAAAIAAAABAAAABAAAAAIAAAACAAAAAAAAAAUAAAAIAAAAAAAAAAIAAAACAAAAAwAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAIAAAAAAAAAAgAAAAEAAAAAAAAAAgAAAAIAAAAAAAAABQAAAAkAAAAAAAAAAgAAAAIAAAADAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAgAAAAIAAAAAAAAAAwAAAA4AAAACAAAAAAAAAAIAAAADAAAAAAAAAAAAAAACAAAAAgAAAAMAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAACAAAAAgAAAAAAAAADAAAACgAAAAIAAAAAAAAAAgAAAAMAAAABAAAAAAAAAAIAAAACAAAAAwAAAAcAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAIAAAACAAAAAAAAAAMAAAALAAAAAgAAAAAAAAACAAAAAwAAAAIAAAAAAAAAAgAAAAIAAAADAAAACAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAgAAAAIAAAAAAAAAAwAAAAwAAAACAAAAAAAAAAIAAAADAAAAAwAAAAAAAAACAAAAAgAAAAMAAAAJAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAACAAAAAgAAAAAAAAADAAAADQAAAAIAAAAAAAAAAgAAAAMAAAAEAAAAAAAAAAIAAAACAAAAAwAAAAoAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAIAAAACAAAAAAAAAAMAAAAGAAAAAgAAAAAAAAACAAAAAwAAAA8AAAAAAAAAAgAAAAIAAAADAAAACwAAAAAAAAAAAAAAAAAAAAAAAAAGAAAAAgAAAAIAAAAAAAAAAwAAAAcAAAACAAAAAAAAAAIAAAADAAAAEAAAAAAAAAACAAAAAgAAAAMAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAACAAAAAgAAAAAAAAADAAAACAAAAAIAAAAAAAAAAgAAAAMAAAARAAAAAAAAAAIAAAACAAAAAwAAAA0AAAAAAAAAAAAAAAAAAAAAAAAACAAAAAIAAAACAAAAAAAAAAMAAAAJAAAAAgAAAAAAAAACAAAAAwAAABIAAAAAAAAAAgAAAAIAAAADAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAJAAAAAgAAAAIAAAAAAAAAAwAAAAUAAAACAAAAAAAAAAIAAAADAAAAEwAAAAAAAAACAAAAAgAAAAMAAAAPAAAAAAAAAAAAAAAAAAAAAAAAABAAAAACAAAAAAAAAAIAAAABAAAAEwAAAAIAAAACAAAAAAAAAAUAAAAKAAAAAAAAAAIAAAACAAAAAwAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEQAAAAIAAAAAAAAAAgAAAAEAAAAPAAAAAgAAAAIAAAAAAAAABQAAAAsAAAAAAAAAAgAAAAIAAAADAAAAEQAAAAAAAAAAAAAAAAAAAAAAAAASAAAAAgAAAAAAAAACAAAAAQAAABAAAAACAAAAAgAAAAAAAAAFAAAADAAAAAAAAAACAAAAAgAAAAMAAAASAAAAAAAAAAAAAAAAAAAAAAAAABMAAAACAAAAAAAAAAIAAAABAAAAEQAAAAIAAAACAAAAAAAAAAUAAAANAAAAAAAAAAIAAAACAAAAAwAAABMAAAAAAAAAAAAAAAAAAAAAAAAADwAAAAIAAAAAAAAAAgAAAAEAAAASAAAAAgAAAAIAAAAAAAAABQAAAA4AAAAAAAAAAgAAAAIAAAADAAAAAgAAAAEAAAAAAAAAAQAAAAIAAAAAAAAAAAAAAAIAAAABAAAAAAAAAAEAAAACAAAAAQAAAAAAAAACAAAAAAAAAAUAAAAEAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAQAAAAAAAAABQAAAAAAAAACAAAAAQAAAAAAAAABAAAAAgAAAAAAAAAAAAAAAgAAAAEAAAAAAAAAAQAAAAIAAAABAAAAAAAAAAIAAAACAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAAEAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAQAAAAAAAAABQAAAAUAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAABAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAEAAAAAAAAAAAEAAAAAAQAAAAAAAAAAAQAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAABAAAAAAAAAAAAAQAAAAAAAAAAAAA6B6FaUp9QQTPXMuL4myJBraiDfBwx9UBYJseitzTIQOL5if9jqZtAnXX+Z+ycb0C3pucbhRBCQG8wJBYqpRRAlWbDCzCY5z/eFWBUEve6P/+qo4Q50Y4/D9YM3iCcYT8fcA2QJSA0P4ADxu0qAAc/BNcGolVJ2j5d9FACqwquPh9z7MthtI9CSUSYJke/YUJQ/64OyjU0Qpi0+HCmFQdCm3GfIVdh2kHsJ11kAyauQYC3UDFJOoFBSJsFV1OwU0FK5fcxX4AmQWhy/zZIt/lACqaCPsBjzUDbdUNIScugQMYQlVJ4MXNANiuq8GTvRUDxTXnulxEZQFZ8QX5kpuw/qmG/JwYFlEAluh3Q6DB+QKn4vyNq0GZAKOXekas+UUB8xabXXhI6QG63C2pLtSNAdDBtyNfLDUDyOcu67ID2P0rCMvRXAeE/Ki2TSVyzyT9Dk+8Sz2uzP5J+w5ARWp0/NQAoOiMuhj9YnP+RyMJwPxgW7TvQVFk/KgsLYF0kQz9g5dAC6IwzQcgHPVvDex1B1XjppodHBkHJq3OMM9fwQNvcmJ7wddlAInGPpQs/w0BRobq5EBmtQJZ2ai7n+ZVAtv2G5E+bgECG+gIfKBlpQK5f8jdI91JAL39sL/WpPEB8rGxhDqklQK6yUf43XhBAxL9y/tK8+D86XyZpgrHiPwAAAAD/////AAAAAAAAAAAAAAAAAAAAAAAAAAD/////////////////////////////////////AAAAAP////8AAAAAAAAAAAAAAAABAAAAAAAAAAAAAAD/////AAAAAAAAAAABAAAAAQAAAAAAAAAAAAAA/////wAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAP////8FAAAABQAAAAAAAAAAAAAAAAAAAAAAAAD/////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/////////////////////////////////////wAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP////////////////////////////////////8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAFAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/////////////////////////////////////AAAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAEAAAABAAAAAAAAAAEAAAAAAAAABQAAAAEAAAABAAAAAAAAAAAAAAABAAAAAQAAAAAAAAABAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAQAAAAAAAQABAAABAQAAAAAAAQAAAAEAAAABAAEAAAAAAAAAAAAAAAAAAAAAquJYWJZl+D9jaeZNtj/zPwwdI9KqaeO/qGefXwdHdz+q4lhYlmX4P+OrlPMN3PI/DB0j0qpp47+7SQLV4VIEQKriWFiWZfg/r2kma3tz8T82eQmLqNIGwMRIWXMqSvo/fcCszPux9j+jara6ozTwP6hnn18HR3c/MSoKLequ8r+SabgA2nj0P7jBLbDOHO8/1Ym/ICfH4T+6lxjvlFXHv73m373LRPU/0vXyDVxo7T+ToKRHJXMAQF/33578aPE/pAyy64tD9T8+U/hCvyruPwxv8Y7YYwLAuXYr8NAiCEB4+LDK0Sn0P1Qeuy4j+eo/OMx50n7K7L+TrGB/nyf8v5ehC2fbYPM/aXMKexiT6z8mFRIMjg/zP7yUVwGGBNw/E6opHERf8z/z0wR2g9DqPw4pBpcOhvu/NbA29uWAA8DMaTExyXzyP02biiQ+Ruk/S8jz2/FKBEB1pzZnpbb9P7pQU4wLfPI//7ZcQXeG6D9CqEQvAYoIwDB2VB6sSgRAVyv8H5We8T+EHWF8XNPmPzB2wT8Nrrg/SEi+cX+w4L8of+GtdSDxP1sjk5AdouU/6ZjOVru13r8K0obqI6bxvwVbdNXyhfA/w5GG024n5z+rwmtMzP8BwLw9pSX49QXABe/2uQxP8D+b6wCzCvXkP7uGT87fK+Q/pz/JWw4coj+qoBf2J0nwP/yE3PUo0+I/vFJeHcaC+D96luSIqvntP/bf8sHUYu8/gZNN41mL4z9bhOqVOF4FwO6lmAh1hQhAbCVxbdhk7z+1C8NdDcfiPwG36x/0OQBAx0WJ76c2+D9nlSHXANfuP2HlfZ3gqOE/EwnVlVPg9r96+oHzEH//v5bXzdT1Auw/DM3GwLsA4D9p/8uoKcr+v+U9x5DQVAPAehjSdghb7D9sc1IetODgP8MVwwB1pu6/azPk6OGe978W8t/TUc3rP+0QMvYfP+A/RsG/QpSE8D+l3uwScxzgPwQaifgujuw/k1Vti1I43z8MAwLnSh0GQH5nYnwwZgJAiGUzWC5s6j8WyyI/BbLgPw4iUapGeQJAB3W+imnp/j9BLWR4ssrpP2t+gG5Pstk/cpBsfm6DCMCOpU9dOZsFQEv8nFypHeo/ehJ6i+6S2D9jqlGEmarLv7STC5TRiOa/bC+x8WZD6D9H3yUkWpDZP8gZvmCMuQLAreY19/eRBsCoPOc8UzzpP6KI/QV+y9g/t/MoboyWzT+Hv5q3Zu3Mvy2xROCT4uY/9gQitMMg1T9abAqhWMDkv1oLTavoUfG/PMUJP9CD5j+fHRX3t6fSPz7W2gk6bvs/WRnuHwqN9D8YFturGCTmP1EZczv0b9I/5t4exabB5D/1ESLh5fTEP9X2z6SYweQ/6lv3I2zT0D9zkRGNUNMAQKoSvc4EIfs/Xggt8wQI5T+mJHHg/w/SP4lhT/9t8vQ/DrZ/DbwH7D+XlhbYZrjkP34LIpFt6c4/lwfp8fLX9L+j96CTTf76v3WdNhEv9uM/d8c3o4lV0D/vFdCHVcsFwAHeDq0F1QhApbYqcZiN5D9KoilqByXLPwX0/diA0vq/0fo0GxnxAMBbaTkvlCzjP/RrFrWXrMs/UYTrky7jA0DB9f4FiZYAQEGAk/3QzeE/r/TeqE8t0D/OqjlsnPbvvz8RKU8JOfW/smSEbK/O4T8MzuyPm3DDP/rFtctq9gZAfb1EVEaSA0Dts5dVInnhP18SFMc79MM/7y34cw6LAMDFrRJsZO0DwC2KLvLSYuA/hx5wcUHewz+49SnK/4ruPyeS0PX9a+E/ZxaaLvvZ3z8WPu5T2QS8Pygo4RIvMqa/BJ0Kqsd0279cKW4ay8jdP3b05bmZ364/10/qtdxk2r+Bcz6CDMvpv54qOw+Amdw/qLV71pW7sT/YKc80nIPUP8OfIaBJ77G/LyTuD1un2z+diYu8efWzP1wU7ACkfwjAZroyPL1yBkAmv3lKJJbbPysKSE4W+p0/dIgqY79TA8ATLTOQ3tsGwJ2zweD/Xdg/XO/jXeFUaL8VW2qLFKfov1cA9Aa6XfK/tIa7YGgI2T+f3hu/sxqPv2nXdPpf3Pc/jkw8Jbda8j+tT/z8tGPVP1yBHpJd35k/KYvYOy1s8j/yz+kCQjPrP9+agH7x59g/PZfJ9aBhpr/rDKzvYBb+PwtkiaGCt/c/vb1mVr+f1T/JIHwHc8Govw7aeF6+9vG/Xv7kD6fp979isYioQYHVP7AIQZuSFrG/3z1AdUTnAUDN3XY9O7f9P0AdQ9ljYNQ/dJANJPTOrb8kLECUiiPlP4yF7UgmStA/9xGmXxCG1T9qZzix4W2zv2SGJRJVrPe/Fh9a2M/B/b8IexzFCoPSP9y1QFD2bLe/Q86cWLJe/b+mOOfYm78BwOTjkPAGE9E/8aPCUKu/ub9pPZyLCiUGwBA7Mev/BQlALOmrlRi+0j+AMJ/dKULBv7iLtL6a6QRAEMDV/yajAUDa62dE3crJP1P70RgBUbq/38hVnR6esT/s1tG10Z/Ov/zLwalHPss/dTS9NKTXx78nMcRzCIEHQAabxDsAmQRA0tyLK3gSyT+Aui7nOhDGv5Gs58z3WgHATN3forJuBMCAui7nOhDGP9Lciyt4Esm/WAJyHQ4c7z8UP5HFIs3iP3U0vTSk18c//MvBqUc+y7+cvv8HLg/Kvy1I/mHsI+K/U/vRGAFRuj/a62dE3crJv8p+WV8KlQjAuQ/nOP43B0CAMJ/dKULBPyzpq5UYvtK/ZoU+VoLh4L9etLlRUfvtv/GjwlCrv7k/5OOQ8AYT0b9DfT9FhufXPwUX8hJp+4u/3LVAUPZstz8IexzFCoPSv9+L609E5fQ/q9Fz7X2J7T9qZzix4W2zP/cRpl8QhtW/vtNilqGX+j8MOy7QJoL0P3SQDST0zq0/QB1D2WNg1L8IIjSvGNkDwGB8Jou2GAfAsAhBm5IWsT9isYioQYHVvyS9D3zb6uy/gnwRa7uM9L/JIHwHc8GoP729Zla/n9W/CsAHJZwmAEDEW6OYT1r6Pz2XyfWgYaY/35qAfvHn2L83Tdy4lS30vxf2/gZ0jPq/XIEekl3fmb+tT/z8tGPVvybPr2zJ1/+/K7mJ0ypVAsCf3hu/sxqPPwCGu2BoCNm/5oITrpZn+r+UDUyDP+n/v1zv413hVGg/nbPB4P9d2L9MlmkxNvgCQMtZlKE85v8/KwpIThb6nb8mv3lKJJbbv8+SZsTvOOc/pQCIIOYw0j+diYu8efWzvy8k7g9bp9u/kxYDa+pKtD9XlYvA8HnVv6i1e9aVu7G/nio7D4CZ3L/WR6rNh5EGwCkgQweBkghAdvTluZnfrr9cKW4ay8jdvxbjhr1f1QVAR5C0MzivAkAWPu5T2QS8v2cWmi772d+/cKj4lzLJCEBx2QJfYrMFQIcecHFB3sO/LYou8tJi4L+jr7lhO38BwIcI0Nb7xgTAXxIUxzv0w7/ts5dVInnhv0T+l8DZLfE/MP3FoFvS5D8MzuyPm3DDv7JkhGyvzuG/tzhzRIRc0b9Ovv3/0z7mv6/03qhPLdC/m4CT/dDN4b9dwjU5VCQBQBBJX1ntCv0/9GsWtZesy79baTkvlCzjv1mjYgEz++S/oW6KnOQW8b9KoilqByXLv6W2KnGYjeS/SmaKz3Vx9z+BZB5yxGHwP3fHN6OJVdC/dZ02ES/2478PuaBjLrXaP4/JU81pPaO/fgsikW3pzr+XlhbYZrjkv4tSn7YDbP0/f2LnFKlF9z+mJHHg/w/Sv14ILfMECOW/mfg4qYhR/b+OP+RQDCACwOpb9yNs09C/1fbPpJjB5L9pN2WOVZ3wv3hHy9nxIve/URlzO/Rv0r8YFturGCTmv1d1/KKR8QPA8gsy9qzSB8CfHRX3t6fSvzzFCT/Qg+a/EYStnrzV9r/2QJqI7Lb9v/YEIrTDINW/LbFE4JPi5r/7kQEs5fEDQHunnf4GeQBAooj9BX7L2L+oPOc8Uzzpv+ydYY2SSAfAL4HK6CRTB0BH3yUkWpDZv2wvsfFmQ+i/Ik0Yzruh6T8fM3LoGoDUP3oSeovukti/S/ycXKkd6r9rEv+7UWcHQCRIQe/GfwNAa36Abk+y2b9BLWR4ssrpv9KT87qa0bM/FTyktw823L8WyyI/BbLgv4hlM1gubOq/DizMp9Ki6r8b5ckdjVrzv5NVbYtSON+/BBqJ+C6O7L/dUBFqgyXYv00Wh18r7+q/7RAy9h8/4L8W8t/TUc3rv4RM5DKx3wDAfvWIj94aBcBsc1IetODgv3oY0nYIW+y/oGcTFF54AUDkJqS/FKX6PwzNxsC7AOC/ltfN1PUC7L+5Wrz/zHnzP6688w2rNOc/YeV9neCo4b9nlSHXANfuvw9RsxKjY/s/1V8GteXE8j+1C8NdDcfiv2wlcW3YZO+/IOywaA7Q8b9bFP+4Tg36v4GTTeNZi+O/9t/ywdRi77+tRc3yFR7eP2bkcHXJkLO//ITc9SjT4r+qoBf2J0nwv2YHKoswwfm/iQcLspCjAcCb6wCzCvXkvwXv9rkMT/C/YkuwYAMXBMApCNUai9kIwMORhtNuJ+e/BVt01fKF8L+ZqWEfvIjsP6h693QZYNk/WyOTkB2i5b8of+GtdSDxvwpaaulDSwVADMQAX+lOAECEHWF8XNPmv1cr/B+VnvG/XyFG6opcCMD/mtR32/UEQP+2XEF3hui/ulBTjAt88r/imfCfRP+yP9zbvtc8XeO/TZuKJD5G6b/MaTExyXzyvxiTQeElXOO/rbJRQVGN9L/z0wR2g9DqvxOqKRxEX/O/FDGCEei99j9x8zV4VYTmP2lzCnsYk+u/l6ELZ9tg878pRXacaDT/v3k6GZRqoQXAVB67LiP56r94+LDK0Sn0vwO6pZ9b7wFAvK0nKVcc9j8+U/hCvyruv6QMsuuLQ/W/FPhKFYv46j8MyxaDTOW/v9L18g1caO2/vebfvctE9b/7GD8ZrF3xv3gx1AR9bQDAuMEtsM4c77+SabgA2nj0v5xKFIwxsATArKNSBaKsB0Cjara6ozTwv33ArMz7sfa/dF2U0FcWCcDxL357DJX/P69pJmt7c/G/quJYWJZl+L/YntVJlnrSP4sRLzXM+fe/46uU8w3c8r+q4lhYlmX4v85lu5+QRwRAsI0H/WU8479jaeZNtj/zv6riWFiWZfi/sI0H/WU847/OZbufkEcEQHAoPUBrnss/9exKzDtFtT88wM8kax+gP9OqeKeAYog/MW0ItiZvcj+ph+smvt5bP2lCaV5dEUU/StaUmQDaLz+kK9y22BMYP0O3whZuMwI/IIbgZGWE6z7UkjYaEM3UPuezxwa9cr8+LybxRMnFpz6E1N8DbPiRPsYjySMvK3s+//////8fAAj//////zMQCP////9/MiAI/////28yMAj/////YzJACP///z9iMlAI////N2IyYAj///8zYjJwCP//vzNiMoAI//+rM2IykAj/f6szYjKgCP8PqzNiMrAI/wOrM2IywAi/A6szYjLQCJ8DqzNiMuAImQOrM2Iy8Aj//////z8PCP//////Kx8I/////38pLwj/////Pyk/CP////85KU8I////PzgpXwj///8POClvCP///w44KX8I//8fDjgpjwj//w8OOCmfCP9/DQ44Ka8I/w8NDjgpvwj/DQ0OOCnPCP8MDQ44Kd8IxwwNDjgp7wjEDA0OOCn/CAcAAAAHAAAAAQAAAAIAAAAEAAAAAwAAAAAAAAAAAAAABwAAAAMAAAABAAAAAgAAAAUAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAAAAAACAAAAAQAAAAMAAAAOAAAABgAAAAsAAAACAAAABwAAAAEAAAAYAAAABQAAAAoAAAABAAAABgAAAAAAAAAmAAAABwAAAAwAAAADAAAACAAAAAIAAAAxAAAACQAAAA4AAAAAAAAABQAAAAQAAAA6AAAACAAAAA0AAAAEAAAACQAAAAMAAAA/AAAACwAAAAYAAAAPAAAACgAAABAAAABIAAAADAAAAAcAAAAQAAAACwAAABEAAABTAAAACgAAAAUAAAATAAAADgAAAA8AAABhAAAADQAAAAgAAAARAAAADAAAABIAAABrAAAADgAAAAkAAAASAAAADQAAABMAAAB1AAAADwAAABMAAAARAAAAEgAAABAAAAAGAAAAAgAAAAMAAAAFAAAABAAAAAAAAAAAAAAAAAAAAAYAAAACAAAAAwAAAAEAAAAFAAAABAAAAAAAAAAAAAAABwAAAAUAAAADAAAABAAAAAEAAAAAAAAAAgAAAAAAAAACAAAAAwAAAAEAAAAFAAAABAAAAAYAAAAAAAAAAAAAABgtRFT7Ifk/GC1EVPsh+b8YLURU+yEJQBgtRFT7IQnAYWxnb3MuYwBoM05laWdoYm9yUm90YXRpb25zAGNvb3JkaWprLmMAX3VwQXA3Q2hlY2tlZABfdXBBcDdyQ2hlY2tlZABkaXJlY3RlZEVkZ2UuYwBkaXJlY3RlZEVkZ2VUb0JvdW5kYXJ5AGFkamFjZW50RmFjZURpclt0bXBGaWprLmZhY2VdW2ZpamsuZmFjZV0gPT0gS0kAZmFjZWlqay5jAF9mYWNlSWprUGVudFRvQ2VsbEJvdW5kYXJ5AGFkamFjZW50RmFjZURpcltjZW50ZXJJSksuZmFjZV1bZmFjZTJdID09IEtJAF9mYWNlSWprVG9DZWxsQm91bmRhcnkAaDNJbmRleC5jAGNvbXBhY3RDZWxscwBsYXRMbmdUb0NlbGwAY2VsbFRvQ2hpbGRQb3MAdmFsaWRhdGVDaGlsZFBvcwBsYXRMbmcuYwBjZWxsQXJlYVJhZHMyAHBvbHlnb24tPm5leHQgPT0gTlVMTABsaW5rZWRHZW8uYwBhZGROZXdMaW5rZWRQb2x5Z29uAG5leHQgIT0gTlVMTABsb29wICE9IE5VTEwAYWRkTmV3TGlua2VkTG9vcABwb2x5Z29uLT5maXJzdCA9PSBOVUxMAGFkZExpbmtlZExvb3AAY29vcmQgIT0gTlVMTABhZGRMaW5rZWRDb29yZABsb29wLT5maXJzdCA9PSBOVUxMAGlubmVyTG9vcHMgIT0gTlVMTABub3JtYWxpemVNdWx0aVBvbHlnb24AYmJveGVzICE9IE5VTEwAY2FuZGlkYXRlcyAhPSBOVUxMAGZpbmRQb2x5Z29uRm9ySG9sZQBjYW5kaWRhdGVCQm94ZXMgIT0gTlVMTAByZXZEaXIgIT0gSU5WQUxJRF9ESUdJVABsb2NhbGlqLmMAY2VsbFRvTG9jYWxJamsAYmFzZUNlbGwgIT0gb3JpZ2luQmFzZUNlbGwAIShvcmlnaW5PblBlbnQgJiYgaW5kZXhPblBlbnQpAGJhc2VDZWxsID09IG9yaWdpbkJhc2VDZWxsAGJhc2VDZWxsICE9IElOVkFMSURfQkFTRV9DRUxMAGxvY2FsSWprVG9DZWxsACFfaXNCYXNlQ2VsbFBlbnRhZ29uKGJhc2VDZWxsKQBiYXNlQ2VsbFJvdGF0aW9ucyA+PSAwAGdyaWRQYXRoQ2VsbHMAcG9seWZpbGwuYwBpdGVyU3RlcFBvbHlnb25Db21wYWN0ADAAdmVydGV4LmMAY2VsbFRvVmVydGV4AGdyYXBoLT5idWNrZXRzICE9IE5VTEwAdmVydGV4R3JhcGguYwBpbml0VmVydGV4R3JhcGgAbm9kZSAhPSBOVUxMAGFkZFZlcnRleE5vZGU=";var A2=28624;function ku(fe,xe,Le,we){Mi("Assertion failed: "+q(fe)+", at: "+[xe?q(xe):"unknown filename",Le,we?q(we):"unknown function"])}function Fa(){return K.length}function l2(fe,xe,Le){Z.set(Z.subarray(xe,xe+Le),fe)}function u2(fe){return e.___errno_location&&(Y[e.___errno_location()>>2]=fe),fe}function Gu(fe){Mi("OOM")}function c2(fe){try{var xe=new ArrayBuffer(fe);return xe.byteLength!=fe?void 0:(new Int8Array(xe).set(K),Dn(xe),_e(xe),1)}catch{}}function h2(fe){var xe=Fa(),Le=16777216,we=2147483648-Le;if(fe>we)return!1;for(var A=16777216,F=Math.max(xe,A);F<fe;)F<=536870912?F=X(2*F,Le):F=Math.min(X((3*F+2147483648)/4,Le),we);var Ct=c2(F);return!!Ct}var Vu=typeof atob=="function"?atob:function(fe){var xe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Le="",we,A,F,Ct,Gt,Gn,yt,Pt=0;fe=fe.replace(/[^A-Za-z0-9\+\/\=]/g,"");do Ct=xe.indexOf(fe.charAt(Pt++)),Gt=xe.indexOf(fe.charAt(Pt++)),Gn=xe.indexOf(fe.charAt(Pt++)),yt=xe.indexOf(fe.charAt(Pt++)),we=Ct<<2|Gt>>4,A=(Gt&15)<<4|Gn>>2,F=(Gn&3)<<6|yt,Le=Le+String.fromCharCode(we),Gn!==64&&(Le=Le+String.fromCharCode(A)),yt!==64&&(Le=Le+String.fromCharCode(F));while(Pt<fe.length);return Le};function KA(fe){try{for(var xe=Vu(fe),Le=new Uint8Array(xe.length),we=0;we<xe.length;++we)Le[we]=xe.charCodeAt(we);return Le}catch{throw new Error("Converting base64 string to bytes failed.")}}function le(fe){if(Da(fe))return KA(fe.slice(Ba.length))}var De={Math,Int8Array,Int32Array,Uint8Array,Float32Array,Float64Array},rt={b:m,c:y,d:ku,e:u2,f:Fa,g:l2,h:h2,i:Gu,o:A2,p:Pe},ge=(function(fe,xe,Le){"almost asm";var we=new fe.Int8Array(Le),A=new fe.Int32Array(Le);new fe.Uint8Array(Le),new fe.Float32Array(Le);var F=new fe.Float64Array(Le),Ct=xe.o|0,Gt=xe.p|0,Gn=fe.Math.floor,yt=fe.Math.abs,Pt=fe.Math.sqrt,ro=fe.Math.pow,Lt=fe.Math.cos,vt=fe.Math.sin,ri=fe.Math.tan,zu=fe.Math.acos,bx=fe.Math.asin,f2=fe.Math.atan,ii=fe.Math.atan2,Ia=fe.Math.ceil,Wi=fe.Math.imul,d2=fe.Math.min,Tx=fe.Math.max,Ms=fe.Math.clz32,ut=xe.b,G=xe.c,nt=xe.d,q3=xe.e,wx=xe.f,Sx=xe.g,Mx=xe.h,Ex=xe.i,L=28640;function Nx(a){return we=new Int8Array(a),A=new Int32Array(a),F=new Float64Array(a),Le=a,!0}function Rx(a){a=a|0;var l=0;return l=L,L=L+a|0,L=L+15&-16,l|0}function Cx(){return L|0}function Px(a){a=a|0,L=a}function Bx(a,l){a=a|0,L=a}function Dx(a,l){a=a|0,l=l|0;var c=0,f=0,p=0;return(a|0)<0?(l=2,l|0):(a|0)>13780509?(l=Qu(15,l)|0,l|0):(c=((a|0)<0)<<31>>31,p=zn(a|0,c|0,3,0)|0,f=G()|0,c=je(a|0,c|0,1,0)|0,c=zn(p|0,f|0,c|0,G()|0)|0,c=je(c|0,G()|0,1,0)|0,a=G()|0,A[l>>2]=c,A[l+4>>2]=a,l=0,l|0)}function O3(a,l,c,f){return a=a|0,l=l|0,c=c|0,f=f|0,U3(a,l,c,f,0)|0}function U3(a,l,c,f,p){a=a|0,l=l|0,c=c|0,f=f|0,p=p|0;var g=0,v=0,_=0,w=0,S=0;if(w=L,L=L+16|0,v=w,!(k3(a,l,c,f,p)|0))return f=0,L=w,f|0;do if((c|0)>=0){if((c|0)>13780509){if(g=Qu(15,v)|0,g|0)break;_=v,v=A[_>>2]|0,_=A[_+4>>2]|0}else g=((c|0)<0)<<31>>31,S=zn(c|0,g|0,3,0)|0,_=G()|0,g=je(c|0,g|0,1,0)|0,g=zn(S|0,_|0,g|0,G()|0)|0,g=je(g|0,G()|0,1,0)|0,_=G()|0,A[v>>2]=g,A[v+4>>2]=_,v=g;if(Ao(f|0,0,v<<3|0)|0,p|0){Ao(p|0,0,v<<2|0)|0,g=Qi(a,l,c,f,p,v,_,0)|0;break}g=Mr(v,4)|0,g?(S=Qi(a,l,c,f,g,v,_,0)|0,We(g),g=S):g=13}else g=2;while(!1);return S=g,L=w,S|0}function k3(a,l,c,f,p){a=a|0,l=l|0,c=c|0,f=f|0,p=p|0;var g=0,v=0,_=0,w=0,S=0,R=0,U=0,$=0,H=0,j=0,ee=0;if(ee=L,L=L+16|0,H=ee,j=ee+8|0,$=H,A[$>>2]=a,A[$+4>>2]=l,(c|0)<0)return j=2,L=ee,j|0;if(g=f,A[g>>2]=a,A[g+4>>2]=l,g=(p|0)!=0,g&&(A[p>>2]=0),Yt(a,l)|0)return j=9,L=ee,j|0;A[j>>2]=0;e:do if((c|0)>=1)if(g)for(R=1,S=0,U=0,$=1,g=a;;){if(!(S|U)){if(g=Vn(g,l,4,j,H)|0,g|0)break e;if(l=H,g=A[l>>2]|0,l=A[l+4>>2]|0,Yt(g,l)|0){g=9;break e}}if(g=Vn(g,l,A[26800+(U<<2)>>2]|0,j,H)|0,g|0)break e;if(l=H,g=A[l>>2]|0,l=A[l+4>>2]|0,a=f+(R<<3)|0,A[a>>2]=g,A[a+4>>2]=l,A[p+(R<<2)>>2]=$,a=S+1|0,v=(a|0)==($|0),_=U+1|0,w=(_|0)==6,Yt(g,l)|0){g=9;break e}if($=$+(w&v&1)|0,($|0)>(c|0)){g=0;break}else R=R+1|0,S=v?0:a,U=v?w?0:_:U}else for(R=1,S=0,U=0,$=1,g=a;;){if(!(S|U)){if(g=Vn(g,l,4,j,H)|0,g|0)break e;if(l=H,g=A[l>>2]|0,l=A[l+4>>2]|0,Yt(g,l)|0){g=9;break e}}if(g=Vn(g,l,A[26800+(U<<2)>>2]|0,j,H)|0,g|0)break e;if(l=H,g=A[l>>2]|0,l=A[l+4>>2]|0,a=f+(R<<3)|0,A[a>>2]=g,A[a+4>>2]=l,a=S+1|0,v=(a|0)==($|0),_=U+1|0,w=(_|0)==6,Yt(g,l)|0){g=9;break e}if($=$+(w&v&1)|0,($|0)>(c|0)){g=0;break}else R=R+1|0,S=v?0:a,U=v?w?0:_:U}else g=0;while(!1);return j=g,L=ee,j|0}function Qi(a,l,c,f,p,g,v,_){a=a|0,l=l|0,c=c|0,f=f|0,p=p|0,g=g|0,v=v|0,_=_|0;var w=0,S=0,R=0,U=0,$=0,H=0,j=0,ee=0,ie=0,ce=0;if(ee=L,L=L+16|0,H=ee+8|0,j=ee,w=Va(a|0,l|0,g|0,v|0)|0,R=G()|0,U=f+(w<<3)|0,ie=U,ce=A[ie>>2]|0,ie=A[ie+4>>2]|0,S=(ce|0)==(a|0)&(ie|0)==(l|0),!((ce|0)==0&(ie|0)==0|S))do w=je(w|0,R|0,1,0)|0,w=Ga(w|0,G()|0,g|0,v|0)|0,R=G()|0,U=f+(w<<3)|0,ce=U,ie=A[ce>>2]|0,ce=A[ce+4>>2]|0,S=(ie|0)==(a|0)&(ce|0)==(l|0);while(!((ie|0)==0&(ce|0)==0|S));if(w=p+(w<<2)|0,S&&(A[w>>2]|0)<=(_|0)||(ce=U,A[ce>>2]=a,A[ce+4>>2]=l,A[w>>2]=_,(_|0)>=(c|0)))return ce=0,L=ee,ce|0;switch(S=_+1|0,A[H>>2]=0,w=Vn(a,l,2,H,j)|0,w|0){case 9:{$=9;break}case 0:{w=j,w=Qi(A[w>>2]|0,A[w+4>>2]|0,c,f,p,g,v,S)|0,w||($=9);break}}e:do if(($|0)==9){switch(A[H>>2]=0,w=Vn(a,l,3,H,j)|0,w|0){case 9:break;case 0:{if(w=j,w=Qi(A[w>>2]|0,A[w+4>>2]|0,c,f,p,g,v,S)|0,w|0)break e;break}default:break e}switch(A[H>>2]=0,w=Vn(a,l,1,H,j)|0,w|0){case 9:break;case 0:{if(w=j,w=Qi(A[w>>2]|0,A[w+4>>2]|0,c,f,p,g,v,S)|0,w|0)break e;break}default:break e}switch(A[H>>2]=0,w=Vn(a,l,5,H,j)|0,w|0){case 9:break;case 0:{if(w=j,w=Qi(A[w>>2]|0,A[w+4>>2]|0,c,f,p,g,v,S)|0,w|0)break e;break}default:break e}switch(A[H>>2]=0,w=Vn(a,l,4,H,j)|0,w|0){case 9:break;case 0:{if(w=j,w=Qi(A[w>>2]|0,A[w+4>>2]|0,c,f,p,g,v,S)|0,w|0)break e;break}default:break e}switch(A[H>>2]=0,w=Vn(a,l,6,H,j)|0,w|0){case 9:break;case 0:{if(w=j,w=Qi(A[w>>2]|0,A[w+4>>2]|0,c,f,p,g,v,S)|0,w|0)break e;break}default:break e}return ce=0,L=ee,ce|0}while(!1);return ce=w,L=ee,ce|0}function Vn(a,l,c,f,p){a=a|0,l=l|0,c=c|0,f=f|0,p=p|0;var g=0,v=0,_=0,w=0,S=0,R=0,U=0,$=0,H=0,j=0;if(c>>>0>6)return p=1,p|0;if(U=(A[f>>2]|0)%6|0,A[f>>2]=U,(U|0)>0){g=0;do c=Ho(c)|0,g=g+1|0;while((g|0)<(A[f>>2]|0))}if(U=be(a|0,l|0,45)|0,G()|0,R=U&127,R>>>0>121)return p=5,p|0;w=Sr(a,l)|0,g=be(a|0,l|0,52)|0,G()|0,g=g&15;e:do if(!g)S=8;else{for(;;){if(v=(15-g|0)*3|0,_=be(a|0,l|0,v|0)|0,G()|0,_=_&7,(_|0)==7){l=5;break}if(j=(si(g)|0)==0,g=g+-1|0,$=Ne(7,0,v|0)|0,l=l&~(G()|0),H=Ne(A[(j?432:16)+(_*28|0)+(c<<2)>>2]|0,0,v|0)|0,v=G()|0,c=A[(j?640:224)+(_*28|0)+(c<<2)>>2]|0,a=H|a&~$,l=v|l,!c){c=0;break e}if(!g){S=8;break e}}return l|0}while(!1);(S|0)==8&&(j=A[848+(R*28|0)+(c<<2)>>2]|0,H=Ne(j|0,0,45)|0,a=H|a,l=G()|0|l&-1040385,c=A[4272+(R*28|0)+(c<<2)>>2]|0,(j&127|0)==127&&(j=Ne(A[848+(R*28|0)+20>>2]|0,0,45)|0,l=G()|0|l&-1040385,c=A[4272+(R*28|0)+20>>2]|0,a=jo(j|a,l)|0,l=G()|0,A[f>>2]=(A[f>>2]|0)+1)),_=be(a|0,l|0,45)|0,G()|0,_=_&127;e:do if(an(_)|0){t:do if((Sr(a,l)|0)==1){if((R|0)!=(_|0))if($3(_,A[7696+(R*28|0)>>2]|0)|0){a=R2(a,l)|0,v=1,l=G()|0;break}else nt(27795,26864,533,26872);switch(w|0){case 3:{a=jo(a,l)|0,l=G()|0,A[f>>2]=(A[f>>2]|0)+1,v=0;break t}case 5:{a=R2(a,l)|0,l=G()|0,A[f>>2]=(A[f>>2]|0)+5,v=0;break t}case 0:return j=9,j|0;default:return j=1,j|0}}else v=0;while(!1);if((c|0)>0){g=0;do a=N2(a,l)|0,l=G()|0,g=g+1|0;while((g|0)!=(c|0))}if((R|0)!=(_|0)){if(!(m2(_)|0)){if((v|0)!=0|(Sr(a,l)|0)!=5)break;A[f>>2]=(A[f>>2]|0)+1;break}switch(U&127){case 8:case 118:break e}(Sr(a,l)|0)!=3&&(A[f>>2]=(A[f>>2]|0)+1)}}else if((c|0)>0){g=0;do a=jo(a,l)|0,l=G()|0,g=g+1|0;while((g|0)!=(c|0))}while(!1);return A[f>>2]=((A[f>>2]|0)+c|0)%6|0,j=p,A[j>>2]=a,A[j+4>>2]=l,j=0,j|0}function Fx(a,l,c,f){return a=a|0,l=l|0,c=c|0,f=f|0,G3(a,l,c,f)|0?(Ao(f|0,0,c*48|0)|0,f=Lx(a,l,c,f)|0,f|0):(f=0,f|0)}function G3(a,l,c,f){a=a|0,l=l|0,c=c|0,f=f|0;var p=0,g=0,v=0,_=0,w=0,S=0,R=0,U=0,$=0,H=0,j=0;if(j=L,L=L+16|0,$=j,H=j+8|0,U=$,A[U>>2]=a,A[U+4>>2]=l,(c|0)<0)return H=2,L=j,H|0;if(!c)return H=f,A[H>>2]=a,A[H+4>>2]=l,H=0,L=j,H|0;A[H>>2]=0;e:do if(Yt(a,l)|0)a=9;else{p=0,U=a;do{if(a=Vn(U,l,4,H,$)|0,a|0)break e;if(l=$,U=A[l>>2]|0,l=A[l+4>>2]|0,p=p+1|0,Yt(U,l)|0){a=9;break e}}while((p|0)<(c|0));R=f,A[R>>2]=U,A[R+4>>2]=l,R=c+-1|0,S=0,a=1;do{if(p=26800+(S<<2)|0,(S|0)==5)for(v=A[p>>2]|0,g=0,p=a;;){if(a=$,a=Vn(A[a>>2]|0,A[a+4>>2]|0,v,H,$)|0,a|0)break e;if((g|0)!=(R|0))if(w=$,_=A[w>>2]|0,w=A[w+4>>2]|0,a=f+(p<<3)|0,A[a>>2]=_,A[a+4>>2]=w,!(Yt(_,w)|0))a=p+1|0;else{a=9;break e}else a=p;if(g=g+1|0,(g|0)>=(c|0))break;p=a}else for(v=$,w=A[p>>2]|0,_=0,p=a,g=A[v>>2]|0,v=A[v+4>>2]|0;;){if(a=Vn(g,v,w,H,$)|0,a|0)break e;if(v=$,g=A[v>>2]|0,v=A[v+4>>2]|0,a=f+(p<<3)|0,A[a>>2]=g,A[a+4>>2]=v,a=p+1|0,Yt(g,v)|0){a=9;break e}if(_=_+1|0,(_|0)>=(c|0))break;p=a}S=S+1|0}while(S>>>0<6);a=$,a=(U|0)==(A[a>>2]|0)&&(l|0)==(A[a+4>>2]|0)?0:9}while(!1);return H=a,L=j,H|0}function Lx(a,l,c,f){a=a|0,l=l|0,c=c|0,f=f|0;var p=0,g=0,v=0,_=0,w=0,S=0,R=0,U=0,$=0;if(U=L,L=L+16|0,v=U,!c)return A[f>>2]=a,A[f+4>>2]=l,f=0,L=U,f|0;do if((c|0)>=0){if((c|0)>13780509){if(p=Qu(15,v)|0,p|0)break;g=v,p=A[g>>2]|0,g=A[g+4>>2]|0}else p=((c|0)<0)<<31>>31,R=zn(c|0,p|0,3,0)|0,g=G()|0,p=je(c|0,p|0,1,0)|0,p=zn(R|0,g|0,p|0,G()|0)|0,p=je(p|0,G()|0,1,0)|0,g=G()|0,R=v,A[R>>2]=p,A[R+4>>2]=g;if(S=Mr(p,8)|0,!S)p=13;else{if(R=Mr(p,4)|0,!R){We(S),p=13;break}if(p=Qi(a,l,c,S,R,p,g,0)|0,p|0){We(S),We(R);break}if(l=A[v>>2]|0,v=A[v+4>>2]|0,(v|0)>0|(v|0)==0&l>>>0>0){p=0,_=0,w=0;do a=S+(_<<3)|0,g=A[a>>2]|0,a=A[a+4>>2]|0,!((g|0)==0&(a|0)==0)&&(A[R+(_<<2)>>2]|0)==(c|0)&&($=f+(p<<3)|0,A[$>>2]=g,A[$+4>>2]=a,p=p+1|0),_=je(_|0,w|0,1,0)|0,w=G()|0;while((w|0)<(v|0)|(w|0)==(v|0)&_>>>0<l>>>0)}We(S),We(R),p=0}}else p=2;while(!1);return $=p,L=U,$|0}function p2(a,l,c,f){a=a|0,l=l|0,c=c|0,f=f|0;var p=0,g=0,v=0,_=0,w=0,S=0;for(_=L,L=L+16|0,g=_,v=_+8|0,p=(Yt(a,l)|0)==0,p=p?1:2;;){if(A[v>>2]=0,S=(Vn(a,l,p,v,g)|0)==0,w=g,S&((A[w>>2]|0)==(c|0)?(A[w+4>>2]|0)==(f|0):0)){a=4;break}if(p=p+1|0,p>>>0>=7){p=7,a=4;break}}return(a|0)==4?(L=_,p|0):0}function Ix(a,l,c,f){a=a|0,l=l|0,c=c|0,f=f|0;var p=0,g=0,v=0,_=0,w=0,S=0;if(_=L,L=L+48|0,p=_+16|0,g=_+8|0,v=_,c=rl(c)|0,c|0)return v=c,L=_,v|0;if(S=a,w=A[S+4>>2]|0,c=g,A[c>>2]=A[S>>2],A[c+4>>2]=w,p4(g,p),c=Q3(p,l,v)|0,!c){if(l=A[g>>2]|0,g=A[a+8>>2]|0,(g|0)>0){p=A[a+12>>2]|0,c=0;do l=(A[p+(c<<3)>>2]|0)+l|0,c=c+1|0;while((c|0)<(g|0))}c=v,p=A[c>>2]|0,c=A[c+4>>2]|0,g=((l|0)<0)<<31>>31,(c|0)<(g|0)|(c|0)==(g|0)&p>>>0<l>>>0?(c=v,A[c>>2]=l,A[c+4>>2]=g,c=g):l=p,w=je(l|0,c|0,12,0)|0,S=G()|0,c=v,A[c>>2]=w,A[c+4>>2]=S,c=f,A[c>>2]=w,A[c+4>>2]=S,c=0}return S=c,L=_,S|0}function V3(a,l,c,f,p,g,v){a=a|0,l=l|0,c=c|0,f=f|0,p=p|0,g=g|0,v=v|0;var _=0,w=0,S=0,R=0,U=0,$=0,H=0,j=0,ee=0,ie=0,ce=0,ue=0,ae=0,te=0,Me=0,ze=0,Oe=0,At=0,ct=0,_t=0,et=0,$e=0,Se=0,gt=0,jt=0,ft=0,Wt=0,mr=0,R4=0;if(jt=L,L=L+64|0,et=jt+48|0,$e=jt+32|0,Se=jt+24|0,Me=jt+8|0,ze=jt,w=A[a>>2]|0,(w|0)<=0)return gt=0,L=jt,gt|0;for(Oe=a+4|0,At=et+8|0,ct=$e+8|0,_t=Me+8|0,_=0,ae=0;;){S=A[Oe>>2]|0,ue=S+(ae<<4)|0,A[et>>2]=A[ue>>2],A[et+4>>2]=A[ue+4>>2],A[et+8>>2]=A[ue+8>>2],A[et+12>>2]=A[ue+12>>2],(ae|0)==(w+-1|0)?(A[$e>>2]=A[S>>2],A[$e+4>>2]=A[S+4>>2],A[$e+8>>2]=A[S+8>>2],A[$e+12>>2]=A[S+12>>2]):(ue=S+(ae+1<<4)|0,A[$e>>2]=A[ue>>2],A[$e+4>>2]=A[ue+4>>2],A[$e+8>>2]=A[ue+8>>2],A[$e+12>>2]=A[ue+12>>2]),w=Qx(et,$e,f,Se)|0;e:do if(w)S=0,_=w;else if(w=Se,S=A[w>>2]|0,w=A[w+4>>2]|0,(w|0)>0|(w|0)==0&S>>>0>0){ce=0,ue=0;t:for(;;){if(Wt=1/(+(S>>>0)+4294967296*+(w|0)),R4=+F[et>>3],w=Qn(S|0,w|0,ce|0,ue|0)|0,mr=+(w>>>0)+4294967296*+(G()|0),ft=+(ce>>>0)+4294967296*+(ue|0),F[Me>>3]=Wt*(R4*mr)+Wt*(+F[$e>>3]*ft),F[_t>>3]=Wt*(+F[At>>3]*mr)+Wt*(+F[ct>>3]*ft),w=C2(Me,f,ze)|0,w|0){_=w;break}ie=ze,ee=A[ie>>2]|0,ie=A[ie+4>>2]|0,$=Va(ee|0,ie|0,l|0,c|0)|0,R=G()|0,w=v+($<<3)|0,U=w,S=A[U>>2]|0,U=A[U+4>>2]|0;n:do if((S|0)==0&(U|0)==0)te=w,gt=16;else for(H=0,j=0;;){if((H|0)>(c|0)|(H|0)==(c|0)&j>>>0>l>>>0){_=1;break t}if((S|0)==(ee|0)&(U|0)==(ie|0))break n;if(w=je($|0,R|0,1,0)|0,$=Ga(w|0,G()|0,l|0,c|0)|0,R=G()|0,j=je(j|0,H|0,1,0)|0,H=G()|0,w=v+($<<3)|0,U=w,S=A[U>>2]|0,U=A[U+4>>2]|0,(S|0)==0&(U|0)==0){te=w,gt=16;break}}while(!1);if((gt|0)==16&&(gt=0,!((ee|0)==0&(ie|0)==0))&&(j=te,A[j>>2]=ee,A[j+4>>2]=ie,j=g+(A[p>>2]<<3)|0,A[j>>2]=ee,A[j+4>>2]=ie,j=p,j=je(A[j>>2]|0,A[j+4>>2]|0,1,0)|0,ee=G()|0,ie=p,A[ie>>2]=j,A[ie+4>>2]=ee),ce=je(ce|0,ue|0,1,0)|0,ue=G()|0,w=Se,S=A[w>>2]|0,w=A[w+4>>2]|0,!((w|0)>(ue|0)|(w|0)==(ue|0)&S>>>0>ce>>>0)){S=1;break e}}S=0}else S=1;while(!1);if(ae=ae+1|0,!S){gt=21;break}if(w=A[a>>2]|0,(ae|0)>=(w|0)){_=0,gt=21;break}}return(gt|0)==21?(L=jt,_|0):0}function qx(a,l,c,f){a=a|0,l=l|0,c=c|0,f=f|0;var p=0,g=0,v=0,_=0,w=0,S=0,R=0,U=0,$=0,H=0,j=0,ee=0,ie=0,ce=0,ue=0,ae=0,te=0,Me=0,ze=0,Oe=0,At=0,ct=0,_t=0,et=0,$e=0,Se=0,gt=0,jt=0,ft=0,Wt=0,mr=0;if(mr=L,L=L+112|0,gt=mr+80|0,w=mr+72|0,jt=mr,ft=mr+56|0,p=rl(c)|0,p|0)return Wt=p,L=mr,Wt|0;if(S=a+8|0,Wt=Xi((A[S>>2]<<5)+32|0)|0,!Wt)return Wt=13,L=mr,Wt|0;if(q2(a,Wt),p=rl(c)|0,!p){if($e=a,Se=A[$e+4>>2]|0,p=w,A[p>>2]=A[$e>>2],A[p+4>>2]=Se,p4(w,gt),p=Q3(gt,l,jt)|0,p)$e=0,Se=0;else{if(p=A[w>>2]|0,g=A[S>>2]|0,(g|0)>0){v=A[a+12>>2]|0,c=0;do p=(A[v+(c<<3)>>2]|0)+p|0,c=c+1|0;while((c|0)!=(g|0));c=p}else c=p;p=jt,g=A[p>>2]|0,p=A[p+4>>2]|0,v=((c|0)<0)<<31>>31,(p|0)<(v|0)|(p|0)==(v|0)&g>>>0<c>>>0?(p=jt,A[p>>2]=c,A[p+4>>2]=v,p=v):c=g,$e=je(c|0,p|0,12,0)|0,Se=G()|0,p=jt,A[p>>2]=$e,A[p+4>>2]=Se,p=0}if(!p){if(c=Mr($e,8)|0,!c)return We(Wt),Wt=13,L=mr,Wt|0;if(_=Mr($e,8)|0,!_)return We(Wt),We(c),Wt=13,L=mr,Wt|0;_t=gt,A[_t>>2]=0,A[_t+4>>2]=0,_t=a,et=A[_t+4>>2]|0,p=w,A[p>>2]=A[_t>>2],A[p+4>>2]=et,p=V3(w,$e,Se,l,gt,c,_)|0;e:do if(p)We(c),We(_),We(Wt);else{t:do if((A[S>>2]|0)>0){for(v=a+12|0,g=0;p=V3((A[v>>2]|0)+(g<<3)|0,$e,Se,l,gt,c,_)|0,g=g+1|0,!(p|0);)if((g|0)>=(A[S>>2]|0))break t;We(c),We(_),We(Wt);break e}while(!1);(Se|0)>0|(Se|0)==0&$e>>>0>0&&Ao(_|0,0,$e<<3|0)|0,et=gt,_t=A[et+4>>2]|0;t:do if((_t|0)>0|(_t|0)==0&(A[et>>2]|0)>>>0>0){Oe=c,At=_,ct=c,_t=_,et=c,p=c,te=c,Me=_,ze=_,c=_;n:for(;;){for(ie=0,ce=0,ue=0,ae=0,g=0,v=0;;){_=jt,w=_+56|0;do A[_>>2]=0,_=_+4|0;while((_|0)<(w|0));if(l=Oe+(ie<<3)|0,S=A[l>>2]|0,l=A[l+4>>2]|0,k3(S,l,1,jt,0)|0){_=jt,w=_+56|0;do A[_>>2]=0,_=_+4|0;while((_|0)<(w|0));_=Mr(7,4)|0,_|0&&(Qi(S,l,1,jt,_,7,0,0)|0,We(_))}for(ee=0;;){j=jt+(ee<<3)|0,H=A[j>>2]|0,j=A[j+4>>2]|0;r:do if((H|0)==0&(j|0)==0)_=g,w=v;else{if(R=Va(H|0,j|0,$e|0,Se|0)|0,S=G()|0,_=f+(R<<3)|0,l=_,w=A[l>>2]|0,l=A[l+4>>2]|0,!((w|0)==0&(l|0)==0)){U=0,$=0;do{if((U|0)>(Se|0)|(U|0)==(Se|0)&$>>>0>$e>>>0)break n;if((w|0)==(H|0)&(l|0)==(j|0)){_=g,w=v;break r}_=je(R|0,S|0,1,0)|0,R=Ga(_|0,G()|0,$e|0,Se|0)|0,S=G()|0,$=je($|0,U|0,1,0)|0,U=G()|0,_=f+(R<<3)|0,l=_,w=A[l>>2]|0,l=A[l+4>>2]|0}while(!((w|0)==0&(l|0)==0))}if((H|0)==0&(j|0)==0){_=g,w=v;break}Wo(H,j,ft)|0,O2(a,Wt,ft)|0&&($=je(g|0,v|0,1,0)|0,v=G()|0,U=_,A[U>>2]=H,A[U+4>>2]=j,g=At+(g<<3)|0,A[g>>2]=H,A[g+4>>2]=j,g=$),_=g,w=v}while(!1);if(ee=ee+1|0,ee>>>0>=7)break;g=_,v=w}if(ie=je(ie|0,ce|0,1,0)|0,ce=G()|0,ue=je(ue|0,ae|0,1,0)|0,ae=G()|0,v=gt,g=A[v>>2]|0,v=A[v+4>>2]|0,(ae|0)<(v|0)|(ae|0)==(v|0)&ue>>>0<g>>>0)g=_,v=w;else break}if((v|0)>0|(v|0)==0&g>>>0>0){g=0,v=0;do ae=Oe+(g<<3)|0,A[ae>>2]=0,A[ae+4>>2]=0,g=je(g|0,v|0,1,0)|0,v=G()|0,ae=gt,ue=A[ae+4>>2]|0;while((v|0)<(ue|0)|((v|0)==(ue|0)?g>>>0<(A[ae>>2]|0)>>>0:0))}if(ae=gt,A[ae>>2]=_,A[ae+4>>2]=w,(w|0)>0|(w|0)==0&_>>>0>0)ee=c,ie=ze,ce=et,ue=Me,ae=At,c=te,ze=p,Me=ct,te=ee,p=ie,et=_t,_t=ce,ct=ue,At=Oe,Oe=ae;else break t}We(ct),We(_t),We(Wt),p=1;break e}else p=_;while(!1);We(Wt),We(c),We(p),p=0}while(!1);return Wt=p,L=mr,Wt|0}}return We(Wt),Wt=p,L=mr,Wt|0}function Ox(a,l,c){a=a|0,l=l|0,c=c|0;var f=0,p=0,g=0,v=0,_=0,w=0,S=0,R=0;if(R=L,L=L+176|0,w=R,(l|0)<1)return _4(c,0,0),S=0,L=R,S|0;for(_=a,_=be(A[_>>2]|0,A[_+4>>2]|0,52)|0,G()|0,_4(c,(l|0)>6?l:6,_&15),_=0;f=a+(_<<3)|0,f=Ua(A[f>>2]|0,A[f+4>>2]|0,w)|0,!(f|0);){if(f=A[w>>2]|0,(f|0)>0){v=0;do g=w+8+(v<<4)|0,v=v+1|0,f=w+8+(((v|0)%(f|0)|0)<<4)|0,p=hT(c,f,g)|0,p?T4(c,p)|0:cT(c,g,f)|0,f=A[w>>2]|0;while((v|0)<(f|0))}if(_=_+1|0,(_|0)>=(l|0)){f=0,S=13;break}}return(S|0)==13?(L=R,f|0):(x4(c),S=f,L=R,S|0)}function Ux(a,l,c){a=a|0,l=l|0,c=c|0;var f=0,p=0,g=0,v=0;if(g=L,L=L+32|0,f=g,p=g+16|0,a=Ox(a,l,p)|0,a|0)return c=a,L=g,c|0;if(A[c>>2]=0,A[c+4>>2]=0,A[c+8>>2]=0,a=b4(p)|0,a|0)do{l=kb(c)|0;do Gb(l,a)|0,v=a+16|0,A[f>>2]=A[v>>2],A[f+4>>2]=A[v+4>>2],A[f+8>>2]=A[v+8>>2],A[f+12>>2]=A[v+12>>2],T4(p,a)|0,a=fT(p,f)|0;while((a|0)!=0);a=b4(p)|0}while((a|0)!=0);return x4(p),a=Vb(c)|0,a?(c4(c),v=a,L=g,v|0):(v=0,L=g,v|0)}function an(a){return a=a|0,a>>>0>121?(a=0,a|0):(a=A[7696+(a*28|0)+16>>2]|0,a|0)}function m2(a){return a=a|0,(a|0)==4|(a|0)==117|0}function z3(a){return a=a|0,A[11120+((A[a>>2]|0)*216|0)+((A[a+4>>2]|0)*72|0)+((A[a+8>>2]|0)*24|0)+(A[a+12>>2]<<3)>>2]|0}function kx(a){return a=a|0,A[11120+((A[a>>2]|0)*216|0)+((A[a+4>>2]|0)*72|0)+((A[a+8>>2]|0)*24|0)+(A[a+12>>2]<<3)+4>>2]|0}function Gx(a,l){a=a|0,l=l|0,a=7696+(a*28|0)|0,A[l>>2]=A[a>>2],A[l+4>>2]=A[a+4>>2],A[l+8>>2]=A[a+8>>2],A[l+12>>2]=A[a+12>>2]}function Vx(a,l){a=a|0,l=l|0;var c=0,f=0;if(l>>>0>20)return l=-1,l|0;do if((A[11120+(l*216|0)>>2]|0)!=(a|0))if((A[11120+(l*216|0)+8>>2]|0)!=(a|0))if((A[11120+(l*216|0)+16>>2]|0)!=(a|0))if((A[11120+(l*216|0)+24>>2]|0)!=(a|0))if((A[11120+(l*216|0)+32>>2]|0)!=(a|0))if((A[11120+(l*216|0)+40>>2]|0)!=(a|0))if((A[11120+(l*216|0)+48>>2]|0)!=(a|0))if((A[11120+(l*216|0)+56>>2]|0)!=(a|0))if((A[11120+(l*216|0)+64>>2]|0)!=(a|0))if((A[11120+(l*216|0)+72>>2]|0)!=(a|0))if((A[11120+(l*216|0)+80>>2]|0)!=(a|0))if((A[11120+(l*216|0)+88>>2]|0)!=(a|0))if((A[11120+(l*216|0)+96>>2]|0)!=(a|0))if((A[11120+(l*216|0)+104>>2]|0)!=(a|0))if((A[11120+(l*216|0)+112>>2]|0)!=(a|0))if((A[11120+(l*216|0)+120>>2]|0)!=(a|0))if((A[11120+(l*216|0)+128>>2]|0)!=(a|0))if((A[11120+(l*216|0)+136>>2]|0)==(a|0))a=2,c=1,f=2;else{if((A[11120+(l*216|0)+144>>2]|0)==(a|0)){a=0,c=2,f=0;break}if((A[11120+(l*216|0)+152>>2]|0)==(a|0)){a=0,c=2,f=1;break}if((A[11120+(l*216|0)+160>>2]|0)==(a|0)){a=0,c=2,f=2;break}if((A[11120+(l*216|0)+168>>2]|0)==(a|0)){a=1,c=2,f=0;break}if((A[11120+(l*216|0)+176>>2]|0)==(a|0)){a=1,c=2,f=1;break}if((A[11120+(l*216|0)+184>>2]|0)==(a|0)){a=1,c=2,f=2;break}if((A[11120+(l*216|0)+192>>2]|0)==(a|0)){a=2,c=2,f=0;break}if((A[11120+(l*216|0)+200>>2]|0)==(a|0)){a=2,c=2,f=1;break}if((A[11120+(l*216|0)+208>>2]|0)==(a|0)){a=2,c=2,f=2;break}else a=-1;return a|0}else a=2,c=1,f=1;else a=2,c=1,f=0;else a=1,c=1,f=2;else a=1,c=1,f=1;else a=1,c=1,f=0;else a=0,c=1,f=2;else a=0,c=1,f=1;else a=0,c=1,f=0;else a=2,c=0,f=2;else a=2,c=0,f=1;else a=2,c=0,f=0;else a=1,c=0,f=2;else a=1,c=0,f=1;else a=1,c=0,f=0;else a=0,c=0,f=2;else a=0,c=0,f=1;else a=0,c=0,f=0;while(!1);return l=A[11120+(l*216|0)+(c*72|0)+(a*24|0)+(f<<3)+4>>2]|0,l|0}function $3(a,l){return a=a|0,l=l|0,(A[7696+(a*28|0)+20>>2]|0)==(l|0)?(l=1,l|0):(l=(A[7696+(a*28|0)+24>>2]|0)==(l|0),l|0)}function g2(a,l){return a=a|0,l=l|0,A[848+(a*28|0)+(l<<2)>>2]|0}function y2(a,l){return a=a|0,l=l|0,(A[848+(a*28|0)>>2]|0)==(l|0)?(l=0,l|0):(A[848+(a*28|0)+4>>2]|0)==(l|0)?(l=1,l|0):(A[848+(a*28|0)+8>>2]|0)==(l|0)?(l=2,l|0):(A[848+(a*28|0)+12>>2]|0)==(l|0)?(l=3,l|0):(A[848+(a*28|0)+16>>2]|0)==(l|0)?(l=4,l|0):(A[848+(a*28|0)+20>>2]|0)==(l|0)?(l=5,l|0):((A[848+(a*28|0)+24>>2]|0)==(l|0)?6:7)|0}function zx(){return 122}function $x(a){a=a|0;var l=0,c=0,f=0;l=0;do Ne(l|0,0,45)|0,f=G()|0|134225919,c=a+(l<<3)|0,A[c>>2]=-1,A[c+4>>2]=f,l=l+1|0;while((l|0)!=122);return 0}function Hx(a){a=a|0;var l=0,c=0,f=0;return f=+F[a+16>>3],c=+F[a+24>>3],l=f-c,+(f<c?l+6.283185307179586:l)}function H3(a){return a=a|0,+F[a+16>>3]<+F[a+24>>3]|0}function jx(a){return a=a|0,+(+F[a>>3]-+F[a+8>>3])}function v2(a,l){a=a|0,l=l|0;var c=0,f=0,p=0;return c=+F[l>>3],!(c>=+F[a+8>>3])||!(c<=+F[a>>3])?(l=0,l|0):(f=+F[a+16>>3],c=+F[a+24>>3],p=+F[l+8>>3],l=p>=c,a=p<=f&1,f<c?l&&(a=1):l||(a=0),l=(a|0)!=0,l|0)}function _2(a,l){a=a|0,l=l|0;var c=0,f=0,p=0,g=0,v=0,_=0,w=0,S=0,R=0;return+F[a>>3]<+F[l+8>>3]||+F[a+8>>3]>+F[l>>3]?(f=0,f|0):(g=+F[a+16>>3],c=a+24|0,R=+F[c>>3],v=g<R,f=l+16|0,S=+F[f>>3],p=l+24|0,w=+F[p>>3],_=S<w,l=R-S<w-g,a=v?_|l?1:2:0,l=_?v?1:l?2:1:0,g=+kr(g,a),g<+kr(+F[p>>3],l)||(R=+kr(+F[c>>3],a),R>+kr(+F[f>>3],l))?(_=0,_|0):(_=1,_|0))}function Wx(a,l,c,f){a=a|0,l=l|0,c=c|0,f=f|0;var p=0,g=0,v=0,_=0,w=0;g=+F[a+16>>3],w=+F[a+24>>3],a=g<w,_=+F[l+16>>3],v=+F[l+24>>3],p=_<v,l=w-_<v-g,A[c>>2]=a?p|l?1:2:0,A[f>>2]=p?a?1:l?2:1:0}function j3(a,l){a=a|0,l=l|0;var c=0,f=0,p=0,g=0,v=0,_=0,w=0,S=0,R=0;return+F[a>>3]<+F[l>>3]||+F[a+8>>3]>+F[l+8>>3]?(f=0,f|0):(f=a+16|0,w=+F[f>>3],g=+F[a+24>>3],v=w<g,c=l+16|0,R=+F[c>>3],p=l+24|0,S=+F[p>>3],_=R<S,l=g-R<S-w,a=v?_|l?1:2:0,l=_?v?1:l?2:1:0,g=+kr(g,a),g<=+kr(+F[p>>3],l)?(R=+kr(+F[f>>3],a),_=R>=+kr(+F[c>>3],l),_|0):(_=0,_|0))}function W3(a,l){a=a|0,l=l|0;var c=0,f=0,p=0,g=0,v=0,_=0;p=L,L=L+176|0,f=p,A[f>>2]=4,_=+F[l>>3],F[f+8>>3]=_,g=+F[l+16>>3],F[f+16>>3]=g,F[f+24>>3]=_,_=+F[l+24>>3],F[f+32>>3]=_,v=+F[l+8>>3],F[f+40>>3]=v,F[f+48>>3]=_,F[f+56>>3]=v,F[f+64>>3]=g,l=f+72|0,c=l+96|0;do A[l>>2]=0,l=l+4|0;while((l|0)<(c|0));za(a|0,f|0,168)|0,L=p}function Q3(a,l,c){a=a|0,l=l|0,c=c|0;var f=0,p=0,g=0,v=0,_=0,w=0,S=0,R=0,U=0,$=0,H=0,j=0,ee=0,ie=0;j=L,L=L+288|0,R=j+264|0,U=j+96|0,S=j,_=S,w=_+96|0;do A[_>>2]=0,_=_+4|0;while((_|0)<(w|0));return l=B2(l,S)|0,l|0?(H=l,L=j,H|0):(w=S,S=A[w>>2]|0,w=A[w+4>>2]|0,Wo(S,w,R)|0,Ua(S,w,U)|0,v=+tl(R,U+8|0),F[R>>3]=+F[a>>3],w=R+8|0,F[w>>3]=+F[a+16>>3],F[U>>3]=+F[a+8>>3],S=U+8|0,F[S>>3]=+F[a+24>>3],p=+tl(R,U),ie=+F[w>>3]-+F[S>>3],g=+yt(+ie),ee=+F[R>>3]-+F[U>>3],f=+yt(+ee),!(ie==0|ee==0)&&(ie=+E4(+g,+f),ie=+Ia(+(p*p/+Ku(+(ie/+Ku(+g,+f)),3)/(v*(v*2.59807621135)*.8))),F[Ct>>3]=ie,$=~~ie>>>0,H=+yt(ie)>=1?ie>0?~~+d2(+Gn(ie/4294967296),4294967295)>>>0:~~+Ia((ie-+(~~ie>>>0))/4294967296)>>>0:0,(A[Ct+4>>2]&2146435072|0)!=2146435072)?(U=($|0)==0&(H|0)==0,l=c,A[l>>2]=U?1:$,A[l+4>>2]=U?0:H,l=0):l=1,H=l,L=j,H|0)}function Qx(a,l,c,f){a=a|0,l=l|0,c=c|0,f=f|0;var p=0,g=0,v=0,_=0,w=0,S=0,R=0;S=L,L=L+288|0,v=S+264|0,_=S+96|0,w=S,p=w,g=p+96|0;do A[p>>2]=0,p=p+4|0;while((p|0)<(g|0));return c=B2(c,w)|0,c|0?(f=c,L=S,f|0):(c=w,p=A[c>>2]|0,c=A[c+4>>2]|0,Wo(p,c,v)|0,Ua(p,c,_)|0,R=+tl(v,_+8|0),R=+Ia(+(+tl(a,l)/(R*2))),F[Ct>>3]=R,c=~~R>>>0,p=+yt(R)>=1?R>0?~~+d2(+Gn(R/4294967296),4294967295)>>>0:~~+Ia((R-+(~~R>>>0))/4294967296)>>>0:0,(A[Ct+4>>2]&2146435072|0)==2146435072?(f=1,L=S,f|0):(w=(c|0)==0&(p|0)==0,A[f>>2]=w?1:c,A[f+4>>2]=w?0:p,f=0,L=S,f|0))}function Xx(a,l){a=a|0,l=+l;var c=0,f=0,p=0,g=0,v=0,_=0,w=0,S=0,R=0;g=a+16|0,v=+F[g>>3],c=a+24|0,p=+F[c>>3],f=v-p,f=v<p?f+6.283185307179586:f,S=+F[a>>3],_=a+8|0,w=+F[_>>3],R=S-w,f=(f*l-f)*.5,l=(R*l-R)*.5,S=S+l,F[a>>3]=S>1.5707963267948966?1.5707963267948966:S,l=w-l,F[_>>3]=l<-1.5707963267948966?-1.5707963267948966:l,l=v+f,l=l>3.141592653589793?l+-6.283185307179586:l,F[g>>3]=l<-3.141592653589793?l+6.283185307179586:l,l=p-f,l=l>3.141592653589793?l+-6.283185307179586:l,F[c>>3]=l<-3.141592653589793?l+6.283185307179586:l}function Yx(a,l,c,f){a=a|0,l=l|0,c=c|0,f=f|0,A[a>>2]=l,A[a+4>>2]=c,A[a+8>>2]=f}function Kx(a,l){a=a|0,l=l|0;var c=0,f=0,p=0,g=0,v=0,_=0,w=0,S=0,R=0,U=0,$=0;U=l+8|0,A[U>>2]=0,w=+F[a>>3],v=+yt(+w),S=+F[a+8>>3],_=+yt(+S)*1.1547005383792515,v=v+_*.5,c=~~v,a=~~_,v=v-+(c|0),_=_-+(a|0);do if(v<.5)if(v<.3333333333333333)if(A[l>>2]=c,_<(v+1)*.5){A[l+4>>2]=a;break}else{a=a+1|0,A[l+4>>2]=a;break}else if($=1-v,a=(!(_<$)&1)+a|0,A[l+4>>2]=a,$<=_&_<v*2){c=c+1|0,A[l>>2]=c;break}else{A[l>>2]=c;break}else{if(!(v<.6666666666666666))if(c=c+1|0,A[l>>2]=c,_<v*.5){A[l+4>>2]=a;break}else{a=a+1|0,A[l+4>>2]=a;break}if(_<1-v){if(A[l+4>>2]=a,v*2+-1<_){A[l>>2]=c;break}}else a=a+1|0,A[l+4>>2]=a;c=c+1|0,A[l>>2]=c}while(!1);do if(w<0)if(a&1){R=(a+1|0)/2|0,R=Qn(c|0,((c|0)<0)<<31>>31|0,R|0,((R|0)<0)<<31>>31|0)|0,c=~~(+(c|0)-((+(R>>>0)+4294967296*+(G()|0))*2+1)),A[l>>2]=c;break}else{R=(a|0)/2|0,R=Qn(c|0,((c|0)<0)<<31>>31|0,R|0,((R|0)<0)<<31>>31|0)|0,c=~~(+(c|0)-(+(R>>>0)+4294967296*+(G()|0))*2),A[l>>2]=c;break}while(!1);R=l+4|0,S<0&&(c=c-((a<<1|1|0)/2|0)|0,A[l>>2]=c,a=0-a|0,A[R>>2]=a),f=a-c|0,(c|0)<0?(p=0-c|0,A[R>>2]=f,A[U>>2]=p,A[l>>2]=0,a=f,c=0):p=0,(a|0)<0&&(c=c-a|0,A[l>>2]=c,p=p-a|0,A[U>>2]=p,A[R>>2]=0,a=0),g=c-p|0,f=a-p|0,(p|0)<0&&(A[l>>2]=g,A[R>>2]=f,A[U>>2]=0,a=f,c=g,p=0),f=(a|0)<(c|0)?a:c,f=(p|0)<(f|0)?p:f,!((f|0)<=0)&&(A[l>>2]=c-f,A[R>>2]=a-f,A[U>>2]=p-f)}function or(a){a=a|0;var l=0,c=0,f=0,p=0,g=0,v=0;l=A[a>>2]|0,v=a+4|0,c=A[v>>2]|0,(l|0)<0&&(c=c-l|0,A[v>>2]=c,g=a+8|0,A[g>>2]=(A[g>>2]|0)-l,A[a>>2]=0,l=0),(c|0)<0?(l=l-c|0,A[a>>2]=l,g=a+8|0,p=(A[g>>2]|0)-c|0,A[g>>2]=p,A[v>>2]=0,c=0):(p=a+8|0,g=p,p=A[p>>2]|0),(p|0)<0&&(l=l-p|0,A[a>>2]=l,c=c-p|0,A[v>>2]=c,A[g>>2]=0,p=0),f=(c|0)<(l|0)?c:l,f=(p|0)<(f|0)?p:f,!((f|0)<=0)&&(A[a>>2]=l-f,A[v>>2]=c-f,A[g>>2]=p-f)}function zo(a,l){a=a|0,l=l|0;var c=0,f=0;f=A[a+8>>2]|0,c=+((A[a+4>>2]|0)-f|0),F[l>>3]=+((A[a>>2]|0)-f|0)-c*.5,F[l+8>>3]=c*.8660254037844386}function pr(a,l,c){a=a|0,l=l|0,c=c|0,A[c>>2]=(A[l>>2]|0)+(A[a>>2]|0),A[c+4>>2]=(A[l+4>>2]|0)+(A[a+4>>2]|0),A[c+8>>2]=(A[l+8>>2]|0)+(A[a+8>>2]|0)}function x2(a,l,c){a=a|0,l=l|0,c=c|0,A[c>>2]=(A[a>>2]|0)-(A[l>>2]|0),A[c+4>>2]=(A[a+4>>2]|0)-(A[l+4>>2]|0),A[c+8>>2]=(A[a+8>>2]|0)-(A[l+8>>2]|0)}function X3(a,l){a=a|0,l=l|0;var c=0,f=0;c=Wi(A[a>>2]|0,l)|0,A[a>>2]=c,c=a+4|0,f=Wi(A[c>>2]|0,l)|0,A[c>>2]=f,a=a+8|0,l=Wi(A[a>>2]|0,l)|0,A[a>>2]=l}function $u(a){a=a|0;var l=0,c=0,f=0,p=0,g=0,v=0,_=0;v=A[a>>2]|0,_=(v|0)<0,f=(A[a+4>>2]|0)-(_?v:0)|0,g=(f|0)<0,p=(g?0-f|0:0)+((A[a+8>>2]|0)-(_?v:0))|0,c=(p|0)<0,a=c?0:p,l=(g?0:f)-(c?p:0)|0,p=(_?0:v)-(g?f:0)-(c?p:0)|0,c=(l|0)<(p|0)?l:p,c=(a|0)<(c|0)?a:c,f=(c|0)>0,a=a-(f?c:0)|0,l=l-(f?c:0)|0;e:do switch(p-(f?c:0)|0){case 0:switch(l|0){case 0:return _=(a|0)==0?0:(a|0)==1?1:7,_|0;case 1:return _=(a|0)==0?2:(a|0)==1?3:7,_|0;default:break e}case 1:switch(l|0){case 0:return _=(a|0)==0?4:(a|0)==1?5:7,_|0;case 1:{if(!a)a=6;else break e;return a|0}default:break e}}while(!1);return _=7,_|0}function Zx(a){a=a|0;var l=0,c=0,f=0,p=0,g=0,v=0,_=0,w=0,S=0;if(w=a+8|0,v=A[w>>2]|0,_=(A[a>>2]|0)-v|0,S=a+4|0,v=(A[S>>2]|0)-v|0,_>>>0>715827881|v>>>0>715827881){if(f=(_|0)>0,p=2147483647-_|0,g=-2147483648-_|0,(f?(p|0)<(_|0):(g|0)>(_|0))||(c=_<<1,f?(2147483647-c|0)<(_|0):(-2147483648-c|0)>(_|0))||((v|0)>0?(2147483647-v|0)<(v|0):(-2147483648-v|0)>(v|0))||(l=_*3|0,c=v<<1,(f?(p|0)<(c|0):(g|0)>(c|0))||((_|0)>-1?(l|-2147483648|0)>=(v|0):(l^-2147483648|0)<(v|0))))return S=1,S|0}else c=v<<1,l=_*3|0;return f=oo(+(l-v|0)*.14285714285714285)|0,A[a>>2]=f,p=oo(+(c+_|0)*.14285714285714285)|0,A[S>>2]=p,A[w>>2]=0,c=(p|0)<(f|0),l=c?f:p,c=c?p:f,(c|0)<0&&(((c|0)==-2147483648||((l|0)>0?(2147483647-l|0)<(c|0):(-2147483648-l|0)>(c|0)))&&nt(27795,26892,354,26903),((l|0)>-1?(l|-2147483648|0)>=(c|0):(l^-2147483648|0)<(c|0))&&nt(27795,26892,354,26903)),l=p-f|0,(f|0)<0?(c=0-f|0,A[S>>2]=l,A[w>>2]=c,A[a>>2]=0,f=0):(l=p,c=0),(l|0)<0&&(f=f-l|0,A[a>>2]=f,c=c-l|0,A[w>>2]=c,A[S>>2]=0,l=0),g=f-c|0,p=l-c|0,(c|0)<0?(A[a>>2]=g,A[S>>2]=p,A[w>>2]=0,l=p,p=g,c=0):p=f,f=(l|0)<(p|0)?l:p,f=(c|0)<(f|0)?c:f,(f|0)<=0?(S=0,S|0):(A[a>>2]=p-f,A[S>>2]=l-f,A[w>>2]=c-f,S=0,S|0)}function Jx(a){a=a|0;var l=0,c=0,f=0,p=0,g=0,v=0,_=0,w=0;if(v=a+8|0,p=A[v>>2]|0,g=(A[a>>2]|0)-p|0,_=a+4|0,p=(A[_>>2]|0)-p|0,g>>>0>715827881|p>>>0>715827881){if(c=(g|0)>0,(c?(2147483647-g|0)<(g|0):(-2147483648-g|0)>(g|0))||(l=g<<1,f=(p|0)>0,f?(2147483647-p|0)<(p|0):(-2147483648-p|0)>(p|0)))return _=1,_|0;if(w=p<<1,(f?(2147483647-w|0)<(p|0):(-2147483648-w|0)>(p|0))||(c?(2147483647-l|0)<(p|0):(-2147483648-l|0)>(p|0))||(c=p*3|0,(p|0)>-1?(c|-2147483648|0)>=(g|0):(c^-2147483648|0)<(g|0)))return w=1,w|0}else c=p*3|0,l=g<<1;return f=oo(+(l+p|0)*.14285714285714285)|0,A[a>>2]=f,p=oo(+(c-g|0)*.14285714285714285)|0,A[_>>2]=p,A[v>>2]=0,c=(p|0)<(f|0),l=c?f:p,c=c?p:f,(c|0)<0&&(((c|0)==-2147483648||((l|0)>0?(2147483647-l|0)<(c|0):(-2147483648-l|0)>(c|0)))&&nt(27795,26892,402,26917),((l|0)>-1?(l|-2147483648|0)>=(c|0):(l^-2147483648|0)<(c|0))&&nt(27795,26892,402,26917)),l=p-f|0,(f|0)<0?(c=0-f|0,A[_>>2]=l,A[v>>2]=c,A[a>>2]=0,f=0):(l=p,c=0),(l|0)<0&&(f=f-l|0,A[a>>2]=f,c=c-l|0,A[v>>2]=c,A[_>>2]=0,l=0),g=f-c|0,p=l-c|0,(c|0)<0?(A[a>>2]=g,A[_>>2]=p,A[v>>2]=0,l=p,p=g,c=0):p=f,f=(l|0)<(p|0)?l:p,f=(c|0)<(f|0)?c:f,(f|0)<=0?(w=0,w|0):(A[a>>2]=p-f,A[_>>2]=l-f,A[v>>2]=c-f,w=0,w|0)}function eb(a){a=a|0;var l=0,c=0,f=0,p=0,g=0,v=0,_=0;v=a+8|0,c=A[v>>2]|0,l=(A[a>>2]|0)-c|0,_=a+4|0,c=(A[_>>2]|0)-c|0,f=oo(+((l*3|0)-c|0)*.14285714285714285)|0,A[a>>2]=f,l=oo(+((c<<1)+l|0)*.14285714285714285)|0,A[_>>2]=l,A[v>>2]=0,c=l-f|0,(f|0)<0?(g=0-f|0,A[_>>2]=c,A[v>>2]=g,A[a>>2]=0,l=c,f=0,c=g):c=0,(l|0)<0&&(f=f-l|0,A[a>>2]=f,c=c-l|0,A[v>>2]=c,A[_>>2]=0,l=0),g=f-c|0,p=l-c|0,(c|0)<0?(A[a>>2]=g,A[_>>2]=p,A[v>>2]=0,l=p,p=g,c=0):p=f,f=(l|0)<(p|0)?l:p,f=(c|0)<(f|0)?c:f,!((f|0)<=0)&&(A[a>>2]=p-f,A[_>>2]=l-f,A[v>>2]=c-f)}function Y3(a){a=a|0;var l=0,c=0,f=0,p=0,g=0,v=0,_=0;v=a+8|0,c=A[v>>2]|0,l=(A[a>>2]|0)-c|0,_=a+4|0,c=(A[_>>2]|0)-c|0,f=oo(+((l<<1)+c|0)*.14285714285714285)|0,A[a>>2]=f,l=oo(+((c*3|0)-l|0)*.14285714285714285)|0,A[_>>2]=l,A[v>>2]=0,c=l-f|0,(f|0)<0?(g=0-f|0,A[_>>2]=c,A[v>>2]=g,A[a>>2]=0,l=c,f=0,c=g):c=0,(l|0)<0&&(f=f-l|0,A[a>>2]=f,c=c-l|0,A[v>>2]=c,A[_>>2]=0,l=0),g=f-c|0,p=l-c|0,(c|0)<0?(A[a>>2]=g,A[_>>2]=p,A[v>>2]=0,l=p,p=g,c=0):p=f,f=(l|0)<(p|0)?l:p,f=(c|0)<(f|0)?c:f,!((f|0)<=0)&&(A[a>>2]=p-f,A[_>>2]=l-f,A[v>>2]=c-f)}function Hu(a){a=a|0;var l=0,c=0,f=0,p=0,g=0,v=0,_=0;l=A[a>>2]|0,v=a+4|0,c=A[v>>2]|0,_=a+8|0,f=A[_>>2]|0,p=c+(l*3|0)|0,A[a>>2]=p,c=f+(c*3|0)|0,A[v>>2]=c,l=(f*3|0)+l|0,A[_>>2]=l,f=c-p|0,(p|0)<0?(l=l-p|0,A[v>>2]=f,A[_>>2]=l,A[a>>2]=0,c=f,f=0):f=p,(c|0)<0&&(f=f-c|0,A[a>>2]=f,l=l-c|0,A[_>>2]=l,A[v>>2]=0,c=0),g=f-l|0,p=c-l|0,(l|0)<0?(A[a>>2]=g,A[v>>2]=p,A[_>>2]=0,f=g,l=0):p=c,c=(p|0)<(f|0)?p:f,c=(l|0)<(c|0)?l:c,!((c|0)<=0)&&(A[a>>2]=f-c,A[v>>2]=p-c,A[_>>2]=l-c)}function $o(a){a=a|0;var l=0,c=0,f=0,p=0,g=0,v=0,_=0;p=A[a>>2]|0,v=a+4|0,l=A[v>>2]|0,_=a+8|0,c=A[_>>2]|0,f=(l*3|0)+p|0,p=c+(p*3|0)|0,A[a>>2]=p,A[v>>2]=f,l=(c*3|0)+l|0,A[_>>2]=l,c=f-p|0,(p|0)<0?(l=l-p|0,A[v>>2]=c,A[_>>2]=l,A[a>>2]=0,p=0):c=f,(c|0)<0&&(p=p-c|0,A[a>>2]=p,l=l-c|0,A[_>>2]=l,A[v>>2]=0,c=0),g=p-l|0,f=c-l|0,(l|0)<0?(A[a>>2]=g,A[v>>2]=f,A[_>>2]=0,p=g,l=0):f=c,c=(f|0)<(p|0)?f:p,c=(l|0)<(c|0)?l:c,!((c|0)<=0)&&(A[a>>2]=p-c,A[v>>2]=f-c,A[_>>2]=l-c)}function K3(a,l){a=a|0,l=l|0;var c=0,f=0,p=0,g=0,v=0,_=0;(l+-1|0)>>>0>=6||(p=(A[15440+(l*12|0)>>2]|0)+(A[a>>2]|0)|0,A[a>>2]=p,_=a+4|0,f=(A[15440+(l*12|0)+4>>2]|0)+(A[_>>2]|0)|0,A[_>>2]=f,v=a+8|0,l=(A[15440+(l*12|0)+8>>2]|0)+(A[v>>2]|0)|0,A[v>>2]=l,c=f-p|0,(p|0)<0?(l=l-p|0,A[_>>2]=c,A[v>>2]=l,A[a>>2]=0,f=0):(c=f,f=p),(c|0)<0&&(f=f-c|0,A[a>>2]=f,l=l-c|0,A[v>>2]=l,A[_>>2]=0,c=0),g=f-l|0,p=c-l|0,(l|0)<0?(A[a>>2]=g,A[_>>2]=p,A[v>>2]=0,f=g,l=0):p=c,c=(p|0)<(f|0)?p:f,c=(l|0)<(c|0)?l:c,!((c|0)<=0)&&(A[a>>2]=f-c,A[_>>2]=p-c,A[v>>2]=l-c))}function Z3(a){a=a|0;var l=0,c=0,f=0,p=0,g=0,v=0,_=0;p=A[a>>2]|0,v=a+4|0,l=A[v>>2]|0,_=a+8|0,c=A[_>>2]|0,f=l+p|0,p=c+p|0,A[a>>2]=p,A[v>>2]=f,l=c+l|0,A[_>>2]=l,c=f-p|0,(p|0)<0?(l=l-p|0,A[v>>2]=c,A[_>>2]=l,A[a>>2]=0,f=0):(c=f,f=p),(c|0)<0&&(f=f-c|0,A[a>>2]=f,l=l-c|0,A[_>>2]=l,A[v>>2]=0,c=0),g=f-l|0,p=c-l|0,(l|0)<0?(A[a>>2]=g,A[v>>2]=p,A[_>>2]=0,f=g,l=0):p=c,c=(p|0)<(f|0)?p:f,c=(l|0)<(c|0)?l:c,!((c|0)<=0)&&(A[a>>2]=f-c,A[v>>2]=p-c,A[_>>2]=l-c)}function ju(a){a=a|0;var l=0,c=0,f=0,p=0,g=0,v=0,_=0;l=A[a>>2]|0,v=a+4|0,f=A[v>>2]|0,_=a+8|0,c=A[_>>2]|0,p=f+l|0,A[a>>2]=p,f=c+f|0,A[v>>2]=f,l=c+l|0,A[_>>2]=l,c=f-p|0,(p|0)<0?(l=l-p|0,A[v>>2]=c,A[_>>2]=l,A[a>>2]=0,f=0):(c=f,f=p),(c|0)<0&&(f=f-c|0,A[a>>2]=f,l=l-c|0,A[_>>2]=l,A[v>>2]=0,c=0),g=f-l|0,p=c-l|0,(l|0)<0?(A[a>>2]=g,A[v>>2]=p,A[_>>2]=0,f=g,l=0):p=c,c=(p|0)<(f|0)?p:f,c=(l|0)<(c|0)?l:c,!((c|0)<=0)&&(A[a>>2]=f-c,A[v>>2]=p-c,A[_>>2]=l-c)}function Ho(a){switch(a=a|0,a|0){case 1:{a=5;break}case 5:{a=4;break}case 4:{a=6;break}case 6:{a=2;break}case 2:{a=3;break}case 3:{a=1;break}}return a|0}function io(a){switch(a=a|0,a|0){case 1:{a=3;break}case 3:{a=2;break}case 2:{a=6;break}case 6:{a=4;break}case 4:{a=5;break}case 5:{a=1;break}}return a|0}function J3(a){a=a|0;var l=0,c=0,f=0,p=0,g=0,v=0,_=0;l=A[a>>2]|0,v=a+4|0,c=A[v>>2]|0,_=a+8|0,f=A[_>>2]|0,p=c+(l<<1)|0,A[a>>2]=p,c=f+(c<<1)|0,A[v>>2]=c,l=(f<<1)+l|0,A[_>>2]=l,f=c-p|0,(p|0)<0?(l=l-p|0,A[v>>2]=f,A[_>>2]=l,A[a>>2]=0,c=f,f=0):f=p,(c|0)<0&&(f=f-c|0,A[a>>2]=f,l=l-c|0,A[_>>2]=l,A[v>>2]=0,c=0),g=f-l|0,p=c-l|0,(l|0)<0?(A[a>>2]=g,A[v>>2]=p,A[_>>2]=0,f=g,l=0):p=c,c=(p|0)<(f|0)?p:f,c=(l|0)<(c|0)?l:c,!((c|0)<=0)&&(A[a>>2]=f-c,A[v>>2]=p-c,A[_>>2]=l-c)}function e4(a){a=a|0;var l=0,c=0,f=0,p=0,g=0,v=0,_=0;p=A[a>>2]|0,v=a+4|0,l=A[v>>2]|0,_=a+8|0,c=A[_>>2]|0,f=(l<<1)+p|0,p=c+(p<<1)|0,A[a>>2]=p,A[v>>2]=f,l=(c<<1)+l|0,A[_>>2]=l,c=f-p|0,(p|0)<0?(l=l-p|0,A[v>>2]=c,A[_>>2]=l,A[a>>2]=0,p=0):c=f,(c|0)<0&&(p=p-c|0,A[a>>2]=p,l=l-c|0,A[_>>2]=l,A[v>>2]=0,c=0),g=p-l|0,f=c-l|0,(l|0)<0?(A[a>>2]=g,A[v>>2]=f,A[_>>2]=0,p=g,l=0):f=c,c=(f|0)<(p|0)?f:p,c=(l|0)<(c|0)?l:c,!((c|0)<=0)&&(A[a>>2]=p-c,A[v>>2]=f-c,A[_>>2]=l-c)}function b2(a,l){a=a|0,l=l|0;var c=0,f=0,p=0,g=0,v=0,_=0;return v=(A[a>>2]|0)-(A[l>>2]|0)|0,_=(v|0)<0,f=(A[a+4>>2]|0)-(A[l+4>>2]|0)-(_?v:0)|0,g=(f|0)<0,p=(_?0-v|0:0)+(A[a+8>>2]|0)-(A[l+8>>2]|0)+(g?0-f|0:0)|0,a=(p|0)<0,l=a?0:p,c=(g?0:f)-(a?p:0)|0,p=(_?0:v)-(g?f:0)-(a?p:0)|0,a=(c|0)<(p|0)?c:p,a=(l|0)<(a|0)?l:a,f=(a|0)>0,l=l-(f?a:0)|0,c=c-(f?a:0)|0,a=p-(f?a:0)|0,a=(a|0)>-1?a:0-a|0,c=(c|0)>-1?c:0-c|0,l=(l|0)>-1?l:0-l|0,l=(c|0)>(l|0)?c:l,((a|0)>(l|0)?a:l)|0}function tb(a,l){a=a|0,l=l|0;var c=0;c=A[a+8>>2]|0,A[l>>2]=(A[a>>2]|0)-c,A[l+4>>2]=(A[a+4>>2]|0)-c}function nb(a,l){a=a|0,l=l|0;var c=0,f=0,p=0,g=0,v=0,_=0;return f=A[a>>2]|0,A[l>>2]=f,p=A[a+4>>2]|0,v=l+4|0,A[v>>2]=p,_=l+8|0,A[_>>2]=0,c=(p|0)<(f|0),a=c?f:p,c=c?p:f,(c|0)<0&&((c|0)==-2147483648||((a|0)>0?(2147483647-a|0)<(c|0):(-2147483648-a|0)>(c|0))||((a|0)>-1?(a|-2147483648|0)>=(c|0):(a^-2147483648|0)<(c|0)))?(l=1,l|0):(a=p-f|0,(f|0)<0?(c=0-f|0,A[v>>2]=a,A[_>>2]=c,A[l>>2]=0,f=0):(a=p,c=0),(a|0)<0&&(f=f-a|0,A[l>>2]=f,c=c-a|0,A[_>>2]=c,A[v>>2]=0,a=0),g=f-c|0,p=a-c|0,(c|0)<0?(A[l>>2]=g,A[v>>2]=p,A[_>>2]=0,a=p,p=g,c=0):p=f,f=(a|0)<(p|0)?a:p,f=(c|0)<(f|0)?c:f,(f|0)<=0?(l=0,l|0):(A[l>>2]=p-f,A[v>>2]=a-f,A[_>>2]=c-f,l=0,l|0))}function t4(a){a=a|0;var l=0,c=0,f=0,p=0;l=a+8|0,p=A[l>>2]|0,c=p-(A[a>>2]|0)|0,A[a>>2]=c,f=a+4|0,a=(A[f>>2]|0)-p|0,A[f>>2]=a,A[l>>2]=0-(a+c)}function rb(a){a=a|0;var l=0,c=0,f=0,p=0,g=0,v=0,_=0;c=A[a>>2]|0,l=0-c|0,A[a>>2]=l,v=a+8|0,A[v>>2]=0,_=a+4|0,f=A[_>>2]|0,p=f+c|0,(c|0)>0?(A[_>>2]=p,A[v>>2]=c,A[a>>2]=0,l=0,f=p):c=0,(f|0)<0?(g=l-f|0,A[a>>2]=g,c=c-f|0,A[v>>2]=c,A[_>>2]=0,p=g-c|0,l=0-c|0,(c|0)<0?(A[a>>2]=p,A[_>>2]=l,A[v>>2]=0,f=l,c=0):(f=0,p=g)):p=l,l=(f|0)<(p|0)?f:p,l=(c|0)<(l|0)?c:l,!((l|0)<=0)&&(A[a>>2]=p-l,A[_>>2]=f-l,A[v>>2]=c-l)}function ib(a,l,c,f,p){a=a|0,l=l|0,c=c|0,f=f|0,p=p|0;var g=0,v=0,_=0,w=0,S=0,R=0,U=0;if(U=L,L=L+64|0,R=U,_=U+56|0,!(!0&(l&2013265920|0)==134217728&(!0&(f&2013265920|0)==134217728)))return p=5,L=U,p|0;if((a|0)==(c|0)&(l|0)==(f|0))return A[p>>2]=0,p=0,L=U,p|0;if(v=be(a|0,l|0,52)|0,G()|0,v=v&15,S=be(c|0,f|0,52)|0,G()|0,(v|0)!=(S&15|0))return p=12,L=U,p|0;if(g=v+-1|0,v>>>0>1){E2(a,l,g,R)|0,E2(c,f,g,_)|0,S=R,w=A[S>>2]|0,S=A[S+4>>2]|0;e:do if((w|0)==(A[_>>2]|0)&&(S|0)==(A[_+4>>2]|0)){v=(v^15)*3|0,g=be(a|0,l|0,v|0)|0,G()|0,g=g&7,v=be(c|0,f|0,v|0)|0,G()|0,v=v&7;do if((g|0)==0|(v|0)==0)A[p>>2]=1,g=0;else if((g|0)==7)g=5;else{if((g|0)==1|(v|0)==1&&Yt(w,S)|0){g=5;break}if((A[15536+(g<<2)>>2]|0)!=(v|0)&&(A[15568+(g<<2)>>2]|0)!=(v|0))break e;A[p>>2]=1,g=0}while(!1);return p=g,L=U,p|0}while(!1)}g=R,v=g+56|0;do A[g>>2]=0,g=g+4|0;while((g|0)<(v|0));return O3(a,l,1,R)|0,l=R,!((A[l>>2]|0)==(c|0)&&(A[l+4>>2]|0)==(f|0))&&(l=R+8|0,!((A[l>>2]|0)==(c|0)&&(A[l+4>>2]|0)==(f|0)))&&(l=R+16|0,!((A[l>>2]|0)==(c|0)&&(A[l+4>>2]|0)==(f|0)))&&(l=R+24|0,!((A[l>>2]|0)==(c|0)&&(A[l+4>>2]|0)==(f|0)))&&(l=R+32|0,!((A[l>>2]|0)==(c|0)&&(A[l+4>>2]|0)==(f|0)))&&(l=R+40|0,!((A[l>>2]|0)==(c|0)&&(A[l+4>>2]|0)==(f|0)))?(g=R+48|0,g=((A[g>>2]|0)==(c|0)?(A[g+4>>2]|0)==(f|0):0)&1):g=1,A[p>>2]=g,p=0,L=U,p|0}function sb(a,l,c,f,p){return a=a|0,l=l|0,c=c|0,f=f|0,p=p|0,c=p2(a,l,c,f)|0,(c|0)==7?(p=11,p|0):(f=Ne(c|0,0,56)|0,l=l&-2130706433|(G()|0)|268435456,A[p>>2]=a|f,A[p+4>>2]=l,p=0,p|0)}function ob(a,l,c){return a=a|0,l=l|0,c=c|0,!0&(l&2013265920|0)==268435456?(A[c>>2]=a,A[c+4>>2]=l&-2130706433|134217728,c=0,c|0):(c=6,c|0)}function ab(a,l,c){a=a|0,l=l|0,c=c|0;var f=0,p=0,g=0;return p=L,L=L+16|0,f=p,A[f>>2]=0,!0&(l&2013265920|0)==268435456?(g=be(a|0,l|0,56)|0,G()|0,f=Vn(a,l&-2130706433|134217728,g&7,f,c)|0,L=p,f|0):(f=6,L=p,f|0)}function Ab(a,l){a=a|0,l=l|0;var c=0;switch(c=be(a|0,l|0,56)|0,G()|0,c&7){case 0:case 7:return c=0,c|0}return c=l&-2130706433|134217728,!(!0&(l&2013265920|0)==268435456)||!0&(l&117440512|0)==16777216&(Yt(a,c)|0)!=0?(c=0,c|0):(c=S2(a,c)|0,c|0)}function lb(a,l,c){a=a|0,l=l|0,c=c|0;var f=0,p=0,g=0,v=0;return p=L,L=L+16|0,f=p,!0&(l&2013265920|0)==268435456?(g=l&-2130706433|134217728,v=c,A[v>>2]=a,A[v+4>>2]=g,A[f>>2]=0,l=be(a|0,l|0,56)|0,G()|0,f=Vn(a,g,l&7,f,c+8|0)|0,L=p,f|0):(f=6,L=p,f|0)}function ub(a,l,c){a=a|0,l=l|0,c=c|0;var f=0,p=0;return p=(Yt(a,l)|0)==0,l=l&-2130706433,f=c,A[f>>2]=p?a:0,A[f+4>>2]=p?l|285212672:0,f=c+8|0,A[f>>2]=a,A[f+4>>2]=l|301989888,f=c+16|0,A[f>>2]=a,A[f+4>>2]=l|318767104,f=c+24|0,A[f>>2]=a,A[f+4>>2]=l|335544320,f=c+32|0,A[f>>2]=a,A[f+4>>2]=l|352321536,c=c+40|0,A[c>>2]=a,A[c+4>>2]=l|369098752,0}function Wu(a,l,c){a=a|0,l=l|0,c=c|0;var f=0,p=0,g=0,v=0;return v=L,L=L+16|0,p=v,g=l&-2130706433|134217728,!0&(l&2013265920|0)==268435456?(f=be(a|0,l|0,56)|0,G()|0,f=aT(a,g,f&7)|0,(f|0)==-1?(A[c>>2]=0,g=6,L=v,g|0):(Oa(a,g,p)|0&&nt(27795,26932,282,26947),l=be(a|0,l|0,52)|0,G()|0,l=l&15,Yt(a,g)|0?T2(p,l,f,2,c):w2(p,l,f,2,c),g=0,L=v,g|0)):(g=6,L=v,g|0)}function cb(a,l,c){a=a|0,l=l|0,c=c|0;var f=0,p=0;f=L,L=L+16|0,p=f,hb(a,l,c,p),Kx(p,c+4|0),L=f}function hb(a,l,c,f){a=a|0,l=l|0,c=c|0,f=f|0;var p=0,g=0,v=0,_=0,w=0;if(_=L,L=L+16|0,w=_,fb(a,c,w),g=+zu(+(1-+F[w>>3]*.5)),g<1e-16){A[f>>2]=0,A[f+4>>2]=0,A[f+8>>2]=0,A[f+12>>2]=0,L=_;return}if(w=A[c>>2]|0,p=+F[15920+(w*24|0)>>3],p=+el(p-+el(+Cb(15600+(w<<4)|0,a))),si(l)|0?v=+el(p+-.3334731722518321):v=p,p=+ri(+g)*2.618033988749896,(l|0)>0){a=0;do p=p*2.6457513110645907,a=a+1|0;while((a|0)!=(l|0))}g=+Lt(+v)*p,F[f>>3]=g,v=+vt(+v)*p,F[f+8>>3]=v,L=_}function fb(a,l,c){a=a|0,l=l|0,c=c|0;var f=0,p=0,g=0;if(g=L,L=L+32|0,p=g,oT(a,p),A[l>>2]=0,F[c>>3]=5,f=+Fn(16400,p),f<+F[c>>3]&&(A[l>>2]=0,F[c>>3]=f),f=+Fn(16424,p),f<+F[c>>3]&&(A[l>>2]=1,F[c>>3]=f),f=+Fn(16448,p),f<+F[c>>3]&&(A[l>>2]=2,F[c>>3]=f),f=+Fn(16472,p),f<+F[c>>3]&&(A[l>>2]=3,F[c>>3]=f),f=+Fn(16496,p),f<+F[c>>3]&&(A[l>>2]=4,F[c>>3]=f),f=+Fn(16520,p),f<+F[c>>3]&&(A[l>>2]=5,F[c>>3]=f),f=+Fn(16544,p),f<+F[c>>3]&&(A[l>>2]=6,F[c>>3]=f),f=+Fn(16568,p),f<+F[c>>3]&&(A[l>>2]=7,F[c>>3]=f),f=+Fn(16592,p),f<+F[c>>3]&&(A[l>>2]=8,F[c>>3]=f),f=+Fn(16616,p),f<+F[c>>3]&&(A[l>>2]=9,F[c>>3]=f),f=+Fn(16640,p),f<+F[c>>3]&&(A[l>>2]=10,F[c>>3]=f),f=+Fn(16664,p),f<+F[c>>3]&&(A[l>>2]=11,F[c>>3]=f),f=+Fn(16688,p),f<+F[c>>3]&&(A[l>>2]=12,F[c>>3]=f),f=+Fn(16712,p),f<+F[c>>3]&&(A[l>>2]=13,F[c>>3]=f),f=+Fn(16736,p),f<+F[c>>3]&&(A[l>>2]=14,F[c>>3]=f),f=+Fn(16760,p),f<+F[c>>3]&&(A[l>>2]=15,F[c>>3]=f),f=+Fn(16784,p),f<+F[c>>3]&&(A[l>>2]=16,F[c>>3]=f),f=+Fn(16808,p),f<+F[c>>3]&&(A[l>>2]=17,F[c>>3]=f),f=+Fn(16832,p),f<+F[c>>3]&&(A[l>>2]=18,F[c>>3]=f),f=+Fn(16856,p),!(f<+F[c>>3])){L=g;return}A[l>>2]=19,F[c>>3]=f,L=g}function ZA(a,l,c,f,p){a=a|0,l=l|0,c=c|0,f=f|0,p=p|0;var g=0,v=0,_=0;if(g=+sT(a),g<1e-16){l=15600+(l<<4)|0,A[p>>2]=A[l>>2],A[p+4>>2]=A[l+4>>2],A[p+8>>2]=A[l+8>>2],A[p+12>>2]=A[l+12>>2];return}if(v=+ii(+ +F[a+8>>3],+ +F[a>>3]),(c|0)>0){a=0;do g=g*.37796447300922725,a=a+1|0;while((a|0)!=(c|0))}_=g*.3333333333333333,f?(c=(si(c)|0)==0,g=+f2(+((c?_:_*.37796447300922725)*.381966011250105))):(g=+f2(+(g*.381966011250105)),si(c)|0&&(v=+el(v+.3334731722518321))),Pb(15600+(l<<4)|0,+el(+F[15920+(l*24|0)>>3]-v),g,p)}function db(a,l,c){a=a|0,l=l|0,c=c|0;var f=0,p=0;f=L,L=L+16|0,p=f,zo(a+4|0,p),ZA(p,A[a>>2]|0,l,0,c),L=f}function T2(a,l,c,f,p){a=a|0,l=l|0,c=c|0,f=f|0,p=p|0;var g=0,v=0,_=0,w=0,S=0,R=0,U=0,$=0,H=0,j=0,ee=0,ie=0,ce=0,ue=0,ae=0,te=0,Me=0,ze=0,Oe=0,At=0,ct=0,_t=0,et=0,$e=0,Se=0,gt=0,jt=0,ft=0;if(gt=L,L=L+272|0,g=gt+256|0,ue=gt+240|0,et=gt,$e=gt+224|0,Se=gt+208|0,ae=gt+176|0,te=gt+160|0,Me=gt+192|0,ze=gt+144|0,Oe=gt+128|0,At=gt+112|0,ct=gt+96|0,_t=gt+80|0,A[g>>2]=l,A[ue>>2]=A[a>>2],A[ue+4>>2]=A[a+4>>2],A[ue+8>>2]=A[a+8>>2],A[ue+12>>2]=A[a+12>>2],n4(ue,g,et),A[p>>2]=0,ue=f+c+((f|0)==5&1)|0,(ue|0)<=(c|0)){L=gt;return}w=A[g>>2]|0,S=$e+4|0,R=ae+4|0,U=c+5|0,$=16880+(w<<2)|0,H=16960+(w<<2)|0,j=Oe+8|0,ee=At+8|0,ie=ct+8|0,ce=Se+4|0,_=c;e:for(;;){v=et+(((_|0)%5|0)<<4)|0,A[Se>>2]=A[v>>2],A[Se+4>>2]=A[v+4>>2],A[Se+8>>2]=A[v+8>>2],A[Se+12>>2]=A[v+12>>2];do;while((qa(Se,w,0,1)|0)==2);if((_|0)>(c|0)&(si(l)|0)!=0){if(A[ae>>2]=A[Se>>2],A[ae+4>>2]=A[Se+4>>2],A[ae+8>>2]=A[Se+8>>2],A[ae+12>>2]=A[Se+12>>2],zo(S,te),f=A[ae>>2]|0,g=A[17040+(f*80|0)+(A[$e>>2]<<2)>>2]|0,A[ae>>2]=A[18640+(f*80|0)+(g*20|0)>>2],v=A[18640+(f*80|0)+(g*20|0)+16>>2]|0,(v|0)>0){a=0;do Z3(R),a=a+1|0;while((a|0)<(v|0))}switch(v=18640+(f*80|0)+(g*20|0)+4|0,A[Me>>2]=A[v>>2],A[Me+4>>2]=A[v+4>>2],A[Me+8>>2]=A[v+8>>2],X3(Me,(A[$>>2]|0)*3|0),pr(R,Me,R),or(R),zo(R,ze),jt=+(A[H>>2]|0),F[Oe>>3]=jt*3,F[j>>3]=0,ft=jt*-1.5,F[At>>3]=ft,F[ee>>3]=jt*2.598076211353316,F[ct>>3]=ft,F[ie>>3]=jt*-2.598076211353316,A[17040+((A[ae>>2]|0)*80|0)+(A[Se>>2]<<2)>>2]|0){case 1:{a=At,f=Oe;break}case 3:{a=ct,f=At;break}case 2:{a=Oe,f=ct;break}default:{a=12;break e}}y4(te,ze,f,a,_t),ZA(_t,A[ae>>2]|0,w,1,p+8+(A[p>>2]<<4)|0),A[p>>2]=(A[p>>2]|0)+1}if((_|0)<(U|0)&&(zo(ce,ae),ZA(ae,A[Se>>2]|0,w,1,p+8+(A[p>>2]<<4)|0),A[p>>2]=(A[p>>2]|0)+1),A[$e>>2]=A[Se>>2],A[$e+4>>2]=A[Se+4>>2],A[$e+8>>2]=A[Se+8>>2],A[$e+12>>2]=A[Se+12>>2],_=_+1|0,(_|0)>=(ue|0)){a=3;break}}if((a|0)==3){L=gt;return}else(a|0)==12&&nt(26970,27017,572,27027)}function n4(a,l,c){a=a|0,l=l|0,c=c|0;var f=0,p=0,g=0,v=0,_=0,w=0;w=L,L=L+128|0,f=w+64|0,p=w,g=f,v=20240,_=g+60|0;do A[g>>2]=A[v>>2],g=g+4|0,v=v+4|0;while((g|0)<(_|0));g=p,v=20304,_=g+60|0;do A[g>>2]=A[v>>2],g=g+4|0,v=v+4|0;while((g|0)<(_|0));_=(si(A[l>>2]|0)|0)==0,f=_?f:p,p=a+4|0,J3(p),e4(p),si(A[l>>2]|0)|0&&($o(p),A[l>>2]=(A[l>>2]|0)+1),A[c>>2]=A[a>>2],l=c+4|0,pr(p,f,l),or(l),A[c+16>>2]=A[a>>2],l=c+20|0,pr(p,f+12|0,l),or(l),A[c+32>>2]=A[a>>2],l=c+36|0,pr(p,f+24|0,l),or(l),A[c+48>>2]=A[a>>2],l=c+52|0,pr(p,f+36|0,l),or(l),A[c+64>>2]=A[a>>2],c=c+68|0,pr(p,f+48|0,c),or(c),L=w}function qa(a,l,c,f){a=a|0,l=l|0,c=c|0,f=f|0;var p=0,g=0,v=0,_=0,w=0,S=0,R=0,U=0,$=0,H=0,j=0;if(j=L,L=L+32|0,$=j+12|0,_=j,H=a+4|0,U=A[16960+(l<<2)>>2]|0,R=(f|0)!=0,U=R?U*3|0:U,p=A[H>>2]|0,S=a+8|0,v=A[S>>2]|0,R){if(g=a+12|0,f=A[g>>2]|0,p=v+p+f|0,(p|0)==(U|0))return H=1,L=j,H|0;w=g}else w=a+12|0,f=A[w>>2]|0,p=v+p+f|0;if((p|0)<=(U|0))return H=0,L=j,H|0;do if((f|0)>0){if(f=A[a>>2]|0,(v|0)>0){g=18640+(f*80|0)+60|0,f=a;break}f=18640+(f*80|0)+40|0,c?(Yx($,U,0,0),x2(H,$,_),ju(_),pr(_,$,H),g=f,f=a):(g=f,f=a)}else g=18640+((A[a>>2]|0)*80|0)+20|0,f=a;while(!1);if(A[f>>2]=A[g>>2],p=g+16|0,(A[p>>2]|0)>0){f=0;do Z3(H),f=f+1|0;while((f|0)<(A[p>>2]|0))}return a=g+4|0,A[$>>2]=A[a>>2],A[$+4>>2]=A[a+4>>2],A[$+8>>2]=A[a+8>>2],l=A[16880+(l<<2)>>2]|0,X3($,R?l*3|0:l),pr(H,$,H),or(H),R?f=((A[S>>2]|0)+(A[H>>2]|0)+(A[w>>2]|0)|0)==(U|0)?1:2:f=2,H=f,L=j,H|0}function pb(a,l){a=a|0,l=l|0;var c=0;do c=qa(a,l,0,1)|0;while((c|0)==2);return c|0}function w2(a,l,c,f,p){a=a|0,l=l|0,c=c|0,f=f|0,p=p|0;var g=0,v=0,_=0,w=0,S=0,R=0,U=0,$=0,H=0,j=0,ee=0,ie=0,ce=0,ue=0,ae=0,te=0,Me=0,ze=0,Oe=0,At=0,ct=0,_t=0,et=0;if(ct=L,L=L+240|0,g=ct+224|0,Me=ct+208|0,ze=ct,Oe=ct+192|0,At=ct+176|0,ie=ct+160|0,ce=ct+144|0,ue=ct+128|0,ae=ct+112|0,te=ct+96|0,A[g>>2]=l,A[Me>>2]=A[a>>2],A[Me+4>>2]=A[a+4>>2],A[Me+8>>2]=A[a+8>>2],A[Me+12>>2]=A[a+12>>2],r4(Me,g,ze),A[p>>2]=0,ee=f+c+((f|0)==6&1)|0,(ee|0)<=(c|0)){L=ct;return}w=A[g>>2]|0,S=c+6|0,R=16960+(w<<2)|0,U=ce+8|0,$=ue+8|0,H=ae+8|0,j=Oe+4|0,v=0,_=c,f=-1;e:for(;;){if(g=(_|0)%6|0,a=ze+(g<<4)|0,A[Oe>>2]=A[a>>2],A[Oe+4>>2]=A[a+4>>2],A[Oe+8>>2]=A[a+8>>2],A[Oe+12>>2]=A[a+12>>2],a=v,v=qa(Oe,w,0,1)|0,(_|0)>(c|0)&(si(l)|0)!=0&&(a|0)!=1&&(A[Oe>>2]|0)!=(f|0)){switch(zo(ze+(((g+5|0)%6|0)<<4)+4|0,At),zo(ze+(g<<4)+4|0,ie),_t=+(A[R>>2]|0),F[ce>>3]=_t*3,F[U>>3]=0,et=_t*-1.5,F[ue>>3]=et,F[$>>3]=_t*2.598076211353316,F[ae>>3]=et,F[H>>3]=_t*-2.598076211353316,g=A[Me>>2]|0,A[17040+(g*80|0)+(((f|0)==(g|0)?A[Oe>>2]|0:f)<<2)>>2]|0){case 1:{a=ue,f=ce;break}case 3:{a=ae,f=ue;break}case 2:{a=ce,f=ae;break}default:{a=8;break e}}y4(At,ie,f,a,te),!(v4(At,te)|0)&&!(v4(ie,te)|0)&&(ZA(te,A[Me>>2]|0,w,1,p+8+(A[p>>2]<<4)|0),A[p>>2]=(A[p>>2]|0)+1)}if((_|0)<(S|0)&&(zo(j,At),ZA(At,A[Oe>>2]|0,w,1,p+8+(A[p>>2]<<4)|0),A[p>>2]=(A[p>>2]|0)+1),_=_+1|0,(_|0)>=(ee|0)){a=3;break}else f=A[Oe>>2]|0}if((a|0)==3){L=ct;return}else(a|0)==8&&nt(27054,27017,737,27099)}function r4(a,l,c){a=a|0,l=l|0,c=c|0;var f=0,p=0,g=0,v=0,_=0,w=0;w=L,L=L+160|0,f=w+80|0,p=w,g=f,v=20368,_=g+72|0;do A[g>>2]=A[v>>2],g=g+4|0,v=v+4|0;while((g|0)<(_|0));g=p,v=20448,_=g+72|0;do A[g>>2]=A[v>>2],g=g+4|0,v=v+4|0;while((g|0)<(_|0));_=(si(A[l>>2]|0)|0)==0,f=_?f:p,p=a+4|0,J3(p),e4(p),si(A[l>>2]|0)|0&&($o(p),A[l>>2]=(A[l>>2]|0)+1),A[c>>2]=A[a>>2],l=c+4|0,pr(p,f,l),or(l),A[c+16>>2]=A[a>>2],l=c+20|0,pr(p,f+12|0,l),or(l),A[c+32>>2]=A[a>>2],l=c+36|0,pr(p,f+24|0,l),or(l),A[c+48>>2]=A[a>>2],l=c+52|0,pr(p,f+36|0,l),or(l),A[c+64>>2]=A[a>>2],l=c+68|0,pr(p,f+48|0,l),or(l),A[c+80>>2]=A[a>>2],c=c+84|0,pr(p,f+60|0,c),or(c),L=w}function mb(a,l){return a=a|0,l=l|0,l=be(a|0,l|0,52)|0,G()|0,l&15|0}function i4(a,l){return a=a|0,l=l|0,l=be(a|0,l|0,45)|0,G()|0,l&127|0}function S2(a,l){a=a|0,l=l|0;var c=0,f=0,p=0,g=0,v=0;return!(!0&(l&-16777216|0)==134217728)||(f=be(a|0,l|0,52)|0,G()|0,f=f&15,c=be(a|0,l|0,45)|0,G()|0,c=c&127,c>>>0>121)?(a=0,a|0):(v=(f^15)*3|0,p=be(a|0,l|0,v|0)|0,v=Ne(p|0,G()|0,v|0)|0,p=G()|0,g=Qn(-1227133514,-1171,v|0,p|0)|0,!((v&613566756&g|0)==0&(p&4681&(G()|0)|0)==0)||(v=(f*3|0)+19|0,g=Ne(~a|0,~l|0,v|0)|0,v=be(g|0,G()|0,v|0)|0,!((f|0)==15|(v|0)==0&(G()|0)==0))?(v=0,v|0):!(we[20528+c>>0]|0)||(l=l&8191,(a|0)==0&(l|0)==0)?(v=1,v|0):(v=M4(a|0,l|0)|0,G()|0,((63-v|0)%3|0|0)!=0|0))}function M2(a,l,c,f){a=a|0,l=l|0,c=c|0,f=f|0;var p=0,g=0,v=0,_=0;if(p=Ne(l|0,0,52)|0,g=G()|0,c=Ne(c|0,0,45)|0,c=g|(G()|0)|134225919,(l|0)<1){g=-1,f=c,l=a,A[l>>2]=g,a=a+4|0,A[a>>2]=f;return}for(g=1,p=-1;v=(15-g|0)*3|0,_=Ne(7,0,v|0)|0,c=c&~(G()|0),v=Ne(f|0,0,v|0)|0,p=p&~_|v,c=c|(G()|0),(g|0)!=(l|0);)g=g+1|0;_=a,v=_,A[v>>2]=p,_=_+4|0,A[_>>2]=c}function E2(a,l,c,f){a=a|0,l=l|0,c=c|0,f=f|0;var p=0,g=0;if(g=be(a|0,l|0,52)|0,G()|0,g=g&15,c>>>0>15)return f=4,f|0;if((g|0)<(c|0))return f=12,f|0;if((g|0)==(c|0))return A[f>>2]=a,A[f+4>>2]=l,f=0,f|0;if(p=Ne(c|0,0,52)|0,p=p|a,a=G()|0|l&-15728641,(g|0)>(c|0))do l=Ne(7,0,(14-c|0)*3|0)|0,c=c+1|0,p=l|p,a=G()|0|a;while((c|0)<(g|0));return A[f>>2]=p,A[f+4>>2]=a,f=0,f|0}function JA(a,l,c,f){a=a|0,l=l|0,c=c|0,f=f|0;var p=0,g=0,v=0;if(g=be(a|0,l|0,52)|0,G()|0,g=g&15,!((c|0)<16&(g|0)<=(c|0)))return f=4,f|0;p=c-g|0,c=be(a|0,l|0,45)|0,G()|0;e:do if(!(an(c&127)|0))c=so(7,0,p,((p|0)<0)<<31>>31)|0,p=G()|0;else{t:do if(g|0){for(c=1;v=Ne(7,0,(15-c|0)*3|0)|0,!!((v&a|0)==0&((G()|0)&l|0)==0);)if(c>>>0<g>>>0)c=c+1|0;else break t;c=so(7,0,p,((p|0)<0)<<31>>31)|0,p=G()|0;break e}while(!1);c=so(7,0,p,((p|0)<0)<<31>>31)|0,c=zn(c|0,G()|0,5,0)|0,c=je(c|0,G()|0,-5,-1)|0,c=ao(c|0,G()|0,6,0)|0,c=je(c|0,G()|0,1,0)|0,p=G()|0}while(!1);return v=f,A[v>>2]=c,A[v+4>>2]=p,v=0,v|0}function Yt(a,l){a=a|0,l=l|0;var c=0,f=0,p=0;if(p=be(a|0,l|0,45)|0,G()|0,!(an(p&127)|0))return p=0,p|0;p=be(a|0,l|0,52)|0,G()|0,p=p&15;e:do if(!p)c=0;else for(f=1;;){if(c=be(a|0,l|0,(15-f|0)*3|0)|0,G()|0,c=c&7,c|0)break e;if(f>>>0<p>>>0)f=f+1|0;else{c=0;break}}while(!1);return p=(c|0)==0&1,p|0}function gb(a,l,c,f){a=a|0,l=l|0,c=c|0,f=f|0;var p=0,g=0,v=0,_=0;if(v=L,L=L+16|0,g=v,D2(g,a,l,c),l=g,a=A[l>>2]|0,l=A[l+4>>2]|0,(a|0)==0&(l|0)==0)return L=v,0;p=0,c=0;do _=f+(p<<3)|0,A[_>>2]=a,A[_+4>>2]=l,p=je(p|0,c|0,1,0)|0,c=G()|0,F2(g),_=g,a=A[_>>2]|0,l=A[_+4>>2]|0;while(!((a|0)==0&(l|0)==0));return L=v,0}function s4(a,l,c,f){return a=a|0,l=l|0,c=c|0,f=f|0,(f|0)<(c|0)?(c=l,f=a,ut(c|0),f|0):(c=Ne(-1,-1,((f-c|0)*3|0)+3|0)|0,f=Ne(~c|0,~(G()|0)|0,(15-f|0)*3|0)|0,c=~(G()|0)&l,f=~f&a,ut(c|0),f|0)}function o4(a,l,c,f){a=a|0,l=l|0,c=c|0,f=f|0;var p=0;return p=be(a|0,l|0,52)|0,G()|0,p=p&15,(c|0)<16&(p|0)<=(c|0)?((p|0)<(c|0)&&(p=Ne(-1,-1,((c+-1-p|0)*3|0)+3|0)|0,p=Ne(~p|0,~(G()|0)|0,(15-c|0)*3|0)|0,l=~(G()|0)&l,a=~p&a),p=Ne(c|0,0,52)|0,c=l&-15728641|(G()|0),A[f>>2]=a|p,A[f+4>>2]=c,f=0,f|0):(f=4,f|0)}function yb(a,l,c,f){a=a|0,l=l|0,c=c|0,f=f|0;var p=0,g=0,v=0,_=0,w=0,S=0,R=0,U=0,$=0,H=0,j=0,ee=0,ie=0,ce=0,ue=0,ae=0,te=0,Me=0,ze=0,Oe=0,At=0,ct=0,_t=0,et=0,$e=0,Se=0;if((c|0)==0&(f|0)==0)return Se=0,Se|0;if(p=a,g=A[p>>2]|0,p=A[p+4>>2]|0,!0&(p&15728640|0)==0){if(!((f|0)>0|(f|0)==0&c>>>0>0)||(Se=l,A[Se>>2]=g,A[Se+4>>2]=p,(c|0)==1&(f|0)==0))return Se=0,Se|0;p=1,g=0;do et=a+(p<<3)|0,$e=A[et+4>>2]|0,Se=l+(p<<3)|0,A[Se>>2]=A[et>>2],A[Se+4>>2]=$e,p=je(p|0,g|0,1,0)|0,g=G()|0;while((g|0)<(f|0)|(g|0)==(f|0)&p>>>0<c>>>0);return p=0,p|0}if(_t=c<<3,$e=Xi(_t)|0,!$e)return Se=13,Se|0;if(za($e|0,a|0,_t|0)|0,et=Mr(c,8)|0,!et)return We($e),Se=13,Se|0;e:for(;;){p=$e,S=A[p>>2]|0,p=A[p+4>>2]|0,At=be(S|0,p|0,52)|0,G()|0,At=At&15,ct=At+-1|0,Oe=(At|0)!=0,ze=(f|0)>0|(f|0)==0&c>>>0>0;t:do if(Oe&ze){if(ue=Ne(ct|0,0,52)|0,ae=G()|0,ct>>>0>15){if(!((S|0)==0&(p|0)==0)){Se=16;break e}for(g=0,a=0;;){if(g=je(g|0,a|0,1,0)|0,a=G()|0,!((a|0)<(f|0)|(a|0)==(f|0)&g>>>0<c>>>0))break t;if(v=$e+(g<<3)|0,Me=A[v>>2]|0,v=A[v+4>>2]|0,!((Me|0)==0&(v|0)==0)){p=v,Se=16;break e}}}for(_=S,a=p,g=0,v=0;;){if(!((_|0)==0&(a|0)==0)){if(!(!0&(a&117440512|0)==0)){Se=21;break e}if(R=be(_|0,a|0,52)|0,G()|0,R=R&15,(R|0)<(ct|0)){p=12,Se=27;break e}if((R|0)!=(ct|0)&&(_=_|ue,a=a&-15728641|ae,R>>>0>=At>>>0)){w=ct;do Me=Ne(7,0,(14-w|0)*3|0)|0,w=w+1|0,_=Me|_,a=G()|0|a;while(w>>>0<R>>>0)}if($=Va(_|0,a|0,c|0,f|0)|0,H=G()|0,w=et+($<<3)|0,R=w,U=A[R>>2]|0,R=A[R+4>>2]|0,!((U|0)==0&(R|0)==0)){ie=0,ce=0;do{if((ie|0)>(f|0)|(ie|0)==(f|0)&ce>>>0>c>>>0){Se=31;break e}if((U|0)==(_|0)&(R&-117440513|0)==(a|0)){j=be(U|0,R|0,56)|0,G()|0,j=j&7,ee=j+1|0,Me=be(U|0,R|0,45)|0,G()|0;n:do if(!(an(Me&127)|0))R=7;else{if(U=be(U|0,R|0,52)|0,G()|0,U=U&15,!U){R=6;break}for(R=1;;){if(Me=Ne(7,0,(15-R|0)*3|0)|0,!((Me&_|0)==0&((G()|0)&a|0)==0)){R=7;break n}if(R>>>0<U>>>0)R=R+1|0;else{R=6;break}}}while(!1);if((j+2|0)>>>0>R>>>0){Se=41;break e}Me=Ne(ee|0,0,56)|0,a=G()|0|a&-117440513,te=w,A[te>>2]=0,A[te+4>>2]=0,_=Me|_}else $=je($|0,H|0,1,0)|0,$=Ga($|0,G()|0,c|0,f|0)|0,H=G()|0;ce=je(ce|0,ie|0,1,0)|0,ie=G()|0,w=et+($<<3)|0,R=w,U=A[R>>2]|0,R=A[R+4>>2]|0}while(!((U|0)==0&(R|0)==0))}Me=w,A[Me>>2]=_,A[Me+4>>2]=a}if(g=je(g|0,v|0,1,0)|0,v=G()|0,!((v|0)<(f|0)|(v|0)==(f|0)&g>>>0<c>>>0))break t;a=$e+(g<<3)|0,_=A[a>>2]|0,a=A[a+4>>2]|0}}while(!1);if(Me=je(c|0,f|0,5,0)|0,te=G()|0,te>>>0<0|(te|0)==0&Me>>>0<11){Se=85;break}if(Me=ao(c|0,f|0,6,0)|0,G()|0,Me=Mr(Me,8)|0,!Me){Se=48;break}do if(ze){for(ee=0,a=0,j=0,ie=0;;){if(R=et+(ee<<3)|0,v=R,g=A[v>>2]|0,v=A[v+4>>2]|0,(g|0)==0&(v|0)==0)te=j;else{U=be(g|0,v|0,56)|0,G()|0,U=U&7,_=U+1|0,$=v&-117440513,te=be(g|0,v|0,45)|0,G()|0;t:do if(an(te&127)|0){if(H=be(g|0,v|0,52)|0,G()|0,H=H&15,H|0)for(w=1;;){if(te=Ne(7,0,(15-w|0)*3|0)|0,!((g&te|0)==0&($&(G()|0)|0)==0))break t;if(w>>>0<H>>>0)w=w+1|0;else break}v=Ne(_|0,0,56)|0,g=v|g,v=G()|0|$,_=R,A[_>>2]=g,A[_+4>>2]=v,_=U+2|0}while(!1);(_|0)==7?(te=Me+(a<<3)|0,A[te>>2]=g,A[te+4>>2]=v&-117440513,a=je(a|0,j|0,1,0)|0,te=G()|0):te=j}if(ee=je(ee|0,ie|0,1,0)|0,ie=G()|0,(ie|0)<(f|0)|(ie|0)==(f|0)&ee>>>0<c>>>0)j=te;else break}if(ze){if(ce=ct>>>0>15,ue=Ne(ct|0,0,52)|0,ae=G()|0,!Oe){for(g=0,w=0,_=0,v=0;(S|0)==0&(p|0)==0||(ct=l+(g<<3)|0,A[ct>>2]=S,A[ct+4>>2]=p,g=je(g|0,w|0,1,0)|0,w=G()|0),_=je(_|0,v|0,1,0)|0,v=G()|0,!!((v|0)<(f|0)|(v|0)==(f|0)&_>>>0<c>>>0);)p=$e+(_<<3)|0,S=A[p>>2]|0,p=A[p+4>>2]|0;p=te;break}for(g=0,w=0,v=0,_=0;;){do if(!((S|0)==0&(p|0)==0)){if(H=be(S|0,p|0,52)|0,G()|0,H=H&15,ce|(H|0)<(ct|0)){Se=80;break e}if((H|0)!=(ct|0)){if(R=S|ue,U=p&-15728641|ae,H>>>0>=At>>>0){$=ct;do Oe=Ne(7,0,(14-$|0)*3|0)|0,$=$+1|0,R=Oe|R,U=G()|0|U;while($>>>0<H>>>0)}}else R=S,U=p;j=Va(R|0,U|0,c|0,f|0)|0,$=0,H=0,ie=G()|0;do{if(($|0)>(f|0)|($|0)==(f|0)&H>>>0>c>>>0){Se=81;break e}if(Oe=et+(j<<3)|0,ee=A[Oe+4>>2]|0,(ee&-117440513|0)==(U|0)&&(A[Oe>>2]|0)==(R|0)){Se=65;break}Oe=je(j|0,ie|0,1,0)|0,j=Ga(Oe|0,G()|0,c|0,f|0)|0,ie=G()|0,H=je(H|0,$|0,1,0)|0,$=G()|0,Oe=et+(j<<3)|0}while(!((A[Oe>>2]|0)==(R|0)&&(A[Oe+4>>2]|0)==(U|0)));if((Se|0)==65&&(Se=0,!0&(ee&117440512|0)==100663296))break;Oe=l+(g<<3)|0,A[Oe>>2]=S,A[Oe+4>>2]=p,g=je(g|0,w|0,1,0)|0,w=G()|0}while(!1);if(v=je(v|0,_|0,1,0)|0,_=G()|0,!((_|0)<(f|0)|(_|0)==(f|0)&v>>>0<c>>>0))break;p=$e+(v<<3)|0,S=A[p>>2]|0,p=A[p+4>>2]|0}p=te}else g=0,p=te}else g=0,a=0,p=0;while(!1);if(Ao(et|0,0,_t|0)|0,za($e|0,Me|0,a<<3|0)|0,We(Me),(a|0)==0&(p|0)==0){Se=89;break}else l=l+(g<<3)|0,f=p,c=a}if((Se|0)==16)!0&(p&117440512|0)==0?(p=4,Se=27):Se=21;else if((Se|0)==31)nt(27795,27122,529,27132);else{if((Se|0)==41)return We($e),We(et),Se=10,Se|0;if((Se|0)==48)return We($e),We(et),Se=13,Se|0;(Se|0)==80?nt(27795,27122,620,27132):(Se|0)==81?nt(27795,27122,632,27132):(Se|0)==85&&(za(l|0,$e|0,c<<3|0)|0,Se=89)}return(Se|0)==21?(We($e),We(et),Se=5,Se|0):(Se|0)==27?(We($e),We(et),Se=p,Se|0):(Se|0)==89?(We($e),We(et),Se=0,Se|0):0}function vb(a,l,c,f,p,g,v){a=a|0,l=l|0,c=c|0,f=f|0,p=p|0,g=g|0,v=v|0;var _=0,w=0,S=0,R=0,U=0,$=0,H=0,j=0,ee=0;if(ee=L,L=L+16|0,j=ee,!((c|0)>0|(c|0)==0&l>>>0>0))return j=0,L=ee,j|0;if((v|0)>=16)return j=12,L=ee,j|0;$=0,H=0,U=0,_=0;e:for(;;){if(S=a+($<<3)|0,w=A[S>>2]|0,S=A[S+4>>2]|0,R=be(w|0,S|0,52)|0,G()|0,(R&15|0)>(v|0)){_=12,w=11;break}if(D2(j,w,S,v),R=j,S=A[R>>2]|0,R=A[R+4>>2]|0,(S|0)==0&(R|0)==0)w=U;else{w=U;do{if(!((_|0)<(g|0)|(_|0)==(g|0)&w>>>0<p>>>0)){w=10;break e}U=f+(w<<3)|0,A[U>>2]=S,A[U+4>>2]=R,w=je(w|0,_|0,1,0)|0,_=G()|0,F2(j),U=j,S=A[U>>2]|0,R=A[U+4>>2]|0}while(!((S|0)==0&(R|0)==0))}if($=je($|0,H|0,1,0)|0,H=G()|0,(H|0)<(c|0)|(H|0)==(c|0)&$>>>0<l>>>0)U=w;else{_=0,w=11;break}}return(w|0)==10?(j=14,L=ee,j|0):(w|0)==11?(L=ee,_|0):0}function _b(a,l,c,f,p){a=a|0,l=l|0,c=c|0,f=f|0,p=p|0;var g=0,v=0,_=0,w=0,S=0,R=0,U=0,$=0;$=L,L=L+16|0,U=$;e:do if((c|0)>0|(c|0)==0&l>>>0>0){for(S=0,v=0,g=0,R=0;;){if(w=a+(S<<3)|0,_=A[w>>2]|0,w=A[w+4>>2]|0,!((_|0)==0&(w|0)==0)&&(w=(JA(_,w,f,U)|0)==0,_=U,v=je(A[_>>2]|0,A[_+4>>2]|0,v|0,g|0)|0,g=G()|0,!w)){g=12;break}if(S=je(S|0,R|0,1,0)|0,R=G()|0,!((R|0)<(c|0)|(R|0)==(c|0)&S>>>0<l>>>0))break e}return L=$,g|0}else v=0,g=0;while(!1);return A[p>>2]=v,A[p+4>>2]=g,p=0,L=$,p|0}function xb(a,l){return a=a|0,l=l|0,l=be(a|0,l|0,52)|0,G()|0,l&1|0}function Sr(a,l){a=a|0,l=l|0;var c=0,f=0,p=0;if(p=be(a|0,l|0,52)|0,G()|0,p=p&15,!p)return p=0,p|0;for(f=1;;){if(c=be(a|0,l|0,(15-f|0)*3|0)|0,G()|0,c=c&7,c|0){f=5;break}if(f>>>0<p>>>0)f=f+1|0;else{c=0,f=5;break}}return(f|0)==5?c|0:0}function N2(a,l){a=a|0,l=l|0;var c=0,f=0,p=0,g=0,v=0,_=0,w=0;if(w=be(a|0,l|0,52)|0,G()|0,w=w&15,!w)return _=l,w=a,ut(_|0),w|0;for(_=1,c=0;;){g=(15-_|0)*3|0,f=Ne(7,0,g|0)|0,p=G()|0,v=be(a|0,l|0,g|0)|0,G()|0,g=Ne(Ho(v&7)|0,0,g|0)|0,v=G()|0,a=g|a&~f,l=v|l&~p;e:do if(!c)if((g&f|0)==0&(v&p|0)==0)c=0;else if(f=be(a|0,l|0,52)|0,G()|0,f=f&15,!f)c=1;else{c=1;t:for(;;){switch(v=be(a|0,l|0,(15-c|0)*3|0)|0,G()|0,v&7){case 1:break t;case 0:break;default:{c=1;break e}}if(c>>>0<f>>>0)c=c+1|0;else{c=1;break e}}for(c=1;;)if(v=(15-c|0)*3|0,p=be(a|0,l|0,v|0)|0,G()|0,g=Ne(7,0,v|0)|0,l=l&~(G()|0),v=Ne(Ho(p&7)|0,0,v|0)|0,a=a&~g|v,l=l|(G()|0),c>>>0<f>>>0)c=c+1|0;else{c=1;break}}while(!1);if(_>>>0<w>>>0)_=_+1|0;else break}return ut(l|0),a|0}function jo(a,l){a=a|0,l=l|0;var c=0,f=0,p=0,g=0,v=0;if(f=be(a|0,l|0,52)|0,G()|0,f=f&15,!f)return c=l,f=a,ut(c|0),f|0;for(c=1;g=(15-c|0)*3|0,v=be(a|0,l|0,g|0)|0,G()|0,p=Ne(7,0,g|0)|0,l=l&~(G()|0),g=Ne(Ho(v&7)|0,0,g|0)|0,a=g|a&~p,l=G()|0|l,c>>>0<f>>>0;)c=c+1|0;return ut(l|0),a|0}function bb(a,l){a=a|0,l=l|0;var c=0,f=0,p=0,g=0,v=0,_=0,w=0;if(w=be(a|0,l|0,52)|0,G()|0,w=w&15,!w)return _=l,w=a,ut(_|0),w|0;for(_=1,c=0;;){g=(15-_|0)*3|0,f=Ne(7,0,g|0)|0,p=G()|0,v=be(a|0,l|0,g|0)|0,G()|0,g=Ne(io(v&7)|0,0,g|0)|0,v=G()|0,a=g|a&~f,l=v|l&~p;e:do if(!c)if((g&f|0)==0&(v&p|0)==0)c=0;else if(f=be(a|0,l|0,52)|0,G()|0,f=f&15,!f)c=1;else{c=1;t:for(;;){switch(v=be(a|0,l|0,(15-c|0)*3|0)|0,G()|0,v&7){case 1:break t;case 0:break;default:{c=1;break e}}if(c>>>0<f>>>0)c=c+1|0;else{c=1;break e}}for(c=1;;)if(p=(15-c|0)*3|0,g=Ne(7,0,p|0)|0,v=l&~(G()|0),l=be(a|0,l|0,p|0)|0,G()|0,l=Ne(io(l&7)|0,0,p|0)|0,a=a&~g|l,l=v|(G()|0),c>>>0<f>>>0)c=c+1|0;else{c=1;break}}while(!1);if(_>>>0<w>>>0)_=_+1|0;else break}return ut(l|0),a|0}function R2(a,l){a=a|0,l=l|0;var c=0,f=0,p=0,g=0,v=0;if(f=be(a|0,l|0,52)|0,G()|0,f=f&15,!f)return c=l,f=a,ut(c|0),f|0;for(c=1;v=(15-c|0)*3|0,g=Ne(7,0,v|0)|0,p=l&~(G()|0),l=be(a|0,l|0,v|0)|0,G()|0,l=Ne(io(l&7)|0,0,v|0)|0,a=l|a&~g,l=G()|0|p,c>>>0<f>>>0;)c=c+1|0;return ut(l|0),a|0}function Tb(a,l){a=a|0,l=l|0;var c=0,f=0,p=0,g=0,v=0,_=0,w=0,S=0,R=0;if(w=L,L=L+64|0,_=w+40|0,f=w+24|0,p=w+12|0,g=w,Ne(l|0,0,52)|0,c=G()|0|134225919,!l)return(A[a+4>>2]|0)>2||(A[a+8>>2]|0)>2||(A[a+12>>2]|0)>2?(v=0,_=0,ut(v|0),L=w,_|0):(Ne(z3(a)|0,0,45)|0,v=G()|0|c,_=-1,ut(v|0),L=w,_|0);if(A[_>>2]=A[a>>2],A[_+4>>2]=A[a+4>>2],A[_+8>>2]=A[a+8>>2],A[_+12>>2]=A[a+12>>2],v=_+4|0,(l|0)>0)for(a=-1;A[f>>2]=A[v>>2],A[f+4>>2]=A[v+4>>2],A[f+8>>2]=A[v+8>>2],l&1?(eb(v),A[p>>2]=A[v>>2],A[p+4>>2]=A[v+4>>2],A[p+8>>2]=A[v+8>>2],Hu(p)):(Y3(v),A[p>>2]=A[v>>2],A[p+4>>2]=A[v+4>>2],A[p+8>>2]=A[v+8>>2],$o(p)),x2(f,p,g),or(g),R=(15-l|0)*3|0,S=Ne(7,0,R|0)|0,c=c&~(G()|0),R=Ne($u(g)|0,0,R|0)|0,a=R|a&~S,c=G()|0|c,(l|0)>1;)l=l+-1|0;else a=-1;e:do if((A[v>>2]|0)<=2&&(A[_+8>>2]|0)<=2&&(A[_+12>>2]|0)<=2){if(f=z3(_)|0,l=Ne(f|0,0,45)|0,l=l|a,a=G()|0|c&-1040385,g=kx(_)|0,!(an(f)|0)){if((g|0)<=0)break;for(p=0;;){if(f=be(l|0,a|0,52)|0,G()|0,f=f&15,f)for(c=1;R=(15-c|0)*3|0,_=be(l|0,a|0,R|0)|0,G()|0,S=Ne(7,0,R|0)|0,a=a&~(G()|0),R=Ne(Ho(_&7)|0,0,R|0)|0,l=l&~S|R,a=a|(G()|0),c>>>0<f>>>0;)c=c+1|0;if(p=p+1|0,(p|0)==(g|0))break e}}p=be(l|0,a|0,52)|0,G()|0,p=p&15;t:do if(p){c=1;n:for(;;){switch(R=be(l|0,a|0,(15-c|0)*3|0)|0,G()|0,R&7){case 1:break n;case 0:break;default:break t}if(c>>>0<p>>>0)c=c+1|0;else break t}if($3(f,A[_>>2]|0)|0)for(c=1;_=(15-c|0)*3|0,S=Ne(7,0,_|0)|0,R=a&~(G()|0),a=be(l|0,a|0,_|0)|0,G()|0,a=Ne(io(a&7)|0,0,_|0)|0,l=l&~S|a,a=R|(G()|0),c>>>0<p>>>0;)c=c+1|0;else for(c=1;R=(15-c|0)*3|0,_=be(l|0,a|0,R|0)|0,G()|0,S=Ne(7,0,R|0)|0,a=a&~(G()|0),R=Ne(Ho(_&7)|0,0,R|0)|0,l=l&~S|R,a=a|(G()|0),c>>>0<p>>>0;)c=c+1|0}while(!1);if((g|0)>0){c=0;do l=N2(l,a)|0,a=G()|0,c=c+1|0;while((c|0)!=(g|0))}}else l=0,a=0;while(!1);return S=a,R=l,ut(S|0),L=w,R|0}function si(a){return a=a|0,(a|0)%2|0|0}function C2(a,l,c){a=a|0,l=l|0,c=c|0;var f=0,p=0;return p=L,L=L+16|0,f=p,l>>>0>15?(f=4,L=p,f|0):(A[a+4>>2]&2146435072|0)==2146435072||(A[a+8+4>>2]&2146435072|0)==2146435072?(f=3,L=p,f|0):(cb(a,l,f),l=Tb(f,l)|0,f=G()|0,A[c>>2]=l,A[c+4>>2]=f,(l|0)==0&(f|0)==0&&nt(27795,27122,959,27145),f=0,L=p,f|0)}function P2(a,l,c){a=a|0,l=l|0,c=c|0;var f=0,p=0,g=0,v=0;if(p=c+4|0,g=be(a|0,l|0,52)|0,G()|0,g=g&15,v=be(a|0,l|0,45)|0,G()|0,f=(g|0)==0,an(v&127)|0){if(f)return v=1,v|0;f=1}else{if(f)return v=0,v|0;(A[p>>2]|0)==0&&(A[c+8>>2]|0)==0?f=(A[c+12>>2]|0)!=0&1:f=1}for(c=1;c&1?Hu(p):$o(p),v=be(a|0,l|0,(15-c|0)*3|0)|0,G()|0,K3(p,v&7),c>>>0<g>>>0;)c=c+1|0;return f|0}function Oa(a,l,c){a=a|0,l=l|0,c=c|0;var f=0,p=0,g=0,v=0,_=0,w=0,S=0,R=0;if(R=L,L=L+16|0,w=R,S=be(a|0,l|0,45)|0,G()|0,S=S&127,S>>>0>121)return A[c>>2]=0,A[c+4>>2]=0,A[c+8>>2]=0,A[c+12>>2]=0,S=5,L=R,S|0;e:do if((an(S)|0)!=0&&(g=be(a|0,l|0,52)|0,G()|0,g=g&15,(g|0)!=0)){f=1;t:for(;;){switch(_=be(a|0,l|0,(15-f|0)*3|0)|0,G()|0,_&7){case 5:break t;case 0:break;default:{f=l;break e}}if(f>>>0<g>>>0)f=f+1|0;else{f=l;break e}}for(p=1,f=l;l=(15-p|0)*3|0,v=Ne(7,0,l|0)|0,_=f&~(G()|0),f=be(a|0,f|0,l|0)|0,G()|0,f=Ne(io(f&7)|0,0,l|0)|0,a=a&~v|f,f=_|(G()|0),p>>>0<g>>>0;)p=p+1|0}else f=l;while(!1);if(_=7696+(S*28|0)|0,A[c>>2]=A[_>>2],A[c+4>>2]=A[_+4>>2],A[c+8>>2]=A[_+8>>2],A[c+12>>2]=A[_+12>>2],!(P2(a,f,c)|0))return S=0,L=R,S|0;if(v=c+4|0,A[w>>2]=A[v>>2],A[w+4>>2]=A[v+4>>2],A[w+8>>2]=A[v+8>>2],g=be(a|0,f|0,52)|0,G()|0,_=g&15,g&1?($o(v),g=_+1|0):g=_,!(an(S)|0))f=0;else{e:do if(!_)f=0;else for(l=1;;){if(p=be(a|0,f|0,(15-l|0)*3|0)|0,G()|0,p=p&7,p|0){f=p;break e}if(l>>>0<_>>>0)l=l+1|0;else{f=0;break}}while(!1);f=(f|0)==4&1}if(!(qa(c,g,f,0)|0))(g|0)!=(_|0)&&(A[v>>2]=A[w>>2],A[v+4>>2]=A[w+4>>2],A[v+8>>2]=A[w+8>>2]);else{if(an(S)|0)do;while((qa(c,g,0,0)|0)!=0);(g|0)!=(_|0)&&Y3(v)}return S=0,L=R,S|0}function Wo(a,l,c){a=a|0,l=l|0,c=c|0;var f=0,p=0,g=0;return g=L,L=L+16|0,f=g,p=Oa(a,l,f)|0,p|0?(L=g,p|0):(p=be(a|0,l|0,52)|0,G()|0,db(f,p&15,c),p=0,L=g,p|0)}function Ua(a,l,c){a=a|0,l=l|0,c=c|0;var f=0,p=0,g=0,v=0,_=0;if(v=L,L=L+16|0,g=v,f=Oa(a,l,g)|0,f|0)return g=f,L=v,g|0;f=be(a|0,l|0,45)|0,G()|0,f=(an(f&127)|0)==0,p=be(a|0,l|0,52)|0,G()|0,p=p&15;e:do if(!f){if(p|0)for(f=1;;){if(_=Ne(7,0,(15-f|0)*3|0)|0,!((_&a|0)==0&((G()|0)&l|0)==0))break e;if(f>>>0<p>>>0)f=f+1|0;else break}return T2(g,p,0,5,c),_=0,L=v,_|0}while(!1);return w2(g,p,0,6,c),_=0,L=v,_|0}function wb(a,l,c){a=a|0,l=l|0,c=c|0;var f=0,p=0,g=0;if(p=be(a|0,l|0,45)|0,G()|0,!(an(p&127)|0))return p=2,A[c>>2]=p,0;if(p=be(a|0,l|0,52)|0,G()|0,p=p&15,!p)return p=5,A[c>>2]=p,0;for(f=1;;){if(g=Ne(7,0,(15-f|0)*3|0)|0,!((g&a|0)==0&((G()|0)&l|0)==0)){f=2,a=6;break}if(f>>>0<p>>>0)f=f+1|0;else{f=5,a=6;break}}return(a|0)==6&&(A[c>>2]=f),0}function a4(a,l,c){a=a|0,l=l|0,c=c|0;var f=0,p=0,g=0,v=0,_=0,w=0,S=0,R=0,U=0;U=L,L=L+128|0,S=U+112|0,g=U+96|0,R=U,p=be(a|0,l|0,52)|0,G()|0,_=p&15,A[S>>2]=_,v=be(a|0,l|0,45)|0,G()|0,v=v&127;e:do if(an(v)|0){if(_|0)for(f=1;;){if(w=Ne(7,0,(15-f|0)*3|0)|0,!((w&a|0)==0&((G()|0)&l|0)==0)){p=0;break e}if(f>>>0<_>>>0)f=f+1|0;else break}if(p&1)p=1;else return w=Ne(_+1|0,0,52)|0,R=G()|0|l&-15728641,S=Ne(7,0,(14-_|0)*3|0)|0,R=a4((w|a)&~S,R&~(G()|0),c)|0,L=U,R|0}else p=0;while(!1);if(f=Oa(a,l,g)|0,!f){p?(n4(g,S,R),w=5):(r4(g,S,R),w=6);e:do if(an(v)|0)if(!_)a=5;else for(f=1;;){if(v=Ne(7,0,(15-f|0)*3|0)|0,!((v&a|0)==0&((G()|0)&l|0)==0)){a=2;break e}if(f>>>0<_>>>0)f=f+1|0;else{a=5;break}}else a=2;while(!1);Ao(c|0,-1,a<<2|0)|0;e:do if(p)for(g=0;;){if(v=R+(g<<4)|0,pb(v,A[S>>2]|0)|0,v=A[v>>2]|0,_=A[c>>2]|0,(_|0)==-1|(_|0)==(v|0))f=c;else{p=0;do{if(p=p+1|0,p>>>0>=a>>>0){f=1;break e}f=c+(p<<2)|0,_=A[f>>2]|0}while(!((_|0)==-1|(_|0)==(v|0)))}if(A[f>>2]=v,g=g+1|0,g>>>0>=w>>>0){f=0;break}}else for(g=0;;){if(v=R+(g<<4)|0,qa(v,A[S>>2]|0,0,1)|0,v=A[v>>2]|0,_=A[c>>2]|0,(_|0)==-1|(_|0)==(v|0))f=c;else{p=0;do{if(p=p+1|0,p>>>0>=a>>>0){f=1;break e}f=c+(p<<2)|0,_=A[f>>2]|0}while(!((_|0)==-1|(_|0)==(v|0)))}if(A[f>>2]=v,g=g+1|0,g>>>0>=w>>>0){f=0;break}}while(!1)}return R=f,L=U,R|0}function Sb(){return 12}function B2(a,l){a=a|0,l=l|0;var c=0,f=0,p=0,g=0,v=0,_=0,w=0;if(a>>>0>15)return _=4,_|0;if(Ne(a|0,0,52)|0,_=G()|0|134225919,!a){c=0,f=0;do an(f)|0&&(Ne(f|0,0,45)|0,v=_|(G()|0),a=l+(c<<3)|0,A[a>>2]=-1,A[a+4>>2]=v,c=c+1|0),f=f+1|0;while((f|0)!=122);return c=0,c|0}c=0,v=0;do{if(an(v)|0){for(Ne(v|0,0,45)|0,f=1,p=-1,g=_|(G()|0);w=Ne(7,0,(15-f|0)*3|0)|0,p=p&~w,g=g&~(G()|0),(f|0)!=(a|0);)f=f+1|0;w=l+(c<<3)|0,A[w>>2]=p,A[w+4>>2]=g,c=c+1|0}v=v+1|0}while((v|0)!=122);return c=0,c|0}function Mb(a,l,c,f){a=a|0,l=l|0,c=c|0,f=f|0;var p=0,g=0,v=0,_=0,w=0,S=0,R=0,U=0,$=0,H=0,j=0,ee=0,ie=0,ce=0,ue=0;if(ue=L,L=L+16|0,ie=ue,ce=be(a|0,l|0,52)|0,G()|0,ce=ce&15,c>>>0>15)return ce=4,L=ue,ce|0;if((ce|0)<(c|0))return ce=12,L=ue,ce|0;if((ce|0)!=(c|0))if(g=Ne(c|0,0,52)|0,g=g|a,_=G()|0|l&-15728641,(ce|0)>(c|0)){w=c;do ee=Ne(7,0,(14-w|0)*3|0)|0,w=w+1|0,g=ee|g,_=G()|0|_;while((w|0)<(ce|0));ee=g}else ee=g;else ee=a,_=l;j=be(ee|0,_|0,45)|0,G()|0;e:do if(an(j&127)|0){if(w=be(ee|0,_|0,52)|0,G()|0,w=w&15,w|0)for(g=1;;){if(j=Ne(7,0,(15-g|0)*3|0)|0,!((j&ee|0)==0&((G()|0)&_|0)==0)){S=33;break e}if(g>>>0<w>>>0)g=g+1|0;else break}if(j=f,A[j>>2]=0,A[j+4>>2]=0,(ce|0)>(c|0)){for(j=l&-15728641,H=ce;;){if($=H,H=H+-1|0,H>>>0>15|(ce|0)<(H|0)){S=19;break}if((ce|0)!=(H|0))if(g=Ne(H|0,0,52)|0,g=g|a,w=G()|0|j,(ce|0)<($|0))U=g;else{S=H;do U=Ne(7,0,(14-S|0)*3|0)|0,S=S+1|0,g=U|g,w=G()|0|w;while((S|0)<(ce|0));U=g}else U=a,w=l;if(R=be(U|0,w|0,45)|0,G()|0,!(an(R&127)|0))g=0;else{R=be(U|0,w|0,52)|0,G()|0,R=R&15;t:do if(!R)g=0;else for(S=1;;){if(g=be(U|0,w|0,(15-S|0)*3|0)|0,G()|0,g=g&7,g|0)break t;if(S>>>0<R>>>0)S=S+1|0;else{g=0;break}}while(!1);g=(g|0)==0&1}if(w=be(a|0,l|0,(15-$|0)*3|0)|0,G()|0,w=w&7,(w|0)==7){p=5,S=42;break}if(g=(g|0)!=0,(w|0)==1&g){p=5,S=42;break}if(U=w+(((w|0)!=0&g)<<31>>31)|0,U|0&&(S=ce-$|0,S=so(7,0,S,((S|0)<0)<<31>>31)|0,R=G()|0,g?(g=zn(S|0,R|0,5,0)|0,g=je(g|0,G()|0,-5,-1)|0,g=ao(g|0,G()|0,6,0)|0,g=je(g|0,G()|0,1,0)|0,w=G()|0):(g=S,w=R),$=U+-1|0,$=zn(S|0,R|0,$|0,(($|0)<0)<<31>>31|0)|0,$=je(g|0,w|0,$|0,G()|0)|0,U=G()|0,R=f,R=je($|0,U|0,A[R>>2]|0,A[R+4>>2]|0)|0,U=G()|0,$=f,A[$>>2]=R,A[$+4>>2]=U),(H|0)<=(c|0)){S=37;break}}if((S|0)==19)nt(27795,27122,1276,27158);else if((S|0)==37){v=f,p=A[v+4>>2]|0,v=A[v>>2]|0;break}else if((S|0)==42)return L=ue,p|0}else p=0,v=0}else S=33;while(!1);e:do if((S|0)==33)if(j=f,A[j>>2]=0,A[j+4>>2]=0,(ce|0)>(c|0)){for(g=ce;;){if(p=be(a|0,l|0,(15-g|0)*3|0)|0,G()|0,p=p&7,(p|0)==7){p=5;break}if(v=ce-g|0,v=so(7,0,v,((v|0)<0)<<31>>31)|0,p=zn(v|0,G()|0,p|0,0)|0,v=G()|0,j=f,v=je(A[j>>2]|0,A[j+4>>2]|0,p|0,v|0)|0,p=G()|0,j=f,A[j>>2]=v,A[j+4>>2]=p,g=g+-1|0,(g|0)<=(c|0))break e}return L=ue,p|0}else p=0,v=0;while(!1);return JA(ee,_,ce,ie)|0&&nt(27795,27122,1236,27173),ce=ie,ie=A[ce+4>>2]|0,((p|0)>-1|(p|0)==-1&v>>>0>4294967295)&((ie|0)>(p|0)|((ie|0)==(p|0)?(A[ce>>2]|0)>>>0>v>>>0:0))?(ce=0,L=ue,ce|0):(nt(27795,27122,1316,27158),0)}function Eb(a,l,c,f,p,g){a=a|0,l=l|0,c=c|0,f=f|0,p=p|0,g=g|0;var v=0,_=0,w=0,S=0,R=0,U=0,$=0,H=0,j=0,ee=0;if(U=L,L=L+16|0,v=U,p>>>0>15)return g=4,L=U,g|0;if(_=be(c|0,f|0,52)|0,G()|0,_=_&15,(_|0)>(p|0))return g=12,L=U,g|0;if(JA(c,f,p,v)|0&&nt(27795,27122,1236,27173),R=v,S=A[R+4>>2]|0,!(((l|0)>-1|(l|0)==-1&a>>>0>4294967295)&((S|0)>(l|0)|((S|0)==(l|0)?(A[R>>2]|0)>>>0>a>>>0:0))))return g=2,L=U,g|0;R=p-_|0,p=Ne(p|0,0,52)|0,w=G()|0|f&-15728641,S=g,A[S>>2]=p|c,A[S+4>>2]=w,S=be(c|0,f|0,45)|0,G()|0;e:do if(an(S&127)|0){if(_|0)for(v=1;;){if(S=Ne(7,0,(15-v|0)*3|0)|0,!((S&c|0)==0&((G()|0)&f|0)==0))break e;if(v>>>0<_>>>0)v=v+1|0;else break}if((R|0)<1)return g=0,L=U,g|0;for(S=_^15,f=-1,w=1,v=1;;){_=R-w|0,_=so(7,0,_,((_|0)<0)<<31>>31)|0,c=G()|0;do if(v)if(v=zn(_|0,c|0,5,0)|0,v=je(v|0,G()|0,-5,-1)|0,v=ao(v|0,G()|0,6,0)|0,p=G()|0,(l|0)>(p|0)|(l|0)==(p|0)&a>>>0>v>>>0){l=je(a|0,l|0,-1,-1)|0,l=Qn(l|0,G()|0,v|0,p|0)|0,v=G()|0,$=g,j=A[$>>2]|0,$=A[$+4>>2]|0,ee=(S+f|0)*3|0,H=Ne(7,0,ee|0)|0,$=$&~(G()|0),f=ao(l|0,v|0,_|0,c|0)|0,a=G()|0,p=je(f|0,a|0,2,0)|0,ee=Ne(p|0,G()|0,ee|0)|0,$=G()|0|$,p=g,A[p>>2]=ee|j&~H,A[p+4>>2]=$,a=zn(f|0,a|0,_|0,c|0)|0,a=Qn(l|0,v|0,a|0,G()|0)|0,v=0,l=G()|0;break}else{ee=g,H=A[ee>>2]|0,ee=A[ee+4>>2]|0,j=Ne(7,0,(S+f|0)*3|0)|0,ee=ee&~(G()|0),v=g,A[v>>2]=H&~j,A[v+4>>2]=ee,v=1;break}else H=g,p=A[H>>2]|0,H=A[H+4>>2]|0,f=(S+f|0)*3|0,$=Ne(7,0,f|0)|0,H=H&~(G()|0),ee=ao(a|0,l|0,_|0,c|0)|0,v=G()|0,f=Ne(ee|0,v|0,f|0)|0,H=G()|0|H,j=g,A[j>>2]=f|p&~$,A[j+4>>2]=H,v=zn(ee|0,v|0,_|0,c|0)|0,a=Qn(a|0,l|0,v|0,G()|0)|0,v=0,l=G()|0;while(!1);if((R|0)>(w|0))f=~w,w=w+1|0;else{l=0;break}}return L=U,l|0}while(!1);if((R|0)<1)return ee=0,L=U,ee|0;for(p=_^15,v=1;;)if(j=R-v|0,j=so(7,0,j,((j|0)<0)<<31>>31)|0,ee=G()|0,w=g,c=A[w>>2]|0,w=A[w+4>>2]|0,_=(p-v|0)*3|0,f=Ne(7,0,_|0)|0,w=w&~(G()|0),$=ao(a|0,l|0,j|0,ee|0)|0,H=G()|0,_=Ne($|0,H|0,_|0)|0,w=G()|0|w,S=g,A[S>>2]=_|c&~f,A[S+4>>2]=w,ee=zn($|0,H|0,j|0,ee|0)|0,a=Qn(a|0,l|0,ee|0,G()|0)|0,l=G()|0,(R|0)<=(v|0)){l=0;break}else v=v+1|0;return L=U,l|0}function D2(a,l,c,f){a=a|0,l=l|0,c=c|0,f=f|0;var p=0,g=0,v=0;p=be(l|0,c|0,52)|0,G()|0,p=p&15,(l|0)==0&(c|0)==0|((f|0)>15|(p|0)>(f|0))?(g=-1,l=-1,c=0,p=0):(l=s4(l,c,p+1|0,f)|0,v=(G()|0)&-15728641,c=Ne(f|0,0,52)|0,c=l|c,v=v|(G()|0),l=(Yt(c,v)|0)==0,g=p,l=l?-1:f,p=v),v=a,A[v>>2]=c,A[v+4>>2]=p,A[a+8>>2]=g,A[a+12>>2]=l}function A4(a,l,c,f){a=a|0,l=l|0,c=c|0,f=f|0;var p=0,g=0;if(p=be(a|0,l|0,52)|0,G()|0,p=p&15,g=f+8|0,A[g>>2]=p,(a|0)==0&(l|0)==0|((c|0)>15|(p|0)>(c|0))){c=f,A[c>>2]=0,A[c+4>>2]=0,A[g>>2]=-1,A[f+12>>2]=-1;return}if(a=s4(a,l,p+1|0,c)|0,g=(G()|0)&-15728641,p=Ne(c|0,0,52)|0,p=a|p,g=g|(G()|0),a=f,A[a>>2]=p,A[a+4>>2]=g,a=f+12|0,Yt(p,g)|0){A[a>>2]=c;return}else{A[a>>2]=-1;return}}function F2(a){a=a|0;var l=0,c=0,f=0,p=0,g=0,v=0,_=0,w=0,S=0;if(c=a,l=A[c>>2]|0,c=A[c+4>>2]|0,!((l|0)==0&(c|0)==0)&&(f=be(l|0,c|0,52)|0,G()|0,f=f&15,_=Ne(1,0,(f^15)*3|0)|0,l=je(_|0,G()|0,l|0,c|0)|0,c=G()|0,_=a,A[_>>2]=l,A[_+4>>2]=c,_=a+8|0,v=A[_>>2]|0,!((f|0)<(v|0)))){for(w=a+12|0,g=f;;){if((g|0)==(v|0)){f=5;break}if(S=(g|0)==(A[w>>2]|0),p=(15-g|0)*3|0,f=be(l|0,c|0,p|0)|0,G()|0,f=f&7,S&((f|0)==1&!0)){f=7;break}if(!((f|0)==7&!0)){f=10;break}if(S=Ne(1,0,p|0)|0,l=je(l|0,c|0,S|0,G()|0)|0,c=G()|0,S=a,A[S>>2]=l,A[S+4>>2]=c,(g|0)>(v|0))g=g+-1|0;else{f=10;break}}if((f|0)==5){S=a,A[S>>2]=0,A[S+4>>2]=0,A[_>>2]=-1,A[w>>2]=-1;return}else if((f|0)==7){v=Ne(1,0,p|0)|0,v=je(l|0,c|0,v|0,G()|0)|0,_=G()|0,S=a,A[S>>2]=v,A[S+4>>2]=_,A[w>>2]=g+-1;return}else if((f|0)==10)return}}function el(a){a=+a;var l=0;return l=a<0?a+6.283185307179586:a,+(a>=6.283185307179586?l+-6.283185307179586:l)}function ka(a,l){return a=a|0,l=l|0,+yt(+(+F[a>>3]-+F[l>>3]))<17453292519943298e-27?(l=+yt(+(+F[a+8>>3]-+F[l+8>>3]))<17453292519943298e-27,l|0):(l=0,l|0)}function kr(a,l){switch(a=+a,l=l|0,l|0){case 1:{a=a<0?a+6.283185307179586:a;break}case 2:{a=a>0?a+-6.283185307179586:a;break}}return+a}function Nb(a,l){a=a|0,l=l|0;var c=0,f=0,p=0,g=0;return p=+F[l>>3],f=+F[a>>3],g=+vt(+((p-f)*.5)),c=+vt(+((+F[l+8>>3]-+F[a+8>>3])*.5)),c=g*g+c*(+Lt(+p)*+Lt(+f)*c),+(+ii(+ +Pt(+c),+ +Pt(+(1-c)))*2)}function tl(a,l){a=a|0,l=l|0;var c=0,f=0,p=0,g=0;return p=+F[l>>3],f=+F[a>>3],g=+vt(+((p-f)*.5)),c=+vt(+((+F[l+8>>3]-+F[a+8>>3])*.5)),c=g*g+c*(+Lt(+p)*+Lt(+f)*c),+(+ii(+ +Pt(+c),+ +Pt(+(1-c)))*2*6371.007180918475)}function Rb(a,l){a=a|0,l=l|0;var c=0,f=0,p=0,g=0;return p=+F[l>>3],f=+F[a>>3],g=+vt(+((p-f)*.5)),c=+vt(+((+F[l+8>>3]-+F[a+8>>3])*.5)),c=g*g+c*(+Lt(+p)*+Lt(+f)*c),+(+ii(+ +Pt(+c),+ +Pt(+(1-c)))*2*6371.007180918475*1e3)}function Cb(a,l){a=a|0,l=l|0;var c=0,f=0,p=0,g=0,v=0;return g=+F[l>>3],f=+Lt(+g),p=+F[l+8>>3]-+F[a+8>>3],v=f*+vt(+p),c=+F[a>>3],+ +ii(+v,+(+vt(+g)*+Lt(+c)-+Lt(+p)*(f*+vt(+c))))}function Pb(a,l,c,f){a=a|0,l=+l,c=+c,f=f|0;var p=0,g=0,v=0,_=0;if(c<1e-16){A[f>>2]=A[a>>2],A[f+4>>2]=A[a+4>>2],A[f+8>>2]=A[a+8>>2],A[f+12>>2]=A[a+12>>2];return}g=l<0?l+6.283185307179586:l,g=l>=6.283185307179586?g+-6.283185307179586:g;do if(g<1e-16)l=+F[a>>3]+c,F[f>>3]=l,p=f;else{if(p=+yt(+(g+-3.141592653589793))<1e-16,l=+F[a>>3],p){l=l-c,F[f>>3]=l,p=f;break}if(v=+Lt(+c),c=+vt(+c),l=v*+vt(+l)+ +Lt(+g)*(c*+Lt(+l)),l=l>1?1:l,l=+bx(+(l<-1?-1:l)),F[f>>3]=l,+yt(+(l+-1.5707963267948966))<1e-16){F[f>>3]=1.5707963267948966,F[f+8>>3]=0;return}if(+yt(+(l+1.5707963267948966))<1e-16){F[f>>3]=-1.5707963267948966,F[f+8>>3]=0;return}if(_=1/+Lt(+l),g=c*+vt(+g)*_,c=+F[a>>3],l=_*((v-+vt(+l)*+vt(+c))/+Lt(+c)),v=g>1?1:g,l=l>1?1:l,l=+F[a+8>>3]+ +ii(+(v<-1?-1:v),+(l<-1?-1:l)),l>3.141592653589793)do l=l+-6.283185307179586;while(l>3.141592653589793);if(l<-3.141592653589793)do l=l+6.283185307179586;while(l<-3.141592653589793);F[f+8>>3]=l;return}while(!1);if(+yt(+(l+-1.5707963267948966))<1e-16){F[p>>3]=1.5707963267948966,F[f+8>>3]=0;return}if(+yt(+(l+1.5707963267948966))<1e-16){F[p>>3]=-1.5707963267948966,F[f+8>>3]=0;return}if(l=+F[a+8>>3],l>3.141592653589793)do l=l+-6.283185307179586;while(l>3.141592653589793);if(l<-3.141592653589793)do l=l+6.283185307179586;while(l<-3.141592653589793);F[f+8>>3]=l}function l4(a,l){return a=a|0,l=l|0,a>>>0>15?(l=4,l|0):(F[l>>3]=+F[20656+(a<<3)>>3],l=0,l|0)}function Bb(a,l){return a=a|0,l=l|0,a>>>0>15?(l=4,l|0):(F[l>>3]=+F[20784+(a<<3)>>3],l=0,l|0)}function Db(a,l){return a=a|0,l=l|0,a>>>0>15?(l=4,l|0):(F[l>>3]=+F[20912+(a<<3)>>3],l=0,l|0)}function Fb(a,l){return a=a|0,l=l|0,a>>>0>15?(l=4,l|0):(F[l>>3]=+F[21040+(a<<3)>>3],l=0,l|0)}function Qu(a,l){a=a|0,l=l|0;var c=0;return a>>>0>15?(l=4,l|0):(c=so(7,0,a,((a|0)<0)<<31>>31)|0,c=zn(c|0,G()|0,120,0)|0,a=G()|0,A[l>>2]=c|2,A[l+4>>2]=a,l=0,l|0)}function u4(a,l,c){a=a|0,l=l|0,c=c|0;var f=0,p=0,g=0,v=0,_=0,w=0,S=0,R=0,U=0,$=0;return $=+F[l>>3],R=+F[a>>3],w=+vt(+(($-R)*.5)),g=+F[l+8>>3],S=+F[a+8>>3],v=+vt(+((g-S)*.5)),_=+Lt(+R),U=+Lt(+$),v=w*w+v*(U*_*v),v=+ii(+ +Pt(+v),+ +Pt(+(1-v)))*2,w=+F[c>>3],$=+vt(+((w-$)*.5)),f=+F[c+8>>3],g=+vt(+((f-g)*.5)),p=+Lt(+w),g=$*$+g*(U*p*g),g=+ii(+ +Pt(+g),+ +Pt(+(1-g)))*2,w=+vt(+((R-w)*.5)),f=+vt(+((S-f)*.5)),f=w*w+f*(_*p*f),f=+ii(+ +Pt(+f),+ +Pt(+(1-f)))*2,p=(v+g+f)*.5,+(+f2(+ +Pt(+(+ri(+(p*.5))*+ri(+((p-v)*.5))*+ri(+((p-g)*.5))*+ri(+((p-f)*.5)))))*4)}function L2(a,l,c){a=a|0,l=l|0,c=c|0;var f=0,p=0,g=0,v=0,_=0;if(_=L,L=L+192|0,g=_+168|0,v=_,p=Wo(a,l,g)|0,p|0)return c=p,L=_,c|0;if(Ua(a,l,v)|0&&nt(27795,27190,415,27199),l=A[v>>2]|0,(l|0)>0){if(f=+u4(v+8|0,v+8+(((l|0)!=1&1)<<4)|0,g)+0,(l|0)!=1){a=1;do p=a,a=a+1|0,f=f+ +u4(v+8+(p<<4)|0,v+8+(((a|0)%(l|0)|0)<<4)|0,g);while((a|0)<(l|0))}}else f=0;return F[c>>3]=f,c=0,L=_,c|0}function Lb(a,l,c){return a=a|0,l=l|0,c=c|0,a=L2(a,l,c)|0,a|0||(F[c>>3]=+F[c>>3]*6371.007180918475*6371.007180918475),a|0}function Ib(a,l,c){return a=a|0,l=l|0,c=c|0,a=L2(a,l,c)|0,a|0||(F[c>>3]=+F[c>>3]*6371.007180918475*6371.007180918475*1e3*1e3),a|0}function qb(a,l,c){a=a|0,l=l|0,c=c|0;var f=0,p=0,g=0,v=0,_=0,w=0,S=0,R=0;if(_=L,L=L+176|0,v=_,a=Wu(a,l,v)|0,a|0)return v=a,L=_,v|0;if(F[c>>3]=0,a=A[v>>2]|0,(a|0)<=1)return v=0,L=_,v|0;l=a+-1|0,a=0,f=+F[v+8>>3],p=+F[v+16>>3],g=0;do a=a+1|0,S=f,f=+F[v+8+(a<<4)>>3],R=+vt(+((f-S)*.5)),w=p,p=+F[v+8+(a<<4)+8>>3],w=+vt(+((p-w)*.5)),w=R*R+w*(+Lt(+f)*+Lt(+S)*w),g=g+ +ii(+ +Pt(+w),+ +Pt(+(1-w)))*2;while((a|0)<(l|0));return F[c>>3]=g,v=0,L=_,v|0}function Ob(a,l,c){a=a|0,l=l|0,c=c|0;var f=0,p=0,g=0,v=0,_=0,w=0,S=0,R=0;if(_=L,L=L+176|0,v=_,a=Wu(a,l,v)|0,a|0)return v=a,g=+F[c>>3],g=g*6371.007180918475,F[c>>3]=g,L=_,v|0;if(F[c>>3]=0,a=A[v>>2]|0,(a|0)<=1)return v=0,g=0,g=g*6371.007180918475,F[c>>3]=g,L=_,v|0;l=a+-1|0,a=0,f=+F[v+8>>3],p=+F[v+16>>3],g=0;do a=a+1|0,S=f,f=+F[v+8+(a<<4)>>3],R=+vt(+((f-S)*.5)),w=p,p=+F[v+8+(a<<4)+8>>3],w=+vt(+((p-w)*.5)),w=R*R+w*(+Lt(+S)*+Lt(+f)*w),g=g+ +ii(+ +Pt(+w),+ +Pt(+(1-w)))*2;while((a|0)!=(l|0));return F[c>>3]=g,v=0,R=g,R=R*6371.007180918475,F[c>>3]=R,L=_,v|0}function Ub(a,l,c){a=a|0,l=l|0,c=c|0;var f=0,p=0,g=0,v=0,_=0,w=0,S=0,R=0;if(_=L,L=L+176|0,v=_,a=Wu(a,l,v)|0,a|0)return v=a,g=+F[c>>3],g=g*6371.007180918475,g=g*1e3,F[c>>3]=g,L=_,v|0;if(F[c>>3]=0,a=A[v>>2]|0,(a|0)<=1)return v=0,g=0,g=g*6371.007180918475,g=g*1e3,F[c>>3]=g,L=_,v|0;l=a+-1|0,a=0,f=+F[v+8>>3],p=+F[v+16>>3],g=0;do a=a+1|0,S=f,f=+F[v+8+(a<<4)>>3],R=+vt(+((f-S)*.5)),w=p,p=+F[v+8+(a<<4)+8>>3],w=+vt(+((p-w)*.5)),w=R*R+w*(+Lt(+S)*+Lt(+f)*w),g=g+ +ii(+ +Pt(+w),+ +Pt(+(1-w)))*2;while((a|0)!=(l|0));return F[c>>3]=g,v=0,R=g,R=R*6371.007180918475,R=R*1e3,F[c>>3]=R,L=_,v|0}function kb(a){a=a|0;var l=0,c=0,f=0;return l=Mr(1,12)|0,l||nt(27280,27235,49,27293),c=a+4|0,f=A[c>>2]|0,f|0?(f=f+8|0,A[f>>2]=l,A[c>>2]=l,l|0):(A[a>>2]|0&&nt(27310,27235,61,27333),f=a,A[f>>2]=l,A[c>>2]=l,l|0)}function Gb(a,l){a=a|0,l=l|0;var c=0,f=0;return f=Xi(24)|0,f||nt(27347,27235,78,27361),A[f>>2]=A[l>>2],A[f+4>>2]=A[l+4>>2],A[f+8>>2]=A[l+8>>2],A[f+12>>2]=A[l+12>>2],A[f+16>>2]=0,l=a+4|0,c=A[l>>2]|0,c|0?(A[c+16>>2]=f,A[l>>2]=f,f|0):(A[a>>2]|0&&nt(27376,27235,82,27361),A[a>>2]=f,A[l>>2]=f,f|0)}function c4(a){a=a|0;var l=0,c=0,f=0,p=0;if(a)for(f=1;;){if(l=A[a>>2]|0,l|0)do{if(c=A[l>>2]|0,c|0)do p=c,c=A[c+16>>2]|0,We(p);while((c|0)!=0);p=l,l=A[l+8>>2]|0,We(p)}while((l|0)!=0);if(l=a,a=A[a+8>>2]|0,f||We(l),a)f=0;else break}}function Vb(a){a=a|0;var l=0,c=0,f=0,p=0,g=0,v=0,_=0,w=0,S=0,R=0,U=0,$=0,H=0,j=0,ee=0,ie=0,ce=0,ue=0,ae=0,te=0,Me=0,ze=0,Oe=0,At=0,ct=0,_t=0,et=0,$e=0,Se=0,gt=0,jt=0,ft=0;if(p=a+8|0,A[p>>2]|0)return ft=1,ft|0;if(f=A[a>>2]|0,!f)return ft=0,ft|0;l=f,c=0;do c=c+1|0,l=A[l+8>>2]|0;while((l|0)!=0);if(c>>>0<2)return ft=0,ft|0;gt=Xi(c<<2)|0,gt||nt(27396,27235,317,27415),Se=Xi(c<<5)|0,Se||nt(27437,27235,321,27415),A[a>>2]=0,ze=a+4|0,A[ze>>2]=0,A[p>>2]=0,c=0,$e=0,Me=0,U=0;e:for(;;){if(R=A[f>>2]|0,R){g=0,v=R;do{if(w=+F[v+8>>3],l=v,v=A[v+16>>2]|0,S=(v|0)==0,p=S?R:v,_=+F[p+8>>3],+yt(+(w-_))>3.141592653589793){ft=14;break}g=g+(_-w)*(+F[l>>3]+ +F[p>>3])}while(!S);if((ft|0)==14){ft=0,g=0,l=R;do te=+F[l+8>>3],et=l+16|0,_t=A[et>>2]|0,_t=(_t|0)==0?R:_t,ae=+F[_t+8>>3],g=g+(+F[l>>3]+ +F[_t>>3])*((ae<0?ae+6.283185307179586:ae)-(te<0?te+6.283185307179586:te)),l=A[((l|0)==0?f:et)>>2]|0;while((l|0)!=0)}g>0?(A[gt+($e<<2)>>2]=f,$e=$e+1|0,p=Me,l=U):ft=19}else ft=19;if((ft|0)==19){ft=0;do if(c){if(l=c+8|0,A[l>>2]|0){ft=21;break e}if(c=Mr(1,12)|0,!c){ft=23;break e}A[l>>2]=c,p=c+4|0,v=c,l=U}else if(U){p=ze,v=U+8|0,l=f,c=a;break}else if(A[a>>2]|0){ft=27;break e}else{p=ze,v=a,l=f,c=a;break}while(!1);if(A[v>>2]=f,A[p>>2]=f,v=Se+(Me<<5)|0,S=A[f>>2]|0,S){for(R=Se+(Me<<5)+8|0,F[R>>3]=17976931348623157e292,U=Se+(Me<<5)+24|0,F[U>>3]=17976931348623157e292,F[v>>3]=-17976931348623157e292,$=Se+(Me<<5)+16|0,F[$>>3]=-17976931348623157e292,ce=17976931348623157e292,ue=-17976931348623157e292,p=0,H=S,w=17976931348623157e292,ee=17976931348623157e292,ie=-17976931348623157e292,_=-17976931348623157e292;g=+F[H>>3],te=+F[H+8>>3],H=A[H+16>>2]|0,j=(H|0)==0,ae=+F[(j?S:H)+8>>3],g<w&&(F[R>>3]=g,w=g),te<ee&&(F[U>>3]=te,ee=te),g>ie?F[v>>3]=g:g=ie,te>_&&(F[$>>3]=te,_=te),ce=te>0&te<ce?te:ce,ue=te<0&te>ue?te:ue,p=p|+yt(+(te-ae))>3.141592653589793,!j;)ie=g;p&&(F[$>>3]=ue,F[U>>3]=ce)}else A[v>>2]=0,A[v+4>>2]=0,A[v+8>>2]=0,A[v+12>>2]=0,A[v+16>>2]=0,A[v+20>>2]=0,A[v+24>>2]=0,A[v+28>>2]=0;p=Me+1|0}if(et=f+8|0,f=A[et>>2]|0,A[et>>2]=0,f)Me=p,U=l;else{ft=45;break}}if((ft|0)==21)nt(27213,27235,35,27247);else if((ft|0)==23)nt(27267,27235,37,27247);else if((ft|0)==27)nt(27310,27235,61,27333);else if((ft|0)==45){e:do if(($e|0)>0){for(et=(p|0)==0,ct=p<<2,_t=(a|0)==0,At=0,l=0;;){if(Oe=A[gt+(At<<2)>>2]|0,et)ft=73;else{if(Me=Xi(ct)|0,!Me){ft=50;break}if(ze=Xi(ct)|0,!ze){ft=52;break}t:do if(_t)c=0;else{for(p=0,c=0,v=a;f=Se+(p<<5)|0,h4(A[v>>2]|0,f,A[Oe>>2]|0)|0?(A[Me+(c<<2)>>2]=v,A[ze+(c<<2)>>2]=f,j=c+1|0):j=c,v=A[v+8>>2]|0,v;)p=p+1|0,c=j;if((j|0)>0)if(f=A[Me>>2]|0,(j|0)==1)c=f;else for($=0,H=-1,c=f,U=f;;){for(S=A[U>>2]|0,f=0,v=0;p=A[A[Me+(v<<2)>>2]>>2]|0,(p|0)==(S|0)?R=f:R=f+((h4(p,A[ze+(v<<2)>>2]|0,A[S>>2]|0)|0)&1)|0,v=v+1|0,(v|0)!=(j|0);)f=R;if(p=(R|0)>(H|0),c=p?U:c,f=$+1|0,(f|0)==(j|0))break t;$=f,H=p?R:H,U=A[Me+(f<<2)>>2]|0}else c=0}while(!1);if(We(Me),We(ze),c){if(p=c+4|0,f=A[p>>2]|0,f)c=f+8|0;else if(A[c>>2]|0){ft=70;break}A[c>>2]=Oe,A[p>>2]=Oe}else ft=73}if((ft|0)==73){if(ft=0,l=A[Oe>>2]|0,l|0)do ze=l,l=A[l+16>>2]|0,We(ze);while((l|0)!=0);We(Oe),l=1}if(At=At+1|0,(At|0)>=($e|0)){jt=l;break e}}(ft|0)==50?nt(27452,27235,249,27471):(ft|0)==52?nt(27490,27235,252,27471):(ft|0)==70&&nt(27310,27235,61,27333)}else jt=0;while(!1);return We(gt),We(Se),ft=jt,ft|0}return 0}function h4(a,l,c){a=a|0,l=l|0,c=c|0;var f=0,p=0,g=0,v=0,_=0,w=0,S=0,R=0;if(!(v2(l,c)|0)||(l=H3(l)|0,f=+F[c>>3],p=+F[c+8>>3],p=l&p<0?p+6.283185307179586:p,a=A[a>>2]|0,!a))return a=0,a|0;if(l){l=0,S=p,c=a;e:for(;;){for(;v=+F[c>>3],p=+F[c+8>>3],c=c+16|0,R=A[c>>2]|0,R=(R|0)==0?a:R,g=+F[R>>3],_=+F[R+8>>3],v>g?(w=v,v=_):(w=g,g=v,v=p,p=_),f=f==g|f==w?f+2220446049250313e-31:f,!!(f<g|f>w);)if(c=A[c>>2]|0,!c){c=22;break e}if(_=v<0?v+6.283185307179586:v,v=p<0?p+6.283185307179586:p,S=_==S|v==S?S+-2220446049250313e-31:S,w=_+(v-_)*((f-g)/(w-g)),(w<0?w+6.283185307179586:w)>S&&(l=l^1),c=A[c>>2]|0,!c){c=22;break}}if((c|0)==22)return l|0}else{l=0,S=p,c=a;e:for(;;){for(;v=+F[c>>3],p=+F[c+8>>3],c=c+16|0,R=A[c>>2]|0,R=(R|0)==0?a:R,g=+F[R>>3],_=+F[R+8>>3],v>g?(w=v,v=_):(w=g,g=v,v=p,p=_),f=f==g|f==w?f+2220446049250313e-31:f,!!(f<g|f>w);)if(c=A[c>>2]|0,!c){c=22;break e}if(S=v==S|p==S?S+-2220446049250313e-31:S,v+(p-v)*((f-g)/(w-g))>S&&(l=l^1),c=A[c>>2]|0,!c){c=22;break}}if((c|0)==22)return l|0}return 0}function Es(a,l,c,f,p){a=a|0,l=l|0,c=c|0,f=f|0,p=p|0;var g=0,v=0,_=0,w=0,S=0,R=0,U=0,$=0,H=0,j=0,ee=0,ie=0,ce=0,ue=0;if(ue=L,L=L+32|0,ce=ue+16|0,ie=ue,g=be(a|0,l|0,52)|0,G()|0,g=g&15,H=be(c|0,f|0,52)|0,G()|0,(g|0)!=(H&15|0))return ce=12,L=ue,ce|0;if(S=be(a|0,l|0,45)|0,G()|0,S=S&127,R=be(c|0,f|0,45)|0,G()|0,R=R&127,S>>>0>121|R>>>0>121)return ce=5,L=ue,ce|0;if(H=(S|0)!=(R|0),H){if(_=y2(S,R)|0,(_|0)==7)return ce=1,L=ue,ce|0;w=y2(R,S)|0,(w|0)==7?nt(27514,27538,161,27548):(j=_,v=w)}else j=0,v=0;U=an(S)|0,$=an(R)|0,A[ce>>2]=0,A[ce+4>>2]=0,A[ce+8>>2]=0,A[ce+12>>2]=0;do if(j){if(R=A[4272+(S*28|0)+(j<<2)>>2]|0,_=(R|0)>0,$)if(_){S=0,w=c,_=f;do w=bb(w,_)|0,_=G()|0,v=io(v)|0,(v|0)==1&&(v=io(1)|0),S=S+1|0;while((S|0)!=(R|0));R=v,S=w,w=_}else R=v,S=c,w=f;else if(_){S=0,w=c,_=f;do w=R2(w,_)|0,_=G()|0,v=io(v)|0,S=S+1|0;while((S|0)!=(R|0));R=v,S=w,w=_}else R=v,S=c,w=f;if(P2(S,w,ce)|0,H||nt(27563,27538,191,27548),_=(U|0)!=0,v=($|0)!=0,_&v&&nt(27590,27538,192,27548),_){if(v=Sr(a,l)|0,(v|0)==7){g=5;break}if(we[22e3+(v*7|0)+j>>0]|0){g=1;break}w=A[21168+(v*28|0)+(j<<2)>>2]|0,S=w}else if(v){if(v=Sr(S,w)|0,(v|0)==7){g=5;break}if(we[22e3+(v*7|0)+R>>0]|0){g=1;break}S=0,w=A[21168+(R*28|0)+(v<<2)>>2]|0}else S=0,w=0;if((S|w|0)<0)g=5;else{if((w|0)>0){_=ce+4|0,v=0;do ju(_),v=v+1|0;while((v|0)!=(w|0))}if(A[ie>>2]=0,A[ie+4>>2]=0,A[ie+8>>2]=0,K3(ie,j),g|0)for(;si(g)|0?Hu(ie):$o(ie),(g|0)>1;)g=g+-1|0;if((S|0)>0){g=0;do ju(ie),g=g+1|0;while((g|0)!=(S|0))}ee=ce+4|0,pr(ee,ie,ee),or(ee),ee=51}}else if(P2(c,f,ce)|0,(U|0)!=0&($|0)!=0)if((R|0)!=(S|0)&&nt(27621,27538,261,27548),v=Sr(a,l)|0,g=Sr(c,f)|0,(v|0)==7|(g|0)==7)g=5;else if(we[22e3+(v*7|0)+g>>0]|0)g=1;else if(v=A[21168+(v*28|0)+(g<<2)>>2]|0,(v|0)>0){_=ce+4|0,g=0;do ju(_),g=g+1|0;while((g|0)!=(v|0));ee=51}else ee=51;else ee=51;while(!1);return(ee|0)==51&&(g=ce+4|0,A[p>>2]=A[g>>2],A[p+4>>2]=A[g+4>>2],A[p+8>>2]=A[g+8>>2],g=0),ce=g,L=ue,ce|0}function f4(a,l,c,f){a=a|0,l=l|0,c=c|0,f=f|0;var p=0,g=0,v=0,_=0,w=0,S=0,R=0,U=0,$=0,H=0,j=0,ee=0,ie=0,ce=0,ue=0,ae=0;if(ee=L,L=L+48|0,S=ee+36|0,v=ee+24|0,_=ee+12|0,w=ee,p=be(a|0,l|0,52)|0,G()|0,p=p&15,$=be(a|0,l|0,45)|0,G()|0,$=$&127,$>>>0>121)return f=5,L=ee,f|0;if(R=an($)|0,Ne(p|0,0,52)|0,ie=G()|0|134225919,g=f,A[g>>2]=-1,A[g+4>>2]=ie,!p)return p=$u(c)|0,(p|0)==7||(p=g2($,p)|0,(p|0)==127)?(ie=1,L=ee,ie|0):(H=Ne(p|0,0,45)|0,j=G()|0,$=f,j=A[$+4>>2]&-1040385|j,ie=f,A[ie>>2]=A[$>>2]|H,A[ie+4>>2]=j,ie=0,L=ee,ie|0);for(A[S>>2]=A[c>>2],A[S+4>>2]=A[c+4>>2],A[S+8>>2]=A[c+8>>2],c=p;;){if(g=c,c=c+-1|0,A[v>>2]=A[S>>2],A[v+4>>2]=A[S+4>>2],A[v+8>>2]=A[S+8>>2],si(g)|0){if(p=Zx(S)|0,p|0){c=13;break}A[_>>2]=A[S>>2],A[_+4>>2]=A[S+4>>2],A[_+8>>2]=A[S+8>>2],Hu(_)}else{if(p=Jx(S)|0,p|0){c=13;break}A[_>>2]=A[S>>2],A[_+4>>2]=A[S+4>>2],A[_+8>>2]=A[S+8>>2],$o(_)}if(x2(v,_,w),or(w),p=f,ue=A[p>>2]|0,p=A[p+4>>2]|0,ae=(15-g|0)*3|0,ce=Ne(7,0,ae|0)|0,p=p&~(G()|0),ae=Ne($u(w)|0,0,ae|0)|0,p=G()|0|p,ie=f,A[ie>>2]=ae|ue&~ce,A[ie+4>>2]=p,(g|0)<=1){c=14;break}}e:do if((c|0)!=13&&(c|0)==14)if((A[S>>2]|0)<=1&&(A[S+4>>2]|0)<=1&&(A[S+8>>2]|0)<=1){c=$u(S)|0,p=g2($,c)|0,(p|0)==127?w=0:w=an(p)|0;t:do if(c){if(R){if(p=Sr(a,l)|0,(p|0)==7){p=5;break e}if(g=A[21376+(p*28|0)+(c<<2)>>2]|0,(g|0)>0){p=c,c=0;do p=Ho(p)|0,c=c+1|0;while((c|0)!=(g|0))}else p=c;if((p|0)==1){p=9;break e}c=g2($,p)|0,(c|0)==127&&nt(27648,27538,411,27678),an(c)|0?nt(27693,27538,412,27678):(j=c,H=g,U=p)}else j=p,H=0,U=c;if(_=A[4272+($*28|0)+(U<<2)>>2]|0,(_|0)<=-1&&nt(27724,27538,419,27678),!w){if((H|0)<0){p=5;break e}if(H|0){g=f,p=0,c=A[g>>2]|0,g=A[g+4>>2]|0;do c=jo(c,g)|0,g=G()|0,ae=f,A[ae>>2]=c,A[ae+4>>2]=g,p=p+1|0;while((p|0)<(H|0))}if((_|0)<=0){p=j,c=58;break}for(g=f,p=0,c=A[g>>2]|0,g=A[g+4>>2]|0;;)if(c=jo(c,g)|0,g=G()|0,ae=f,A[ae>>2]=c,A[ae+4>>2]=g,p=p+1|0,(p|0)==(_|0)){p=j,c=58;break t}}if(v=y2(j,$)|0,(v|0)==7&&nt(27514,27538,428,27678),p=f,c=A[p>>2]|0,p=A[p+4>>2]|0,(_|0)>0){g=0;do c=jo(c,p)|0,p=G()|0,ae=f,A[ae>>2]=c,A[ae+4>>2]=p,g=g+1|0;while((g|0)!=(_|0))}if(p=Sr(c,p)|0,(p|0)==7&&nt(27795,27538,440,27678),c=m2(j)|0,c=A[(c?21792:21584)+(v*28|0)+(p<<2)>>2]|0,(c|0)<0&&nt(27795,27538,454,27678),!c)p=j,c=58;else{v=f,p=0,g=A[v>>2]|0,v=A[v+4>>2]|0;do g=N2(g,v)|0,v=G()|0,ae=f,A[ae>>2]=g,A[ae+4>>2]=v,p=p+1|0;while((p|0)<(c|0));p=j,c=58}}else if((R|0)!=0&(w|0)!=0){if(c=Sr(a,l)|0,g=f,g=Sr(A[g>>2]|0,A[g+4>>2]|0)|0,(c|0)==7|(g|0)==7){p=5;break e}if(g=A[21376+(c*28|0)+(g<<2)>>2]|0,(g|0)<0){p=5;break e}if(!g)c=59;else{_=f,c=0,v=A[_>>2]|0,_=A[_+4>>2]|0;do v=jo(v,_)|0,_=G()|0,ae=f,A[ae>>2]=v,A[ae+4>>2]=_,c=c+1|0;while((c|0)<(g|0));c=58}}else c=58;while(!1);if((c|0)==58&&w&&(c=59),(c|0)==59&&(ae=f,(Sr(A[ae>>2]|0,A[ae+4>>2]|0)|0)==1)){p=9;break}ae=f,ce=A[ae>>2]|0,ae=A[ae+4>>2]&-1040385,ue=Ne(p|0,0,45)|0,ae=ae|(G()|0),p=f,A[p>>2]=ce|ue,A[p+4>>2]=ae,p=0}else p=1;while(!1);return ae=p,L=ee,ae|0}function zb(a,l,c,f,p,g){a=a|0,l=l|0,c=c|0,f=f|0,p=p|0,g=g|0;var v=0,_=0;return _=L,L=L+16|0,v=_,p?a=15:(a=Es(a,l,c,f,v)|0,a||(tb(v,g),a=0)),L=_,a|0}function $b(a,l,c,f,p){a=a|0,l=l|0,c=c|0,f=f|0,p=p|0;var g=0,v=0;return v=L,L=L+16|0,g=v,f?c=15:(c=nb(c,g)|0,c||(c=f4(a,l,g,p)|0)),L=v,c|0}function Hb(a,l,c,f,p){a=a|0,l=l|0,c=c|0,f=f|0,p=p|0;var g=0,v=0,_=0,w=0;return w=L,L=L+32|0,v=w+12|0,_=w,g=Es(a,l,a,l,v)|0,g|0?(_=g,L=w,_|0):(a=Es(a,l,c,f,_)|0,a|0?(_=a,L=w,_|0):(v=b2(v,_)|0,_=p,A[_>>2]=v,A[_+4>>2]=((v|0)<0)<<31>>31,_=0,L=w,_|0))}function jb(a,l,c,f,p){a=a|0,l=l|0,c=c|0,f=f|0,p=p|0;var g=0,v=0,_=0,w=0;return w=L,L=L+32|0,v=w+12|0,_=w,g=Es(a,l,a,l,v)|0,!g&&(g=Es(a,l,c,f,_)|0,!g)?(f=b2(v,_)|0,f=je(f|0,((f|0)<0)<<31>>31|0,1,0)|0,v=G()|0,_=p,A[_>>2]=f,A[_+4>>2]=v,_=0,L=w,_|0):(_=g,L=w,_|0)}function Wb(a,l,c,f,p){a=a|0,l=l|0,c=c|0,f=f|0,p=p|0;var g=0,v=0,_=0,w=0,S=0,R=0,U=0,$=0,H=0,j=0,ee=0,ie=0,ce=0,ue=0,ae=0,te=0,Me=0,ze=0,Oe=0,At=0;if(Oe=L,L=L+48|0,Me=Oe+24|0,v=Oe+12|0,ze=Oe,g=Es(a,l,a,l,Me)|0,!g&&(g=Es(a,l,c,f,v)|0,!g)){ae=b2(Me,v)|0,te=((ae|0)<0)<<31>>31,A[Me>>2]=0,A[Me+4>>2]=0,A[Me+8>>2]=0,A[v>>2]=0,A[v+4>>2]=0,A[v+8>>2]=0,Es(a,l,a,l,Me)|0&&nt(27795,27538,692,27747),Es(a,l,c,f,v)|0&&nt(27795,27538,697,27747),t4(Me),t4(v),R=(ae|0)==0?0:1/+(ae|0),c=A[Me>>2]|0,ee=R*+((A[v>>2]|0)-c|0),ie=Me+4|0,f=A[ie>>2]|0,ce=R*+((A[v+4>>2]|0)-f|0),ue=Me+8|0,g=A[ue>>2]|0,R=R*+((A[v+8>>2]|0)-g|0),A[ze>>2]=c,U=ze+4|0,A[U>>2]=f,$=ze+8|0,A[$>>2]=g;e:do if((ae|0)<0)g=0;else for(H=0,j=0;;){w=+(j>>>0)+4294967296*+(H|0),At=ee*w+ +(c|0),_=ce*w+ +(f|0),w=R*w+ +(g|0),c=~~+Zu(+At),v=~~+Zu(+_),g=~~+Zu(+w),At=+yt(+(+(c|0)-At)),_=+yt(+(+(v|0)-_)),w=+yt(+(+(g|0)-w));do if(At>_&At>w)c=0-(v+g)|0,f=v;else if(S=0-c|0,_>w){f=S-g|0;break}else{f=v,g=S-v|0;break}while(!1);if(A[ze>>2]=c,A[U>>2]=f,A[$>>2]=g,rb(ze),g=f4(a,l,ze,p+(j<<3)|0)|0,g|0)break e;if(!((H|0)<(te|0)|(H|0)==(te|0)&j>>>0<ae>>>0)){g=0;break e}c=je(j|0,H|0,1,0)|0,f=G()|0,H=f,j=c,c=A[Me>>2]|0,f=A[ie>>2]|0,g=A[ue>>2]|0}while(!1);return ze=g,L=Oe,ze|0}return ze=g,L=Oe,ze|0}function so(a,l,c,f){a=a|0,l=l|0,c=c|0,f=f|0;var p=0,g=0,v=0;if((c|0)==0&(f|0)==0)return p=0,g=1,ut(p|0),g|0;g=a,p=l,a=1,l=0;do v=(c&1|0)==0&!0,a=zn((v?1:g)|0,(v?0:p)|0,a|0,l|0)|0,l=G()|0,c=S4(c|0,f|0,1)|0,f=G()|0,g=zn(g|0,p|0,g|0,p|0)|0,p=G()|0;while(!((c|0)==0&(f|0)==0));return ut(l|0),a|0}function I2(a,l,c,f){a=a|0,l=l|0,c=c|0,f=f|0;var p=0,g=0,v=0,_=0,w=0,S=0,R=0;_=L,L=L+16|0,g=_,v=be(a|0,l|0,52)|0,G()|0,v=v&15;do if(v){if(p=Wo(a,l,g)|0,!p){S=+F[g>>3],w=1/+Lt(+S),R=+F[25968+(v<<3)>>3],F[c>>3]=S+R,F[c+8>>3]=S-R,S=+F[g+8>>3],w=R*w,F[c+16>>3]=w+S,F[c+24>>3]=S-w;break}return v=p,L=_,v|0}else{if(p=be(a|0,l|0,45)|0,G()|0,p=p&127,p>>>0>121)return v=5,L=_,v|0;g=22064+(p<<5)|0,A[c>>2]=A[g>>2],A[c+4>>2]=A[g+4>>2],A[c+8>>2]=A[g+8>>2],A[c+12>>2]=A[g+12>>2],A[c+16>>2]=A[g+16>>2],A[c+20>>2]=A[g+20>>2],A[c+24>>2]=A[g+24>>2],A[c+28>>2]=A[g+28>>2];break}while(!1);return Xx(c,f?1.4:1.1),f=26096+(v<<3)|0,(A[f>>2]|0)==(a|0)&&(A[f+4>>2]|0)==(l|0)&&(F[c>>3]=1.5707963267948966),v=26224+(v<<3)|0,(A[v>>2]|0)==(a|0)&&(A[v+4>>2]|0)==(l|0)&&(F[c+8>>3]=-1.5707963267948966),+F[c>>3]!=1.5707963267948966&&+F[c+8>>3]!=-1.5707963267948966?(v=0,L=_,v|0):(F[c+16>>3]=3.141592653589793,F[c+24>>3]=-3.141592653589793,v=0,L=_,v|0)}function Qb(a,l,c,f){a=a|0,l=l|0,c=c|0,f=f|0;var p=0,g=0,v=0,_=0,w=0,S=0,R=0;S=L,L=L+48|0,v=S+32|0,g=S+40|0,_=S,M2(v,0,0,0),w=A[v>>2]|0,v=A[v+4>>2]|0;do if(c>>>0<=15){if(p=rl(f)|0,p|0){f=_,A[f>>2]=0,A[f+4>>2]=0,A[_+8>>2]=p,A[_+12>>2]=-1,f=_+16|0,w=_+29|0,A[f>>2]=0,A[f+4>>2]=0,A[f+8>>2]=0,we[f+12>>0]=0,we[w>>0]=we[g>>0]|0,we[w+1>>0]=we[g+1>>0]|0,we[w+2>>0]=we[g+2>>0]|0;break}if(p=Mr((A[l+8>>2]|0)+1|0,32)|0,p){q2(l,p),R=_,A[R>>2]=w,A[R+4>>2]=v,A[_+8>>2]=0,A[_+12>>2]=c,A[_+16>>2]=f,A[_+20>>2]=l,A[_+24>>2]=p,we[_+28>>0]=0,w=_+29|0,we[w>>0]=we[g>>0]|0,we[w+1>>0]=we[g+1>>0]|0,we[w+2>>0]=we[g+2>>0]|0;break}else{f=_,A[f>>2]=0,A[f+4>>2]=0,A[_+8>>2]=13,A[_+12>>2]=-1,f=_+16|0,w=_+29|0,A[f>>2]=0,A[f+4>>2]=0,A[f+8>>2]=0,we[f+12>>0]=0,we[w>>0]=we[g>>0]|0,we[w+1>>0]=we[g+1>>0]|0,we[w+2>>0]=we[g+2>>0]|0;break}}else w=_,A[w>>2]=0,A[w+4>>2]=0,A[_+8>>2]=4,A[_+12>>2]=-1,w=_+16|0,R=_+29|0,A[w>>2]=0,A[w+4>>2]=0,A[w+8>>2]=0,we[w+12>>0]=0,we[R>>0]=we[g>>0]|0,we[R+1>>0]=we[g+1>>0]|0,we[R+2>>0]=we[g+2>>0]|0;while(!1);Xu(_),A[a>>2]=A[_>>2],A[a+4>>2]=A[_+4>>2],A[a+8>>2]=A[_+8>>2],A[a+12>>2]=A[_+12>>2],A[a+16>>2]=A[_+16>>2],A[a+20>>2]=A[_+20>>2],A[a+24>>2]=A[_+24>>2],A[a+28>>2]=A[_+28>>2],L=S}function Xu(a){a=a|0;var l=0,c=0,f=0,p=0,g=0,v=0,_=0,w=0,S=0,R=0,U=0,$=0,H=0,j=0,ee=0,ie=0,ce=0,ue=0,ae=0,te=0;if(te=L,L=L+336|0,H=te+168|0,j=te,f=a,c=A[f>>2]|0,f=A[f+4>>2]|0,(c|0)==0&(f|0)==0){L=te;return}if(l=a+28|0,we[l>>0]|0?(c=d4(c,f)|0,f=G()|0):we[l>>0]=1,ae=a+20|0,!(A[A[ae>>2]>>2]|0)){l=a+24|0,c=A[l>>2]|0,c|0&&We(c),ue=a,A[ue>>2]=0,A[ue+4>>2]=0,A[a+8>>2]=0,A[ae>>2]=0,A[a+12>>2]=-1,A[a+16>>2]=0,A[l>>2]=0,L=te;return}ue=a+16|0,l=A[ue>>2]|0,p=l&15;e:do if((c|0)==0&(f|0)==0)ce=a+24|0;else{ee=a+12|0,U=(p|0)==3,R=l&255,w=(p|1|0)==3,$=a+24|0,S=(p+-1|0)>>>0<3,v=(p|2|0)==3,_=j+8|0;t:for(;;){if(g=be(c|0,f|0,52)|0,G()|0,g=g&15,(g|0)==(A[ee>>2]|0)){switch(R&15){case 0:case 2:case 3:{if(p=Wo(c,f,H)|0,p|0){ie=15;break t}if(O2(A[ae>>2]|0,A[$>>2]|0,H)|0){ie=19;break t}break}}if(w&&(p=A[(A[ae>>2]|0)+4>>2]|0,A[H>>2]=A[p>>2],A[H+4>>2]=A[p+4>>2],A[H+8>>2]=A[p+8>>2],A[H+12>>2]=A[p+12>>2],v2(26832,H)|0)){if(C2(A[(A[ae>>2]|0)+4>>2]|0,g,j)|0){ie=25;break}if(p=j,(A[p>>2]|0)==(c|0)&&(A[p+4>>2]|0)==(f|0)){ie=29;break}}if(S){if(p=Ua(c,f,H)|0,p|0){ie=32;break}if(I2(c,f,j,0)|0){ie=36;break}if(v&&m4(A[ae>>2]|0,A[$>>2]|0,H,j)|0){ie=42;break}if(w&&g4(A[ae>>2]|0,A[$>>2]|0,H,j)|0){ie=42;break}}if(U){if(l=I2(c,f,H,1)|0,p=A[$>>2]|0,l|0){ie=45;break}if(_2(p,H)|0){if(W3(j,H),j3(H,A[$>>2]|0)|0){ie=53;break}if(O2(A[ae>>2]|0,A[$>>2]|0,_)|0){ie=53;break}if(g4(A[ae>>2]|0,A[$>>2]|0,j,H)|0){ie=53;break}}}}do if((g|0)<(A[ee>>2]|0)){if(l=I2(c,f,H,1)|0,p=A[$>>2]|0,l|0){ie=58;break t}if(!(_2(p,H)|0)){ie=73;break}if(j3(A[$>>2]|0,H)|0&&(W3(j,H),m4(A[ae>>2]|0,A[$>>2]|0,j,H)|0)){ie=65;break t}if(c=o4(c,f,g+1|0,j)|0,c|0){ie=67;break t}f=j,c=A[f>>2]|0,f=A[f+4>>2]|0}else ie=73;while(!1);if((ie|0)==73&&(ie=0,c=d4(c,f)|0,f=G()|0),(c|0)==0&(f|0)==0){ce=$;break e}}switch(ie|0){case 15:{l=A[$>>2]|0,l|0&&We(l),ie=a,A[ie>>2]=0,A[ie+4>>2]=0,A[ae>>2]=0,A[ee>>2]=-1,A[ue>>2]=0,A[$>>2]=0,A[a+8>>2]=p,ie=20;break}case 19:{A[a>>2]=c,A[a+4>>2]=f,ie=20;break}case 25:{nt(27795,27761,470,27772);break}case 29:{A[a>>2]=c,A[a+4>>2]=f,L=te;return}case 32:{l=A[$>>2]|0,l|0&&We(l),ce=a,A[ce>>2]=0,A[ce+4>>2]=0,A[ae>>2]=0,A[ee>>2]=-1,A[ue>>2]=0,A[$>>2]=0,A[a+8>>2]=p,L=te;return}case 36:{nt(27795,27761,493,27772);break}case 42:{A[a>>2]=c,A[a+4>>2]=f,L=te;return}case 45:{p|0&&We(p),ie=a,A[ie>>2]=0,A[ie+4>>2]=0,A[ae>>2]=0,A[ee>>2]=-1,A[ue>>2]=0,A[$>>2]=0,A[a+8>>2]=l,ie=55;break}case 53:{A[a>>2]=c,A[a+4>>2]=f,ie=55;break}case 58:{p|0&&We(p),ie=a,A[ie>>2]=0,A[ie+4>>2]=0,A[ae>>2]=0,A[ee>>2]=-1,A[ue>>2]=0,A[$>>2]=0,A[a+8>>2]=l,ie=71;break}case 65:{A[a>>2]=c,A[a+4>>2]=f,ie=71;break}case 67:{l=A[$>>2]|0,l|0&&We(l),ce=a,A[ce>>2]=0,A[ce+4>>2]=0,A[ae>>2]=0,A[ee>>2]=-1,A[ue>>2]=0,A[$>>2]=0,A[a+8>>2]=c,L=te;return}}if((ie|0)==20){L=te;return}else if((ie|0)==55){L=te;return}else if((ie|0)==71){L=te;return}}while(!1);l=A[ce>>2]|0,l|0&&We(l),ie=a,A[ie>>2]=0,A[ie+4>>2]=0,A[a+8>>2]=0,A[ae>>2]=0,A[a+12>>2]=-1,A[ue>>2]=0,A[ce>>2]=0,L=te}function d4(a,l){a=a|0,l=l|0;var c=0,f=0,p=0,g=0,v=0,_=0,w=0,S=0,R=0,U=0;U=L,L=L+16|0,R=U,f=be(a|0,l|0,52)|0,G()|0,f=f&15,c=be(a|0,l|0,45)|0,G()|0;do if(f){for(;c=Ne(f+4095|0,0,52)|0,p=G()|0|l&-15728641,g=(15-f|0)*3|0,v=Ne(7,0,g|0)|0,_=G()|0,c=c|a|v,p=p|_,w=be(a|0,l|0,g|0)|0,G()|0,w=w&7,f=f+-1|0,!(w>>>0<6);)if(f)l=p,a=c;else{S=4;break}if((S|0)==4){c=be(c|0,p|0,45)|0,G()|0;break}return R=(w|0)==0&(Yt(c,p)|0)!=0,R=Ne((R?2:1)+w|0,0,g|0)|0,S=G()|0|l&~_,R=R|a&~v,ut(S|0),L=U,R|0}while(!1);return c=c&127,c>>>0>120?(S=0,R=0,ut(S|0),L=U,R|0):(M2(R,0,c+1|0,0),S=A[R+4>>2]|0,R=A[R>>2]|0,ut(S|0),L=U,R|0)}function Xb(a,l,c,f,p,g){a=a|0,l=l|0,c=c|0,f=f|0,p=p|0,g=g|0;var v=0,_=0,w=0,S=0,R=0,U=0,$=0,H=0,j=0,ee=0,ie=0;ie=L,L=L+160|0,U=ie+80|0,_=ie+64|0,$=ie+112|0,ee=ie,Qb(U,a,l,c),S=U,D2(_,A[S>>2]|0,A[S+4>>2]|0,l),S=_,w=A[S>>2]|0,S=A[S+4>>2]|0,v=A[U+8>>2]|0,H=$+4|0,A[H>>2]=A[U>>2],A[H+4>>2]=A[U+4>>2],A[H+8>>2]=A[U+8>>2],A[H+12>>2]=A[U+12>>2],A[H+16>>2]=A[U+16>>2],A[H+20>>2]=A[U+20>>2],A[H+24>>2]=A[U+24>>2],A[H+28>>2]=A[U+28>>2],H=ee,A[H>>2]=w,A[H+4>>2]=S,H=ee+8|0,A[H>>2]=v,a=ee+12|0,l=$,c=a+36|0;do A[a>>2]=A[l>>2],a=a+4|0,l=l+4|0;while((a|0)<(c|0));if($=ee+48|0,A[$>>2]=A[_>>2],A[$+4>>2]=A[_+4>>2],A[$+8>>2]=A[_+8>>2],A[$+12>>2]=A[_+12>>2],(w|0)==0&(S|0)==0)return ee=v,L=ie,ee|0;c=ee+16|0,R=ee+24|0,U=ee+28|0,v=0,_=0,l=w,a=S;do{if(!((v|0)<(p|0)|(v|0)==(p|0)&_>>>0<f>>>0)){j=4;break}if(S=_,_=je(_|0,v|0,1,0)|0,v=G()|0,S=g+(S<<3)|0,A[S>>2]=l,A[S+4>>2]=a,F2($),a=$,l=A[a>>2]|0,a=A[a+4>>2]|0,(l|0)==0&(a|0)==0){if(Xu(c),l=c,a=A[l>>2]|0,l=A[l+4>>2]|0,(a|0)==0&(l|0)==0){j=10;break}A4(a,l,A[U>>2]|0,$),a=$,l=A[a>>2]|0,a=A[a+4>>2]|0}S=ee,A[S>>2]=l,A[S+4>>2]=a}while(!((l|0)==0&(a|0)==0));return(j|0)==4?(a=ee+40|0,l=A[a>>2]|0,l|0&&We(l),j=ee+16|0,A[j>>2]=0,A[j+4>>2]=0,A[R>>2]=0,A[ee+36>>2]=0,A[U>>2]=-1,A[ee+32>>2]=0,A[a>>2]=0,A4(0,0,0,$),A[ee>>2]=0,A[ee+4>>2]=0,A[H>>2]=0,ee=14,L=ie,ee|0):((j|0)==10&&(A[ee>>2]=0,A[ee+4>>2]=0,A[H>>2]=A[R>>2]),ee=A[H>>2]|0,L=ie,ee|0)}function Yb(a,l,c,f){a=a|0,l=l|0,c=c|0,f=f|0;var p=0,g=0,v=0,_=0,w=0,S=0,R=0,U=0,$=0,H=0;if(U=L,L=L+48|0,w=U+32|0,_=U+40|0,S=U,!(A[a>>2]|0))return R=f,A[R>>2]=0,A[R+4>>2]=0,R=0,L=U,R|0;M2(w,0,0,0),v=w,p=A[v>>2]|0,v=A[v+4>>2]|0;do if(l>>>0>15)R=S,A[R>>2]=0,A[R+4>>2]=0,A[S+8>>2]=4,A[S+12>>2]=-1,R=S+16|0,c=S+29|0,A[R>>2]=0,A[R+4>>2]=0,A[R+8>>2]=0,we[R+12>>0]=0,we[c>>0]=we[_>>0]|0,we[c+1>>0]=we[_+1>>0]|0,we[c+2>>0]=we[_+2>>0]|0,c=4,R=9;else{if(c=rl(c)|0,c|0){w=S,A[w>>2]=0,A[w+4>>2]=0,A[S+8>>2]=c,A[S+12>>2]=-1,w=S+16|0,R=S+29|0,A[w>>2]=0,A[w+4>>2]=0,A[w+8>>2]=0,we[w+12>>0]=0,we[R>>0]=we[_>>0]|0,we[R+1>>0]=we[_+1>>0]|0,we[R+2>>0]=we[_+2>>0]|0,R=9;break}if(c=Mr((A[a+8>>2]|0)+1|0,32)|0,!c){R=S,A[R>>2]=0,A[R+4>>2]=0,A[S+8>>2]=13,A[S+12>>2]=-1,R=S+16|0,c=S+29|0,A[R>>2]=0,A[R+4>>2]=0,A[R+8>>2]=0,we[R+12>>0]=0,we[c>>0]=we[_>>0]|0,we[c+1>>0]=we[_+1>>0]|0,we[c+2>>0]=we[_+2>>0]|0,c=13,R=9;break}q2(a,c),H=S,A[H>>2]=p,A[H+4>>2]=v,v=S+8|0,A[v>>2]=0,A[S+12>>2]=l,A[S+20>>2]=a,A[S+24>>2]=c,we[S+28>>0]=0,p=S+29|0,we[p>>0]=we[_>>0]|0,we[p+1>>0]=we[_+1>>0]|0,we[p+2>>0]=we[_+2>>0]|0,A[S+16>>2]=3,$=+jx(c),$=$*+Hx(c),g=+yt(+ +F[c>>3]),g=$/+Lt(+ +Ku(+g,+ +yt(+ +F[c+8>>3])))*6371.007180918475*6371.007180918475,p=S+12|0,c=A[p>>2]|0;e:do if((c|0)>0)do{if(l4(c+-1|0,w)|0,!(g/+F[w>>3]>10))break e;H=A[p>>2]|0,c=H+-1|0,A[p>>2]=c}while((H|0)>1);while(!1);if(Xu(S),p=f,A[p>>2]=0,A[p+4>>2]=0,p=S,c=A[p>>2]|0,p=A[p+4>>2]|0,!((c|0)==0&(p|0)==0))do JA(c,p,l,w)|0,_=w,a=f,_=je(A[a>>2]|0,A[a+4>>2]|0,A[_>>2]|0,A[_+4>>2]|0)|0,a=G()|0,H=f,A[H>>2]=_,A[H+4>>2]=a,Xu(S),H=S,c=A[H>>2]|0,p=A[H+4>>2]|0;while(!((c|0)==0&(p|0)==0));c=A[v>>2]|0}while(!1);return H=c,L=U,H|0}function nl(a,l,c){a=a|0,l=l|0,c=c|0;var f=0,p=0,g=0,v=0,_=0,w=0,S=0,R=0,U=0,$=0;if(!(v2(l,c)|0)||(l=H3(l)|0,f=+F[c>>3],p=+F[c+8>>3],p=l&p<0?p+6.283185307179586:p,$=A[a>>2]|0,($|0)<=0))return $=0,$|0;if(U=A[a+4>>2]|0,l){l=0,R=p,c=-1,a=0;e:for(;;){for(S=a;v=+F[U+(S<<4)>>3],p=+F[U+(S<<4)+8>>3],a=(c+2|0)%($|0)|0,g=+F[U+(a<<4)>>3],_=+F[U+(a<<4)+8>>3],v>g?(w=v,v=_):(w=g,g=v,v=p,p=_),f=f==g|f==w?f+2220446049250313e-31:f,!!(f<g|f>w);)if(c=S+1|0,(c|0)>=($|0)){c=22;break e}else a=S,S=c,c=a;if(_=v<0?v+6.283185307179586:v,v=p<0?p+6.283185307179586:p,R=_==R|v==R?R+-2220446049250313e-31:R,w=_+(v-_)*((f-g)/(w-g)),(w<0?w+6.283185307179586:w)>R&&(l=l^1),a=S+1|0,(a|0)>=($|0)){c=22;break}else c=S}if((c|0)==22)return l|0}else{l=0,R=p,c=-1,a=0;e:for(;;){for(S=a;v=+F[U+(S<<4)>>3],p=+F[U+(S<<4)+8>>3],a=(c+2|0)%($|0)|0,g=+F[U+(a<<4)>>3],_=+F[U+(a<<4)+8>>3],v>g?(w=v,v=_):(w=g,g=v,v=p,p=_),f=f==g|f==w?f+2220446049250313e-31:f,!!(f<g|f>w);)if(c=S+1|0,(c|0)>=($|0)){c=22;break e}else a=S,S=c,c=a;if(R=v==R|p==R?R+-2220446049250313e-31:R,v+(p-v)*((f-g)/(w-g))>R&&(l=l^1),a=S+1|0,(a|0)>=($|0)){c=22;break}else c=S}if((c|0)==22)return l|0}return 0}function p4(a,l){a=a|0,l=l|0;var c=0,f=0,p=0,g=0,v=0,_=0,w=0,S=0,R=0,U=0,$=0,H=0,j=0,ee=0,ie=0,ce=0,ue=0;if(j=A[a>>2]|0,!j){A[l>>2]=0,A[l+4>>2]=0,A[l+8>>2]=0,A[l+12>>2]=0,A[l+16>>2]=0,A[l+20>>2]=0,A[l+24>>2]=0,A[l+28>>2]=0;return}if(ee=l+8|0,F[ee>>3]=17976931348623157e292,ie=l+24|0,F[ie>>3]=17976931348623157e292,F[l>>3]=-17976931348623157e292,ce=l+16|0,F[ce>>3]=-17976931348623157e292,!((j|0)<=0)){for($=A[a+4>>2]|0,S=17976931348623157e292,R=-17976931348623157e292,U=0,a=-1,g=17976931348623157e292,v=17976931348623157e292,w=-17976931348623157e292,f=-17976931348623157e292,H=0;c=+F[$+(H<<4)>>3],_=+F[$+(H<<4)+8>>3],a=a+2|0,p=+F[$+(((a|0)==(j|0)?0:a)<<4)+8>>3],c<g&&(F[ee>>3]=c,g=c),_<v&&(F[ie>>3]=_,v=_),c>w?F[l>>3]=c:c=w,_>f&&(F[ce>>3]=_,f=_),S=_>0&_<S?_:S,R=_<0&_>R?_:R,U=U|+yt(+(_-p))>3.141592653589793,a=H+1|0,(a|0)!=(j|0);)ue=H,w=c,H=a,a=ue;U&&(F[ce>>3]=R,F[ie>>3]=S)}}function rl(a){return a=a|0,(a>>>0<4?0:15)|0}function q2(a,l){a=a|0,l=l|0;var c=0,f=0,p=0,g=0,v=0,_=0,w=0,S=0,R=0,U=0,$=0,H=0,j=0,ee=0,ie=0,ce=0,ue=0,ae=0,te=0,Me=0,ze=0,Oe=0;if(j=A[a>>2]|0,j){if(ee=l+8|0,F[ee>>3]=17976931348623157e292,ie=l+24|0,F[ie>>3]=17976931348623157e292,F[l>>3]=-17976931348623157e292,ce=l+16|0,F[ce>>3]=-17976931348623157e292,(j|0)>0){for(p=A[a+4>>2]|0,$=17976931348623157e292,H=-17976931348623157e292,f=0,c=-1,w=17976931348623157e292,S=17976931348623157e292,U=-17976931348623157e292,v=-17976931348623157e292,ue=0;g=+F[p+(ue<<4)>>3],R=+F[p+(ue<<4)+8>>3],ze=c+2|0,_=+F[p+(((ze|0)==(j|0)?0:ze)<<4)+8>>3],g<w&&(F[ee>>3]=g,w=g),R<S&&(F[ie>>3]=R,S=R),g>U?F[l>>3]=g:g=U,R>v&&(F[ce>>3]=R,v=R),$=R>0&R<$?R:$,H=R<0&R>H?R:H,f=f|+yt(+(R-_))>3.141592653589793,c=ue+1|0,(c|0)!=(j|0);)ze=ue,U=g,ue=c,c=ze;f&&(F[ce>>3]=H,F[ie>>3]=$)}}else A[l>>2]=0,A[l+4>>2]=0,A[l+8>>2]=0,A[l+12>>2]=0,A[l+16>>2]=0,A[l+20>>2]=0,A[l+24>>2]=0,A[l+28>>2]=0;if(ze=a+8|0,c=A[ze>>2]|0,!((c|0)<=0)){Me=a+12|0,te=0;do if(p=A[Me>>2]|0,f=te,te=te+1|0,ie=l+(te<<5)|0,ce=A[p+(f<<3)>>2]|0,ce){if(ue=l+(te<<5)+8|0,F[ue>>3]=17976931348623157e292,a=l+(te<<5)+24|0,F[a>>3]=17976931348623157e292,F[ie>>3]=-17976931348623157e292,ae=l+(te<<5)+16|0,F[ae>>3]=-17976931348623157e292,(ce|0)>0){for(j=A[p+(f<<3)+4>>2]|0,$=17976931348623157e292,H=-17976931348623157e292,p=0,f=-1,ee=0,w=17976931348623157e292,S=17976931348623157e292,R=-17976931348623157e292,v=-17976931348623157e292;g=+F[j+(ee<<4)>>3],U=+F[j+(ee<<4)+8>>3],f=f+2|0,_=+F[j+(((f|0)==(ce|0)?0:f)<<4)+8>>3],g<w&&(F[ue>>3]=g,w=g),U<S&&(F[a>>3]=U,S=U),g>R?F[ie>>3]=g:g=R,U>v&&(F[ae>>3]=U,v=U),$=U>0&U<$?U:$,H=U<0&U>H?U:H,p=p|+yt(+(U-_))>3.141592653589793,f=ee+1|0,(f|0)!=(ce|0);)Oe=ee,ee=f,R=g,f=Oe;p&&(F[ae>>3]=H,F[a>>3]=$)}}else A[ie>>2]=0,A[ie+4>>2]=0,A[ie+8>>2]=0,A[ie+12>>2]=0,A[ie+16>>2]=0,A[ie+20>>2]=0,A[ie+24>>2]=0,A[ie+28>>2]=0,c=A[ze>>2]|0;while((te|0)<(c|0))}}function O2(a,l,c){a=a|0,l=l|0,c=c|0;var f=0,p=0,g=0;if(!(nl(a,l,c)|0))return p=0,p|0;if(p=a+8|0,(A[p>>2]|0)<=0)return p=1,p|0;for(f=a+12|0,a=0;;){if(g=a,a=a+1|0,nl((A[f>>2]|0)+(g<<3)|0,l+(a<<5)|0,c)|0){a=0,f=6;break}if((a|0)>=(A[p>>2]|0)){a=1,f=6;break}}return(f|0)==6?a|0:0}function m4(a,l,c,f){a=a|0,l=l|0,c=c|0,f=f|0;var p=0,g=0,v=0,_=0,w=0,S=0,R=0;if(S=L,L=L+16|0,_=S,v=c+8|0,!(nl(a,l,v)|0))return w=0,L=S,w|0;w=a+8|0;e:do if((A[w>>2]|0)>0){for(g=a+12|0,p=0;;){if(R=p,p=p+1|0,nl((A[g>>2]|0)+(R<<3)|0,l+(p<<5)|0,v)|0){p=0;break}if((p|0)>=(A[w>>2]|0))break e}return L=S,p|0}while(!1);if(Yu(a,l,c,f)|0)return R=0,L=S,R|0;A[_>>2]=A[c>>2],A[_+4>>2]=v,p=A[w>>2]|0;e:do if((p|0)>0)for(a=a+12|0,v=0,g=p;;){if(p=A[a>>2]|0,(A[p+(v<<3)>>2]|0)>0){if(nl(_,f,A[p+(v<<3)+4>>2]|0)|0){p=0;break e}if(p=v+1|0,Yu((A[a>>2]|0)+(v<<3)|0,l+(p<<5)|0,c,f)|0){p=0;break e}g=A[w>>2]|0}else p=v+1|0;if((p|0)<(g|0))v=p;else{p=1;break}}else p=1;while(!1);return R=p,L=S,R|0}function Yu(a,l,c,f){a=a|0,l=l|0,c=c|0,f=f|0;var p=0,g=0,v=0,_=0,w=0,S=0,R=0,U=0,$=0,H=0,j=0,ee=0,ie=0,ce=0,ue=0,ae=0,te=0,Me=0,ze=0,Oe=0,At=0;if(ze=L,L=L+176|0,ue=ze+172|0,p=ze+168|0,ae=ze,!(_2(l,f)|0))return a=0,L=ze,a|0;if(Wx(l,f,ue,p),za(ae|0,c|0,168)|0,(A[c>>2]|0)>0){l=0;do Oe=ae+8+(l<<4)+8|0,ce=+kr(+F[Oe>>3],A[p>>2]|0),F[Oe>>3]=ce,l=l+1|0;while((l|0)<(A[c>>2]|0))}ee=+F[f>>3],ie=+F[f+8>>3],ce=+kr(+F[f+16>>3],A[p>>2]|0),H=+kr(+F[f+24>>3],A[p>>2]|0);e:do if((A[a>>2]|0)>0){if(f=a+4|0,p=A[ae>>2]|0,(p|0)<=0){for(l=0;;)if(l=l+1|0,(l|0)>=(A[a>>2]|0)){l=0;break e}}for(c=0;;){if(l=A[f>>2]|0,$=+F[l+(c<<4)>>3],j=+kr(+F[l+(c<<4)+8>>3],A[ue>>2]|0),l=A[f>>2]|0,c=c+1|0,Oe=(c|0)%(A[a>>2]|0)|0,g=+F[l+(Oe<<4)>>3],v=+kr(+F[l+(Oe<<4)+8>>3],A[ue>>2]|0),!($>=ee)|!(g>=ee)&&!($<=ie)|!(g<=ie)&&!(j<=H)|!(v<=H)&&!(j>=ce)|!(v>=ce)){U=g-$,S=v-j,l=0;do if(At=l,l=l+1|0,Oe=(l|0)==(p|0)?0:l,g=+F[ae+8+(At<<4)+8>>3],v=+F[ae+8+(Oe<<4)+8>>3]-g,_=+F[ae+8+(At<<4)>>3],w=+F[ae+8+(Oe<<4)>>3]-_,R=U*v-S*w,R!=0&&(te=j-g,Me=$-_,w=(te*w-v*Me)/R,!(w<0|w>1))&&(R=(U*te-S*Me)/R,R>=0&R<=1)){l=1;break e}while((l|0)<(p|0))}if((c|0)>=(A[a>>2]|0)){l=0;break}}}else l=0;while(!1);return At=l,L=ze,At|0}function g4(a,l,c,f){a=a|0,l=l|0,c=c|0,f=f|0;var p=0,g=0,v=0;if(Yu(a,l,c,f)|0)return g=1,g|0;if(g=a+8|0,(A[g>>2]|0)<=0)return g=0,g|0;for(p=a+12|0,a=0;;){if(v=a,a=a+1|0,Yu((A[p>>2]|0)+(v<<3)|0,l+(a<<5)|0,c,f)|0){a=1,p=6;break}if((a|0)>=(A[g>>2]|0)){a=0,p=6;break}}return(p|0)==6?a|0:0}function Kb(){return 8}function Zb(){return 16}function Jb(){return 168}function eT(){return 8}function tT(){return 16}function nT(){return 12}function rT(){return 8}function iT(a){return a=a|0,+(+((A[a>>2]|0)>>>0)+4294967296*+(A[a+4>>2]|0))}function sT(a){a=a|0;var l=0,c=0;return c=+F[a>>3],l=+F[a+8>>3],+ +Pt(+(c*c+l*l))}function y4(a,l,c,f,p){a=a|0,l=l|0,c=c|0,f=f|0,p=p|0;var g=0,v=0,_=0,w=0,S=0,R=0,U=0,$=0;S=+F[a>>3],w=+F[l>>3]-S,_=+F[a+8>>3],v=+F[l+8>>3]-_,U=+F[c>>3],g=+F[f>>3]-U,$=+F[c+8>>3],R=+F[f+8>>3]-$,g=(g*(_-$)-(S-U)*R)/(w*R-v*g),F[p>>3]=S+w*g,F[p+8>>3]=_+v*g}function v4(a,l){return a=a|0,l=l|0,+yt(+(+F[a>>3]-+F[l>>3]))<11920928955078125e-23?(l=+yt(+(+F[a+8>>3]-+F[l+8>>3]))<11920928955078125e-23,l|0):(l=0,l|0)}function Fn(a,l){a=a|0,l=l|0;var c=0,f=0,p=0;return p=+F[a>>3]-+F[l>>3],f=+F[a+8>>3]-+F[l+8>>3],c=+F[a+16>>3]-+F[l+16>>3],+(p*p+f*f+c*c)}function oT(a,l){a=a|0,l=l|0;var c=0,f=0,p=0;c=+F[a>>3],f=+Lt(+c),c=+vt(+c),F[l+16>>3]=c,c=+F[a+8>>3],p=f*+Lt(+c),F[l>>3]=p,c=f*+vt(+c),F[l+8>>3]=c}function aT(a,l,c){a=a|0,l=l|0,c=c|0;var f=0,p=0,g=0;if(g=L,L=L+16|0,p=g,f=Yt(a,l)|0,(c+-1|0)>>>0>5||(f=(f|0)!=0,(c|0)==1&f))return p=-1,L=g,p|0;do if(il(a,l,p)|0)f=-1;else if(f){f=((A[26352+(c<<2)>>2]|0)+5-(A[p>>2]|0)|0)%5|0;break}else{f=((A[26384+(c<<2)>>2]|0)+6-(A[p>>2]|0)|0)%6|0;break}while(!1);return p=f,L=g,p|0}function il(a,l,c){a=a|0,l=l|0,c=c|0;var f=0,p=0,g=0,v=0,_=0,w=0,S=0;if(S=L,L=L+32|0,v=S+16|0,_=S,f=Oa(a,l,v)|0,f|0)return c=f,L=S,c|0;g=i4(a,l)|0,w=Sr(a,l)|0,Gx(g,_),f=Vx(g,A[v>>2]|0)|0;e:do if(an(g)|0){do switch(g|0){case 4:{a=0;break}case 14:{a=1;break}case 24:{a=2;break}case 38:{a=3;break}case 49:{a=4;break}case 58:{a=5;break}case 63:{a=6;break}case 72:{a=7;break}case 83:{a=8;break}case 97:{a=9;break}case 107:{a=10;break}case 117:{a=11;break}default:{f=1;break e}}while(!1);if(p=A[26416+(a*24|0)+8>>2]|0,l=A[26416+(a*24|0)+16>>2]|0,a=A[v>>2]|0,(a|0)!=(A[_>>2]|0)&&(_=m2(g)|0,a=A[v>>2]|0,_|(a|0)==(l|0)&&(f=(f+1|0)%6|0)),(w|0)==3&(a|0)==(l|0)){f=(f+5|0)%6|0,p=22;break}(w|0)==5&(a|0)==(p|0)&&(f=(f+1|0)%6|0),p=22}else p=22;while(!1);return(p|0)==22&&(A[c>>2]=f,f=0),c=f,L=S,c|0}function oi(a,l,c,f){a=a|0,l=l|0,c=c|0,f=f|0;var p=0,g=0,v=0,_=0,w=0,S=0,R=0,U=0,$=0,H=0,j=0,ee=0,ie=0,ce=0,ue=0,ae=0;if(ae=L,L=L+32|0,ue=ae+24|0,ie=ae+20|0,j=ae+8|0,H=ae+16|0,$=ae,w=(Yt(a,l)|0)==0,w=w?6:5,R=be(a|0,l|0,52)|0,G()|0,R=R&15,w>>>0<=c>>>0)return f=2,L=ae,f|0;U=(R|0)==0,!U&&(ee=Ne(7,0,(R^15)*3|0)|0,(ee&a|0)==0&((G()|0)&l|0)==0)?p=c:g=4;e:do if((g|0)==4){if(p=(Yt(a,l)|0)!=0,((p?4:5)|0)<(c|0)||il(a,l,ue)|0||(g=(A[ue>>2]|0)+c|0,p?p=26704+(((g|0)%5|0)<<2)|0:p=26736+(((g|0)%6|0)<<2)|0,ee=A[p>>2]|0,(ee|0)==7))return f=1,L=ae,f|0;A[ie>>2]=0,p=Vn(a,l,ee,ie,j)|0;do if(!p){if(_=j,S=A[_>>2]|0,_=A[_+4>>2]|0,v=_>>>0<l>>>0|(_|0)==(l|0)&S>>>0<a>>>0,g=v?S:a,v=v?_:l,!U&&(U=Ne(7,0,(R^15)*3|0)|0,(S&U|0)==0&(_&(G()|0)|0)==0))p=c;else{if(_=(c+-1+w|0)%(w|0)|0,p=Yt(a,l)|0,(_|0)<0&&nt(27795,27797,246,27806),w=(p|0)!=0,((w?4:5)|0)<(_|0)&&nt(27795,27797,246,27806),il(a,l,ue)|0&&nt(27795,27797,246,27806),p=(A[ue>>2]|0)+_|0,w?p=26704+(((p|0)%5|0)<<2)|0:p=26736+(((p|0)%6|0)<<2)|0,_=A[p>>2]|0,(_|0)==7&&nt(27795,27797,246,27806),A[H>>2]=0,p=Vn(a,l,_,H,$)|0,p|0)break;S=$,w=A[S>>2]|0,S=A[S+4>>2]|0;do if(S>>>0<v>>>0|(S|0)==(v|0)&w>>>0<g>>>0){if(Yt(w,S)|0?g=p2(w,S,a,l)|0:g=A[26800+((((A[H>>2]|0)+(A[26768+(_<<2)>>2]|0)|0)%6|0)<<2)>>2]|0,p=Yt(w,S)|0,(g+-1|0)>>>0>5){p=-1,g=w,v=S;break}if(p=(p|0)!=0,(g|0)==1&p){p=-1,g=w,v=S;break}do if(il(w,S,ue)|0)p=-1;else if(p){p=((A[26352+(g<<2)>>2]|0)+5-(A[ue>>2]|0)|0)%5|0;break}else{p=((A[26384+(g<<2)>>2]|0)+6-(A[ue>>2]|0)|0)%6|0;break}while(!1);g=w,v=S}else p=c;while(!1);_=j,S=A[_>>2]|0,_=A[_+4>>2]|0}if((g|0)==(S|0)&(v|0)==(_|0)){if(w=(Yt(S,_)|0)!=0,w?a=p2(S,_,a,l)|0:a=A[26800+((((A[ie>>2]|0)+(A[26768+(ee<<2)>>2]|0)|0)%6|0)<<2)>>2]|0,p=Yt(S,_)|0,(a+-1|0)>>>0<=5&&(ce=(p|0)!=0,!((a|0)==1&ce)))do if(il(S,_,ue)|0)p=-1;else if(ce){p=((A[26352+(a<<2)>>2]|0)+5-(A[ue>>2]|0)|0)%5|0;break}else{p=((A[26384+(a<<2)>>2]|0)+6-(A[ue>>2]|0)|0)%6|0;break}while(!1);else p=-1;p=p+1|0,p=(p|0)==6|w&(p|0)==5?0:p}l=v,a=g;break e}while(!1);return f=p,L=ae,f|0}while(!1);return ce=Ne(p|0,0,56)|0,ue=G()|0|l&-2130706433|536870912,A[f>>2]=ce|a,A[f+4>>2]=ue,f=0,L=ae,f|0}function AT(a,l,c){a=a|0,l=l|0,c=c|0;var f=0,p=0,g=0;return g=(Yt(a,l)|0)==0,f=oi(a,l,0,c)|0,p=(f|0)==0,g?!p||(f=oi(a,l,1,c+8|0)|0,f|0)||(f=oi(a,l,2,c+16|0)|0,f|0)||(f=oi(a,l,3,c+24|0)|0,f|0)||(f=oi(a,l,4,c+32|0)|0,f)?(g=f,g|0):oi(a,l,5,c+40|0)|0:!p||(f=oi(a,l,1,c+8|0)|0,f|0)||(f=oi(a,l,2,c+16|0)|0,f|0)||(f=oi(a,l,3,c+24|0)|0,f|0)||(f=oi(a,l,4,c+32|0)|0,f|0)?(g=f,g|0):(g=c+40|0,A[g>>2]=0,A[g+4>>2]=0,g=0,g|0)}function lT(a,l,c){a=a|0,l=l|0,c=c|0;var f=0,p=0,g=0,v=0,_=0,w=0;return w=L,L=L+192|0,p=w,g=w+168|0,v=be(a|0,l|0,56)|0,G()|0,v=v&7,_=l&-2130706433|134217728,f=Oa(a,_,g)|0,f|0?(_=f,L=w,_|0):(l=be(a|0,l|0,52)|0,G()|0,l=l&15,Yt(a,_)|0?T2(g,l,v,1,p):w2(g,l,v,1,p),_=p+8|0,A[c>>2]=A[_>>2],A[c+4>>2]=A[_+4>>2],A[c+8>>2]=A[_+8>>2],A[c+12>>2]=A[_+12>>2],_=0,L=w,_|0)}function uT(a,l){a=a|0,l=l|0;var c=0,f=0,p=0,g=0;return p=L,L=L+16|0,c=p,!(!0&(l&2013265920|0)==536870912)||(f=l&-2130706433|134217728,!(S2(a,f)|0))?(f=0,L=p,f|0):(g=be(a|0,l|0,56)|0,G()|0,g=(oi(a,f,g&7,c)|0)==0,f=c,f=g&((A[f>>2]|0)==(a|0)?(A[f+4>>2]|0)==(l|0):0)&1,L=p,f|0)}function _4(a,l,c){a=a|0,l=l|0,c=c|0;var f=0;(l|0)>0?(f=Mr(l,4)|0,A[a>>2]=f,f||nt(27819,27842,40,27856)):A[a>>2]=0,A[a+4>>2]=l,A[a+8>>2]=0,A[a+12>>2]=c}function x4(a){a=a|0;var l=0,c=0,f=0,p=0,g=0,v=0,_=0;p=a+4|0,g=a+12|0,v=a+8|0;e:for(;;){for(c=A[p>>2]|0,l=0;;){if((l|0)>=(c|0))break e;if(f=A[a>>2]|0,_=A[f+(l<<2)>>2]|0,!_)l=l+1|0;else break}l=f+(~~(+yt(+(+ro(10,+ +(15-(A[g>>2]|0)|0))*(+F[_>>3]+ +F[_+8>>3])))%+(c|0))>>>0<<2)|0,c=A[l>>2]|0;t:do if(c|0){if(f=_+32|0,(c|0)==(_|0))A[l>>2]=A[f>>2];else{if(c=c+32|0,l=A[c>>2]|0,!l)break;for(;(l|0)!=(_|0);)if(c=l+32|0,l=A[c>>2]|0,!l)break t;A[c>>2]=A[f>>2]}We(_),A[v>>2]=(A[v>>2]|0)+-1}while(!1)}We(A[a>>2]|0)}function b4(a){a=a|0;var l=0,c=0,f=0;for(f=A[a+4>>2]|0,c=0;;){if((c|0)>=(f|0)){l=0,c=4;break}if(l=A[(A[a>>2]|0)+(c<<2)>>2]|0,!l)c=c+1|0;else{c=4;break}}return(c|0)==4?l|0:0}function T4(a,l){a=a|0,l=l|0;var c=0,f=0,p=0,g=0;if(c=~~(+yt(+(+ro(10,+ +(15-(A[a+12>>2]|0)|0))*(+F[l>>3]+ +F[l+8>>3])))%+(A[a+4>>2]|0))>>>0,c=(A[a>>2]|0)+(c<<2)|0,f=A[c>>2]|0,!f)return g=1,g|0;g=l+32|0;do if((f|0)!=(l|0)){if(c=A[f+32>>2]|0,!c)return g=1,g|0;for(p=c;;){if((p|0)==(l|0)){p=8;break}if(c=A[p+32>>2]|0,c)f=p,p=c;else{c=1,p=10;break}}if((p|0)==8){A[f+32>>2]=A[g>>2];break}else if((p|0)==10)return c|0}else A[c>>2]=A[g>>2];while(!1);return We(l),g=a+8|0,A[g>>2]=(A[g>>2]|0)+-1,g=0,g|0}function cT(a,l,c){a=a|0,l=l|0,c=c|0;var f=0,p=0,g=0,v=0;g=Xi(40)|0,g||nt(27872,27842,98,27885),A[g>>2]=A[l>>2],A[g+4>>2]=A[l+4>>2],A[g+8>>2]=A[l+8>>2],A[g+12>>2]=A[l+12>>2],p=g+16|0,A[p>>2]=A[c>>2],A[p+4>>2]=A[c+4>>2],A[p+8>>2]=A[c+8>>2],A[p+12>>2]=A[c+12>>2],A[g+32>>2]=0,p=~~(+yt(+(+ro(10,+ +(15-(A[a+12>>2]|0)|0))*(+F[l>>3]+ +F[l+8>>3])))%+(A[a+4>>2]|0))>>>0,p=(A[a>>2]|0)+(p<<2)|0,f=A[p>>2]|0;do if(!f)A[p>>2]=g;else{for(;!(ka(f,l)|0&&ka(f+16|0,c)|0);)if(p=A[f+32>>2]|0,f=(p|0)==0?f:p,!(A[f+32>>2]|0)){v=10;break}if((v|0)==10){A[f+32>>2]=g;break}return We(g),v=f,v|0}while(!1);return v=a+8|0,A[v>>2]=(A[v>>2]|0)+1,v=g,v|0}function hT(a,l,c){a=a|0,l=l|0,c=c|0;var f=0,p=0;if(p=~~(+yt(+(+ro(10,+ +(15-(A[a+12>>2]|0)|0))*(+F[l>>3]+ +F[l+8>>3])))%+(A[a+4>>2]|0))>>>0,p=A[(A[a>>2]|0)+(p<<2)>>2]|0,!p)return c=0,c|0;if(!c){for(a=p;;){if(ka(a,l)|0){f=10;break}if(a=A[a+32>>2]|0,!a){a=0,f=10;break}}if((f|0)==10)return a|0}for(a=p;;){if(ka(a,l)|0&&ka(a+16|0,c)|0){f=10;break}if(a=A[a+32>>2]|0,!a){a=0,f=10;break}}return(f|0)==10?a|0:0}function fT(a,l){a=a|0,l=l|0;var c=0;if(c=~~(+yt(+(+ro(10,+ +(15-(A[a+12>>2]|0)|0))*(+F[l>>3]+ +F[l+8>>3])))%+(A[a+4>>2]|0))>>>0,a=A[(A[a>>2]|0)+(c<<2)>>2]|0,!a)return c=0,c|0;for(;;){if(ka(a,l)|0){l=5;break}if(a=A[a+32>>2]|0,!a){a=0,l=5;break}}return(l|0)==5?a|0:0}function dT(){return 27904}function oo(a){return a=+a,~~+N4(+a)|0}function Xi(a){a=a|0;var l=0,c=0,f=0,p=0,g=0,v=0,_=0,w=0,S=0,R=0,U=0,$=0,H=0,j=0,ee=0,ie=0,ce=0,ue=0,ae=0,te=0,Me=0;Me=L,L=L+16|0,$=Me;do if(a>>>0<245){if(S=a>>>0<11?16:a+11&-8,a=S>>>3,U=A[6977]|0,c=U>>>a,c&3|0)return l=(c&1^1)+a|0,a=27948+(l<<1<<2)|0,c=a+8|0,f=A[c>>2]|0,p=f+8|0,g=A[p>>2]|0,(g|0)==(a|0)?A[6977]=U&~(1<<l):(A[g+12>>2]=a,A[c>>2]=g),te=l<<3,A[f+4>>2]=te|3,te=f+te+4|0,A[te>>2]=A[te>>2]|1,te=p,L=Me,te|0;if(R=A[6979]|0,S>>>0>R>>>0){if(c|0)return l=2<<a,l=c<<a&(l|0-l),l=(l&0-l)+-1|0,_=l>>>12&16,l=l>>>_,c=l>>>5&8,l=l>>>c,g=l>>>2&4,l=l>>>g,a=l>>>1&2,l=l>>>a,f=l>>>1&1,f=(c|_|g|a|f)+(l>>>f)|0,l=27948+(f<<1<<2)|0,a=l+8|0,g=A[a>>2]|0,_=g+8|0,c=A[_>>2]|0,(c|0)==(l|0)?(a=U&~(1<<f),A[6977]=a):(A[c+12>>2]=l,A[a>>2]=c,a=U),te=f<<3,v=te-S|0,A[g+4>>2]=S|3,p=g+S|0,A[p+4>>2]=v|1,A[g+te>>2]=v,R|0&&(f=A[6982]|0,l=R>>>3,c=27948+(l<<1<<2)|0,l=1<<l,a&l?(a=c+8|0,l=A[a>>2]|0):(A[6977]=a|l,l=c,a=c+8|0),A[a>>2]=f,A[l+12>>2]=f,A[f+8>>2]=l,A[f+12>>2]=c),A[6979]=v,A[6982]=p,te=_,L=Me,te|0;if(g=A[6978]|0,g){for(c=(g&0-g)+-1|0,p=c>>>12&16,c=c>>>p,f=c>>>5&8,c=c>>>f,v=c>>>2&4,c=c>>>v,_=c>>>1&2,c=c>>>_,w=c>>>1&1,w=A[28212+((f|p|v|_|w)+(c>>>w)<<2)>>2]|0,c=w,_=w,w=(A[w+4>>2]&-8)-S|0;a=A[c+16>>2]|0,!(!a&&(a=A[c+20>>2]|0,!a));)v=(A[a+4>>2]&-8)-S|0,p=v>>>0<w>>>0,c=a,_=p?a:_,w=p?v:w;if(v=_+S|0,v>>>0>_>>>0){p=A[_+24>>2]|0,l=A[_+12>>2]|0;do if((l|0)==(_|0)){if(a=_+20|0,l=A[a>>2]|0,!l&&(a=_+16|0,l=A[a>>2]|0,!l)){c=0;break}for(;;)if(f=l+20|0,c=A[f>>2]|0,c)l=c,a=f;else if(f=l+16|0,c=A[f>>2]|0,c)l=c,a=f;else break;A[a>>2]=0,c=l}else c=A[_+8>>2]|0,A[c+12>>2]=l,A[l+8>>2]=c,c=l;while(!1);do if(p|0){if(l=A[_+28>>2]|0,a=28212+(l<<2)|0,(_|0)==(A[a>>2]|0)){if(A[a>>2]=c,!c){A[6978]=g&~(1<<l);break}}else if(te=p+16|0,A[((A[te>>2]|0)==(_|0)?te:p+20|0)>>2]=c,!c)break;A[c+24>>2]=p,l=A[_+16>>2]|0,l|0&&(A[c+16>>2]=l,A[l+24>>2]=c),l=A[_+20>>2]|0,l|0&&(A[c+20>>2]=l,A[l+24>>2]=c)}while(!1);return w>>>0<16?(te=w+S|0,A[_+4>>2]=te|3,te=_+te+4|0,A[te>>2]=A[te>>2]|1):(A[_+4>>2]=S|3,A[v+4>>2]=w|1,A[v+w>>2]=w,R|0&&(f=A[6982]|0,l=R>>>3,c=27948+(l<<1<<2)|0,l=1<<l,l&U?(a=c+8|0,l=A[a>>2]|0):(A[6977]=l|U,l=c,a=c+8|0),A[a>>2]=f,A[l+12>>2]=f,A[f+8>>2]=l,A[f+12>>2]=c),A[6979]=w,A[6982]=v),te=_+8|0,L=Me,te|0}else U=S}else U=S}else U=S}else if(a>>>0<=4294967231)if(a=a+11|0,S=a&-8,f=A[6978]|0,f){p=0-S|0,a=a>>>8,a?S>>>0>16777215?w=31:(U=(a+1048320|0)>>>16&8,ee=a<<U,_=(ee+520192|0)>>>16&4,ee=ee<<_,w=(ee+245760|0)>>>16&2,w=14-(_|U|w)+(ee<<w>>>15)|0,w=S>>>(w+7|0)&1|w<<1):w=0,c=A[28212+(w<<2)>>2]|0;e:do if(!c)c=0,a=0,ee=61;else for(a=0,_=S<<((w|0)==31?0:25-(w>>>1)|0),g=0;;){if(v=(A[c+4>>2]&-8)-S|0,v>>>0<p>>>0)if(v)a=c,p=v;else{a=c,p=0,ee=65;break e}if(ee=A[c+20>>2]|0,c=A[c+16+(_>>>31<<2)>>2]|0,g=(ee|0)==0|(ee|0)==(c|0)?g:ee,c)_=_<<1;else{c=g,ee=61;break}}while(!1);if((ee|0)==61){if((c|0)==0&(a|0)==0){if(a=2<<w,a=(a|0-a)&f,!a){U=S;break}U=(a&0-a)+-1|0,v=U>>>12&16,U=U>>>v,g=U>>>5&8,U=U>>>g,_=U>>>2&4,U=U>>>_,w=U>>>1&2,U=U>>>w,c=U>>>1&1,a=0,c=A[28212+((g|v|_|w|c)+(U>>>c)<<2)>>2]|0}c?ee=65:(_=a,v=p)}if((ee|0)==65)for(g=c;;)if(U=(A[g+4>>2]&-8)-S|0,c=U>>>0<p>>>0,p=c?U:p,a=c?g:a,c=A[g+16>>2]|0,c||(c=A[g+20>>2]|0),c)g=c;else{_=a,v=p;break}if((_|0)!=0&&v>>>0<((A[6979]|0)-S|0)>>>0&&(R=_+S|0,R>>>0>_>>>0)){g=A[_+24>>2]|0,l=A[_+12>>2]|0;do if((l|0)==(_|0)){if(a=_+20|0,l=A[a>>2]|0,!l&&(a=_+16|0,l=A[a>>2]|0,!l)){l=0;break}for(;;)if(p=l+20|0,c=A[p>>2]|0,c)l=c,a=p;else if(p=l+16|0,c=A[p>>2]|0,c)l=c,a=p;else break;A[a>>2]=0}else te=A[_+8>>2]|0,A[te+12>>2]=l,A[l+8>>2]=te;while(!1);do if(g){if(a=A[_+28>>2]|0,c=28212+(a<<2)|0,(_|0)==(A[c>>2]|0)){if(A[c>>2]=l,!l){f=f&~(1<<a),A[6978]=f;break}}else if(te=g+16|0,A[((A[te>>2]|0)==(_|0)?te:g+20|0)>>2]=l,!l)break;A[l+24>>2]=g,a=A[_+16>>2]|0,a|0&&(A[l+16>>2]=a,A[a+24>>2]=l),a=A[_+20>>2]|0,a&&(A[l+20>>2]=a,A[a+24>>2]=l)}while(!1);e:do if(v>>>0<16)te=v+S|0,A[_+4>>2]=te|3,te=_+te+4|0,A[te>>2]=A[te>>2]|1;else{if(A[_+4>>2]=S|3,A[R+4>>2]=v|1,A[R+v>>2]=v,l=v>>>3,v>>>0<256){c=27948+(l<<1<<2)|0,a=A[6977]|0,l=1<<l,a&l?(a=c+8|0,l=A[a>>2]|0):(A[6977]=a|l,l=c,a=c+8|0),A[a>>2]=R,A[l+12>>2]=R,A[R+8>>2]=l,A[R+12>>2]=c;break}if(l=v>>>8,l?v>>>0>16777215?c=31:(ae=(l+1048320|0)>>>16&8,te=l<<ae,ue=(te+520192|0)>>>16&4,te=te<<ue,c=(te+245760|0)>>>16&2,c=14-(ue|ae|c)+(te<<c>>>15)|0,c=v>>>(c+7|0)&1|c<<1):c=0,l=28212+(c<<2)|0,A[R+28>>2]=c,a=R+16|0,A[a+4>>2]=0,A[a>>2]=0,a=1<<c,!(f&a)){A[6978]=f|a,A[l>>2]=R,A[R+24>>2]=l,A[R+12>>2]=R,A[R+8>>2]=R;break}l=A[l>>2]|0;t:do if((A[l+4>>2]&-8|0)!=(v|0)){for(f=v<<((c|0)==31?0:25-(c>>>1)|0);c=l+16+(f>>>31<<2)|0,a=A[c>>2]|0,!!a;)if((A[a+4>>2]&-8|0)==(v|0)){l=a;break t}else f=f<<1,l=a;A[c>>2]=R,A[R+24>>2]=l,A[R+12>>2]=R,A[R+8>>2]=R;break e}while(!1);ae=l+8|0,te=A[ae>>2]|0,A[te+12>>2]=R,A[ae>>2]=R,A[R+8>>2]=te,A[R+12>>2]=l,A[R+24>>2]=0}while(!1);return te=_+8|0,L=Me,te|0}else U=S}else U=S;else U=-1;while(!1);if(c=A[6979]|0,c>>>0>=U>>>0)return l=c-U|0,a=A[6982]|0,l>>>0>15?(te=a+U|0,A[6982]=te,A[6979]=l,A[te+4>>2]=l|1,A[a+c>>2]=l,A[a+4>>2]=U|3):(A[6979]=0,A[6982]=0,A[a+4>>2]=c|3,te=a+c+4|0,A[te>>2]=A[te>>2]|1),te=a+8|0,L=Me,te|0;if(v=A[6980]|0,v>>>0>U>>>0)return ue=v-U|0,A[6980]=ue,te=A[6983]|0,ae=te+U|0,A[6983]=ae,A[ae+4>>2]=ue|1,A[te+4>>2]=U|3,te=te+8|0,L=Me,te|0;if(A[7095]|0?a=A[7097]|0:(A[7097]=4096,A[7096]=4096,A[7098]=-1,A[7099]=-1,A[7100]=0,A[7088]=0,A[7095]=$&-16^1431655768,a=4096),_=U+48|0,w=U+47|0,g=a+w|0,p=0-a|0,S=g&p,S>>>0<=U>>>0||(a=A[7087]|0,a|0&&(R=A[7085]|0,$=R+S|0,$>>>0<=R>>>0|$>>>0>a>>>0)))return te=0,L=Me,te|0;e:do if(A[7088]&4)l=0,ee=143;else{c=A[6983]|0;t:do if(c){for(f=28356;$=A[f>>2]|0,!($>>>0<=c>>>0&&($+(A[f+4>>2]|0)|0)>>>0>c>>>0);)if(a=A[f+8>>2]|0,a)f=a;else{ee=128;break t}if(l=g-v&p,l>>>0<2147483647)if(a=lo(l|0)|0,(a|0)==((A[f>>2]|0)+(A[f+4>>2]|0)|0)){if((a|0)!=-1){v=l,g=a,ee=145;break e}}else f=a,ee=136;else l=0}else ee=128;while(!1);do if((ee|0)==128)if(c=lo(0)|0,(c|0)!=-1&&(l=c,H=A[7096]|0,j=H+-1|0,l=((j&l|0)==0?0:(j+l&0-H)-l|0)+S|0,H=A[7085]|0,j=l+H|0,l>>>0>U>>>0&l>>>0<2147483647)){if($=A[7087]|0,$|0&&j>>>0<=H>>>0|j>>>0>$>>>0){l=0;break}if(a=lo(l|0)|0,(a|0)==(c|0)){v=l,g=c,ee=145;break e}else f=a,ee=136}else l=0;while(!1);do if((ee|0)==136){if(c=0-l|0,!(_>>>0>l>>>0&(l>>>0<2147483647&(f|0)!=-1)))if((f|0)==-1){l=0;break}else{v=l,g=f,ee=145;break e}if(a=A[7097]|0,a=w-l+a&0-a,a>>>0>=2147483647){v=l,g=f,ee=145;break e}if((lo(a|0)|0)==-1){lo(c|0)|0,l=0;break}else{v=a+l|0,g=f,ee=145;break e}}while(!1);A[7088]=A[7088]|4,ee=143}while(!1);if((ee|0)==143&&S>>>0<2147483647&&(ue=lo(S|0)|0,j=lo(0)|0,ie=j-ue|0,ce=ie>>>0>(U+40|0)>>>0,!((ue|0)==-1|ce^1|ue>>>0<j>>>0&((ue|0)!=-1&(j|0)!=-1)^1))&&(v=ce?ie:l,g=ue,ee=145),(ee|0)==145){l=(A[7085]|0)+v|0,A[7085]=l,l>>>0>(A[7086]|0)>>>0&&(A[7086]=l),w=A[6983]|0;e:do if(w){for(l=28356;;){if(a=A[l>>2]|0,c=A[l+4>>2]|0,(g|0)==(a+c|0)){ee=154;break}if(f=A[l+8>>2]|0,f)l=f;else break}if((ee|0)==154&&(ae=l+4|0,(A[l+12>>2]&8|0)==0)&&g>>>0>w>>>0&a>>>0<=w>>>0){A[ae>>2]=c+v,te=(A[6980]|0)+v|0,ue=w+8|0,ue=(ue&7|0)==0?0:0-ue&7,ae=w+ue|0,ue=te-ue|0,A[6983]=ae,A[6980]=ue,A[ae+4>>2]=ue|1,A[w+te+4>>2]=40,A[6984]=A[7099];break}for(g>>>0<(A[6981]|0)>>>0&&(A[6981]=g),c=g+v|0,l=28356;;){if((A[l>>2]|0)==(c|0)){ee=162;break}if(a=A[l+8>>2]|0,a)l=a;else break}if((ee|0)==162&&(A[l+12>>2]&8|0)==0){A[l>>2]=g,R=l+4|0,A[R>>2]=(A[R>>2]|0)+v,R=g+8|0,R=g+((R&7|0)==0?0:0-R&7)|0,l=c+8|0,l=c+((l&7|0)==0?0:0-l&7)|0,S=R+U|0,_=l-R-U|0,A[R+4>>2]=U|3;t:do if((w|0)==(l|0))te=(A[6980]|0)+_|0,A[6980]=te,A[6983]=S,A[S+4>>2]=te|1;else{if((A[6982]|0)==(l|0)){te=(A[6979]|0)+_|0,A[6979]=te,A[6982]=S,A[S+4>>2]=te|1,A[S+te>>2]=te;break}if(a=A[l+4>>2]|0,(a&3|0)==1){v=a&-8,f=a>>>3;n:do if(a>>>0<256)if(a=A[l+8>>2]|0,c=A[l+12>>2]|0,(c|0)==(a|0)){A[6977]=A[6977]&~(1<<f);break}else{A[a+12>>2]=c,A[c+8>>2]=a;break}else{g=A[l+24>>2]|0,a=A[l+12>>2]|0;do if((a|0)==(l|0)){if(c=l+16|0,f=c+4|0,a=A[f>>2]|0,a)c=f;else if(a=A[c>>2]|0,!a){a=0;break}for(;;)if(p=a+20|0,f=A[p>>2]|0,f)a=f,c=p;else if(p=a+16|0,f=A[p>>2]|0,f)a=f,c=p;else break;A[c>>2]=0}else te=A[l+8>>2]|0,A[te+12>>2]=a,A[a+8>>2]=te;while(!1);if(!g)break;c=A[l+28>>2]|0,f=28212+(c<<2)|0;do if((A[f>>2]|0)!=(l|0)){if(te=g+16|0,A[((A[te>>2]|0)==(l|0)?te:g+20|0)>>2]=a,!a)break n}else{if(A[f>>2]=a,a|0)break;A[6978]=A[6978]&~(1<<c);break n}while(!1);if(A[a+24>>2]=g,c=l+16|0,f=A[c>>2]|0,f|0&&(A[a+16>>2]=f,A[f+24>>2]=a),c=A[c+4>>2]|0,!c)break;A[a+20>>2]=c,A[c+24>>2]=a}while(!1);l=l+v|0,p=v+_|0}else p=_;if(l=l+4|0,A[l>>2]=A[l>>2]&-2,A[S+4>>2]=p|1,A[S+p>>2]=p,l=p>>>3,p>>>0<256){c=27948+(l<<1<<2)|0,a=A[6977]|0,l=1<<l,a&l?(a=c+8|0,l=A[a>>2]|0):(A[6977]=a|l,l=c,a=c+8|0),A[a>>2]=S,A[l+12>>2]=S,A[S+8>>2]=l,A[S+12>>2]=c;break}l=p>>>8;do if(!l)f=0;else{if(p>>>0>16777215){f=31;break}ae=(l+1048320|0)>>>16&8,te=l<<ae,ue=(te+520192|0)>>>16&4,te=te<<ue,f=(te+245760|0)>>>16&2,f=14-(ue|ae|f)+(te<<f>>>15)|0,f=p>>>(f+7|0)&1|f<<1}while(!1);if(l=28212+(f<<2)|0,A[S+28>>2]=f,a=S+16|0,A[a+4>>2]=0,A[a>>2]=0,a=A[6978]|0,c=1<<f,!(a&c)){A[6978]=a|c,A[l>>2]=S,A[S+24>>2]=l,A[S+12>>2]=S,A[S+8>>2]=S;break}l=A[l>>2]|0;n:do if((A[l+4>>2]&-8|0)!=(p|0)){for(f=p<<((f|0)==31?0:25-(f>>>1)|0);c=l+16+(f>>>31<<2)|0,a=A[c>>2]|0,!!a;)if((A[a+4>>2]&-8|0)==(p|0)){l=a;break n}else f=f<<1,l=a;A[c>>2]=S,A[S+24>>2]=l,A[S+12>>2]=S,A[S+8>>2]=S;break t}while(!1);ae=l+8|0,te=A[ae>>2]|0,A[te+12>>2]=S,A[ae>>2]=S,A[S+8>>2]=te,A[S+12>>2]=l,A[S+24>>2]=0}while(!1);return te=R+8|0,L=Me,te|0}for(l=28356;a=A[l>>2]|0,!(a>>>0<=w>>>0&&(te=a+(A[l+4>>2]|0)|0,te>>>0>w>>>0));)l=A[l+8>>2]|0;p=te+-47|0,a=p+8|0,a=p+((a&7|0)==0?0:0-a&7)|0,p=w+16|0,a=a>>>0<p>>>0?w:a,l=a+8|0,c=v+-40|0,ue=g+8|0,ue=(ue&7|0)==0?0:0-ue&7,ae=g+ue|0,ue=c-ue|0,A[6983]=ae,A[6980]=ue,A[ae+4>>2]=ue|1,A[g+c+4>>2]=40,A[6984]=A[7099],c=a+4|0,A[c>>2]=27,A[l>>2]=A[7089],A[l+4>>2]=A[7090],A[l+8>>2]=A[7091],A[l+12>>2]=A[7092],A[7089]=g,A[7090]=v,A[7092]=0,A[7091]=l,l=a+24|0;do ae=l,l=l+4|0,A[l>>2]=7;while((ae+8|0)>>>0<te>>>0);if((a|0)!=(w|0)){if(g=a-w|0,A[c>>2]=A[c>>2]&-2,A[w+4>>2]=g|1,A[a>>2]=g,l=g>>>3,g>>>0<256){c=27948+(l<<1<<2)|0,a=A[6977]|0,l=1<<l,a&l?(a=c+8|0,l=A[a>>2]|0):(A[6977]=a|l,l=c,a=c+8|0),A[a>>2]=w,A[l+12>>2]=w,A[w+8>>2]=l,A[w+12>>2]=c;break}if(l=g>>>8,l?g>>>0>16777215?f=31:(ae=(l+1048320|0)>>>16&8,te=l<<ae,ue=(te+520192|0)>>>16&4,te=te<<ue,f=(te+245760|0)>>>16&2,f=14-(ue|ae|f)+(te<<f>>>15)|0,f=g>>>(f+7|0)&1|f<<1):f=0,c=28212+(f<<2)|0,A[w+28>>2]=f,A[w+20>>2]=0,A[p>>2]=0,l=A[6978]|0,a=1<<f,!(l&a)){A[6978]=l|a,A[c>>2]=w,A[w+24>>2]=c,A[w+12>>2]=w,A[w+8>>2]=w;break}l=A[c>>2]|0;t:do if((A[l+4>>2]&-8|0)!=(g|0)){for(f=g<<((f|0)==31?0:25-(f>>>1)|0);c=l+16+(f>>>31<<2)|0,a=A[c>>2]|0,!!a;)if((A[a+4>>2]&-8|0)==(g|0)){l=a;break t}else f=f<<1,l=a;A[c>>2]=w,A[w+24>>2]=l,A[w+12>>2]=w,A[w+8>>2]=w;break e}while(!1);ae=l+8|0,te=A[ae>>2]|0,A[te+12>>2]=w,A[ae>>2]=w,A[w+8>>2]=te,A[w+12>>2]=l,A[w+24>>2]=0}}else te=A[6981]|0,(te|0)==0|g>>>0<te>>>0&&(A[6981]=g),A[7089]=g,A[7090]=v,A[7092]=0,A[6986]=A[7095],A[6985]=-1,A[6990]=27948,A[6989]=27948,A[6992]=27956,A[6991]=27956,A[6994]=27964,A[6993]=27964,A[6996]=27972,A[6995]=27972,A[6998]=27980,A[6997]=27980,A[7e3]=27988,A[6999]=27988,A[7002]=27996,A[7001]=27996,A[7004]=28004,A[7003]=28004,A[7006]=28012,A[7005]=28012,A[7008]=28020,A[7007]=28020,A[7010]=28028,A[7009]=28028,A[7012]=28036,A[7011]=28036,A[7014]=28044,A[7013]=28044,A[7016]=28052,A[7015]=28052,A[7018]=28060,A[7017]=28060,A[7020]=28068,A[7019]=28068,A[7022]=28076,A[7021]=28076,A[7024]=28084,A[7023]=28084,A[7026]=28092,A[7025]=28092,A[7028]=28100,A[7027]=28100,A[7030]=28108,A[7029]=28108,A[7032]=28116,A[7031]=28116,A[7034]=28124,A[7033]=28124,A[7036]=28132,A[7035]=28132,A[7038]=28140,A[7037]=28140,A[7040]=28148,A[7039]=28148,A[7042]=28156,A[7041]=28156,A[7044]=28164,A[7043]=28164,A[7046]=28172,A[7045]=28172,A[7048]=28180,A[7047]=28180,A[7050]=28188,A[7049]=28188,A[7052]=28196,A[7051]=28196,te=v+-40|0,ue=g+8|0,ue=(ue&7|0)==0?0:0-ue&7,ae=g+ue|0,ue=te-ue|0,A[6983]=ae,A[6980]=ue,A[ae+4>>2]=ue|1,A[g+te+4>>2]=40,A[6984]=A[7099];while(!1);if(l=A[6980]|0,l>>>0>U>>>0)return ue=l-U|0,A[6980]=ue,te=A[6983]|0,ae=te+U|0,A[6983]=ae,A[ae+4>>2]=ue|1,A[te+4>>2]=U|3,te=te+8|0,L=Me,te|0}return te=dT()|0,A[te>>2]=12,te=0,L=Me,te|0}function We(a){a=a|0;var l=0,c=0,f=0,p=0,g=0,v=0,_=0,w=0;if(a){c=a+-8|0,p=A[6981]|0,a=A[a+-4>>2]|0,l=a&-8,w=c+l|0;do if(a&1)_=c,v=c;else{if(f=A[c>>2]|0,!(a&3)||(v=c+(0-f)|0,g=f+l|0,v>>>0<p>>>0))return;if((A[6982]|0)==(v|0)){if(a=w+4|0,l=A[a>>2]|0,(l&3|0)!=3){_=v,l=g;break}A[6979]=g,A[a>>2]=l&-2,A[v+4>>2]=g|1,A[v+g>>2]=g;return}if(c=f>>>3,f>>>0<256)if(a=A[v+8>>2]|0,l=A[v+12>>2]|0,(l|0)==(a|0)){A[6977]=A[6977]&~(1<<c),_=v,l=g;break}else{A[a+12>>2]=l,A[l+8>>2]=a,_=v,l=g;break}p=A[v+24>>2]|0,a=A[v+12>>2]|0;do if((a|0)==(v|0)){if(l=v+16|0,c=l+4|0,a=A[c>>2]|0,a)l=c;else if(a=A[l>>2]|0,!a){a=0;break}for(;;)if(f=a+20|0,c=A[f>>2]|0,c)a=c,l=f;else if(f=a+16|0,c=A[f>>2]|0,c)a=c,l=f;else break;A[l>>2]=0}else _=A[v+8>>2]|0,A[_+12>>2]=a,A[a+8>>2]=_;while(!1);if(p){if(l=A[v+28>>2]|0,c=28212+(l<<2)|0,(A[c>>2]|0)==(v|0)){if(A[c>>2]=a,!a){A[6978]=A[6978]&~(1<<l),_=v,l=g;break}}else if(_=p+16|0,A[((A[_>>2]|0)==(v|0)?_:p+20|0)>>2]=a,!a){_=v,l=g;break}A[a+24>>2]=p,l=v+16|0,c=A[l>>2]|0,c|0&&(A[a+16>>2]=c,A[c+24>>2]=a),l=A[l+4>>2]|0,l?(A[a+20>>2]=l,A[l+24>>2]=a,_=v,l=g):(_=v,l=g)}else _=v,l=g}while(!1);if(!(v>>>0>=w>>>0)&&(a=w+4|0,f=A[a>>2]|0,!!(f&1))){if(f&2)A[a>>2]=f&-2,A[_+4>>2]=l|1,A[v+l>>2]=l,p=l;else{if((A[6983]|0)==(w|0)){if(w=(A[6980]|0)+l|0,A[6980]=w,A[6983]=_,A[_+4>>2]=w|1,(_|0)!=(A[6982]|0))return;A[6982]=0,A[6979]=0;return}if((A[6982]|0)==(w|0)){w=(A[6979]|0)+l|0,A[6979]=w,A[6982]=v,A[_+4>>2]=w|1,A[v+w>>2]=w;return}p=(f&-8)+l|0,c=f>>>3;do if(f>>>0<256)if(l=A[w+8>>2]|0,a=A[w+12>>2]|0,(a|0)==(l|0)){A[6977]=A[6977]&~(1<<c);break}else{A[l+12>>2]=a,A[a+8>>2]=l;break}else{g=A[w+24>>2]|0,a=A[w+12>>2]|0;do if((a|0)==(w|0)){if(l=w+16|0,c=l+4|0,a=A[c>>2]|0,a)l=c;else if(a=A[l>>2]|0,!a){c=0;break}for(;;)if(f=a+20|0,c=A[f>>2]|0,c)a=c,l=f;else if(f=a+16|0,c=A[f>>2]|0,c)a=c,l=f;else break;A[l>>2]=0,c=a}else c=A[w+8>>2]|0,A[c+12>>2]=a,A[a+8>>2]=c,c=a;while(!1);if(g|0){if(a=A[w+28>>2]|0,l=28212+(a<<2)|0,(A[l>>2]|0)==(w|0)){if(A[l>>2]=c,!c){A[6978]=A[6978]&~(1<<a);break}}else if(f=g+16|0,A[((A[f>>2]|0)==(w|0)?f:g+20|0)>>2]=c,!c)break;A[c+24>>2]=g,a=w+16|0,l=A[a>>2]|0,l|0&&(A[c+16>>2]=l,A[l+24>>2]=c),a=A[a+4>>2]|0,a|0&&(A[c+20>>2]=a,A[a+24>>2]=c)}}while(!1);if(A[_+4>>2]=p|1,A[v+p>>2]=p,(_|0)==(A[6982]|0)){A[6979]=p;return}}if(a=p>>>3,p>>>0<256){c=27948+(a<<1<<2)|0,l=A[6977]|0,a=1<<a,l&a?(l=c+8|0,a=A[l>>2]|0):(A[6977]=l|a,a=c,l=c+8|0),A[l>>2]=_,A[a+12>>2]=_,A[_+8>>2]=a,A[_+12>>2]=c;return}a=p>>>8,a?p>>>0>16777215?f=31:(v=(a+1048320|0)>>>16&8,w=a<<v,g=(w+520192|0)>>>16&4,w=w<<g,f=(w+245760|0)>>>16&2,f=14-(g|v|f)+(w<<f>>>15)|0,f=p>>>(f+7|0)&1|f<<1):f=0,a=28212+(f<<2)|0,A[_+28>>2]=f,A[_+20>>2]=0,A[_+16>>2]=0,l=A[6978]|0,c=1<<f;e:do if(!(l&c))A[6978]=l|c,A[a>>2]=_,A[_+24>>2]=a,A[_+12>>2]=_,A[_+8>>2]=_;else{a=A[a>>2]|0;t:do if((A[a+4>>2]&-8|0)!=(p|0)){for(f=p<<((f|0)==31?0:25-(f>>>1)|0);c=a+16+(f>>>31<<2)|0,l=A[c>>2]|0,!!l;)if((A[l+4>>2]&-8|0)==(p|0)){a=l;break t}else f=f<<1,a=l;A[c>>2]=_,A[_+24>>2]=a,A[_+12>>2]=_,A[_+8>>2]=_;break e}while(!1);v=a+8|0,w=A[v>>2]|0,A[w+12>>2]=_,A[v>>2]=_,A[_+8>>2]=w,A[_+12>>2]=a,A[_+24>>2]=0}while(!1);if(w=(A[6985]|0)+-1|0,A[6985]=w,!(w|0)){for(a=28364;a=A[a>>2]|0,a;)a=a+8|0;A[6985]=-1}}}}function Mr(a,l){a=a|0,l=l|0;var c=0;return a?(c=Wi(l,a)|0,(l|a)>>>0>65535&&(c=((c>>>0)/(a>>>0)|0|0)==(l|0)?c:-1)):c=0,a=Xi(c)|0,!a||!(A[a+-4>>2]&3)||Ao(a|0,0,c|0)|0,a|0}function je(a,l,c,f){return a=a|0,l=l|0,c=c|0,f=f|0,c=a+c>>>0,ut(l+f+(c>>>0<a>>>0|0)>>>0|0),c|0|0}function Qn(a,l,c,f){return a=a|0,l=l|0,c=c|0,f=f|0,f=l-f-(c>>>0>a>>>0|0)>>>0,ut(f|0),a-c>>>0|0|0}function w4(a){return a=a|0,(a?31-(Ms(a^a-1)|0)|0:32)|0}function U2(a,l,c,f,p){a=a|0,l=l|0,c=c|0,f=f|0,p=p|0;var g=0,v=0,_=0,w=0,S=0,R=0,U=0,$=0,H=0,j=0;if(R=a,w=l,S=w,v=c,$=f,_=$,!S)return g=(p|0)!=0,_?g?(A[p>>2]=a|0,A[p+4>>2]=l&0,$=0,p=0,ut($|0),p|0):($=0,p=0,ut($|0),p|0):(g&&(A[p>>2]=(R>>>0)%(v>>>0),A[p+4>>2]=0),$=0,p=(R>>>0)/(v>>>0)>>>0,ut($|0),p|0);g=(_|0)==0;do if(v){if(!g){if(g=(Ms(_|0)|0)-(Ms(S|0)|0)|0,g>>>0<=31){U=g+1|0,_=31-g|0,l=g-31>>31,v=U,a=R>>>(U>>>0)&l|S<<_,l=S>>>(U>>>0)&l,g=0,_=R<<_;break}return p?(A[p>>2]=a|0,A[p+4>>2]=w|l&0,$=0,p=0,ut($|0),p|0):($=0,p=0,ut($|0),p|0)}if(g=v-1|0,g&v|0){_=(Ms(v|0)|0)+33-(Ms(S|0)|0)|0,j=64-_|0,U=32-_|0,w=U>>31,H=_-32|0,l=H>>31,v=_,a=U-1>>31&S>>>(H>>>0)|(S<<U|R>>>(_>>>0))&l,l=l&S>>>(_>>>0),g=R<<j&w,_=(S<<j|R>>>(H>>>0))&w|R<<U&_-33>>31;break}return p|0&&(A[p>>2]=g&R,A[p+4>>2]=0),(v|0)==1?(H=w|l&0,j=a|0|0,ut(H|0),j|0):(j=w4(v|0)|0,H=S>>>(j>>>0)|0,j=S<<32-j|R>>>(j>>>0)|0,ut(H|0),j|0)}else{if(g)return p|0&&(A[p>>2]=(S>>>0)%(v>>>0),A[p+4>>2]=0),H=0,j=(S>>>0)/(v>>>0)>>>0,ut(H|0),j|0;if(!R)return p|0&&(A[p>>2]=0,A[p+4>>2]=(S>>>0)%(_>>>0)),H=0,j=(S>>>0)/(_>>>0)>>>0,ut(H|0),j|0;if(g=_-1|0,!(g&_))return p|0&&(A[p>>2]=a|0,A[p+4>>2]=g&S|l&0),H=0,j=S>>>((w4(_|0)|0)>>>0),ut(H|0),j|0;if(g=(Ms(_|0)|0)-(Ms(S|0)|0)|0,g>>>0<=30){l=g+1|0,_=31-g|0,v=l,a=S<<_|R>>>(l>>>0),l=S>>>(l>>>0),g=0,_=R<<_;break}return p?(A[p>>2]=a|0,A[p+4>>2]=w|l&0,H=0,j=0,ut(H|0),j|0):(H=0,j=0,ut(H|0),j|0)}while(!1);if(!v)S=_,w=0,_=0;else{U=c|0|0,R=$|f&0,S=je(U|0,R|0,-1,-1)|0,c=G()|0,w=_,_=0;do f=w,w=g>>>31|w<<1,g=_|g<<1,f=a<<1|f>>>31|0,$=a>>>31|l<<1|0,Qn(S|0,c|0,f|0,$|0)|0,j=G()|0,H=j>>31|((j|0)<0?-1:0)<<1,_=H&1,a=Qn(f|0,$|0,H&U|0,(((j|0)<0?-1:0)>>31|((j|0)<0?-1:0)<<1)&R|0)|0,l=G()|0,v=v-1|0;while((v|0)!=0);S=w,w=0}return v=0,p|0&&(A[p>>2]=a,A[p+4>>2]=l),H=(g|0)>>>31|(S|v)<<1|(v<<1|g>>>31)&0|w,j=(g<<1|0)&-2|_,ut(H|0),j|0}function ao(a,l,c,f){a=a|0,l=l|0,c=c|0,f=f|0;var p=0,g=0,v=0,_=0,w=0,S=0;return S=l>>31|((l|0)<0?-1:0)<<1,w=((l|0)<0?-1:0)>>31|((l|0)<0?-1:0)<<1,g=f>>31|((f|0)<0?-1:0)<<1,p=((f|0)<0?-1:0)>>31|((f|0)<0?-1:0)<<1,_=Qn(S^a|0,w^l|0,S|0,w|0)|0,v=G()|0,a=g^S,l=p^w,Qn((U2(_,v,Qn(g^c|0,p^f|0,g|0,p|0)|0,G()|0,0)|0)^a|0,(G()|0)^l|0,a|0,l|0)|0}function pT(a,l){a=a|0,l=l|0;var c=0,f=0,p=0,g=0;return g=a&65535,p=l&65535,c=Wi(p,g)|0,f=a>>>16,a=(c>>>16)+(Wi(p,f)|0)|0,p=l>>>16,l=Wi(p,g)|0,ut((a>>>16)+(Wi(p,f)|0)+(((a&65535)+l|0)>>>16)|0),a+l<<16|c&65535|0|0}function zn(a,l,c,f){a=a|0,l=l|0,c=c|0,f=f|0;var p=0,g=0;return p=a,g=c,c=pT(p,g)|0,a=G()|0,ut((Wi(l,g)|0)+(Wi(f,p)|0)+a|a&0|0),c|0|0|0}function Ga(a,l,c,f){a=a|0,l=l|0,c=c|0,f=f|0;var p=0,g=0,v=0,_=0,w=0,S=0;return p=L,L=L+16|0,_=p|0,v=l>>31|((l|0)<0?-1:0)<<1,g=((l|0)<0?-1:0)>>31|((l|0)<0?-1:0)<<1,S=f>>31|((f|0)<0?-1:0)<<1,w=((f|0)<0?-1:0)>>31|((f|0)<0?-1:0)<<1,a=Qn(v^a|0,g^l|0,v|0,g|0)|0,l=G()|0,U2(a,l,Qn(S^c|0,w^f|0,S|0,w|0)|0,G()|0,_)|0,f=Qn(A[_>>2]^v|0,A[_+4>>2]^g|0,v|0,g|0)|0,c=G()|0,L=p,ut(c|0),f|0}function Va(a,l,c,f){a=a|0,l=l|0,c=c|0,f=f|0;var p=0,g=0;return g=L,L=L+16|0,p=g|0,U2(a,l,c,f,p)|0,L=g,ut(A[p+4>>2]|0),A[p>>2]|0|0}function S4(a,l,c){return a=a|0,l=l|0,c=c|0,(c|0)<32?(ut(l>>c|0),a>>>c|(l&(1<<c)-1)<<32-c):(ut(((l|0)<0?-1:0)|0),l>>c-32|0)}function be(a,l,c){return a=a|0,l=l|0,c=c|0,(c|0)<32?(ut(l>>>c|0),a>>>c|(l&(1<<c)-1)<<32-c):(ut(0),l>>>c-32|0)}function Ne(a,l,c){return a=a|0,l=l|0,c=c|0,(c|0)<32?(ut(l<<c|(a&(1<<c)-1<<32-c)>>>32-c|0),a<<c):(ut(a<<c-32|0),0)}function M4(a,l,c){return a=a|0,l=l|0,l=Ms(l)|0,(l|0)==32&&(l=l+(Ms(a)|0)|0),ut(0),l|0}function E4(a,l){return a=+a,l=+l,a!=a?+l:l!=l?+a:+Tx(+a,+l)}function Ku(a,l){return a=+a,l=+l,a!=a?+l:l!=l?+a:+d2(+a,+l)}function Zu(a){return a=+a,a>=0?+Gn(a+.5):+Ia(a-.5)}function za(a,l,c){a=a|0,l=l|0,c=c|0;var f=0,p=0,g=0;if((c|0)>=8192)return Sx(a|0,l|0,c|0)|0,a|0;if(g=a|0,p=a+c|0,(a&3)==(l&3)){for(;a&3;){if(!c)return g|0;we[a>>0]=we[l>>0]|0,a=a+1|0,l=l+1|0,c=c-1|0}for(c=p&-4|0,f=c-64|0;(a|0)<=(f|0);)A[a>>2]=A[l>>2],A[a+4>>2]=A[l+4>>2],A[a+8>>2]=A[l+8>>2],A[a+12>>2]=A[l+12>>2],A[a+16>>2]=A[l+16>>2],A[a+20>>2]=A[l+20>>2],A[a+24>>2]=A[l+24>>2],A[a+28>>2]=A[l+28>>2],A[a+32>>2]=A[l+32>>2],A[a+36>>2]=A[l+36>>2],A[a+40>>2]=A[l+40>>2],A[a+44>>2]=A[l+44>>2],A[a+48>>2]=A[l+48>>2],A[a+52>>2]=A[l+52>>2],A[a+56>>2]=A[l+56>>2],A[a+60>>2]=A[l+60>>2],a=a+64|0,l=l+64|0;for(;(a|0)<(c|0);)A[a>>2]=A[l>>2],a=a+4|0,l=l+4|0}else for(c=p-4|0;(a|0)<(c|0);)we[a>>0]=we[l>>0]|0,we[a+1>>0]=we[l+1>>0]|0,we[a+2>>0]=we[l+2>>0]|0,we[a+3>>0]=we[l+3>>0]|0,a=a+4|0,l=l+4|0;for(;(a|0)<(p|0);)we[a>>0]=we[l>>0]|0,a=a+1|0,l=l+1|0;return g|0}function Ao(a,l,c){a=a|0,l=l|0,c=c|0;var f=0,p=0,g=0,v=0;if(g=a+c|0,l=l&255,(c|0)>=67){for(;a&3;)we[a>>0]=l,a=a+1|0;for(f=g&-4|0,v=l|l<<8|l<<16|l<<24,p=f-64|0;(a|0)<=(p|0);)A[a>>2]=v,A[a+4>>2]=v,A[a+8>>2]=v,A[a+12>>2]=v,A[a+16>>2]=v,A[a+20>>2]=v,A[a+24>>2]=v,A[a+28>>2]=v,A[a+32>>2]=v,A[a+36>>2]=v,A[a+40>>2]=v,A[a+44>>2]=v,A[a+48>>2]=v,A[a+52>>2]=v,A[a+56>>2]=v,A[a+60>>2]=v,a=a+64|0;for(;(a|0)<(f|0);)A[a>>2]=v,a=a+4|0}for(;(a|0)<(g|0);)we[a>>0]=l,a=a+1|0;return g-c|0}function N4(a){return a=+a,a>=0?+Gn(a+.5):+Ia(a-.5)}function lo(a){a=a|0;var l=0,c=0,f=0;return f=wx()|0,c=A[Gt>>2]|0,l=c+a|0,(a|0)>0&(l|0)<(c|0)|(l|0)<0?(Ex(l|0)|0,q3(12),-1):(l|0)>(f|0)&&!(Mx(l|0)|0)?(q3(12),-1):(A[Gt>>2]=l,c|0)}return{___divdi3:ao,___muldi3:zn,___remdi3:Ga,___uremdi3:Va,_areNeighborCells:ib,_bitshift64Ashr:S4,_bitshift64Lshr:be,_bitshift64Shl:Ne,_calloc:Mr,_cellAreaKm2:Lb,_cellAreaM2:Ib,_cellAreaRads2:L2,_cellToBoundary:Ua,_cellToCenterChild:o4,_cellToChildPos:Mb,_cellToChildren:gb,_cellToChildrenSize:JA,_cellToLatLng:Wo,_cellToLocalIj:zb,_cellToParent:E2,_cellToVertex:oi,_cellToVertexes:AT,_cellsToDirectedEdge:sb,_cellsToLinkedMultiPolygon:Ux,_childPosToCell:Eb,_compactCells:yb,_destroyLinkedMultiPolygon:c4,_directedEdgeToBoundary:Wu,_directedEdgeToCells:lb,_edgeLengthKm:Ob,_edgeLengthM:Ub,_edgeLengthRads:qb,_emscripten_replace_memory:Nx,_free:We,_getBaseCellNumber:i4,_getDirectedEdgeDestination:ab,_getDirectedEdgeOrigin:ob,_getHexagonAreaAvgKm2:l4,_getHexagonAreaAvgM2:Bb,_getHexagonEdgeLengthAvgKm:Db,_getHexagonEdgeLengthAvgM:Fb,_getIcosahedronFaces:a4,_getNumCells:Qu,_getPentagons:B2,_getRes0Cells:$x,_getResolution:mb,_greatCircleDistanceKm:tl,_greatCircleDistanceM:Rb,_greatCircleDistanceRads:Nb,_gridDisk:O3,_gridDiskDistances:U3,_gridDistance:Hb,_gridPathCells:Wb,_gridPathCellsSize:jb,_gridRing:Fx,_gridRingUnsafe:G3,_i64Add:je,_i64Subtract:Qn,_isPentagon:Yt,_isResClassIII:xb,_isValidCell:S2,_isValidDirectedEdge:Ab,_isValidVertex:uT,_latLngToCell:C2,_llvm_ctlz_i64:M4,_llvm_maxnum_f64:E4,_llvm_minnum_f64:Ku,_llvm_round_f64:Zu,_localIjToCell:$b,_malloc:Xi,_maxFaceCount:wb,_maxGridDiskSize:Dx,_maxPolygonToCellsSize:Ix,_maxPolygonToCellsSizeExperimental:Yb,_memcpy:za,_memset:Ao,_originToDirectedEdges:ub,_pentagonCount:Sb,_polygonToCells:qx,_polygonToCellsExperimental:Xb,_readInt64AsDoubleFromPointer:iT,_res0CellCount:zx,_round:N4,_sbrk:lo,_sizeOfCellBoundary:Jb,_sizeOfCoordIJ:rT,_sizeOfGeoLoop:eT,_sizeOfGeoPolygon:tT,_sizeOfH3Index:Kb,_sizeOfLatLng:Zb,_sizeOfLinkedGeoPolygon:nT,_uncompactCells:vb,_uncompactCellsSize:_b,_vertexToLatLng:lT,establishStackSpace:Bx,stackAlloc:Rx,stackRestore:Px,stackSave:Cx}})(De,rt,W);e.___divdi3=ge.___divdi3,e.___muldi3=ge.___muldi3,e.___remdi3=ge.___remdi3,e.___uremdi3=ge.___uremdi3,e._areNeighborCells=ge._areNeighborCells,e._bitshift64Ashr=ge._bitshift64Ashr,e._bitshift64Lshr=ge._bitshift64Lshr,e._bitshift64Shl=ge._bitshift64Shl,e._calloc=ge._calloc,e._cellAreaKm2=ge._cellAreaKm2,e._cellAreaM2=ge._cellAreaM2,e._cellAreaRads2=ge._cellAreaRads2,e._cellToBoundary=ge._cellToBoundary,e._cellToCenterChild=ge._cellToCenterChild,e._cellToChildPos=ge._cellToChildPos,e._cellToChildren=ge._cellToChildren,e._cellToChildrenSize=ge._cellToChildrenSize,e._cellToLatLng=ge._cellToLatLng,e._cellToLocalIj=ge._cellToLocalIj,e._cellToParent=ge._cellToParent,e._cellToVertex=ge._cellToVertex,e._cellToVertexes=ge._cellToVertexes,e._cellsToDirectedEdge=ge._cellsToDirectedEdge,e._cellsToLinkedMultiPolygon=ge._cellsToLinkedMultiPolygon,e._childPosToCell=ge._childPosToCell,e._compactCells=ge._compactCells,e._destroyLinkedMultiPolygon=ge._destroyLinkedMultiPolygon,e._directedEdgeToBoundary=ge._directedEdgeToBoundary,e._directedEdgeToCells=ge._directedEdgeToCells,e._edgeLengthKm=ge._edgeLengthKm,e._edgeLengthM=ge._edgeLengthM,e._edgeLengthRads=ge._edgeLengthRads;var Dn=e._emscripten_replace_memory=ge._emscripten_replace_memory;e._free=ge._free,e._getBaseCellNumber=ge._getBaseCellNumber,e._getDirectedEdgeDestination=ge._getDirectedEdgeDestination,e._getDirectedEdgeOrigin=ge._getDirectedEdgeOrigin,e._getHexagonAreaAvgKm2=ge._getHexagonAreaAvgKm2,e._getHexagonAreaAvgM2=ge._getHexagonAreaAvgM2,e._getHexagonEdgeLengthAvgKm=ge._getHexagonEdgeLengthAvgKm,e._getHexagonEdgeLengthAvgM=ge._getHexagonEdgeLengthAvgM,e._getIcosahedronFaces=ge._getIcosahedronFaces,e._getNumCells=ge._getNumCells,e._getPentagons=ge._getPentagons,e._getRes0Cells=ge._getRes0Cells,e._getResolution=ge._getResolution,e._greatCircleDistanceKm=ge._greatCircleDistanceKm,e._greatCircleDistanceM=ge._greatCircleDistanceM,e._greatCircleDistanceRads=ge._greatCircleDistanceRads,e._gridDisk=ge._gridDisk,e._gridDiskDistances=ge._gridDiskDistances,e._gridDistance=ge._gridDistance,e._gridPathCells=ge._gridPathCells,e._gridPathCellsSize=ge._gridPathCellsSize,e._gridRing=ge._gridRing,e._gridRingUnsafe=ge._gridRingUnsafe,e._i64Add=ge._i64Add,e._i64Subtract=ge._i64Subtract,e._isPentagon=ge._isPentagon,e._isResClassIII=ge._isResClassIII,e._isValidCell=ge._isValidCell,e._isValidDirectedEdge=ge._isValidDirectedEdge,e._isValidVertex=ge._isValidVertex,e._latLngToCell=ge._latLngToCell,e._llvm_ctlz_i64=ge._llvm_ctlz_i64,e._llvm_maxnum_f64=ge._llvm_maxnum_f64,e._llvm_minnum_f64=ge._llvm_minnum_f64,e._llvm_round_f64=ge._llvm_round_f64,e._localIjToCell=ge._localIjToCell,e._malloc=ge._malloc,e._maxFaceCount=ge._maxFaceCount,e._maxGridDiskSize=ge._maxGridDiskSize,e._maxPolygonToCellsSize=ge._maxPolygonToCellsSize,e._maxPolygonToCellsSizeExperimental=ge._maxPolygonToCellsSizeExperimental,e._memcpy=ge._memcpy,e._memset=ge._memset,e._originToDirectedEdges=ge._originToDirectedEdges,e._pentagonCount=ge._pentagonCount,e._polygonToCells=ge._polygonToCells,e._polygonToCellsExperimental=ge._polygonToCellsExperimental,e._readInt64AsDoubleFromPointer=ge._readInt64AsDoubleFromPointer,e._res0CellCount=ge._res0CellCount,e._round=ge._round,e._sbrk=ge._sbrk,e._sizeOfCellBoundary=ge._sizeOfCellBoundary,e._sizeOfCoordIJ=ge._sizeOfCoordIJ,e._sizeOfGeoLoop=ge._sizeOfGeoLoop,e._sizeOfGeoPolygon=ge._sizeOfGeoPolygon,e._sizeOfH3Index=ge._sizeOfH3Index,e._sizeOfLatLng=ge._sizeOfLatLng,e._sizeOfLinkedGeoPolygon=ge._sizeOfLinkedGeoPolygon,e._uncompactCells=ge._uncompactCells,e._uncompactCellsSize=ge._uncompactCellsSize,e._vertexToLatLng=ge._vertexToLatLng,e.establishStackSpace=ge.establishStackSpace;var ei=e.stackAlloc=ge.stackAlloc,Hi=e.stackRestore=ge.stackRestore,I3=e.stackSave=ge.stackSave;if(e.asm=ge,e.cwrap=P,e.setValue=b,e.getValue=T,Si){Da(Si)||(Si=s(Si));{$i();var La=function(fe){fe.byteLength&&(fe=new Uint8Array(fe)),Z.set(fe,x),e.memoryInitializerRequest&&delete e.memoryInitializerRequest.response,a2()},ti=function(){o(Si,La,function(){throw"could not load memory initializer "+Si})},ni=le(Si);if(ni)La(ni.buffer);else if(e.memoryInitializerRequest){var no=function(){var fe=e.memoryInitializerRequest,xe=fe.response;if(fe.status!==200&&fe.status!==0){var Le=le(e.memoryInitializerRequestURL);if(Le)xe=Le.buffer;else{console.warn("a problem seems to have happened with Module.memoryInitializerRequest, status: "+fe.status+", retrying "+Si),ti();return}}La(xe)};e.memoryInitializerRequest.response?setTimeout(no,0):e.memoryInitializerRequest.addEventListener("load",no)}else ti()}}var ji;Ur=function fe(){ji||Ss(),ji||(Ur=fe)};function Ss(fe){if(sr>0||(It(),sr>0))return;function xe(){ji||(ji=!0,!M&&(dn(),Nn(),e.onRuntimeInitialized&&e.onRuntimeInitialized(),sn()))}e.setStatus?(e.setStatus("Running..."),setTimeout(function(){setTimeout(function(){e.setStatus("")},1),xe()},1)):xe()}e.run=Ss;function Mi(fe){throw e.onAbort&&e.onAbort(fe),fe+="",u(fe),h(fe),M=!0,"abort("+fe+"). Build with -s ASSERTIONS=1 for more info."}if(e.abort=Mi,e.preInit)for(typeof e.preInit=="function"&&(e.preInit=[e.preInit]);e.preInit.length>0;)e.preInit.pop()();return Ss(),r})(typeof Et=="object"?Et:{}),ot="number",Ze=ot,cl=ot,it=ot,st=ot,$n=ot,Ue=ot,uP=[["sizeOfH3Index",ot],["sizeOfLatLng",ot],["sizeOfCellBoundary",ot],["sizeOfGeoLoop",ot],["sizeOfGeoPolygon",ot],["sizeOfLinkedGeoPolygon",ot],["sizeOfCoordIJ",ot],["readInt64AsDoubleFromPointer",ot],["isValidCell",cl,[it,st]],["latLngToCell",Ze,[ot,ot,$n,Ue]],["cellToLatLng",Ze,[it,st,Ue]],["cellToBoundary",Ze,[it,st,Ue]],["maxGridDiskSize",Ze,[ot,Ue]],["gridDisk",Ze,[it,st,ot,Ue]],["gridDiskDistances",Ze,[it,st,ot,Ue,Ue]],["gridRing",Ze,[it,st,ot,Ue]],["gridRingUnsafe",Ze,[it,st,ot,Ue]],["maxPolygonToCellsSize",Ze,[Ue,$n,ot,Ue]],["polygonToCells",Ze,[Ue,$n,ot,Ue]],["maxPolygonToCellsSizeExperimental",Ze,[Ue,$n,ot,Ue]],["polygonToCellsExperimental",Ze,[Ue,$n,ot,ot,ot,Ue]],["cellsToLinkedMultiPolygon",Ze,[Ue,ot,Ue]],["destroyLinkedMultiPolygon",null,[Ue]],["compactCells",Ze,[Ue,Ue,ot,ot]],["uncompactCells",Ze,[Ue,ot,ot,Ue,ot,$n]],["uncompactCellsSize",Ze,[Ue,ot,ot,$n,Ue]],["isPentagon",cl,[it,st]],["isResClassIII",cl,[it,st]],["getBaseCellNumber",ot,[it,st]],["getResolution",ot,[it,st]],["maxFaceCount",Ze,[it,st,Ue]],["getIcosahedronFaces",Ze,[it,st,Ue]],["cellToParent",Ze,[it,st,$n,Ue]],["cellToChildren",Ze,[it,st,$n,Ue]],["cellToCenterChild",Ze,[it,st,$n,Ue]],["cellToChildrenSize",Ze,[it,st,$n,Ue]],["cellToChildPos",Ze,[it,st,$n,Ue]],["childPosToCell",Ze,[ot,ot,it,st,$n,Ue]],["areNeighborCells",Ze,[it,st,it,st,Ue]],["cellsToDirectedEdge",Ze,[it,st,it,st,Ue]],["getDirectedEdgeOrigin",Ze,[it,st,Ue]],["getDirectedEdgeDestination",Ze,[it,st,Ue]],["isValidDirectedEdge",cl,[it,st]],["directedEdgeToCells",Ze,[it,st,Ue]],["originToDirectedEdges",Ze,[it,st,Ue]],["directedEdgeToBoundary",Ze,[it,st,Ue]],["gridDistance",Ze,[it,st,it,st,Ue]],["gridPathCells",Ze,[it,st,it,st,Ue]],["gridPathCellsSize",Ze,[it,st,it,st,Ue]],["cellToLocalIj",Ze,[it,st,it,st,ot,Ue]],["localIjToCell",Ze,[it,st,Ue,ot,Ue]],["getHexagonAreaAvgM2",Ze,[$n,Ue]],["getHexagonAreaAvgKm2",Ze,[$n,Ue]],["getHexagonEdgeLengthAvgM",Ze,[$n,Ue]],["getHexagonEdgeLengthAvgKm",Ze,[$n,Ue]],["greatCircleDistanceM",ot,[Ue,Ue]],["greatCircleDistanceKm",ot,[Ue,Ue]],["greatCircleDistanceRads",ot,[Ue,Ue]],["cellAreaM2",Ze,[it,st,Ue]],["cellAreaKm2",Ze,[it,st,Ue]],["cellAreaRads2",Ze,[it,st,Ue]],["edgeLengthM",Ze,[it,st,Ue]],["edgeLengthKm",Ze,[it,st,Ue]],["edgeLengthRads",Ze,[it,st,Ue]],["getNumCells",Ze,[$n,Ue]],["getRes0Cells",Ze,[Ue]],["res0CellCount",ot],["getPentagons",Ze,[ot,Ue]],["pentagonCount",ot],["cellToVertex",Ze,[it,st,ot,Ue]],["cellToVertexes",Ze,[it,st,Ue]],["vertexToLatLng",Ze,[it,st,Ue]],["isValidVertex",cl,[it,st]]],cP=0,hP=1,fP=2,dP=3,Q7=4,pP=5,mP=6,gP=7,yP=8,vP=9,_P=10,xP=11,bP=12,TP=13,wP=14,SP=15,nr={};nr[cP]="Success";nr[hP]="The operation failed but a more specific error is not available";nr[fP]="Argument was outside of acceptable range";nr[dP]="Latitude or longitude arguments were outside of acceptable range";nr[Q7]="Resolution argument was outside of acceptable range";nr[pP]="Cell argument was not valid";nr[mP]="Directed edge argument was not valid";nr[gP]="Undirected edge argument was not valid";nr[yP]="Vertex argument was not valid";nr[vP]="Pentagon distortion was encountered";nr[_P]="Duplicate input";nr[xP]="Cell arguments were not neighbors";nr[bP]="Cell arguments had incompatible resolutions";nr[TP]="Memory allocation failed";nr[wP]="Bounds of provided memory were insufficient";nr[SP]="Mode or flags argument was not valid";var MP=1e3,X7=1001,Y7=1002,S1={};S1[MP]="Unknown unit";S1[X7]="Array length out of bounds";S1[Y7]="Got unexpected null value for H3 index";var EP="Unknown error";function K7(r,e,t){var n=t&&"value"in t,i=new Error((r[e]||EP)+" (code: "+e+(n?", value: "+t.value:"")+")");return i.code=e,i}function Z7(r,e){var t=arguments.length===2?{value:e}:{};return K7(nr,r,t)}function J7(r,e){var t=arguments.length===2?{value:e}:{};return K7(S1,r,t)}function cu(r){if(r!==0)throw Z7(r)}var Fr={};uP.forEach(function(e){Fr[e[0]]=Et.cwrap.apply(Et,e)});var yA=16,hu=4,IA=8,NP=8,Jc=Fr.sizeOfH3Index(),lp=Fr.sizeOfLatLng(),RP=Fr.sizeOfCellBoundary(),CP=Fr.sizeOfGeoPolygon(),Hl=Fr.sizeOfGeoLoop();Fr.sizeOfLinkedGeoPolygon();Fr.sizeOfCoordIJ();function PP(r){if(typeof r!="number"||r<0||r>15||Math.floor(r)!==r)throw Z7(Q7,r);return r}function BP(r){if(!r)throw J7(Y7);return r}var DP=Math.pow(2,32)-1;function FP(r){if(r>DP)throw J7(X7,r);return r}var LP=/[^0-9a-fA-F]/;function e8(r){if(Array.isArray(r)&&r.length===2&&Number.isInteger(r[0])&&Number.isInteger(r[1]))return r;if(typeof r!="string"||LP.test(r))return[0,0];var e=parseInt(r.substring(0,r.length-8),yA),t=parseInt(r.substring(r.length-8),yA);return[t,e]}function o5(r){if(r>=0)return r.toString(yA);r=r&2147483647;var e=t8(8,r.toString(yA)),t=(parseInt(e[0],yA)+8).toString(yA);return e=t+e.substring(1),e}function IP(r,e){return o5(e)+t8(8,o5(r))}function t8(r,e){for(var t=r-e.length,n="",i=0;i<t;i++)n+="0";return n=n+e,n}function a5(r,e,t){for(var n=r.length,i=Et._calloc(n,lp),s=t?1:0,o=t?0:1,u=0;u<n*2;u+=2)Et.HEAPF64.set([r[u/2][s],r[u/2][o]].map(s8),i/IA+u);return Et.HEAPU32.set([n,i],e/hu),e}function qP(r,e){var t=r.length-1,n=Et._calloc(CP),i=0,s=i+Hl,o=s+hu;a5(r[0],n+i,e);var u;if(t>0){u=Et._calloc(t,Hl);for(var h=0;h<t;h++)a5(r[h+1],u+Hl*h,e)}return Et.setValue(n+s,t,"i32"),Et.setValue(n+o,u,"i32"),n}function OP(r){var e=0,t=e+Hl,n=t+hu,i=hu;Et._free(Et.getValue(r+e+i,"i8*"));var s=Et.getValue(r+t,"i32");if(s>0){for(var o=Et.getValue(r+n,"i32"),u=0;u<s;u++)Et._free(Et.getValue(o+Hl*u+i,"i8*"));Et._free(o)}Et._free(r)}function n8(r,e){e===void 0&&(e=0);var t=Et.getValue(r+Jc*e,"i32"),n=Et.getValue(r+Jc*e+hu,"i32");return n?IP(t,n):null}function UP(r){return Fr.readInt64AsDoubleFromPointer(r)}function kP(r,e){for(var t=[],n=0;n<e;n++){var i=n8(r,n);i!==null&&t.push(i)}return t}function e1(r){return HP(Et.getValue(r,"double"))}function GP(r){return[e1(r),e1(r+IA)]}function VP(r){return[e1(r+IA),e1(r)]}function zP(r,e,t){for(var n=Et.getValue(r,"i32"),i=r+IA,s=[],o=VP,u=0;u<n*2;u+=2)s.push(o(i+IA*u));return s.push(s[0]),s}function $P(r,e,t){var n=Et._malloc(lp);Et.HEAPF64.set([r,e].map(s8),n/IA);var i=Et._malloc(Jc);try{return cu(Fr.latLngToCell(n,t,i)),BP(n8(i))}finally{Et._free(i),Et._free(n)}}function r8(r){var e=Et._malloc(lp),t=e8(r),n=t[0],i=t[1];try{return cu(Fr.cellToLatLng(n,i,e)),GP(e)}finally{Et._free(e)}}function i8(r,e){var t=Et._malloc(RP),n=e8(r),i=n[0],s=n[1];try{return cu(Fr.cellToBoundary(i,s,t)),zP(t,e,e)}finally{Et._free(t)}}function A5(r,e,t){if(PP(e),t=!!t,r.length===0||r[0].length===0)return[];var n=typeof r[0][0]=="number"?[r]:r,i=qP(n,t),s=Et._malloc(NP);try{cu(Fr.maxPolygonToCellsSize(i,e,0,s));var o=FP(UP(s)),u=Et._calloc(o,Jc);try{return cu(Fr.polygonToCells(i,e,0,u)),kP(u,o)}finally{Et._free(u)}}finally{Et._free(s),OP(i)}}function s8(r){return r*Math.PI/180}function HP(r){return r*180/Math.PI}function jP(r){return r=Math.max(0,Math.min(1,r)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+r*(1172.33-r*(10793.56-r*(33300.12-r*(38394.49-r*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+r*(557.33+r*(1225.33-r*(3574.96-r*(1073.77+r*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+r*(3211.1-r*(15327.97-r*(27814-r*(22569.18-r*6838.66)))))))+")"}/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const WP=["alphaMap","alphaTest","anisotropy","anisotropyMap","anisotropyRotation","aoMap","aoMapIntensity","attenuationColor","attenuationDistance","bumpMap","clearcoat","clearcoatMap","clearcoatNormalMap","clearcoatNormalScale","clearcoatRoughness","color","dispersion","displacementMap","emissive","emissiveIntensity","emissiveMap","envMap","envMapIntensity","gradientMap","ior","iridescence","iridescenceIOR","iridescenceMap","iridescenceThicknessMap","lightMap","lightMapIntensity","map","matcap","metalness","metalnessMap","normalMap","normalScale","opacity","roughness","roughnessMap","sheen","sheenColor","sheenColorMap","sheenRoughnessMap","shininess","specular","specularColor","specularColorMap","specularIntensity","specularIntensityMap","specularMap","thickness","transmission","transmissionMap"],eh=new WeakMap;class QP{constructor(e){this.renderObjects=new WeakMap,this.hasNode=this.containsNode(e),this.hasAnimation=e.object.isSkinnedMesh===!0,this.refreshUniforms=WP,this.renderId=0}firstInitialization(e){return this.renderObjects.has(e)===!1?(this.getRenderObjectData(e),!0):!1}needsVelocity(e){const t=e.getMRT();return t!==null&&t.has("velocity")}getRenderObjectData(e){let t=this.renderObjects.get(e);if(t===void 0){const{geometry:n,material:i,object:s}=e;if(t={material:this.getMaterialData(i),geometry:{id:n.id,attributes:this.getAttributesData(n.attributes),indexVersion:n.index?n.index.version:null,drawRange:{start:n.drawRange.start,count:n.drawRange.count}},worldMatrix:s.matrixWorld.clone()},s.center&&(t.center=s.center.clone()),s.morphTargetInfluences&&(t.morphTargetInfluences=s.morphTargetInfluences.slice()),e.bundle!==null&&(t.version=e.bundle.version),t.material.transmission>0){const{width:o,height:u}=e.context;t.bufferWidth=o,t.bufferHeight=u}t.lights=this.getLightsData(e.lightsNode.getLights()),this.renderObjects.set(e,t)}return t}getAttributesData(e){const t={};for(const n in e){const i=e[n];t[n]={version:i.version}}return t}containsNode(e){const t=e.material;for(const n in t)if(t[n]&&t[n].isNode)return!0;return e.renderer.overrideNodes.modelViewMatrix!==null||e.renderer.overrideNodes.modelNormalViewMatrix!==null}getMaterialData(e){const t={};for(const n of this.refreshUniforms){const i=e[n];i!=null&&(typeof i=="object"&&i.clone!==void 0?i.isTexture===!0?t[n]={id:i.id,version:i.version}:t[n]=i.clone():t[n]=i)}return t}equals(e,t){const{object:n,material:i,geometry:s}=e,o=this.getRenderObjectData(e);if(o.worldMatrix.equals(n.matrixWorld)!==!0)return o.worldMatrix.copy(n.matrixWorld),!1;const u=o.material;for(const N in u){const C=u[N],B=i[N];if(C.equals!==void 0){if(C.equals(B)===!1)return C.copy(B),!1}else if(B.isTexture===!0){if(C.id!==B.id||C.version!==B.version)return C.id=B.id,C.version=B.version,!1}else if(C!==B)return u[N]=B,!1}if(u.transmission>0){const{width:N,height:C}=e.context;if(o.bufferWidth!==N||o.bufferHeight!==C)return o.bufferWidth=N,o.bufferHeight=C,!1}const h=o.geometry,d=s.attributes,m=h.attributes,y=Object.keys(m),x=Object.keys(d);if(h.id!==s.id)return h.id=s.id,!1;if(y.length!==x.length)return o.geometry.attributes=this.getAttributesData(d),!1;for(const N of y){const C=m[N],B=d[N];if(B===void 0)return delete m[N],!1;if(C.version!==B.version)return C.version=B.version,!1}const b=s.index,T=h.indexVersion,M=b?b.version:null;if(T!==M)return h.indexVersion=M,!1;if(h.drawRange.start!==s.drawRange.start||h.drawRange.count!==s.drawRange.count)return h.drawRange.start=s.drawRange.start,h.drawRange.count=s.drawRange.count,!1;if(o.morphTargetInfluences){let N=!1;for(let C=0;C<o.morphTargetInfluences.length;C++)o.morphTargetInfluences[C]!==n.morphTargetInfluences[C]&&(N=!0);if(N)return!0}if(o.lights){for(let N=0;N<t.length;N++)if(o.lights[N].map!==t[N].map)return!1}return o.center&&o.center.equals(n.center)===!1?(o.center.copy(n.center),!0):(e.bundle!==null&&(o.version=e.bundle.version),!0)}getLightsData(e){const t=[];for(const n of e)n.isSpotLight===!0&&n.map!==null&&t.push({map:n.map.version});return t}getLights(e,t){if(eh.has(e)){const i=eh.get(e);if(i.renderId===t)return i.lightsData}const n=this.getLightsData(e.getLights());return eh.set(e,{renderId:t,lightsData:n}),n}needsRefresh(e,t){if(this.hasNode||this.hasAnimation||this.firstInitialization(e)||this.needsVelocity(t.renderer))return!0;const{renderId:n}=t;if(this.renderId!==n)return this.renderId=n,!0;const i=e.object.static===!0,s=e.bundle!==null&&e.bundle.static===!0&&this.getRenderObjectData(e).version===e.bundle.version;if(i||s)return!1;const o=this.getLights(e.lightsNode,n);return this.equals(e,o)!==!0}}function fu(r,e=0){let t=3735928559^e,n=1103547991^e;if(r instanceof Array)for(let i=0,s;i<r.length;i++)s=r[i],t=Math.imul(t^s,2654435761),n=Math.imul(n^s,1597334677);else for(let i=0,s;i<r.length;i++)s=r.charCodeAt(i),t=Math.imul(t^s,2654435761),n=Math.imul(n^s,1597334677);return t=Math.imul(t^t>>>16,2246822507),t^=Math.imul(n^n>>>13,3266489909),n=Math.imul(n^n>>>16,2246822507),n^=Math.imul(t^t>>>13,3266489909),4294967296*(2097151&n)+(t>>>0)}const o8=r=>fu(r),M1=r=>fu(r),t1=(...r)=>fu(r);function a8(r,e=!1){const t=[];r.isNode===!0&&t.push(r.id);for(const{property:n,childNode:i}of n1(r))t.push(fu(n.slice(0,-4)),i.getCacheKey(e));return fu(t)}function*n1(r,e=!1){for(const t of Object.getOwnPropertyNames(r)){if(t.startsWith("_")===!0)continue;const n=r[t];if(Array.isArray(n)===!0)for(let i=0;i<n.length;i++){const s=n[i];s&&(s.isNode===!0||e&&typeof s.toJSON=="function")&&(yield{property:t,index:i,childNode:s})}else if(n&&n.isNode===!0)yield{property:t,childNode:n};else if(n&&Object.getPrototypeOf(n)===Object.prototype)for(const i in n){if(i.startsWith("_")===!0)continue;const s=n[i];s&&(s.isNode===!0||e&&typeof s.toJSON=="function")&&(yield{property:t,index:i,childNode:s})}}}const XP=new Map([[1,"float"],[2,"vec2"],[3,"vec3"],[4,"vec4"],[9,"mat3"],[16,"mat4"]]),l5=new WeakMap;function A8(r){return XP.get(r)}function r1(r){if(/[iu]?vec\d/.test(r))return r.startsWith("ivec")?Int32Array:r.startsWith("uvec")?Uint32Array:Float32Array;if(/mat\d/.test(r)||/float/.test(r))return Float32Array;if(/uint/.test(r))return Uint32Array;if(/int/.test(r))return Int32Array;throw new Error(`THREE.NodeUtils: Unsupported type: ${r}`)}function l8(r){if(/float|int|uint/.test(r))return 1;if(/vec2/.test(r))return 2;if(/vec3/.test(r))return 3;if(/vec4/.test(r)||/mat2/.test(r))return 4;if(/mat3/.test(r))return 9;if(/mat4/.test(r))return 16;console.error("THREE.TSL: Unsupported type:",r)}function YP(r){if(/float|int|uint/.test(r))return 1;if(/vec2/.test(r))return 2;if(/vec3/.test(r))return 3;if(/vec4/.test(r)||/mat2/.test(r))return 4;if(/mat3/.test(r))return 12;if(/mat4/.test(r))return 16;console.error("THREE.TSL: Unsupported type:",r)}function KP(r){if(/float|int|uint/.test(r))return 4;if(/vec2/.test(r))return 8;if(/vec3/.test(r)||/vec4/.test(r))return 16;if(/mat2/.test(r))return 8;if(/mat3/.test(r))return 48;if(/mat4/.test(r))return 64;console.error("THREE.TSL: Unsupported type:",r)}function wo(r){if(r==null)return null;const e=typeof r;return r.isNode===!0?"node":e==="number"?"float":e==="boolean"?"bool":e==="string"?"string":e==="function"?"shader":r.isVector2===!0?"vec2":r.isVector3===!0?"vec3":r.isVector4===!0?"vec4":r.isMatrix2===!0?"mat2":r.isMatrix3===!0?"mat3":r.isMatrix4===!0?"mat4":r.isColor===!0?"color":r instanceof ArrayBuffer?"ArrayBuffer":null}function up(r,...e){const t=r?r.slice(-4):void 0;return e.length===1&&(t==="vec2"?e=[e[0],e[0]]:t==="vec3"?e=[e[0],e[0],e[0]]:t==="vec4"&&(e=[e[0],e[0],e[0],e[0]])),r==="color"?new Un(...e):t==="vec2"?new Ot(...e):t==="vec3"?new Re(...e):t==="vec4"?new Ut(...e):t==="mat2"?new F6(...e):t==="mat3"?new Tu(...e):t==="mat4"?new mn(...e):r==="bool"?e[0]||!1:r==="float"||r==="int"||r==="uint"?e[0]||0:r==="string"?e[0]||"":r==="ArrayBuffer"?h8(e[0]):null}function u8(r){let e=l5.get(r);return e===void 0&&(e={},l5.set(r,e)),e}function c8(r){let e="";const t=new Uint8Array(r);for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return btoa(e)}function h8(r){return Uint8Array.from(atob(r),e=>e.charCodeAt(0)).buffer}const Ll={VERTEX:"vertex",FRAGMENT:"fragment"},lt={NONE:"none",FRAME:"frame",RENDER:"render",OBJECT:"object"},ZP={BOOLEAN:"bool",INTEGER:"int",FLOAT:"float",VECTOR2:"vec2",VECTOR3:"vec3",VECTOR4:"vec4",MATRIX2:"mat2",MATRIX3:"mat3",MATRIX4:"mat4"},Jn={READ_ONLY:"readOnly",WRITE_ONLY:"writeOnly",READ_WRITE:"readWrite"},f8=["fragment","vertex"],Xf=["setup","analyze","generate"],Yf=[...f8,"compute"],Na=["x","y","z","w"],JP={analyze:"setup",generate:"analyze"};let eB=0;class Ie extends Rd{static get type(){return"Node"}constructor(e=null){super(),this.nodeType=e,this.updateType=lt.NONE,this.updateBeforeType=lt.NONE,this.updateAfterType=lt.NONE,this.uuid=kd.generateUUID(),this.version=0,this.global=!1,this.parents=!1,this.isNode=!0,this._cacheKey=null,this._cacheKeyVersion=0,Object.defineProperty(this,"id",{value:eB++})}set needsUpdate(e){e===!0&&this.version++}get type(){return this.constructor.type}onUpdate(e,t){return this.updateType=t,this.update=e.bind(this),this}onFrameUpdate(e){return this.onUpdate(e,lt.FRAME)}onRenderUpdate(e){return this.onUpdate(e,lt.RENDER)}onObjectUpdate(e){return this.onUpdate(e,lt.OBJECT)}onReference(e){return this.updateReference=e.bind(this),this}updateReference(){return this}isGlobal(){return this.global}*getChildren(){for(const{childNode:e}of n1(this))yield e}dispose(){this.dispatchEvent({type:"dispose"})}traverse(e){e(this);for(const t of this.getChildren())t.traverse(e)}getCacheKey(e=!1){return e=e||this.version!==this._cacheKeyVersion,(e===!0||this._cacheKey===null)&&(this._cacheKey=t1(a8(this,e),this.customCacheKey()),this._cacheKeyVersion=this.version),this._cacheKey}customCacheKey(){return 0}getScope(){return this}getHash(){return this.uuid}getUpdateType(){return this.updateType}getUpdateBeforeType(){return this.updateBeforeType}getUpdateAfterType(){return this.updateAfterType}getElementType(e){const t=this.getNodeType(e);return e.getElementType(t)}getMemberType(){return"void"}getNodeType(e){const t=e.getNodeProperties(this);return t.outputNode?t.outputNode.getNodeType(e):this.nodeType}getShared(e){const t=this.getHash(e);return e.getNodeFromHash(t)||this}getArrayCount(){return null}setup(e){const t=e.getNodeProperties(this);let n=0;for(const i of this.getChildren())t["node"+n++]=i;return t.outputNode||null}analyze(e,t=null){const n=e.increaseUsage(this);if(this.parents===!0){const i=e.getDataFromNode(this,"any");i.stages=i.stages||{},i.stages[e.shaderStage]=i.stages[e.shaderStage]||[],i.stages[e.shaderStage].push(t)}if(n===1){const i=e.getNodeProperties(this);for(const s of Object.values(i))s&&s.isNode===!0&&s.build(e,this)}}generate(e,t){const{outputNode:n}=e.getNodeProperties(this);if(n&&n.isNode===!0)return n.build(e,t)}updateBefore(){console.warn("Abstract function.")}updateAfter(){console.warn("Abstract function.")}update(){console.warn("Abstract function.")}build(e,t=null){const n=this.getShared(e);if(this!==n)return n.build(e,t);const i=e.getDataFromNode(this);i.buildStages=i.buildStages||{},i.buildStages[e.buildStage]=!0;const s=JP[e.buildStage];if(s&&i.buildStages[s]!==!0){const h=e.getBuildStage();e.setBuildStage(s),this.build(e),e.setBuildStage(h)}e.addNode(this),e.addChain(this);let o=null;const u=e.getBuildStage();if(u==="setup"){this.updateReference(e);const h=e.getNodeProperties(this);if(h.initialized!==!0){h.initialized=!0,h.outputNode=this.setup(e)||h.outputNode||null;for(const d of Object.values(h))if(d&&d.isNode===!0){if(d.parents===!0){const m=e.getNodeProperties(d);m.parents=m.parents||[],m.parents.push(this)}d.build(e)}}o=h.outputNode}else if(u==="analyze")this.analyze(e,t);else if(u==="generate"){if(this.generate.length===1){const d=this.getNodeType(e),m=e.getDataFromNode(this);o=m.snippet,o===void 0?m.generated===void 0?(m.generated=!0,o=this.generate(e)||"",m.snippet=o):(console.warn("THREE.Node: Recursion detected.",this),o="/* Recursion detected. */"):m.flowCodes!==void 0&&e.context.nodeBlock!==void 0&&e.addFlowCodeHierarchy(this,e.context.nodeBlock),o=e.format(o,d,t)}else o=this.generate(e,t)||"";o===""&&t!==null&&t!=="void"&&t!=="OutputType"&&(console.error(`THREE.TSL: Invalid generated code, expected a "${t}".`),o=e.generateConst(t))}return e.removeChain(this),e.addSequentialNode(this),o}getSerializeChildren(){return n1(this)}serialize(e){const t=this.getSerializeChildren(),n={};for(const{property:i,index:s,childNode:o}of t)s!==void 0?(n[i]===void 0&&(n[i]=Number.isInteger(s)?[]:{}),n[i][s]=o.toJSON(e.meta).uuid):n[i]=o.toJSON(e.meta).uuid;Object.keys(n).length>0&&(e.inputNodes=n)}deserialize(e){if(e.inputNodes!==void 0){const t=e.meta.nodes;for(const n in e.inputNodes)if(Array.isArray(e.inputNodes[n])){const i=[];for(const s of e.inputNodes[n])i.push(t[s]);this[n]=i}else if(typeof e.inputNodes[n]=="object"){const i={};for(const s in e.inputNodes[n]){const o=e.inputNodes[n][s];i[s]=t[o]}this[n]=i}else{const i=e.inputNodes[n];this[n]=t[i]}}}toJSON(e){const{uuid:t,type:n}=this,i=e===void 0||typeof e=="string";i&&(e={textures:{},images:{},nodes:{}});let s=e.nodes[t];s===void 0&&(s={uuid:t,type:n,meta:e,metadata:{version:4.7,type:"Node",generator:"Node.toJSON"}},i!==!0&&(e.nodes[s.uuid]=s),this.serialize(s),delete s.meta);function o(u){const h=[];for(const d in u){const m=u[d];delete m.metadata,h.push(m)}return h}if(i){const u=o(e.textures),h=o(e.images),d=o(e.nodes);u.length>0&&(s.textures=u),h.length>0&&(s.images=h),d.length>0&&(s.nodes=d)}return s}}class Ra extends Ie{static get type(){return"ArrayElementNode"}constructor(e,t){super(),this.node=e,this.indexNode=t,this.isArrayElementNode=!0}getNodeType(e){return this.node.getElementType(e)}generate(e){const t=this.indexNode.getNodeType(e),n=this.node.build(e),i=this.indexNode.build(e,!e.isVector(t)&&e.isInteger(t)?t:"uint");return`${n}[ ${i} ]`}}class d8 extends Ie{static get type(){return"ConvertNode"}constructor(e,t){super(),this.node=e,this.convertTo=t}getNodeType(e){const t=this.node.getNodeType(e);let n=null;for(const i of this.convertTo.split("|"))(n===null||e.getTypeLength(t)===e.getTypeLength(i))&&(n=i);return n}serialize(e){super.serialize(e),e.convertTo=this.convertTo}deserialize(e){super.deserialize(e),this.convertTo=e.convertTo}generate(e,t){const n=this.node,i=this.getNodeType(e),s=n.build(e,i);return e.format(s,i,t)}}class En extends Ie{static get type(){return"TempNode"}constructor(e=null){super(e),this.isTempNode=!0}hasDependencies(e){return e.getDataFromNode(this).usageCount>1}build(e,t){if(e.getBuildStage()==="generate"){const i=e.getVectorType(this.getNodeType(e,t)),s=e.getDataFromNode(this);if(s.propertyName!==void 0)return e.format(s.propertyName,i,t);if(i!=="void"&&t!=="void"&&this.hasDependencies(e)){const o=super.build(e,i),u=e.getVarFromNode(this,null,i),h=e.getPropertyName(u);return e.addLineFlowCode(`${h} = ${o}`,this),s.snippet=o,s.propertyName=h,e.format(s.propertyName,i,t)}}return super.build(e,t)}}class tB extends En{static get type(){return"JoinNode"}constructor(e=[],t=null){super(t),this.nodes=e}getNodeType(e){return this.nodeType!==null?e.getVectorType(this.nodeType):e.getTypeFromLength(this.nodes.reduce((t,n)=>t+e.getTypeLength(n.getNodeType(e)),0))}generate(e,t){const n=this.getNodeType(e),i=e.getTypeLength(n),s=this.nodes,o=e.getComponentType(n),u=[];let h=0;for(const m of s){if(h>=i){console.error(`THREE.TSL: Length of parameters exceeds maximum length of function '${n}()' type.`);break}let y=m.getNodeType(e),x=e.getTypeLength(y),b;if(h+x>i&&(console.error(`THREE.TSL: Length of '${n}()' data exceeds maximum length of output type.`),x=i-h,y=e.getTypeFromLength(x)),h+=x,b=m.build(e,y),e.getComponentType(y)!==o){const M=e.getTypeFromLength(x,o);b=e.format(b,y,M)}u.push(b)}const d=`${e.getType(n)}( ${u.join(", ")} )`;return e.format(d,n,t)}}const nB=Na.join("");class p8 extends Ie{static get type(){return"SplitNode"}constructor(e,t="x"){super(),this.node=e,this.components=t,this.isSplitNode=!0}getVectorLength(){let e=this.components.length;for(const t of this.components)e=Math.max(Na.indexOf(t)+1,e);return e}getComponentType(e){return e.getComponentType(this.node.getNodeType(e))}getNodeType(e){return e.getTypeFromLength(this.components.length,this.getComponentType(e))}getScope(){return this.node.getScope()}generate(e,t){const n=this.node,i=e.getTypeLength(n.getNodeType(e));let s=null;if(i>1){let o=null;this.getVectorLength()>=i&&(o=e.getTypeFromLength(this.getVectorLength(),this.getComponentType(e)));const h=n.build(e,o);this.components.length===i&&this.components===nB.slice(0,this.components.length)?s=e.format(h,o,t):s=e.format(`${h}.${this.components}`,this.getNodeType(e),t)}else s=n.build(e,t);return s}serialize(e){super.serialize(e),e.components=this.components}deserialize(e){super.deserialize(e),this.components=e.components}}class rB extends En{static get type(){return"SetNode"}constructor(e,t,n){super(),this.sourceNode=e,this.components=t,this.targetNode=n}getNodeType(e){return this.sourceNode.getNodeType(e)}generate(e){const{sourceNode:t,components:n,targetNode:i}=this,s=this.getNodeType(e),o=e.getComponentType(i.getNodeType(e)),u=e.getTypeFromLength(n.length,o),h=i.build(e,u),d=t.build(e,s),m=e.getTypeLength(s),y=[];for(let x=0;x<m;x++){const b=Na[x];b===n[0]?(y.push(h),x+=n.length-1):y.push(d+"."+b)}return`${e.getType(s)}( ${y.join(", ")} )`}}class iB extends En{static get type(){return"FlipNode"}constructor(e,t){super(),this.sourceNode=e,this.components=t}getNodeType(e){return this.sourceNode.getNodeType(e)}generate(e){const{components:t,sourceNode:n}=this,i=this.getNodeType(e),s=n.build(e),o=e.getVarFromNode(this),u=e.getPropertyName(o);e.addLineFlowCode(u+" = "+s,this);const h=e.getTypeLength(i),d=[];let m=0;for(let y=0;y<h;y++){const x=Na[y];x===t[m]?(d.push("1.0 - "+(u+"."+x)),m++):d.push(u+"."+x)}return`${e.getType(i)}( ${d.join(", ")} )`}}class cp extends Ie{static get type(){return"InputNode"}constructor(e,t=null){super(t),this.isInputNode=!0,this.value=e,this.precision=null}getNodeType(){return this.nodeType===null?wo(this.value):this.nodeType}getInputType(e){return this.getNodeType(e)}setPrecision(e){return this.precision=e,this}serialize(e){super.serialize(e),e.value=this.value,this.value&&this.value.toArray&&(e.value=this.value.toArray()),e.valueType=wo(this.value),e.nodeType=this.nodeType,e.valueType==="ArrayBuffer"&&(e.value=c8(e.value)),e.precision=this.precision}deserialize(e){super.deserialize(e),this.nodeType=e.nodeType,this.value=Array.isArray(e.value)?up(e.valueType,...e.value):e.value,this.precision=e.precision||null,this.value&&this.value.fromArray&&(this.value=this.value.fromArray(e.value))}generate(){console.warn("Abstract function.")}}const u5=/float|u?int/;class Ti extends cp{static get type(){return"ConstNode"}constructor(e,t=null){super(e,t),this.isConstNode=!0}generateConst(e){return e.generateConst(this.getNodeType(e),this.value)}generate(e,t){const n=this.getNodeType(e);return u5.test(n)&&u5.test(t)?e.generateConst(t,this.value):e.format(this.generateConst(e),n,t)}}class sB extends Ie{static get type(){return"MemberNode"}constructor(e,t){super(),this.structNode=e,this.property=t,this.isMemberNode=!0}hasMember(e){return this.structNode.isMemberNode&&this.structNode.hasMember(e)===!1?!1:this.structNode.getMemberType(e,this.property)!=="void"}getNodeType(e){return this.hasMember(e)===!1?"float":this.structNode.getMemberType(e,this.property)}getMemberType(e,t){if(this.hasMember(e)===!1)return"float";const n=this.getNodeType(e);return e.getStructTypeNode(n).getMemberType(e,t)}generate(e){if(this.hasMember(e)===!1){console.warn(`THREE.TSL: Member "${this.property}" does not exist in struct.`);const n=this.getNodeType(e);return e.generateConst(n)}return this.structNode.build(e)+"."+this.property}}let Fo=null;const Kf=new Map;function de(r,e){if(Kf.has(r)){console.warn(`THREE.TSL: Redefinition of method chaining '${r}'.`);return}if(typeof e!="function")throw new Error(`THREE.TSL: Node element ${r} is not a function`);Kf.set(r,e),r!=="assign"&&(Ie.prototype[r]=function(...t){return this.isStackNode?this.add(e(...t)):e(this,...t)},Ie.prototype[r+"Assign"]=function(...t){return this.isStackNode?this.assign(t[0],e(...t)):this.assign(e(this,...t))})}const oB=r=>r.replace(/r|s/g,"x").replace(/g|t/g,"y").replace(/b|p/g,"z").replace(/a|q/g,"w"),c5=r=>oB(r).split("").sort().join("");Ie.prototype.assign=function(...r){if(this.isStackNode!==!0)return Fo!==null?Fo.assign(this,...r):console.error("THREE.TSL: No stack defined for assign operation. Make sure the assign is inside a Fn()."),this;{const e=Kf.get("assign");return this.add(e(...r))}};Ie.prototype.toVarIntent=function(){return this};Ie.prototype.get=function(r){return new sB(this,r)};const jl={};function f0(r,e,t){jl[r]=jl[e]=jl[t]={get(){this._cache=this._cache||{};let o=this._cache[r];return o===void 0&&(o=new p8(this,r),this._cache[r]=o),o},set(o){this[r].assign(pe(o))}};const n=r.toUpperCase(),i=e.toUpperCase(),s=t.toUpperCase();Ie.prototype["set"+n]=Ie.prototype["set"+i]=Ie.prototype["set"+s]=function(o){const u=c5(r);return new rB(this,u,pe(o))},Ie.prototype["flip"+n]=Ie.prototype["flip"+i]=Ie.prototype["flip"+s]=function(){const o=c5(r);return new iB(this,o)}}const Yi=["x","y","z","w"],Ki=["r","g","b","a"],Zi=["s","t","p","q"];for(let r=0;r<4;r++){let e=Yi[r],t=Ki[r],n=Zi[r];f0(e,t,n);for(let i=0;i<4;i++){e=Yi[r]+Yi[i],t=Ki[r]+Ki[i],n=Zi[r]+Zi[i],f0(e,t,n);for(let s=0;s<4;s++){e=Yi[r]+Yi[i]+Yi[s],t=Ki[r]+Ki[i]+Ki[s],n=Zi[r]+Zi[i]+Zi[s],f0(e,t,n);for(let o=0;o<4;o++)e=Yi[r]+Yi[i]+Yi[s]+Yi[o],t=Ki[r]+Ki[i]+Ki[s]+Ki[o],n=Zi[r]+Zi[i]+Zi[s]+Zi[o],f0(e,t,n)}}}for(let r=0;r<32;r++)jl[r]={get(){this._cache=this._cache||{};let e=this._cache[r];return e===void 0&&(e=new Ra(this,new Ti(r,"uint")),this._cache[r]=e),e},set(e){this[r].assign(pe(e))}};Object.defineProperties(Ie.prototype,jl);const h5=new WeakMap,aB=function(r,e=null){const t=wo(r);return t==="node"?r:e===null&&(t==="float"||t==="boolean")||t&&t!=="shader"&&t!=="string"?pe(Zf(r,e)):t==="shader"?r.isFn?r:re(r):r},AB=function(r,e=null){for(const t in r)r[t]=pe(r[t],e);return r},lB=function(r,e=null){const t=r.length;for(let n=0;n<t;n++)r[n]=pe(r[n],e);return r},m8=function(r,e=null,t=null,n=null){function i(m){return n!==null?(m=pe(Object.assign(m,n)),n.intent===!0&&(m=m.toVarIntent())):m=pe(m),m}let s,o=e,u,h;function d(m){let y;return o?y=/[a-z]/i.test(o)?o+"()":o:y=r.type,u!==void 0&&m.length<u?(console.error(`THREE.TSL: "${y}" parameter length is less than minimum required.`),m.concat(new Array(u-m.length).fill(0))):h!==void 0&&m.length>h?(console.error(`THREE.TSL: "${y}" parameter length exceeds limit.`),m.slice(0,h)):m}return e===null?s=(...m)=>i(new r(...ga(d(m)))):t!==null?(t=pe(t),s=(...m)=>i(new r(e,...ga(d(m)),t))):s=(...m)=>i(new r(e,...ga(d(m)))),s.setParameterLength=(...m)=>(m.length===1?u=h=m[0]:m.length===2&&([u,h]=m),s),s.setName=m=>(o=m,s),s},uB=function(r,...e){return pe(new r(...ga(e)))};class cB extends Ie{constructor(e,t){super(),this.shaderNode=e,this.rawInputs=t,this.isShaderCallNodeInternal=!0}getNodeType(e){return this.shaderNode.nodeType||this.getOutputNode(e).getNodeType(e)}getMemberType(e,t){return this.getOutputNode(e).getMemberType(e,t)}call(e){const{shaderNode:t,rawInputs:n}=this,i=e.getNodeProperties(t),s=e.getClosestSubBuild(t.subBuilds)||"",o=s||"default";if(i[o])return i[o];const u=e.subBuildFn;e.subBuildFn=s;let h=null;if(t.layout){let d=h5.get(e.constructor);d===void 0&&(d=new WeakMap,h5.set(e.constructor,d));let m=d.get(t);m===void 0&&(m=pe(e.buildFunctionNode(t)),d.set(t,m)),e.addInclude(m);const y=n?hB(n):null;h=pe(m.call(y))}else{const d=new Proxy(e,{get:(T,M,N)=>{let C;return Symbol.iterator===M?C=function*(){yield void 0}:C=Reflect.get(T,M,N),C}}),m=n?fB(n):null,y=Array.isArray(n)?n.length>0:n!==null,x=t.jsFunc,b=y||x.length>1?x(m,d):x(d);h=pe(b)}return e.subBuildFn=u,t.once&&(i[o]=h),h}setupOutput(e){return e.addStack(),e.stack.outputNode=this.call(e),e.removeStack()}getOutputNode(e){const t=e.getNodeProperties(this),n=e.getSubBuildOutput(this);return t[n]=t[n]||this.setupOutput(e),t[n].subBuild=e.getClosestSubBuild(this),t[n]}build(e,t=null){let n=null;const i=e.getBuildStage(),s=e.getNodeProperties(this),o=e.getSubBuildOutput(this),u=this.getOutputNode(e);if(i==="setup"){const h=e.getSubBuildProperty("initialized",this);if(s[h]!==!0&&(s[h]=!0,s[o]=this.getOutputNode(e),s[o].build(e),this.shaderNode.subBuilds))for(const d of e.chaining){const m=e.getDataFromNode(d,"any");m.subBuilds=m.subBuilds||new Set;for(const y of this.shaderNode.subBuilds)m.subBuilds.add(y)}n=s[o]}else i==="analyze"?u.build(e,t):i==="generate"&&(n=u.build(e,t)||"");return n}}function hB(r){let e;return R1(r),r[0]&&(r[0].isNode||Object.getPrototypeOf(r[0])!==Object.prototype)?e=[...r]:e=r[0],e}function fB(r){let e=0;return R1(r),new Proxy(r,{get:(t,n,i)=>{let s;if(n==="length")return s=r.length,s;if(Symbol.iterator===n)s=function*(){for(const o of r)yield pe(o)};else{if(r.length>0)if(Object.getPrototypeOf(r[0])===Object.prototype){const o=r[0];o[n]===void 0?s=o[e++]:s=Reflect.get(o,n,i)}else r[0]instanceof Ie&&(r[n]===void 0?s=r[e++]:s=Reflect.get(r,n,i));else s=Reflect.get(t,n,i);s=pe(s)}return s}})}class dB extends Ie{constructor(e,t){super(t),this.jsFunc=e,this.layout=null,this.global=!0,this.once=!1}setLayout(e){return this.layout=e,this}call(e=null){return pe(new cB(this,e))}setup(){return this.call()}}const pB=[!1,!0],mB=[0,1,2,3],gB=[-1,-2],g8=[.5,1.5,1/3,1e-6,1e6,Math.PI,Math.PI*2,1/Math.PI,2/Math.PI,1/(Math.PI*2),Math.PI/2],hp=new Map;for(const r of pB)hp.set(r,new Ti(r));const fp=new Map;for(const r of mB)fp.set(r,new Ti(r,"uint"));const dp=new Map([...fp].map(r=>new Ti(r.value,"int")));for(const r of gB)dp.set(r,new Ti(r,"int"));const E1=new Map([...dp].map(r=>new Ti(r.value)));for(const r of g8)E1.set(r,new Ti(r));for(const r of g8)E1.set(-r,new Ti(-r));const N1={bool:hp,uint:fp,ints:dp,float:E1},f5=new Map([...hp,...E1]),Zf=(r,e)=>f5.has(r)?f5.get(r):r.isNode===!0?r:new Ti(r,e),qn=function(r,e=null){return(...t)=>{for(const i of t)if(i===void 0)return console.error(`THREE.TSL: Invalid parameter for the type "${r}".`),pe(new Ti(0,r));if((t.length===0||!["bool","float","int","uint"].includes(r)&&t.every(i=>{const s=typeof i;return s!=="object"&&s!=="function"}))&&(t=[up(r,...t)]),t.length===1&&e!==null&&e.has(t[0]))return Il(e.get(t[0]));if(t.length===1){const i=Zf(t[0],r);return i.nodeType===r?Il(i):Il(new d8(i,r))}const n=t.map(i=>Zf(i));return Il(new tB(n,r))}},du=r=>typeof r=="object"&&r!==null?r.value:r,y8=r=>r!=null?r.nodeType||r.convertTo||(typeof r=="string"?r:null):null;function vA(r,e){return new dB(r,e)}const pe=(r,e=null)=>aB(r,e),Il=(r,e=null)=>pe(r,e).toVarIntent(),R1=(r,e=null)=>new AB(r,e),ga=(r,e=null)=>new lB(r,e),Ke=(r,e=null,t=null,n=null)=>new m8(r,e,t,n),Ce=(r,...e)=>new uB(r,...e),Ee=(r,e=null,t=null,n={})=>new m8(r,e,t,{intent:!0,...n});let yB=0;class vB extends Ie{constructor(e,t=null){super();let n=null;t!==null&&(typeof t=="object"?n=t.return:(typeof t=="string"?n=t:console.error("THREE.TSL: Invalid layout type."),t=null)),this.shaderNode=new vA(e,n),t!==null&&this.setLayout(t),this.isFn=!0}setLayout(e){const t=this.shaderNode.nodeType;if(typeof e.inputs!="object"){const n={name:"fn"+yB++,type:t,inputs:[]};for(const i in e)i!=="return"&&n.inputs.push({name:i,type:e[i]});e=n}return this.shaderNode.setLayout(e),this}getNodeType(e){return this.shaderNode.getNodeType(e)||"float"}call(...e){const t=this.shaderNode.call(e);return this.shaderNode.nodeType==="void"&&t.toStack(),t.toVarIntent()}once(e=null){return this.shaderNode.once=!0,this.shaderNode.subBuilds=e,this}generate(e){const t=this.getNodeType(e);return console.error('THREE.TSL: "Fn()" was declared but not invoked. Try calling it like "Fn()( ...params )".'),e.generateConst(t)}}function re(r,e=null){const t=new vB(r,e);return new Proxy(()=>{},{apply(n,i,s){return t.call(...s)},get(n,i,s){return Reflect.get(t,i,s)},set(n,i,s,o){return Reflect.set(t,i,s,o)}})}const pu=r=>{Fo=r},C1=()=>Fo,Xe=(...r)=>Fo.If(...r),_B=(...r)=>Fo.Switch(...r);function P1(r){return Fo&&Fo.add(r),r}de("toStack",P1);const v8=new qn("color"),V=new qn("float",N1.float),Q=new qn("int",N1.ints),Fe=new qn("uint",N1.uint),yi=new qn("bool",N1.bool),ve=new qn("vec2"),On=new qn("ivec2"),_8=new qn("uvec2"),x8=new qn("bvec2"),ne=new qn("vec3"),b8=new qn("ivec3"),$A=new qn("uvec3"),pp=new qn("bvec3"),Ve=new qn("vec4"),T8=new qn("ivec4"),w8=new qn("uvec4"),S8=new qn("bvec4"),B1=new qn("mat2"),fr=new qn("mat3"),ya=new qn("mat4"),xB=(r="")=>pe(new Ti(r,"string")),bB=r=>pe(new Ti(r,"ArrayBuffer"));de("toColor",v8);de("toFloat",V);de("toInt",Q);de("toUint",Fe);de("toBool",yi);de("toVec2",ve);de("toIVec2",On);de("toUVec2",_8);de("toBVec2",x8);de("toVec3",ne);de("toIVec3",b8);de("toUVec3",$A);de("toBVec3",pp);de("toVec4",Ve);de("toIVec4",T8);de("toUVec4",w8);de("toBVec4",S8);de("toMat2",B1);de("toMat3",fr);de("toMat4",ya);const M8=Ke(Ra).setParameterLength(2),E8=(r,e)=>pe(new d8(pe(r),e)),TB=(r,e)=>pe(new p8(pe(r),e));de("element",M8);de("convert",E8);const wB=r=>(console.warn("THREE.TSL: append() has been renamed to Stack()."),P1(r));de("append",r=>(console.warn("THREE.TSL: .append() has been renamed to .toStack()."),P1(r)));class kt extends Ie{static get type(){return"PropertyNode"}constructor(e,t=null,n=!1){super(e),this.name=t,this.varying=n,this.isPropertyNode=!0,this.global=!0}getHash(e){return this.name||super.getHash(e)}generate(e){let t;return this.varying===!0?(t=e.getVaryingFromNode(this,this.name),t.needsInterpolation=!0):t=e.getVarFromNode(this,this.name),e.getPropertyName(t)}}const Gs=(r,e)=>pe(new kt(r,e)),mu=(r,e)=>pe(new kt(r,e,!0)),Ft=Ce(kt,"vec4","DiffuseColor"),Jf=Ce(kt,"vec3","EmissiveColor"),os=Ce(kt,"float","Roughness"),gu=Ce(kt,"float","Metalness"),i1=Ce(kt,"float","Clearcoat"),yu=Ce(kt,"float","ClearcoatRoughness"),ha=Ce(kt,"vec3","Sheen"),D1=Ce(kt,"float","SheenRoughness"),F1=Ce(kt,"float","Iridescence"),mp=Ce(kt,"float","IridescenceIOR"),gp=Ce(kt,"float","IridescenceThickness"),s1=Ce(kt,"float","AlphaT"),yo=Ce(kt,"float","Anisotropy"),Wl=Ce(kt,"vec3","AnisotropyT"),va=Ce(kt,"vec3","AnisotropyB"),Er=Ce(kt,"color","SpecularColor"),vu=Ce(kt,"float","SpecularF90"),o1=Ce(kt,"float","Shininess"),MA=Ce(kt,"vec4","Output"),sc=Ce(kt,"float","dashSize"),ed=Ce(kt,"float","gapSize"),SB=Ce(kt,"float","pointWidth"),Ql=Ce(kt,"float","IOR"),a1=Ce(kt,"float","Transmission"),yp=Ce(kt,"float","Thickness"),vp=Ce(kt,"float","AttenuationDistance"),_p=Ce(kt,"color","AttenuationColor"),xp=Ce(kt,"float","Dispersion");class N8 extends Ie{static get type(){return"UniformGroupNode"}constructor(e,t=!1,n=1){super("string"),this.name=e,this.shared=t,this.order=n,this.isUniformGroup=!0}serialize(e){super.serialize(e),e.name=this.name,e.version=this.version,e.shared=this.shared}deserialize(e){super.deserialize(e),this.name=e.name,this.version=e.version,this.shared=e.shared}}const R8=r=>new N8(r),L1=(r,e=0)=>new N8(r,!0,e),C8=L1("frame"),ke=L1("render"),bp=R8("object");class Eu extends cp{static get type(){return"UniformNode"}constructor(e,t=null){super(e,t),this.isUniformNode=!0,this.name="",this.groupNode=bp}setName(e){return this.name=e,this}label(e){return console.warn('THREE.TSL: "label()" has been deprecated. Use "setName()" instead.'),this.setName(e)}setGroup(e){return this.groupNode=e,this}getGroup(){return this.groupNode}getUniformHash(e){return this.getHash(e)}onUpdate(e,t){return e=e.bind(this),super.onUpdate(n=>{const i=e(n,this);i!==void 0&&(this.value=i)},t)}getInputType(e){let t=super.getInputType(e);return t==="bool"&&(t="uint"),t}generate(e,t){const n=this.getNodeType(e),i=this.getUniformHash(e);let s=e.getNodeFromHash(i);s===void 0&&(e.setHashNode(this,i),s=this);const o=s.getInputType(e),u=e.getUniformFromNode(s,o,e.shaderStage,this.name||e.context.nodeName),h=e.getPropertyName(u);e.context.nodeName!==void 0&&delete e.context.nodeName;let d=h;if(n==="bool"){const m=e.getDataFromNode(this);let y=m.propertyName;if(y===void 0){const x=e.getVarFromNode(this,null,"bool");y=e.getPropertyName(x),m.propertyName=y,d=e.format(h,o,n),e.addLineFlowCode(`${y} = ${d}`,this)}d=y}return e.format(d,n,t)}}const Ge=(r,e)=>{const t=y8(e||r);return t===r&&(r=up(t)),r=r&&r.isNode===!0?r.node&&r.node.value||r.value:r,pe(new Eu(r,t))};class d5 extends En{static get type(){return"ArrayNode"}constructor(e,t,n=null){super(e),this.count=t,this.values=n,this.isArrayNode=!0}getArrayCount(){return this.count}getNodeType(e){return this.nodeType===null&&(this.nodeType=this.values[0].getNodeType(e)),this.nodeType}getElementType(e){return this.getNodeType(e)}generate(e){const t=this.getNodeType(e);return e.generateArray(t,this.count,this.values)}}const P8=(...r)=>{let e;if(r.length===1){const t=r[0];e=new d5(null,t.length,t)}else{const t=r[0],n=r[1];e=new d5(t,n)}return pe(e)};de("toArray",(r,e)=>P8(Array(e).fill(r)));class MB extends En{static get type(){return"AssignNode"}constructor(e,t){super(),this.targetNode=e,this.sourceNode=t,this.isAssignNode=!0}hasDependencies(){return!1}getNodeType(e,t){return t!=="void"?this.targetNode.getNodeType(e):"void"}needsSplitAssign(e){const{targetNode:t}=this;if(e.isAvailable("swizzleAssign")===!1&&t.isSplitNode&&t.components.length>1){const n=e.getTypeLength(t.node.getNodeType(e));return Na.join("").slice(0,n)!==t.components}return!1}setup(e){const{targetNode:t,sourceNode:n}=this,i=t.getScope(),s=e.getNodeProperties(i);s.assign=!0;const o=e.getNodeProperties(this);o.sourceNode=n,o.targetNode=t.context({assign:!0})}generate(e,t){const{targetNode:n,sourceNode:i}=e.getNodeProperties(this),s=this.needsSplitAssign(e),o=n.build(e),u=n.getNodeType(e),h=i.build(e,u),d=i.getNodeType(e),m=e.getDataFromNode(this);let y;if(m.initialized===!0)t!=="void"&&(y=o);else if(s){const x=e.getVarFromNode(this,null,u),b=e.getPropertyName(x);e.addLineFlowCode(`${b} = ${h}`,this);const T=n.node,N=T.node.context({assign:!0}).build(e);for(let C=0;C<T.components.length;C++){const B=T.components[C];e.addLineFlowCode(`${N}.${B} = ${b}[ ${C} ]`,this)}t!=="void"&&(y=o)}else y=`${o} = ${h}`,(t==="void"||d==="void")&&(e.addLineFlowCode(y,this),t!=="void"&&(y=o));return m.initialized=!0,e.format(y,u,t)}}const B8=Ke(MB).setParameterLength(2);de("assign",B8);class EB extends En{static get type(){return"FunctionCallNode"}constructor(e=null,t={}){super(),this.functionNode=e,this.parameters=t}setParameters(e){return this.parameters=e,this}getParameters(){return this.parameters}getNodeType(e){return this.functionNode.getNodeType(e)}getMemberType(e,t){return this.functionNode.getMemberType(e,t)}generate(e){const t=[],n=this.functionNode,i=n.getInputs(e),s=this.parameters,o=(h,d)=>{const m=d.type,y=m==="pointer";let x;return y?x="&"+h.build(e):x=h.build(e,m),x};if(Array.isArray(s)){if(s.length>i.length)console.error("THREE.TSL: The number of provided parameters exceeds the expected number of inputs in 'Fn()'."),s.length=i.length;else if(s.length<i.length)for(console.error("THREE.TSL: The number of provided parameters is less than the expected number of inputs in 'Fn()'.");s.length<i.length;)s.push(V(0));for(let h=0;h<s.length;h++)t.push(o(s[h],i[h]))}else for(const h of i){const d=s[h.name];d!==void 0?t.push(o(d,h)):(console.error(`THREE.TSL: Input '${h.name}' not found in 'Fn()'.`),t.push(o(V(0),h)))}return`${n.build(e,"property")}( ${t.join(", ")} )`}}const D8=(r,...e)=>(e=e.length>1||e[0]&&e[0].isNode===!0?ga(e):R1(e[0]),pe(new EB(pe(r),e)));de("call",D8);const NB={"==":"equal","!=":"notEqual","<":"lessThan",">":"greaterThan","<=":"lessThanEqual",">=":"greaterThanEqual","%":"mod"};class fn extends En{static get type(){return"OperatorNode"}constructor(e,t,n,...i){if(super(),i.length>0){let s=new fn(e,t,n);for(let o=0;o<i.length-1;o++)s=new fn(e,s,i[o]);t=s,n=i[i.length-1]}this.op=e,this.aNode=t,this.bNode=n,this.isOperatorNode=!0}getOperatorMethod(e,t){return e.getMethod(NB[this.op],t)}getNodeType(e,t=null){const n=this.op,i=this.aNode,s=this.bNode,o=i.getNodeType(e),u=s?s.getNodeType(e):null;if(o==="void"||u==="void")return t||"void";if(n==="%")return o;if(n==="~"||n==="&"||n==="|"||n==="^"||n===">>"||n==="<<")return e.getIntegerType(o);if(n==="!"||n==="&&"||n==="||"||n==="^^")return"bool";if(n==="=="||n==="!="||n==="<"||n===">"||n==="<="||n===">="){const h=Math.max(e.getTypeLength(o),e.getTypeLength(u));return h>1?`bvec${h}`:"bool"}else{if(e.isMatrix(o)){if(u==="float")return o;if(e.isVector(u))return e.getVectorFromMatrix(o);if(e.isMatrix(u))return o}else if(e.isMatrix(u)){if(o==="float")return u;if(e.isVector(o))return e.getVectorFromMatrix(u)}return e.getTypeLength(u)>e.getTypeLength(o)?u:o}}generate(e,t){const n=this.op,{aNode:i,bNode:s}=this,o=this.getNodeType(e,t);let u=null,h=null;o!=="void"?(u=i.getNodeType(e),h=s?s.getNodeType(e):null,n==="<"||n===">"||n==="<="||n===">="||n==="=="||n==="!="?e.isVector(u)?h=u:e.isVector(h)?u=h:u!==h&&(u=h="float"):n===">>"||n==="<<"?(u=o,h=e.changeComponentType(h,"uint")):n==="%"?(u=o,h=e.isInteger(u)&&e.isInteger(h)?h:u):e.isMatrix(u)?h==="float"?h="float":e.isVector(h)?h=e.getVectorFromMatrix(u):e.isMatrix(h)||(u=h=o):e.isMatrix(h)?u==="float"?u="float":e.isVector(u)?u=e.getVectorFromMatrix(h):u=h=o:u=h=o):u=h=o;const d=i.build(e,u),m=s?s.build(e,h):null,y=e.getFunctionOperator(n);if(t!=="void"){const x=e.renderer.coordinateSystem===dc;if(n==="=="||n==="!="||n==="<"||n===">"||n==="<="||n===">=")return x?e.isVector(u)?e.format(`${this.getOperatorMethod(e,t)}( ${d}, ${m} )`,o,t):e.format(`( ${d} ${n} ${m} )`,o,t):e.format(`( ${d} ${n} ${m} )`,o,t);if(n==="%")return e.isInteger(h)?e.format(`( ${d} % ${m} )`,o,t):e.format(`${this.getOperatorMethod(e,o)}( ${d}, ${m} )`,o,t);if(n==="!"||n==="~")return e.format(`(${n}${d})`,u,t);if(y)return e.format(`${y}( ${d}, ${m} )`,o,t);if(e.isMatrix(u)&&h==="float")return e.format(`( ${m} ${n} ${d} )`,o,t);if(u==="float"&&e.isMatrix(h))return e.format(`${d} ${n} ${m}`,o,t);{let b=`( ${d} ${n} ${m} )`;return!x&&o==="bool"&&e.isVector(u)&&e.isVector(h)&&(b=`all${b}`),e.format(b,o,t)}}else if(u!=="void")return y?e.format(`${y}( ${d}, ${m} )`,o,t):e.isMatrix(u)&&h==="float"?e.format(`${m} ${n} ${d}`,o,t):e.format(`${d} ${n} ${m}`,o,t)}serialize(e){super.serialize(e),e.op=this.op}deserialize(e){super.deserialize(e),this.op=e.op}}const Pn=Ee(fn,"+").setParameterLength(2,1/0).setName("add"),bt=Ee(fn,"-").setParameterLength(2,1/0).setName("sub"),tt=Ee(fn,"*").setParameterLength(2,1/0).setName("mul"),Zr=Ee(fn,"/").setParameterLength(2,1/0).setName("div"),Nu=Ee(fn,"%").setParameterLength(2).setName("mod"),Tp=Ee(fn,"==").setParameterLength(2).setName("equal"),F8=Ee(fn,"!=").setParameterLength(2).setName("notEqual"),L8=Ee(fn,"<").setParameterLength(2).setName("lessThan"),wp=Ee(fn,">").setParameterLength(2).setName("greaterThan"),I8=Ee(fn,"<=").setParameterLength(2).setName("lessThanEqual"),q8=Ee(fn,">=").setParameterLength(2).setName("greaterThanEqual"),O8=Ee(fn,"&&").setParameterLength(2,1/0).setName("and"),U8=Ee(fn,"||").setParameterLength(2,1/0).setName("or"),k8=Ee(fn,"!").setParameterLength(1).setName("not"),G8=Ee(fn,"^^").setParameterLength(2).setName("xor"),V8=Ee(fn,"&").setParameterLength(2).setName("bitAnd"),z8=Ee(fn,"~").setParameterLength(2).setName("bitNot"),$8=Ee(fn,"|").setParameterLength(2).setName("bitOr"),H8=Ee(fn,"^").setParameterLength(2).setName("bitXor"),j8=Ee(fn,"<<").setParameterLength(2).setName("shiftLeft"),W8=Ee(fn,">>").setParameterLength(2).setName("shiftRight"),Q8=re(([r])=>(r.addAssign(1),r)),X8=re(([r])=>(r.subAssign(1),r)),Y8=re(([r])=>{const e=Q(r).toConst();return r.addAssign(1),e}),K8=re(([r])=>{const e=Q(r).toConst();return r.subAssign(1),e});de("add",Pn);de("sub",bt);de("mul",tt);de("div",Zr);de("mod",Nu);de("equal",Tp);de("notEqual",F8);de("lessThan",L8);de("greaterThan",wp);de("lessThanEqual",I8);de("greaterThanEqual",q8);de("and",O8);de("or",U8);de("not",k8);de("xor",G8);de("bitAnd",V8);de("bitNot",z8);de("bitOr",$8);de("bitXor",H8);de("shiftLeft",j8);de("shiftRight",W8);de("incrementBefore",Q8);de("decrementBefore",X8);de("increment",Y8);de("decrement",K8);const Z8=(r,e)=>(console.warn('THREE.TSL: "modInt()" is deprecated. Use "mod( int( ... ) )" instead.'),Nu(Q(r),Q(e)));de("modInt",Z8);class Ae extends En{static get type(){return"MathNode"}constructor(e,t,n=null,i=null){if(super(),(e===Ae.MAX||e===Ae.MIN)&&arguments.length>3){let s=new Ae(e,t,n);for(let o=2;o<arguments.length-1;o++)s=new Ae(e,s,arguments[o]);t=s,n=arguments[arguments.length-1],i=null}this.method=e,this.aNode=t,this.bNode=n,this.cNode=i,this.isMathNode=!0}getInputType(e){const t=this.aNode.getNodeType(e),n=this.bNode?this.bNode.getNodeType(e):null,i=this.cNode?this.cNode.getNodeType(e):null,s=e.isMatrix(t)?0:e.getTypeLength(t),o=e.isMatrix(n)?0:e.getTypeLength(n),u=e.isMatrix(i)?0:e.getTypeLength(i);return s>o&&s>u?t:o>u?n:u>s?i:t}getNodeType(e){const t=this.method;return t===Ae.LENGTH||t===Ae.DISTANCE||t===Ae.DOT?"float":t===Ae.CROSS?"vec3":t===Ae.ALL||t===Ae.ANY?"bool":t===Ae.EQUALS?e.changeComponentType(this.aNode.getNodeType(e),"bool"):this.getInputType(e)}setup(e){const{aNode:t,bNode:n,method:i}=this;let s=null;if(i===Ae.ONE_MINUS)s=bt(1,t);else if(i===Ae.RECIPROCAL)s=Zr(1,t);else if(i===Ae.DIFFERENCE)s=nn(bt(t,n));else if(i===Ae.TRANSFORM_DIRECTION){let o=t,u=n;e.isMatrix(o.getNodeType(e))?u=Ve(ne(u),0):o=Ve(ne(o),0);const h=tt(o,u).xyz;s=Xs(h)}return s!==null?s:super.setup(e)}generate(e,t){if(e.getNodeProperties(this).outputNode)return super.generate(e,t);let i=this.method;const s=this.getNodeType(e),o=this.getInputType(e),u=this.aNode,h=this.bNode,d=this.cNode,m=e.renderer.coordinateSystem;if(i===Ae.NEGATE)return e.format("( - "+u.build(e,o)+" )",s,t);{const y=[];return i===Ae.CROSS?y.push(u.build(e,s),h.build(e,s)):m===dc&&i===Ae.STEP?y.push(u.build(e,e.getTypeLength(u.getNodeType(e))===1?"float":o),h.build(e,o)):m===dc&&(i===Ae.MIN||i===Ae.MAX)?y.push(u.build(e,o),h.build(e,e.getTypeLength(h.getNodeType(e))===1?"float":o)):i===Ae.REFRACT?y.push(u.build(e,o),h.build(e,o),d.build(e,"float")):i===Ae.MIX?y.push(u.build(e,o),h.build(e,o),d.build(e,e.getTypeLength(d.getNodeType(e))===1?"float":o)):(m===zA&&i===Ae.ATAN&&h!==null&&(i="atan2"),e.shaderStage!=="fragment"&&(i===Ae.DFDX||i===Ae.DFDY)&&(console.warn(`THREE.TSL: '${i}' is not supported in the ${e.shaderStage} stage.`),i="/*"+i+"*/"),y.push(u.build(e,o)),h!==null&&y.push(h.build(e,o)),d!==null&&y.push(d.build(e,o))),e.format(`${e.getMethod(i,s)}( ${y.join(", ")} )`,s,t)}}serialize(e){super.serialize(e),e.method=this.method}deserialize(e){super.deserialize(e),this.method=e.method}}Ae.ALL="all";Ae.ANY="any";Ae.RADIANS="radians";Ae.DEGREES="degrees";Ae.EXP="exp";Ae.EXP2="exp2";Ae.LOG="log";Ae.LOG2="log2";Ae.SQRT="sqrt";Ae.INVERSE_SQRT="inversesqrt";Ae.FLOOR="floor";Ae.CEIL="ceil";Ae.NORMALIZE="normalize";Ae.FRACT="fract";Ae.SIN="sin";Ae.COS="cos";Ae.TAN="tan";Ae.ASIN="asin";Ae.ACOS="acos";Ae.ATAN="atan";Ae.ABS="abs";Ae.SIGN="sign";Ae.LENGTH="length";Ae.NEGATE="negate";Ae.ONE_MINUS="oneMinus";Ae.DFDX="dFdx";Ae.DFDY="dFdy";Ae.ROUND="round";Ae.RECIPROCAL="reciprocal";Ae.TRUNC="trunc";Ae.FWIDTH="fwidth";Ae.TRANSPOSE="transpose";Ae.DETERMINANT="determinant";Ae.INVERSE="inverse";Ae.EQUALS="equals";Ae.MIN="min";Ae.MAX="max";Ae.STEP="step";Ae.REFLECT="reflect";Ae.DISTANCE="distance";Ae.DIFFERENCE="difference";Ae.DOT="dot";Ae.CROSS="cross";Ae.POW="pow";Ae.TRANSFORM_DIRECTION="transformDirection";Ae.MIX="mix";Ae.CLAMP="clamp";Ae.REFRACT="refract";Ae.SMOOTHSTEP="smoothstep";Ae.FACEFORWARD="faceforward";const J8=V(1e-6),RB=V(1e6),A1=V(Math.PI),CB=V(Math.PI*2),e9=Ee(Ae,Ae.ALL).setParameterLength(1),t9=Ee(Ae,Ae.ANY).setParameterLength(1),n9=Ee(Ae,Ae.RADIANS).setParameterLength(1),r9=Ee(Ae,Ae.DEGREES).setParameterLength(1),Sp=Ee(Ae,Ae.EXP).setParameterLength(1),qA=Ee(Ae,Ae.EXP2).setParameterLength(1),I1=Ee(Ae,Ae.LOG).setParameterLength(1),us=Ee(Ae,Ae.LOG2).setParameterLength(1),bs=Ee(Ae,Ae.SQRT).setParameterLength(1),Mp=Ee(Ae,Ae.INVERSE_SQRT).setParameterLength(1),cs=Ee(Ae,Ae.FLOOR).setParameterLength(1),q1=Ee(Ae,Ae.CEIL).setParameterLength(1),Xs=Ee(Ae,Ae.NORMALIZE).setParameterLength(1),Js=Ee(Ae,Ae.FRACT).setParameterLength(1),Qr=Ee(Ae,Ae.SIN).setParameterLength(1),Bs=Ee(Ae,Ae.COS).setParameterLength(1),i9=Ee(Ae,Ae.TAN).setParameterLength(1),s9=Ee(Ae,Ae.ASIN).setParameterLength(1),Ep=Ee(Ae,Ae.ACOS).setParameterLength(1),O1=Ee(Ae,Ae.ATAN).setParameterLength(1,2),nn=Ee(Ae,Ae.ABS).setParameterLength(1),_u=Ee(Ae,Ae.SIGN).setParameterLength(1),hs=Ee(Ae,Ae.LENGTH).setParameterLength(1),o9=Ee(Ae,Ae.NEGATE).setParameterLength(1),a9=Ee(Ae,Ae.ONE_MINUS).setParameterLength(1),Np=Ee(Ae,Ae.DFDX).setParameterLength(1),Rp=Ee(Ae,Ae.DFDY).setParameterLength(1),A9=Ee(Ae,Ae.ROUND).setParameterLength(1),l9=Ee(Ae,Ae.RECIPROCAL).setParameterLength(1),Cp=Ee(Ae,Ae.TRUNC).setParameterLength(1),u9=Ee(Ae,Ae.FWIDTH).setParameterLength(1),c9=Ee(Ae,Ae.TRANSPOSE).setParameterLength(1),h9=Ee(Ae,Ae.DETERMINANT).setParameterLength(1),f9=Ee(Ae,Ae.INVERSE).setParameterLength(1),d9=(r,e)=>(console.warn('THREE.TSL: "equals" is deprecated. Use "equal" inside a vector instead, like: "bvec*( equal( ... ) )"'),Tp(r,e)),Lr=Ee(Ae,Ae.MIN).setParameterLength(2,1/0),yn=Ee(Ae,Ae.MAX).setParameterLength(2,1/0),U1=Ee(Ae,Ae.STEP).setParameterLength(2),p9=Ee(Ae,Ae.REFLECT).setParameterLength(2),m9=Ee(Ae,Ae.DISTANCE).setParameterLength(2),g9=Ee(Ae,Ae.DIFFERENCE).setParameterLength(2),Oo=Ee(Ae,Ae.DOT).setParameterLength(2),k1=Ee(Ae,Ae.CROSS).setParameterLength(2),hi=Ee(Ae,Ae.POW).setParameterLength(2),Pp=r=>tt(r,r),y9=r=>tt(r,r,r),v9=r=>tt(r,r,r,r),_9=Ee(Ae,Ae.TRANSFORM_DIRECTION).setParameterLength(2),x9=r=>tt(_u(r),hi(nn(r),1/3)),Bp=r=>Oo(r,r),Bt=Ee(Ae,Ae.MIX).setParameterLength(3),vi=(r,e=0,t=1)=>pe(new Ae(Ae.CLAMP,pe(r),pe(e),pe(t))),Dp=r=>vi(r),Fp=Ee(Ae,Ae.REFRACT).setParameterLength(3),ms=Ee(Ae,Ae.SMOOTHSTEP).setParameterLength(3),Lp=Ee(Ae,Ae.FACEFORWARD).setParameterLength(3),b9=re(([r])=>{const n=43758.5453,i=Oo(r.xy,ve(12.9898,78.233)),s=Nu(i,A1);return Js(Qr(s).mul(n))}),T9=(r,e,t)=>Bt(e,t,r),w9=(r,e,t)=>ms(e,t,r),S9=(r,e)=>U1(e,r),M9=(r,e)=>(console.warn('THREE.TSL: "atan2" is overloaded. Use "atan" instead.'),O1(r,e)),PB=Lp,BB=Mp;de("all",e9);de("any",t9);de("equals",d9);de("radians",n9);de("degrees",r9);de("exp",Sp);de("exp2",qA);de("log",I1);de("log2",us);de("sqrt",bs);de("inverseSqrt",Mp);de("floor",cs);de("ceil",q1);de("normalize",Xs);de("fract",Js);de("sin",Qr);de("cos",Bs);de("tan",i9);de("asin",s9);de("acos",Ep);de("atan",O1);de("abs",nn);de("sign",_u);de("length",hs);de("lengthSq",Bp);de("negate",o9);de("oneMinus",a9);de("dFdx",Np);de("dFdy",Rp);de("round",A9);de("reciprocal",l9);de("trunc",Cp);de("fwidth",u9);de("atan2",M9);de("min",Lr);de("max",yn);de("step",S9);de("reflect",p9);de("distance",m9);de("dot",Oo);de("cross",k1);de("pow",hi);de("pow2",Pp);de("pow3",y9);de("pow4",v9);de("transformDirection",_9);de("mix",T9);de("clamp",vi);de("refract",Fp);de("smoothstep",w9);de("faceForward",Lp);de("difference",g9);de("saturate",Dp);de("cbrt",x9);de("transpose",c9);de("determinant",h9);de("inverse",f9);de("rand",b9);class DB extends Ie{static get type(){return"ConditionalNode"}constructor(e,t,n=null){super(),this.condNode=e,this.ifNode=t,this.elseNode=n}getNodeType(e){const{ifNode:t,elseNode:n}=e.getNodeProperties(this);if(t===void 0)return e.flowBuildStage(this,"setup"),this.getNodeType(e);const i=t.getNodeType(e);if(n!==null){const s=n.getNodeType(e);if(e.getTypeLength(s)>e.getTypeLength(i))return s}return i}setup(e){const t=this.condNode.cache(),n=this.ifNode.cache(),i=this.elseNode?this.elseNode.cache():null,s=e.context.nodeBlock;e.getDataFromNode(n).parentNodeBlock=s,i!==null&&(e.getDataFromNode(i).parentNodeBlock=s);const o=e.context.uniformFlow,u=e.getNodeProperties(this);u.condNode=t,u.ifNode=o?n:n.context({nodeBlock:n}),u.elseNode=i?o?i:i.context({nodeBlock:i}):null}generate(e,t){const n=this.getNodeType(e),i=e.getDataFromNode(this);if(i.nodeProperty!==void 0)return i.nodeProperty;const{condNode:s,ifNode:o,elseNode:u}=e.getNodeProperties(this),h=e.currentFunctionNode,d=t!=="void",m=d?Gs(n).build(e):"";i.nodeProperty=m;const y=s.build(e,"bool");if(e.context.uniformFlow&&u!==null){const T=o.build(e,n),M=u.build(e,n),N=e.getTernary(y,T,M);return e.format(N,n,t)}e.addFlowCode(`
${e.tab}if ( ${y} ) {

`).addFlowTab();let b=o.build(e,n);if(b&&(d?b=m+" = "+b+";":(b="return "+b+";",h===null&&(console.warn("THREE.TSL: Return statement used in an inline 'Fn()'. Define a layout struct to allow return values."),b="// "+b))),e.removeFlowTab().addFlowCode(e.tab+"	"+b+`

`+e.tab+"}"),u!==null){e.addFlowCode(` else {

`).addFlowTab();let T=u.build(e,n);T&&(d?T=m+" = "+T+";":(T="return "+T+";",h===null&&(console.warn("THREE.TSL: Return statement used in an inline 'Fn()'. Define a layout struct to allow return values."),T="// "+T))),e.removeFlowTab().addFlowCode(e.tab+"	"+T+`

`+e.tab+`}

`)}else e.addFlowCode(`

`);return e.format(m,n,t)}}const jn=Ke(DB).setParameterLength(2,3);de("select",jn);class E9 extends Ie{static get type(){return"ContextNode"}constructor(e,t={}){super(),this.isContextNode=!0,this.node=e,this.value=t}getScope(){return this.node.getScope()}getNodeType(e){return this.node.getNodeType(e)}getMemberType(e,t){return this.node.getMemberType(e,t)}analyze(e){const t=e.getContext();e.setContext({...e.context,...this.value}),this.node.build(e),e.setContext(t)}setup(e){const t=e.getContext();e.setContext({...e.context,...this.value}),this.node.build(e),e.setContext(t)}generate(e,t){const n=e.getContext();e.setContext({...e.context,...this.value});const i=this.node.build(e,t);return e.setContext(n),i}}const Ru=Ke(E9).setParameterLength(1,2),N9=r=>Ru(r,{uniformFlow:!0}),Ip=(r,e)=>Ru(r,{nodeName:e});function R9(r,e){return console.warn('THREE.TSL: "label()" has been deprecated. Use "setName()" instead.'),Ip(r,e)}de("context",Ru);de("label",R9);de("uniformFlow",N9);de("setName",Ip);class oc extends Ie{static get type(){return"VarNode"}constructor(e,t=null,n=!1){super(),this.node=e,this.name=t,this.global=!0,this.isVarNode=!0,this.readOnly=n,this.parents=!0,this.intent=!1}setIntent(e){return this.intent=e,this}getIntent(){return this.intent}getMemberType(e,t){return this.node.getMemberType(e,t)}getElementType(e){return this.node.getElementType(e)}getNodeType(e){return this.node.getNodeType(e)}getArrayCount(e){return this.node.getArrayCount(e)}build(...e){return this.intent===!0&&e[0].getNodeProperties(this).assign!==!0?this.node.build(...e):super.build(...e)}generate(e){const{node:t,name:n,readOnly:i}=this,{renderer:s}=e,o=s.backend.isWebGPUBackend===!0;let u=!1,h=!1;i&&(u=e.isDeterministic(t),h=o?i:u);const d=e.getVectorType(this.getNodeType(e)),m=t.build(e,d),y=e.getVarFromNode(this,n,d,void 0,h),x=e.getPropertyName(y);let b=x;if(h)if(o)b=u?`const ${x}`:`let ${x}`;else{const T=t.getArrayCount(e);b=`const ${e.getVar(y.type,x,T)}`}return e.addLineFlowCode(`${b} = ${m}`,this),x}}const qp=Ke(oc),C9=(r,e=null)=>qp(r,e).toStack(),P9=(r,e=null)=>qp(r,e,!0).toStack(),B9=r=>C1()===null?r:qp(r).setIntent(!0).toStack();de("toVar",C9);de("toConst",P9);de("toVarIntent",B9);class FB extends Ie{static get type(){return"SubBuild"}constructor(e,t,n=null){super(n),this.node=e,this.name=t,this.isSubBuildNode=!0}getNodeType(e){if(this.nodeType!==null)return this.nodeType;e.addSubBuild(this.name);const t=this.node.getNodeType(e);return e.removeSubBuild(),t}build(e,...t){e.addSubBuild(this.name);const n=this.node.build(e,...t);return e.removeSubBuild(),n}}const EA=(r,e,t=null)=>pe(new FB(pe(r),e,t));class LB extends Ie{static get type(){return"VaryingNode"}constructor(e,t=null){super(),this.node=e,this.name=t,this.isVaryingNode=!0,this.interpolationType=null,this.interpolationSampling=null,this.global=!0}setInterpolation(e,t=null){return this.interpolationType=e,this.interpolationSampling=t,this}getHash(e){return this.name||super.getHash(e)}getNodeType(e){return this.node.getNodeType(e)}setupVarying(e){const t=e.getNodeProperties(this);let n=t.varying;if(n===void 0){const i=this.name,s=this.getNodeType(e),o=this.interpolationType,u=this.interpolationSampling;t.varying=n=e.getVaryingFromNode(this,i,s,o,u),t.node=EA(this.node,"VERTEX")}return n.needsInterpolation||(n.needsInterpolation=e.shaderStage==="fragment"),n}setup(e){this.setupVarying(e),e.flowNodeFromShaderStage(Ll.VERTEX,this.node)}analyze(e){this.setupVarying(e),e.flowNodeFromShaderStage(Ll.VERTEX,this.node)}generate(e){const t=e.getSubBuildProperty("property",e.currentStack),n=e.getNodeProperties(this),i=this.setupVarying(e);if(n[t]===void 0){const s=this.getNodeType(e),o=e.getPropertyName(i,Ll.VERTEX);e.flowNodeFromShaderStage(Ll.VERTEX,n.node,s,o),n[t]=o}return e.getPropertyName(i)}}const Ts=Ke(LB).setParameterLength(1,2),D9=r=>Ts(r);de("toVarying",Ts);de("toVertexStage",D9);de("varying",(...r)=>(console.warn("THREE.TSL: .varying() has been renamed to .toVarying()."),Ts(...r)));de("vertexStage",(...r)=>(console.warn("THREE.TSL: .vertexStage() has been renamed to .toVertexStage()."),Ts(...r)));const F9=re(([r])=>{const e=r.mul(.9478672986).add(.0521327014).pow(2.4),t=r.mul(.0773993808),n=r.lessThanEqual(.04045);return Bt(e,t,n)}).setLayout({name:"sRGBTransferEOTF",type:"vec3",inputs:[{name:"color",type:"vec3"}]}),L9=re(([r])=>{const e=r.pow(.41666).mul(1.055).sub(.055),t=r.mul(12.92),n=r.lessThanEqual(.0031308);return Bt(e,t,n)}).setLayout({name:"sRGBTransferOETF",type:"vec3",inputs:[{name:"color",type:"vec3"}]}),Op="WorkingColorSpace",IB="OutputColorSpace";class Up extends En{static get type(){return"ColorSpaceNode"}constructor(e,t,n){super("vec4"),this.colorNode=e,this.source=t,this.target=n}resolveColorSpace(e,t){return t===Op?bn.workingColorSpace:t===IB?e.context.outputColorSpace||e.renderer.outputColorSpace:t}setup(e){const{colorNode:t}=this,n=this.resolveColorSpace(e,this.source),i=this.resolveColorSpace(e,this.target);let s=t;return bn.enabled===!1||n===i||!n||!i||(bn.getTransfer(n)===dt&&(s=Ve(F9(s.rgb),s.a)),bn.getPrimaries(n)!==bn.getPrimaries(i)&&(s=Ve(fr(bn._getMatrix(new Tu,n,i)).mul(s.rgb),s.a)),bn.getTransfer(i)===dt&&(s=Ve(L9(s.rgb),s.a))),s}}const I9=(r,e)=>pe(new Up(pe(r),Op,e)),G1=(r,e)=>pe(new Up(pe(r),e,Op)),qB=(r,e,t)=>pe(new Up(pe(r),e,t));de("workingToColorSpace",I9);de("colorSpaceToWorking",G1);let OB=class extends Ra{static get type(){return"ReferenceElementNode"}constructor(e,t){super(e,t),this.referenceNode=e,this.isReferenceElementNode=!0}getNodeType(){return this.referenceNode.uniformType}generate(e){const t=super.generate(e),n=this.referenceNode.getNodeType(),i=this.getNodeType();return e.format(t,n,i)}};class q9 extends Ie{static get type(){return"ReferenceBaseNode"}constructor(e,t,n=null,i=null){super(),this.property=e,this.uniformType=t,this.object=n,this.count=i,this.properties=e.split("."),this.reference=n,this.node=null,this.group=null,this.updateType=lt.OBJECT}setGroup(e){return this.group=e,this}element(e){return pe(new OB(this,pe(e)))}setNodeType(e){const t=Ge(null,e);this.group!==null&&t.setGroup(this.group),this.node=t}getNodeType(e){return this.node===null&&(this.updateReference(e),this.updateValue()),this.node.getNodeType(e)}getValueFromReference(e=this.reference){const{properties:t}=this;let n=e[t[0]];for(let i=1;i<t.length;i++)n=n[t[i]];return n}updateReference(e){return this.reference=this.object!==null?this.object:e.object,this.reference}setup(){return this.updateValue(),this.node}update(){this.updateValue()}updateValue(){this.node===null&&this.setNodeType(this.uniformType);const e=this.getValueFromReference();Array.isArray(e)?this.node.array=e:this.node.value=e}}const UB=(r,e,t)=>pe(new q9(r,e,t));class kB extends q9{static get type(){return"RendererReferenceNode"}constructor(e,t,n=null){super(e,t,n),this.renderer=n,this.setGroup(ke)}updateReference(e){return this.reference=this.renderer!==null?this.renderer:e.renderer,this.reference}}const O9=(r,e,t=null)=>pe(new kB(r,e,t));class GB extends En{static get type(){return"ToneMappingNode"}constructor(e,t=k9,n=null){super("vec3"),this.toneMapping=e,this.exposureNode=t,this.colorNode=n}customCacheKey(){return t1(this.toneMapping)}setup(e){const t=this.colorNode||e.context.color,n=this.toneMapping;if(n===bA)return t;let i=null;const s=e.renderer.library.getToneMappingFunction(n);return s!==null?i=Ve(s(t.rgb,this.exposureNode),t.a):(console.error("ToneMappingNode: Unsupported Tone Mapping configuration.",n),i=t),i}}const U9=(r,e,t)=>pe(new GB(r,pe(e),pe(t))),k9=O9("toneMappingExposure","float");de("toneMapping",(r,e,t)=>U9(e,t,r));class VB extends cp{static get type(){return"BufferAttributeNode"}constructor(e,t=null,n=0,i=0){super(e,t),this.isBufferNode=!0,this.bufferType=t,this.bufferStride=n,this.bufferOffset=i,this.usage=tw,this.instanced=!1,this.attribute=null,this.global=!0,e&&e.isBufferAttribute===!0&&(this.attribute=e,this.usage=e.usage,this.instanced=e.isInstancedBufferAttribute)}getHash(e){if(this.bufferStride===0&&this.bufferOffset===0){let t=e.globalCache.getData(this.value);return t===void 0&&(t={node:this},e.globalCache.setData(this.value,t)),t.node.uuid}return this.uuid}getNodeType(e){return this.bufferType===null&&(this.bufferType=e.getTypeFromAttribute(this.attribute)),this.bufferType}setup(e){if(this.attribute!==null)return;const t=this.getNodeType(e),n=this.value,i=e.getTypeLength(t),s=this.bufferStride||i,o=this.bufferOffset,u=n.isInterleavedBuffer===!0?n:new Kg(n,s),h=new To(u,i,o);u.setUsage(this.usage),this.attribute=h,this.attribute.isInstancedBufferAttribute=this.instanced}generate(e){const t=this.getNodeType(e),n=e.getBufferAttributeFromNode(this,t),i=e.getPropertyName(n);let s=null;return e.shaderStage==="vertex"||e.shaderStage==="compute"?(this.name=i,s=i):s=Ts(this).build(e,t),s}getInputType(){return"bufferAttribute"}setUsage(e){return this.usage=e,this.attribute&&this.attribute.isBufferAttribute===!0&&(this.attribute.usage=e),this}setInstanced(e){return this.instanced=e,this}}const Cu=(r,e=null,t=0,n=0)=>pe(new VB(r,e,t,n)),G9=(r,e=null,t=0,n=0)=>Cu(r,e,t,n).setUsage(fA),l1=(r,e=null,t=0,n=0)=>Cu(r,e,t,n).setInstanced(!0),td=(r,e=null,t=0,n=0)=>G9(r,e,t,n).setInstanced(!0);de("toAttribute",r=>Cu(r.value));class zB extends Ie{static get type(){return"ComputeNode"}constructor(e,t){super("void"),this.isComputeNode=!0,this.computeNode=e,this.workgroupSize=t,this.count=null,this.version=1,this.name="",this.updateBeforeType=lt.OBJECT,this.onInitFunction=null}setCount(e){return this.count=e,this}getCount(){return this.count}dispose(){this.dispatchEvent({type:"dispose"})}setName(e){return this.name=e,this}label(e){return console.warn('THREE.TSL: "label()" has been deprecated. Use "setName()" instead.'),this.setName(e)}onInit(e){return this.onInitFunction=e,this}updateBefore({renderer:e}){e.compute(this)}setup(e){const t=this.computeNode.build(e);if(t){const n=e.getNodeProperties(this);n.outputComputeNode=t.outputNode,t.outputNode=null}return t}generate(e,t){const{shaderStage:n}=e;if(n==="compute"){const i=this.computeNode.build(e,"void");i!==""&&e.addLineFlowCode(i,this)}else{const s=e.getNodeProperties(this).outputComputeNode;if(s)return s.build(e,t)}}}const kp=(r,e=[64])=>{(e.length===0||e.length>3)&&console.error("THREE.TSL: compute() workgroupSize must have 1, 2, or 3 elements");for(let t=0;t<e.length;t++){const n=e[t];(typeof n!="number"||n<=0||!Number.isInteger(n))&&console.error(`THREE.TSL: compute() workgroupSize element at index [ ${t} ] must be a positive integer`)}for(;e.length<3;)e.push(1);return pe(new zB(pe(r),e))},V9=(r,e,t)=>kp(r,t).setCount(e);de("compute",V9);de("computeKernel",kp);class $B extends Ie{static get type(){return"CacheNode"}constructor(e,t=!0){super(),this.node=e,this.parent=t,this.isCacheNode=!0}getNodeType(e){const t=e.getCache(),n=e.getCacheFromNode(this,this.parent);e.setCache(n);const i=this.node.getNodeType(e);return e.setCache(t),i}build(e,...t){const n=e.getCache(),i=e.getCacheFromNode(this,this.parent);e.setCache(i);const s=this.node.build(e,...t);return e.setCache(n),s}}const Xl=(r,e)=>pe(new $B(pe(r),e));de("cache",Xl);class HB extends Ie{static get type(){return"BypassNode"}constructor(e,t){super(),this.isBypassNode=!0,this.outputNode=e,this.callNode=t}getNodeType(e){return this.outputNode.getNodeType(e)}generate(e){const t=this.callNode.build(e,"void");return t!==""&&e.addLineFlowCode(t,this),this.outputNode.build(e)}}const z9=Ke(HB).setParameterLength(2);de("bypass",z9);class $9 extends Ie{static get type(){return"RemapNode"}constructor(e,t,n,i=V(0),s=V(1)){super(),this.node=e,this.inLowNode=t,this.inHighNode=n,this.outLowNode=i,this.outHighNode=s,this.doClamp=!0}setup(){const{node:e,inLowNode:t,inHighNode:n,outLowNode:i,outHighNode:s,doClamp:o}=this;let u=e.sub(t).div(n.sub(t));return o===!0&&(u=u.clamp()),u.mul(s.sub(i)).add(i)}}const H9=Ke($9,null,null,{doClamp:!1}).setParameterLength(3,5),j9=Ke($9).setParameterLength(3,5);de("remap",H9);de("remapClamp",j9);class ac extends Ie{static get type(){return"ExpressionNode"}constructor(e="",t="void"){super(t),this.snippet=e}generate(e,t){const n=this.getNodeType(e),i=this.snippet;if(n==="void")e.addLineFlowCode(i,this);else return e.format(i,n,t)}}const Ys=Ke(ac).setParameterLength(1,2),W9=r=>(r?jn(r,Ys("discard")):Ys("discard")).toStack(),jB=()=>Ys("return").toStack();de("discard",W9);class WB extends En{static get type(){return"RenderOutputNode"}constructor(e,t,n){super("vec4"),this.colorNode=e,this.toneMapping=t,this.outputColorSpace=n,this.isRenderOutputNode=!0}setup({context:e}){let t=this.colorNode||e.color;const n=(this.toneMapping!==null?this.toneMapping:e.toneMapping)||bA,i=(this.outputColorSpace!==null?this.outputColorSpace:e.outputColorSpace)||RA;return n!==bA&&(t=t.toneMapping(n)),i!==RA&&i!==bn.workingColorSpace&&(t=t.workingToColorSpace(i)),t}}const Q9=(r,e=null,t=null)=>pe(new WB(pe(r),e,t));de("renderOutput",Q9);class QB extends En{static get type(){return"DebugNode"}constructor(e,t=null){super(),this.node=e,this.callback=t}getNodeType(e){return this.node.getNodeType(e)}setup(e){return this.node.build(e)}analyze(e){return this.node.build(e)}generate(e){const t=this.callback,n=this.node.build(e),i="--- TSL debug - "+e.shaderStage+" shader ---",s="-".repeat(i.length);let o="";return o+="// #"+i+`#
`,o+=e.flow.code.replace(/^\t/mg,"")+`
`,o+="/* ... */ "+n+` /* ... */
`,o+="// #"+s+`#
`,t!==null?t(e,o):console.log(o),n}}const X9=(r,e=null)=>pe(new QB(pe(r),e)).toStack();de("debug",X9);function XB(r){console.warn("THREE.TSL: AddNodeElement has been removed in favor of tree-shaking. Trying add",r)}class Y9 extends Ie{static get type(){return"AttributeNode"}constructor(e,t=null){super(t),this.global=!0,this._attributeName=e}getHash(e){return this.getAttributeName(e)}getNodeType(e){let t=this.nodeType;if(t===null){const n=this.getAttributeName(e);if(e.hasGeometryAttribute(n)){const i=e.geometry.getAttribute(n);t=e.getTypeFromAttribute(i)}else t="float"}return t}setAttributeName(e){return this._attributeName=e,this}getAttributeName(){return this._attributeName}generate(e){const t=this.getAttributeName(e),n=this.getNodeType(e);if(e.hasGeometryAttribute(t)===!0){const s=e.geometry.getAttribute(t),o=e.getTypeFromAttribute(s),u=e.getAttribute(t,o);return e.shaderStage==="vertex"?e.format(u.name,o,n):Ts(this).build(e,n)}else return console.warn(`AttributeNode: Vertex attribute "${t}" not found on geometry.`),e.generateConst(n)}serialize(e){super.serialize(e),e.global=this.global,e._attributeName=this._attributeName}deserialize(e){super.deserialize(e),this.global=e.global,this._attributeName=e._attributeName}}const Ks=(r,e=null)=>pe(new Y9(r,e)),Xt=(r=0)=>Ks("uv"+(r>0?r:""),"vec2");class YB extends Ie{static get type(){return"TextureSizeNode"}constructor(e,t=null){super("uvec2"),this.isTextureSizeNode=!0,this.textureNode=e,this.levelNode=t}generate(e,t){const n=this.textureNode.build(e,"property"),i=this.levelNode===null?"0":this.levelNode.build(e,"int");return e.format(`${e.getMethod("textureDimensions")}( ${n}, ${i} )`,this.getNodeType(e),t)}}const Co=Ke(YB).setParameterLength(1,2);class KB extends Eu{static get type(){return"MaxMipLevelNode"}constructor(e){super(0),this._textureNode=e,this.updateType=lt.FRAME}get textureNode(){return this._textureNode}get texture(){return this._textureNode.value}update(){const e=this.texture,t=e.images,n=t&&t.length>0?t[0]&&t[0].image||t[0]:e.image;if(n&&n.width!==void 0){const{width:i,height:s}=n;this.value=Math.log2(Math.max(i,s))}}}const Gp=Ke(KB).setParameterLength(1),Vp=new Md;class gs extends Eu{static get type(){return"TextureNode"}constructor(e=Vp,t=null,n=null,i=null){super(e),this.isTextureNode=!0,this.uvNode=t,this.levelNode=n,this.biasNode=i,this.compareNode=null,this.depthNode=null,this.gradNode=null,this.offsetNode=null,this.sampler=!0,this.updateMatrix=!1,this.updateType=lt.NONE,this.referenceNode=null,this._value=e,this._matrixUniform=null,this.setUpdateMatrix(t===null)}set value(e){this.referenceNode?this.referenceNode.value=e:this._value=e}get value(){return this.referenceNode?this.referenceNode.value:this._value}getUniformHash(){return this.value.uuid}getNodeType(){return this.value.isDepthTexture===!0?"float":this.value.type===In?"uvec4":this.value.type===vr?"ivec4":"vec4"}getInputType(){return"texture"}getDefaultUV(){return Xt(this.value.channel)}updateReference(){return this.value}getTransformedUV(e){return this._matrixUniform===null&&(this._matrixUniform=Ge(this.value.matrix)),this._matrixUniform.mul(ne(e,1)).xy}setUpdateMatrix(e){return this.updateMatrix=e,this.updateType=e?lt.OBJECT:lt.NONE,this}setupUV(e,t){const n=this.value;return e.isFlipY()&&(n.image instanceof ImageBitmap&&n.flipY===!0||n.isRenderTargetTexture===!0||n.isFramebufferTexture===!0||n.isDepthTexture===!0)&&(this.sampler?t=t.flipY():t=t.setY(Q(Co(this,this.levelNode).y).sub(t.y).sub(1))),t}setup(e){const t=e.getNodeProperties(this);t.referenceNode=this.referenceNode;const n=this.value;if(!n||n.isTexture!==!0)throw new Error("THREE.TSL: `texture( value )` function expects a valid instance of THREE.Texture().");let i=this.uvNode;(i===null||e.context.forceUVContext===!0)&&e.context.getUV&&(i=e.context.getUV(this,e)),i||(i=this.getDefaultUV()),this.updateMatrix===!0&&(i=this.getTransformedUV(i)),i=this.setupUV(e,i);let s=this.levelNode;s===null&&e.context.getTextureLevel&&(s=e.context.getTextureLevel(this)),t.uvNode=i,t.levelNode=s,t.biasNode=this.biasNode,t.compareNode=this.compareNode,t.gradNode=this.gradNode,t.depthNode=this.depthNode,t.offsetNode=this.offsetNode}generateUV(e,t){return t.build(e,this.sampler===!0?"vec2":"ivec2")}generateOffset(e,t){return t.build(e,"ivec2")}generateSnippet(e,t,n,i,s,o,u,h,d){const m=this.value;let y;return i?y=e.generateTextureLevel(m,t,n,i,o,d):s?y=e.generateTextureBias(m,t,n,s,o,d):h?y=e.generateTextureGrad(m,t,n,h,o,d):u?y=e.generateTextureCompare(m,t,n,u,o,d):this.sampler===!1?y=e.generateTextureLoad(m,t,n,o,d):y=e.generateTexture(m,t,n,o,d),y}generate(e,t){const n=this.value,i=e.getNodeProperties(this),s=super.generate(e,"property");if(/^sampler/.test(t))return s+"_sampler";if(e.isReference(t))return s;{const o=e.getDataFromNode(this);let u=o.propertyName;if(u===void 0){const{uvNode:m,levelNode:y,biasNode:x,compareNode:b,depthNode:T,gradNode:M,offsetNode:N}=i,C=this.generateUV(e,m),B=y?y.build(e,"float"):null,P=x?x.build(e,"float"):null,I=T?T.build(e,"int"):null,D=b?b.build(e,"float"):null,q=M?[M[0].build(e,"vec2"),M[1].build(e,"vec2")]:null,O=N?this.generateOffset(e,N):null,k=e.getVarFromNode(this);u=e.getPropertyName(k);const z=this.generateSnippet(e,s,C,B,P,I,D,q,O);e.addLineFlowCode(`${u} = ${z}`,this),o.snippet=z,o.propertyName=u}let h=u;const d=this.getNodeType(e);return e.needsToWorkingColorSpace(n)&&(h=G1(Ys(h,d),n.colorSpace).setup(e).build(e,d)),e.format(h,d,t)}}setSampler(e){return this.sampler=e,this}getSampler(){return this.sampler}uv(e){return console.warn("THREE.TextureNode: .uv() has been renamed. Use .sample() instead."),this.sample(e)}sample(e){const t=this.clone();return t.uvNode=pe(e),t.referenceNode=this.getBase(),pe(t)}load(e){return this.sample(e).setSampler(!1)}blur(e){const t=this.clone();t.biasNode=pe(e).mul(Gp(t)),t.referenceNode=this.getBase();const n=t.value;return t.generateMipmaps===!1&&(n&&n.generateMipmaps===!1||n.minFilter===Fi||n.magFilter===Fi)&&(console.warn("THREE.TSL: texture().blur() requires mipmaps and sampling. Use .generateMipmaps=true and .minFilter/.magFilter=THREE.LinearFilter in the Texture."),t.biasNode=null),pe(t)}level(e){const t=this.clone();return t.levelNode=pe(e),t.referenceNode=this.getBase(),pe(t)}size(e){return Co(this,e)}bias(e){const t=this.clone();return t.biasNode=pe(e),t.referenceNode=this.getBase(),pe(t)}getBase(){return this.referenceNode?this.referenceNode.getBase():this}compare(e){const t=this.clone();return t.compareNode=pe(e),t.referenceNode=this.getBase(),pe(t)}grad(e,t){const n=this.clone();return n.gradNode=[pe(e),pe(t)],n.referenceNode=this.getBase(),pe(n)}depth(e){const t=this.clone();return t.depthNode=pe(e),t.referenceNode=this.getBase(),pe(t)}offset(e){const t=this.clone();return t.offsetNode=pe(e),t.referenceNode=this.getBase(),pe(t)}serialize(e){super.serialize(e),e.value=this.value.toJSON(e.meta).uuid,e.sampler=this.sampler,e.updateMatrix=this.updateMatrix,e.updateType=this.updateType}deserialize(e){super.deserialize(e),this.value=e.meta.textures[e.value],this.sampler=e.sampler,this.updateMatrix=e.updateMatrix,this.updateType=e.updateType}update(){const e=this.value,t=this._matrixUniform;t!==null&&(t.value=e.matrix),e.matrixAutoUpdate===!0&&e.updateMatrix()}clone(){const e=new this.constructor(this.value,this.uvNode,this.levelNode,this.biasNode);return e.sampler=this.sampler,e.depthNode=this.depthNode,e.compareNode=this.compareNode,e.gradNode=this.gradNode,e.offsetNode=this.offsetNode,e}}const ZB=Ke(gs).setParameterLength(1,4).setName("texture"),xt=(r=Vp,e=null,t=null,n=null)=>{let i;return r&&r.isTextureNode===!0?(i=pe(r.clone()),i.referenceNode=r.getBase(),e!==null&&(i.uvNode=pe(e)),t!==null&&(i.levelNode=pe(t)),n!==null&&(i.biasNode=pe(n))):i=ZB(r,e,t,n),i},JB=(r=Vp)=>xt(r),_n=(...r)=>xt(...r).setSampler(!1),eD=r=>(r.isNode===!0?r:xt(r)).convert("sampler"),tD=r=>(r.isNode===!0?r:xt(r)).convert("samplerComparison");class zp extends Eu{static get type(){return"BufferNode"}constructor(e,t,n=0){super(e,t),this.isBufferNode=!0,this.bufferType=t,this.bufferCount=n}getElementType(e){return this.getNodeType(e)}getInputType(){return"buffer"}}const Pu=(r,e,t)=>pe(new zp(r,e,t));class nD extends Ra{static get type(){return"UniformArrayElementNode"}constructor(e,t){super(e,t),this.isArrayBufferElementNode=!0}generate(e){const t=super.generate(e),n=this.getNodeType(),i=this.node.getPaddedType();return e.format(t,i,n)}}class rD extends zp{static get type(){return"UniformArrayNode"}constructor(e,t=null){super(null),this.array=e,this.elementType=t===null?wo(e[0]):t,this.paddedType=this.getPaddedType(),this.updateType=lt.RENDER,this.isArrayBufferNode=!0}getNodeType(){return this.paddedType}getElementType(){return this.elementType}getPaddedType(){const e=this.elementType;let t="vec4";return e==="mat2"?t="mat2":/mat/.test(e)===!0?t="mat4":e.charAt(0)==="i"?t="ivec4":e.charAt(0)==="u"&&(t="uvec4"),t}update(){const{array:e,value:t}=this,n=this.elementType;if(n==="float"||n==="int"||n==="uint")for(let i=0;i<e.length;i++){const s=i*4;t[s]=e[i]}else if(n==="color")for(let i=0;i<e.length;i++){const s=i*4,o=e[i];t[s]=o.r,t[s+1]=o.g,t[s+2]=o.b||0}else if(n==="mat2")for(let i=0;i<e.length;i++){const s=i*4,o=e[i];t[s]=o.elements[0],t[s+1]=o.elements[1],t[s+2]=o.elements[2],t[s+3]=o.elements[3]}else if(n==="mat3")for(let i=0;i<e.length;i++){const s=i*16,o=e[i];t[s]=o.elements[0],t[s+1]=o.elements[1],t[s+2]=o.elements[2],t[s+4]=o.elements[3],t[s+5]=o.elements[4],t[s+6]=o.elements[5],t[s+8]=o.elements[6],t[s+9]=o.elements[7],t[s+10]=o.elements[8],t[s+15]=1}else if(n==="mat4")for(let i=0;i<e.length;i++){const s=i*16,o=e[i];for(let u=0;u<o.elements.length;u++)t[s+u]=o.elements[u]}else for(let i=0;i<e.length;i++){const s=i*4,o=e[i];t[s]=o.x,t[s+1]=o.y,t[s+2]=o.z||0,t[s+3]=o.w||0}}setup(e){const t=this.array.length,n=this.elementType;let i=Float32Array;const s=this.paddedType,o=e.getTypeLength(s);return n.charAt(0)==="i"&&(i=Int32Array),n.charAt(0)==="u"&&(i=Uint32Array),this.value=new i(t*o),this.bufferCount=t,this.bufferType=s,super.setup(e)}element(e){return pe(new nD(this,pe(e)))}}const cr=(r,e)=>pe(new rD(r,e));class iD extends Ie{constructor(e){super("float"),this.name=e,this.isBuiltinNode=!0}generate(){return this.name}}const eo=Ke(iD).setParameterLength(1);let hl,fl;class en extends Ie{static get type(){return"ScreenNode"}constructor(e){super(),this.scope=e,this._output=null,this.isViewportNode=!0}getNodeType(){return this.scope===en.DPR?"float":this.scope===en.VIEWPORT?"vec4":"vec2"}getUpdateType(){let e=lt.NONE;return(this.scope===en.SIZE||this.scope===en.VIEWPORT||this.scope===en.DPR)&&(e=lt.RENDER),this.updateType=e,e}update({renderer:e}){const t=e.getRenderTarget();this.scope===en.VIEWPORT?t!==null?fl.copy(t.viewport):(e.getViewport(fl),fl.multiplyScalar(e.getPixelRatio())):this.scope===en.DPR?this._output.value=e.getPixelRatio():t!==null?(hl.width=t.width,hl.height=t.height):e.getDrawingBufferSize(hl)}setup(){const e=this.scope;let t=null;return e===en.SIZE?t=Ge(hl||(hl=new Ot)):e===en.VIEWPORT?t=Ge(fl||(fl=new Ut)):e===en.DPR?t=Ge(1):t=ve(Bu.div(Sa)),this._output=t,t}generate(e){if(this.scope===en.COORDINATE){let t=e.getFragCoord();if(e.isFlipY()){const n=e.getNodeProperties(Sa).outputNode.build(e);t=`${e.getType("vec2")}( ${t}.x, ${n}.y - ${t}.y )`}return t}return super.generate(e)}}en.COORDINATE="coordinate";en.VIEWPORT="viewport";en.SIZE="size";en.UV="uv";en.DPR="dpr";const K9=Ce(en,en.DPR),Vs=Ce(en,en.UV),Sa=Ce(en,en.SIZE),Bu=Ce(en,en.COORDINATE),$p=Ce(en,en.VIEWPORT),Hp=$p.zw,Z9=Bu.sub($p.xy),sD=Z9.div(Hp),oD=re(()=>(console.warn('THREE.TSL: "viewportResolution" is deprecated. Use "screenSize" instead.'),Sa),"vec2").once()(),Uo=Ge(0,"uint").setName("u_cameraIndex").setGroup(L1("cameraIndex")).toVarying("v_cameraIndex"),_o=Ge("float").setName("cameraNear").setGroup(ke).onRenderUpdate(({camera:r})=>r.near),xo=Ge("float").setName("cameraFar").setGroup(ke).onRenderUpdate(({camera:r})=>r.far),HA=re(({camera:r})=>{let e;if(r.isArrayCamera&&r.cameras.length>0){const t=[];for(const i of r.cameras)t.push(i.projectionMatrix);e=cr(t).setGroup(ke).setName("cameraProjectionMatrices").element(r.isMultiViewCamera?eo("gl_ViewID_OVR"):Uo).toConst("cameraProjectionMatrix")}else e=Ge("mat4").setName("cameraProjectionMatrix").setGroup(ke).onRenderUpdate(({camera:t})=>t.projectionMatrix);return e}).once()(),aD=re(({camera:r})=>{let e;if(r.isArrayCamera&&r.cameras.length>0){const t=[];for(const i of r.cameras)t.push(i.projectionMatrixInverse);e=cr(t).setGroup(ke).setName("cameraProjectionMatricesInverse").element(r.isMultiViewCamera?eo("gl_ViewID_OVR"):Uo).toConst("cameraProjectionMatrixInverse")}else e=Ge("mat4").setName("cameraProjectionMatrixInverse").setGroup(ke).onRenderUpdate(({camera:t})=>t.projectionMatrixInverse);return e}).once()(),wi=re(({camera:r})=>{let e;if(r.isArrayCamera&&r.cameras.length>0){const t=[];for(const i of r.cameras)t.push(i.matrixWorldInverse);e=cr(t).setGroup(ke).setName("cameraViewMatrices").element(r.isMultiViewCamera?eo("gl_ViewID_OVR"):Uo).toConst("cameraViewMatrix")}else e=Ge("mat4").setName("cameraViewMatrix").setGroup(ke).onRenderUpdate(({camera:t})=>t.matrixWorldInverse);return e}).once()(),AD=re(({camera:r})=>{let e;if(r.isArrayCamera&&r.cameras.length>0){const t=[];for(const i of r.cameras)t.push(i.matrixWorld);e=cr(t).setGroup(ke).setName("cameraWorldMatrices").element(r.isMultiViewCamera?eo("gl_ViewID_OVR"):Uo).toConst("cameraWorldMatrix")}else e=Ge("mat4").setName("cameraWorldMatrix").setGroup(ke).onRenderUpdate(({camera:t})=>t.matrixWorld);return e}).once()(),lD=re(({camera:r})=>{let e;if(r.isArrayCamera&&r.cameras.length>0){const t=[];for(const i of r.cameras)t.push(i.normalMatrix);e=cr(t).setGroup(ke).setName("cameraNormalMatrices").element(r.isMultiViewCamera?eo("gl_ViewID_OVR"):Uo).toConst("cameraNormalMatrix")}else e=Ge("mat3").setName("cameraNormalMatrix").setGroup(ke).onRenderUpdate(({camera:t})=>t.normalMatrix);return e}).once()(),J9=re(({camera:r})=>{let e;if(r.isArrayCamera&&r.cameras.length>0){const t=[];for(let i=0,s=r.cameras.length;i<s;i++)t.push(new Re);e=cr(t).setGroup(ke).setName("cameraPositions").onRenderUpdate(({camera:i},s)=>{const o=i.cameras,u=s.array;for(let h=0,d=o.length;h<d;h++)u[h].setFromMatrixPosition(o[h].matrixWorld)}).element(r.isMultiViewCamera?eo("gl_ViewID_OVR"):Uo).toConst("cameraPosition")}else e=Ge(new Re).setName("cameraPosition").setGroup(ke).onRenderUpdate(({camera:t},n)=>n.value.setFromMatrixPosition(t.matrixWorld));return e}).once()(),uD=re(({camera:r})=>{let e;if(r.isArrayCamera&&r.cameras.length>0){const t=[];for(const i of r.cameras)t.push(i.viewport);e=cr(t,"vec4").setGroup(ke).setName("cameraViewports").element(Uo).toConst("cameraViewport")}else e=Ve(0,0,Sa.x,Sa.y).toConst("cameraViewport");return e}).once()(),p5=new Gd;class wt extends Ie{static get type(){return"Object3DNode"}constructor(e,t=null){super(),this.scope=e,this.object3d=t,this.updateType=lt.OBJECT,this.uniformNode=new Eu(null)}getNodeType(){const e=this.scope;if(e===wt.WORLD_MATRIX)return"mat4";if(e===wt.POSITION||e===wt.VIEW_POSITION||e===wt.DIRECTION||e===wt.SCALE)return"vec3";if(e===wt.RADIUS)return"float"}update(e){const t=this.object3d,n=this.uniformNode,i=this.scope;if(i===wt.WORLD_MATRIX)n.value=t.matrixWorld;else if(i===wt.POSITION)n.value=n.value||new Re,n.value.setFromMatrixPosition(t.matrixWorld);else if(i===wt.SCALE)n.value=n.value||new Re,n.value.setFromMatrixScale(t.matrixWorld);else if(i===wt.DIRECTION)n.value=n.value||new Re,t.getWorldDirection(n.value);else if(i===wt.VIEW_POSITION){const s=e.camera;n.value=n.value||new Re,n.value.setFromMatrixPosition(t.matrixWorld),n.value.applyMatrix4(s.matrixWorldInverse)}else if(i===wt.RADIUS){const s=e.object.geometry;s.boundingSphere===null&&s.computeBoundingSphere(),p5.copy(s.boundingSphere).applyMatrix4(t.matrixWorld),n.value=p5.radius}}generate(e){const t=this.scope;return t===wt.WORLD_MATRIX?this.uniformNode.nodeType="mat4":t===wt.POSITION||t===wt.VIEW_POSITION||t===wt.DIRECTION||t===wt.SCALE?this.uniformNode.nodeType="vec3":t===wt.RADIUS&&(this.uniformNode.nodeType="float"),this.uniformNode.build(e)}serialize(e){super.serialize(e),e.scope=this.scope}deserialize(e){super.deserialize(e),this.scope=e.scope}}wt.WORLD_MATRIX="worldMatrix";wt.POSITION="position";wt.SCALE="scale";wt.VIEW_POSITION="viewPosition";wt.DIRECTION="direction";wt.RADIUS="radius";const cD=Ke(wt,wt.DIRECTION).setParameterLength(1),hD=Ke(wt,wt.WORLD_MATRIX).setParameterLength(1),ey=Ke(wt,wt.POSITION).setParameterLength(1),fD=Ke(wt,wt.SCALE).setParameterLength(1),dD=Ke(wt,wt.VIEW_POSITION).setParameterLength(1),pD=Ke(wt,wt.RADIUS).setParameterLength(1);class _i extends wt{static get type(){return"ModelNode"}constructor(e){super(e)}update(e){this.object3d=e.object,super.update(e)}}const mD=Ce(_i,_i.DIRECTION),fi=Ce(_i,_i.WORLD_MATRIX),gD=Ce(_i,_i.POSITION),yD=Ce(_i,_i.SCALE),vD=Ce(_i,_i.VIEW_POSITION),_D=Ce(_i,_i.RADIUS),ty=Ge(new Tu).onObjectUpdate(({object:r},e)=>e.value.getNormalMatrix(r.matrixWorld)),xD=Ge(new mn).onObjectUpdate(({object:r},e)=>e.value.copy(r.matrixWorld).invert()),Ca=re(r=>r.renderer.overrideNodes.modelViewMatrix||ny).once()().toVar("modelViewMatrix"),ny=wi.mul(fi),nd=re(r=>(r.context.isHighPrecisionModelViewMatrix=!0,Ge("mat4").onObjectUpdate(({object:e,camera:t})=>e.modelViewMatrix.multiplyMatrices(t.matrixWorldInverse,e.matrixWorld)))).once()().toVar("highpModelViewMatrix"),rd=re(r=>{const e=r.context.isHighPrecisionModelViewMatrix;return Ge("mat3").onObjectUpdate(({object:t,camera:n})=>(e!==!0&&t.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix)))}).once()().toVar("highpModelNormalViewMatrix"),Du=Ks("position","vec3"),Tn=Du.toVarying("positionLocal"),u1=Du.toVarying("positionPrevious"),fs=re(r=>fi.mul(Tn).xyz.toVarying(r.getSubBuildProperty("v_positionWorld")),"vec3").once(["POSITION"])(),jp=re(()=>Tn.transformDirection(fi).toVarying("v_positionWorldDirection").normalize().toVar("positionWorldDirection"),"vec3").once(["POSITION"])(),wn=re(r=>r.context.setupPositionView().toVarying("v_positionView"),"vec3").once(["POSITION"])(),An=wn.negate().toVarying("v_positionViewDirection").normalize().toVar("positionViewDirection");class bD extends Ie{static get type(){return"FrontFacingNode"}constructor(){super("bool"),this.isFrontFacingNode=!0}generate(e){if(e.shaderStage!=="fragment")return"true";const{material:t}=e;return t.side===Tr?"false":e.getFrontFacing()}}const ry=Ce(bD),Wp=V(ry).mul(2).sub(1),jA=re(([r],{material:e})=>{const t=e.side;return t===Tr?r=r.mul(-1):t===pi&&(r=r.mul(Wp)),r}),V1=Ks("normal","vec3"),Ir=re(r=>r.geometry.hasAttribute("normal")===!1?(console.warn('THREE.TSL: Vertex attribute "normal" not found on geometry.'),ne(0,1,0)):V1,"vec3").once()().toVar("normalLocal"),iy=wn.dFdx().cross(wn.dFdy()).normalize().toVar("normalFlat"),OA=re(r=>{let e;return r.material.flatShading===!0?e=iy:e=Qp(Ir).toVarying("v_normalViewGeometry").normalize(),e},"vec3").once()().toVar("normalViewGeometry"),sy=re(r=>{let e=OA.transformDirection(wi);return r.material.flatShading!==!0&&(e=e.toVarying("v_normalWorldGeometry")),e.normalize().toVar("normalWorldGeometry")},"vec3").once()(),$t=re(({subBuildFn:r,material:e,context:t})=>{let n;return r==="NORMAL"||r==="VERTEX"?(n=OA,e.flatShading!==!0&&(n=jA(n))):n=t.setupNormal().context({getUV:null}),n},"vec3").once(["NORMAL","VERTEX"])().toVar("normalView"),ko=$t.transformDirection(wi).toVar("normalWorld"),fa=re(({subBuildFn:r,context:e})=>{let t;return r==="NORMAL"||r==="VERTEX"?t=$t:t=e.setupClearcoatNormal().context({getUV:null}),t},"vec3").once(["NORMAL","VERTEX"])().toVar("clearcoatNormalView"),oy=re(([r,e=fi])=>{const t=fr(e),n=r.div(ne(t[0].dot(t[0]),t[1].dot(t[1]),t[2].dot(t[2])));return t.mul(n).xyz}),Qp=re(([r],e)=>{const t=e.renderer.overrideNodes.modelNormalViewMatrix;if(t!==null)return t.transformDirection(r);const n=ty.mul(r);return wi.transformDirection(n)}),TD=re(()=>(console.warn('THREE.TSL: "transformedNormalView" is deprecated. Use "normalView" instead.'),$t)).once(["NORMAL","VERTEX"])(),wD=re(()=>(console.warn('THREE.TSL: "transformedNormalWorld" is deprecated. Use "normalWorld" instead.'),ko)).once(["NORMAL","VERTEX"])(),SD=re(()=>(console.warn('THREE.TSL: "transformedClearcoatNormalView" is deprecated. Use "clearcoatNormalView" instead.'),fa)).once(["NORMAL","VERTEX"])(),m5=new Jl,th=new mn,ay=Ge(0).onReference(({material:r})=>r).onObjectUpdate(({material:r})=>r.refractionRatio),Ac=Ge(1).onReference(({material:r})=>r).onObjectUpdate(function({material:r,scene:e}){return r.envMap?r.envMapIntensity:e.environmentIntensity}),Xp=Ge(new mn).onReference(function(r){return r.material}).onObjectUpdate(function({material:r,scene:e}){const t=e.environment!==null&&r.envMap===null?e.environmentRotation:r.envMapRotation;return t?(m5.copy(t),th.makeRotationFromEuler(m5)):th.identity(),th}),Ay=An.negate().reflect($t),ly=An.negate().refract($t,ay),uy=Ay.transformDirection(wi).toVar("reflectVector"),cy=ly.transformDirection(wi).toVar("reflectVector"),hy=new Ed;class MD extends gs{static get type(){return"CubeTextureNode"}constructor(e,t=null,n=null,i=null){super(e,t,n,i),this.isCubeTextureNode=!0}getInputType(){return"cubeTexture"}getDefaultUV(){const e=this.value;return e.mapping===yc?uy:e.mapping===vc?cy:(console.error('THREE.CubeTextureNode: Mapping "%s" not supported.',e.mapping),ne(0,0,0))}setUpdateMatrix(){}setupUV(e,t){const n=this.value;return(e.renderer.coordinateSystem===zA||!n.isRenderTargetTexture)&&(t=ne(t.x.negate(),t.yz)),Xp.mul(t)}generateUV(e,t){return t.build(e,"vec3")}}const Yp=Ke(MD).setParameterLength(1,4).setName("cubeTexture"),UA=(r=hy,e=null,t=null,n=null)=>{let i;return r&&r.isCubeTextureNode===!0?(i=pe(r.clone()),i.referenceNode=r,e!==null&&(i.uvNode=pe(e)),t!==null&&(i.levelNode=pe(t)),n!==null&&(i.biasNode=pe(n))):i=Yp(r,e,t,n),i},ED=(r=hy)=>Yp(r);class ND extends Ra{static get type(){return"ReferenceElementNode"}constructor(e,t){super(e,t),this.referenceNode=e,this.isReferenceElementNode=!0}getNodeType(){return this.referenceNode.uniformType}generate(e){const t=super.generate(e),n=this.referenceNode.getNodeType(),i=this.getNodeType();return e.format(t,n,i)}}class z1 extends Ie{static get type(){return"ReferenceNode"}constructor(e,t,n=null,i=null){super(),this.property=e,this.uniformType=t,this.object=n,this.count=i,this.properties=e.split("."),this.reference=n,this.node=null,this.group=null,this.name=null,this.updateType=lt.OBJECT}element(e){return pe(new ND(this,pe(e)))}setGroup(e){return this.group=e,this}setName(e){return this.name=e,this}label(e){return console.warn('THREE.TSL: "label()" has been deprecated. Use "setName()" instead.'),this.setName(e)}setNodeType(e){let t=null;this.count!==null?t=Pu(null,e,this.count):Array.isArray(this.getValueFromReference())?t=cr(null,e):e==="texture"?t=xt(null):e==="cubeTexture"?t=UA(null):t=Ge(null,e),this.group!==null&&t.setGroup(this.group),this.name!==null&&t.setName(this.name),this.node=t}getNodeType(e){return this.node===null&&(this.updateReference(e),this.updateValue()),this.node.getNodeType(e)}getValueFromReference(e=this.reference){const{properties:t}=this;let n=e[t[0]];for(let i=1;i<t.length;i++)n=n[t[i]];return n}updateReference(e){return this.reference=this.object!==null?this.object:e.object,this.reference}setup(){return this.updateValue(),this.node}update(){this.updateValue()}updateValue(){this.node===null&&this.setNodeType(this.uniformType);const e=this.getValueFromReference();Array.isArray(e)?this.node.array=e:this.node.value=e}}const Kt=(r,e,t)=>pe(new z1(r,e,t)),id=(r,e,t,n)=>pe(new z1(r,e,n,t));class RD extends z1{static get type(){return"MaterialReferenceNode"}constructor(e,t,n=null){super(e,t,n),this.material=n,this.isMaterialReferenceNode=!0}updateReference(e){return this.reference=this.material!==null?this.material:e.material,this.reference}}const Is=(r,e,t=null)=>pe(new RD(r,e,t)),fy=Xt(),CD=wn.dFdx(),PD=wn.dFdy(),dy=fy.dFdx(),py=fy.dFdy(),my=$t,gy=PD.cross(my),yy=my.cross(CD),sd=gy.mul(dy.x).add(yy.mul(py.x)),od=gy.mul(dy.y).add(yy.mul(py.y)),g5=sd.dot(sd).max(od.dot(od)),vy=g5.equal(0).select(0,g5.inverseSqrt()),BD=sd.mul(vy).toVar("tangentViewFrame"),DD=od.mul(vy).toVar("bitangentViewFrame"),$1=re(r=>(r.geometry.hasAttribute("tangent")===!1&&r.geometry.computeTangents(),Ks("tangent","vec4")))(),Fu=$1.xyz.toVar("tangentLocal"),H1=re(({subBuildFn:r,geometry:e,material:t})=>{let n;return r==="VERTEX"||e.hasAttribute("tangent")?n=Ca.mul(Ve(Fu,0)).xyz.toVarying("v_tangentView").normalize():n=BD,t.flatShading!==!0&&(n=jA(n)),n},"vec3").once(["NORMAL","VERTEX"])().toVar("tangentView"),_y=H1.transformDirection(wi).toVarying("v_tangentWorld").normalize().toVar("tangentWorld"),j1=re(([r,e],{subBuildFn:t,material:n})=>{let i=r.mul($1.w).xyz;return t==="NORMAL"&&n.flatShading!==!0&&(i=i.toVarying(e)),i}).once(["NORMAL"]),FD=j1(V1.cross($1),"v_bitangentGeometry").normalize().toVar("bitangentGeometry"),LD=j1(Ir.cross(Fu),"v_bitangentLocal").normalize().toVar("bitangentLocal"),xy=re(({subBuildFn:r,geometry:e,material:t})=>{let n;return r==="VERTEX"||e.hasAttribute("tangent")?n=j1($t.cross(H1),"v_bitangentView").normalize():n=DD,t.flatShading!==!0&&(n=jA(n)),n},"vec3").once(["NORMAL","VERTEX"])().toVar("bitangentView"),ID=j1(ko.cross(_y),"v_bitangentWorld").normalize().toVar("bitangentWorld"),da=fr(H1,xy,$t).toVar("TBNViewMatrix"),by=An.mul(da),qD=(r,e)=>r.sub(by.mul(e)),Ty=re(()=>{let r=va.cross(An);return r=r.cross(va).normalize(),r=Bt(r,$t,yo.mul(os.oneMinus()).oneMinus().pow2().pow2()).normalize(),r}).once()();class OD extends En{static get type(){return"NormalMapNode"}constructor(e,t=null){super("vec3"),this.node=e,this.scaleNode=t,this.normalMapType=q4}setup({material:e}){const{normalMapType:t,scaleNode:n}=this;let i=this.node.mul(2).sub(1);if(n!==null){let o=n;e.flatShading===!0&&(o=jA(o)),i=ne(i.xy.mul(o),i.z)}let s=null;return t===ew?s=Qp(i):t===q4?s=da.mul(i).normalize():(console.error(`THREE.NodeMaterial: Unsupported normal map type: ${t}`),s=$t),s}}const ad=Ke(OD).setParameterLength(1,2),UD=re(({textureNode:r,bumpScale:e})=>{const t=i=>r.cache().context({getUV:s=>i(s.uvNode||Xt()),forceUVContext:!0}),n=V(t(i=>i));return ve(V(t(i=>i.add(i.dFdx()))).sub(n),V(t(i=>i.add(i.dFdy()))).sub(n)).mul(e)}),kD=re(r=>{const{surf_pos:e,surf_norm:t,dHdxy:n}=r,i=e.dFdx().normalize(),s=e.dFdy().normalize(),o=t,u=s.cross(o),h=o.cross(i),d=i.dot(u).mul(Wp),m=d.sign().mul(n.x.mul(u).add(n.y.mul(h)));return d.abs().mul(t).sub(m).normalize()});class GD extends En{static get type(){return"BumpMapNode"}constructor(e,t=null){super("vec3"),this.textureNode=e,this.scaleNode=t}setup(){const e=this.scaleNode!==null?this.scaleNode:1,t=UD({textureNode:this.textureNode,bumpScale:e});return kD({surf_pos:wn,surf_norm:$t,dHdxy:t})}}const Kp=Ke(GD).setParameterLength(1,2),y5=new Map;class me extends Ie{static get type(){return"MaterialNode"}constructor(e){super(),this.scope=e}getCache(e,t){let n=y5.get(e);return n===void 0&&(n=Is(e,t),y5.set(e,n)),n}getFloat(e){return this.getCache(e,"float")}getColor(e){return this.getCache(e,"color")}getTexture(e){return this.getCache(e==="map"?"map":e+"Map","texture")}setup(e){const t=e.context.material,n=this.scope;let i=null;if(n===me.COLOR){const s=t.color!==void 0?this.getColor(n):ne();t.map&&t.map.isTexture===!0?i=s.mul(this.getTexture("map")):i=s}else if(n===me.OPACITY){const s=this.getFloat(n);t.alphaMap&&t.alphaMap.isTexture===!0?i=s.mul(this.getTexture("alpha")):i=s}else if(n===me.SPECULAR_STRENGTH)t.specularMap&&t.specularMap.isTexture===!0?i=this.getTexture("specular").r:i=V(1);else if(n===me.SPECULAR_INTENSITY){const s=this.getFloat(n);t.specularIntensityMap&&t.specularIntensityMap.isTexture===!0?i=s.mul(this.getTexture(n).a):i=s}else if(n===me.SPECULAR_COLOR){const s=this.getColor(n);t.specularColorMap&&t.specularColorMap.isTexture===!0?i=s.mul(this.getTexture(n).rgb):i=s}else if(n===me.ROUGHNESS){const s=this.getFloat(n);t.roughnessMap&&t.roughnessMap.isTexture===!0?i=s.mul(this.getTexture(n).g):i=s}else if(n===me.METALNESS){const s=this.getFloat(n);t.metalnessMap&&t.metalnessMap.isTexture===!0?i=s.mul(this.getTexture(n).b):i=s}else if(n===me.EMISSIVE){const s=this.getFloat("emissiveIntensity"),o=this.getColor(n).mul(s);t.emissiveMap&&t.emissiveMap.isTexture===!0?i=o.mul(this.getTexture(n)):i=o}else if(n===me.NORMAL)t.normalMap?(i=ad(this.getTexture("normal"),this.getCache("normalScale","vec2")),i.normalMapType=t.normalMapType):t.bumpMap?i=Kp(this.getTexture("bump").r,this.getFloat("bumpScale")):i=$t;else if(n===me.CLEARCOAT){const s=this.getFloat(n);t.clearcoatMap&&t.clearcoatMap.isTexture===!0?i=s.mul(this.getTexture(n).r):i=s}else if(n===me.CLEARCOAT_ROUGHNESS){const s=this.getFloat(n);t.clearcoatRoughnessMap&&t.clearcoatRoughnessMap.isTexture===!0?i=s.mul(this.getTexture(n).r):i=s}else if(n===me.CLEARCOAT_NORMAL)t.clearcoatNormalMap?i=ad(this.getTexture(n),this.getCache(n+"Scale","vec2")):i=$t;else if(n===me.SHEEN){const s=this.getColor("sheenColor").mul(this.getFloat("sheen"));t.sheenColorMap&&t.sheenColorMap.isTexture===!0?i=s.mul(this.getTexture("sheenColor").rgb):i=s}else if(n===me.SHEEN_ROUGHNESS){const s=this.getFloat(n);t.sheenRoughnessMap&&t.sheenRoughnessMap.isTexture===!0?i=s.mul(this.getTexture(n).a):i=s,i=i.clamp(.07,1)}else if(n===me.ANISOTROPY)if(t.anisotropyMap&&t.anisotropyMap.isTexture===!0){const s=this.getTexture(n);i=B1(uA.x,uA.y,uA.y.negate(),uA.x).mul(s.rg.mul(2).sub(ve(1)).normalize().mul(s.b))}else i=uA;else if(n===me.IRIDESCENCE_THICKNESS){const s=Kt("1","float",t.iridescenceThicknessRange);if(t.iridescenceThicknessMap){const o=Kt("0","float",t.iridescenceThicknessRange);i=s.sub(o).mul(this.getTexture(n).g).add(o)}else i=s}else if(n===me.TRANSMISSION){const s=this.getFloat(n);t.transmissionMap?i=s.mul(this.getTexture(n).r):i=s}else if(n===me.THICKNESS){const s=this.getFloat(n);t.thicknessMap?i=s.mul(this.getTexture(n).g):i=s}else if(n===me.IOR)i=this.getFloat(n);else if(n===me.LIGHT_MAP)i=this.getTexture(n).rgb.mul(this.getFloat("lightMapIntensity"));else if(n===me.AO)i=this.getTexture(n).r.sub(1).mul(this.getFloat("aoMapIntensity")).add(1);else if(n===me.LINE_DASH_OFFSET)i=t.dashOffset?this.getFloat(n):V(0);else{const s=this.getNodeType(e);i=this.getCache(n,s)}return i}}me.ALPHA_TEST="alphaTest";me.COLOR="color";me.OPACITY="opacity";me.SHININESS="shininess";me.SPECULAR="specular";me.SPECULAR_STRENGTH="specularStrength";me.SPECULAR_INTENSITY="specularIntensity";me.SPECULAR_COLOR="specularColor";me.REFLECTIVITY="reflectivity";me.ROUGHNESS="roughness";me.METALNESS="metalness";me.NORMAL="normal";me.CLEARCOAT="clearcoat";me.CLEARCOAT_ROUGHNESS="clearcoatRoughness";me.CLEARCOAT_NORMAL="clearcoatNormal";me.EMISSIVE="emissive";me.ROTATION="rotation";me.SHEEN="sheen";me.SHEEN_ROUGHNESS="sheenRoughness";me.ANISOTROPY="anisotropy";me.IRIDESCENCE="iridescence";me.IRIDESCENCE_IOR="iridescenceIOR";me.IRIDESCENCE_THICKNESS="iridescenceThickness";me.IOR="ior";me.TRANSMISSION="transmission";me.THICKNESS="thickness";me.ATTENUATION_DISTANCE="attenuationDistance";me.ATTENUATION_COLOR="attenuationColor";me.LINE_SCALE="scale";me.LINE_DASH_SIZE="dashSize";me.LINE_GAP_SIZE="gapSize";me.LINE_WIDTH="linewidth";me.LINE_DASH_OFFSET="dashOffset";me.POINT_SIZE="size";me.DISPERSION="dispersion";me.LIGHT_MAP="light";me.AO="ao";const wy=Ce(me,me.ALPHA_TEST),Sy=Ce(me,me.COLOR),My=Ce(me,me.SHININESS),Ey=Ce(me,me.EMISSIVE),Zp=Ce(me,me.OPACITY),Ny=Ce(me,me.SPECULAR),Ad=Ce(me,me.SPECULAR_INTENSITY),Ry=Ce(me,me.SPECULAR_COLOR),Yl=Ce(me,me.SPECULAR_STRENGTH),lc=Ce(me,me.REFLECTIVITY),Cy=Ce(me,me.ROUGHNESS),Py=Ce(me,me.METALNESS),By=Ce(me,me.NORMAL),Dy=Ce(me,me.CLEARCOAT),Fy=Ce(me,me.CLEARCOAT_ROUGHNESS),Ly=Ce(me,me.CLEARCOAT_NORMAL),Iy=Ce(me,me.ROTATION),qy=Ce(me,me.SHEEN),Oy=Ce(me,me.SHEEN_ROUGHNESS),Uy=Ce(me,me.ANISOTROPY),ky=Ce(me,me.IRIDESCENCE),Gy=Ce(me,me.IRIDESCENCE_IOR),Vy=Ce(me,me.IRIDESCENCE_THICKNESS),zy=Ce(me,me.TRANSMISSION),$y=Ce(me,me.THICKNESS),Hy=Ce(me,me.IOR),jy=Ce(me,me.ATTENUATION_DISTANCE),Wy=Ce(me,me.ATTENUATION_COLOR),Qy=Ce(me,me.LINE_SCALE),Xy=Ce(me,me.LINE_DASH_SIZE),Yy=Ce(me,me.LINE_GAP_SIZE),VD=Ce(me,me.LINE_WIDTH),Ky=Ce(me,me.LINE_DASH_OFFSET),Zy=Ce(me,me.POINT_SIZE),Jy=Ce(me,me.DISPERSION),Jp=Ce(me,me.LIGHT_MAP),ev=Ce(me,me.AO),uA=Ge(new Ot).onReference(function(r){return r.material}).onRenderUpdate(function({material:r}){this.value.set(r.anisotropy*Math.cos(r.anisotropyRotation),r.anisotropy*Math.sin(r.anisotropyRotation))}),e3=re(r=>r.context.setupModelViewProjection(),"vec4").once()().toVarying("v_modelViewProjection");class ln extends Ie{static get type(){return"IndexNode"}constructor(e){super("uint"),this.scope=e,this.isIndexNode=!0}generate(e){const t=this.getNodeType(e),n=this.scope;let i;if(n===ln.VERTEX)i=e.getVertexIndex();else if(n===ln.INSTANCE)i=e.getInstanceIndex();else if(n===ln.DRAW)i=e.getDrawIndex();else if(n===ln.INVOCATION_LOCAL)i=e.getInvocationLocalIndex();else if(n===ln.INVOCATION_SUBGROUP)i=e.getInvocationSubgroupIndex();else if(n===ln.SUBGROUP)i=e.getSubgroupIndex();else throw new Error("THREE.IndexNode: Unknown scope: "+n);let s;return e.shaderStage==="vertex"||e.shaderStage==="compute"?s=i:s=Ts(this).build(e,t),s}}ln.VERTEX="vertex";ln.INSTANCE="instance";ln.SUBGROUP="subgroup";ln.INVOCATION_LOCAL="invocationLocal";ln.INVOCATION_SUBGROUP="invocationSubgroup";ln.DRAW="draw";const tv=Ce(ln,ln.VERTEX),Po=Ce(ln,ln.INSTANCE),zD=Ce(ln,ln.SUBGROUP),$D=Ce(ln,ln.INVOCATION_SUBGROUP),HD=Ce(ln,ln.INVOCATION_LOCAL),nv=Ce(ln,ln.DRAW);class rv extends Ie{static get type(){return"InstanceNode"}constructor(e,t,n=null){super("void"),this.count=e,this.instanceMatrix=t,this.instanceColor=n,this.instanceMatrixNode=null,this.instanceColorNode=null,this.updateType=lt.FRAME,this.buffer=null,this.bufferColor=null}setup(e){const{instanceMatrix:t,instanceColor:n}=this,{count:i}=t;let{instanceMatrixNode:s,instanceColorNode:o}=this;if(s===null){if(i<=1e3)s=Pu(t.array,"mat4",Math.max(i,1)).element(Po);else{const h=new _c(t.array,16,1);this.buffer=h;const d=t.usage===fA?td:l1,m=[d(h,"vec4",16,0),d(h,"vec4",16,4),d(h,"vec4",16,8),d(h,"vec4",16,12)];s=ya(...m)}this.instanceMatrixNode=s}if(n&&o===null){const h=new So(n.array,3),d=n.usage===fA?td:l1;this.bufferColor=h,o=ne(d(h,"vec3",3,0)),this.instanceColorNode=o}const u=s.mul(Tn).xyz;if(Tn.assign(u),e.hasGeometryAttribute("normal")){const h=oy(Ir,s);Ir.assign(h)}this.instanceColorNode!==null&&mu("vec3","vInstanceColor").assign(this.instanceColorNode)}update(){this.instanceMatrix.usage!==fA&&this.buffer!==null&&this.instanceMatrix.version!==this.buffer.version&&(this.buffer.version=this.instanceMatrix.version),this.instanceColor&&this.instanceColor.usage!==fA&&this.bufferColor!==null&&this.instanceColor.version!==this.bufferColor.version&&(this.bufferColor.version=this.instanceColor.version)}}const jD=Ke(rv).setParameterLength(2,3);class WD extends rv{static get type(){return"InstancedMeshNode"}constructor(e){const{count:t,instanceMatrix:n,instanceColor:i}=e;super(t,n,i),this.instancedMesh=e}}const iv=Ke(WD).setParameterLength(1);class QD extends Ie{static get type(){return"BatchNode"}constructor(e){super("void"),this.batchMesh=e,this.batchingIdNode=null}setup(e){this.batchingIdNode===null&&(e.getDrawIndex()===null?this.batchingIdNode=Po:this.batchingIdNode=nv);const n=re(([T])=>{const M=Q(Co(_n(this.batchMesh._indirectTexture),0).x),N=Q(T).mod(M),C=Q(T).div(M);return _n(this.batchMesh._indirectTexture,On(N,C)).x}).setLayout({name:"getIndirectIndex",type:"uint",inputs:[{name:"id",type:"int"}]})(Q(this.batchingIdNode)),i=this.batchMesh._matricesTexture,s=Q(Co(_n(i),0).x),o=V(n).mul(4).toInt().toVar(),u=o.mod(s),h=o.div(s),d=ya(_n(i,On(u,h)),_n(i,On(u.add(1),h)),_n(i,On(u.add(2),h)),_n(i,On(u.add(3),h))),m=this.batchMesh._colorsTexture;if(m!==null){const M=re(([N])=>{const C=Q(Co(_n(m),0).x),B=N,P=B.mod(C),I=B.div(C);return _n(m,On(P,I)).rgb}).setLayout({name:"getBatchingColor",type:"vec3",inputs:[{name:"id",type:"int"}]})(n);mu("vec3","vBatchColor").assign(M)}const y=fr(d);Tn.assign(d.mul(Tn));const x=Ir.div(ne(y[0].dot(y[0]),y[1].dot(y[1]),y[2].dot(y[2]))),b=y.mul(x).xyz;Ir.assign(b),e.hasGeometryAttribute("tangent")&&Fu.mulAssign(y)}}const sv=Ke(QD).setParameterLength(1);class XD extends Ra{static get type(){return"StorageArrayElementNode"}constructor(e,t){super(e,t),this.isStorageArrayElementNode=!0}set storageBufferNode(e){this.node=e}get storageBufferNode(){return this.node}getMemberType(e,t){const n=this.storageBufferNode.structTypeNode;return n?n.getMemberType(e,t):"void"}setup(e){return e.isAvailable("storageBuffer")===!1&&this.node.isPBO===!0&&e.setupPBO(this.node),super.setup(e)}generate(e,t){let n;const i=e.context.assign;if(e.isAvailable("storageBuffer")===!1?this.node.isPBO===!0&&i!==!0&&(this.node.value.isInstancedBufferAttribute||e.shaderStage!=="compute")?n=e.generatePBO(this):n=this.node.build(e):n=super.generate(e),i!==!0){const s=this.getNodeType(e);n=e.format(n,s,t)}return n}}const YD=Ke(XD).setParameterLength(2);class KD extends zp{static get type(){return"StorageBufferNode"}constructor(e,t=null,n=0){let i,s=null;t&&t.isStruct?(i="struct",s=t.layout,(e.isStorageBufferAttribute||e.isStorageInstancedBufferAttribute)&&(n=e.count)):t===null&&(e.isStorageBufferAttribute||e.isStorageInstancedBufferAttribute)?(i=A8(e.itemSize),n=e.count):i=t,super(e,i,n),this.isStorageBufferNode=!0,this.structTypeNode=s,this.access=Jn.READ_WRITE,this.isAtomic=!1,this.isPBO=!1,this._attribute=null,this._varying=null,this.global=!0,e.isStorageBufferAttribute!==!0&&e.isStorageInstancedBufferAttribute!==!0&&(e.isInstancedBufferAttribute?e.isStorageInstancedBufferAttribute=!0:e.isStorageBufferAttribute=!0)}getHash(e){if(this.bufferCount===0){let t=e.globalCache.getData(this.value);return t===void 0&&(t={node:this},e.globalCache.setData(this.value,t)),t.node.uuid}return this.uuid}getInputType(){return this.value.isIndirectStorageBufferAttribute?"indirectStorageBuffer":"storageBuffer"}element(e){return YD(this,e)}setPBO(e){return this.isPBO=e,this}getPBO(){return this.isPBO}setAccess(e){return this.access=e,this}toReadOnly(){return this.setAccess(Jn.READ_ONLY)}setAtomic(e){return this.isAtomic=e,this}toAtomic(){return this.setAtomic(!0)}getAttributeData(){return this._attribute===null&&(this._attribute=Cu(this.value),this._varying=Ts(this._attribute)),{attribute:this._attribute,varying:this._varying}}getNodeType(e){if(this.structTypeNode!==null)return this.structTypeNode.getNodeType(e);if(e.isAvailable("storageBuffer")||e.isAvailable("indirectStorageBuffer"))return super.getNodeType(e);const{attribute:t}=this.getAttributeData();return t.getNodeType(e)}getMemberType(e,t){return this.structTypeNode!==null?this.structTypeNode.getMemberType(e,t):"void"}generate(e){if(this.structTypeNode!==null&&this.structTypeNode.build(e),e.isAvailable("storageBuffer")||e.isAvailable("indirectStorageBuffer"))return super.generate(e);const{attribute:t,varying:n}=this.getAttributeData(),i=n.build(e);return e.registerTransform(i,t),i}}const _a=(r,e=null,t=0)=>pe(new KD(r,e,t)),ZD=(r,e,t)=>(console.warn('THREE.TSL: "storageObject()" is deprecated. Use "storage().setPBO( true )" instead.'),_a(r,e,t).setPBO(!0)),v5=new WeakMap;class ov extends Ie{static get type(){return"SkinningNode"}constructor(e){super("void"),this.skinnedMesh=e,this.updateType=lt.OBJECT,this.skinIndexNode=Ks("skinIndex","uvec4"),this.skinWeightNode=Ks("skinWeight","vec4"),this.bindMatrixNode=Kt("bindMatrix","mat4"),this.bindMatrixInverseNode=Kt("bindMatrixInverse","mat4"),this.boneMatricesNode=id("skeleton.boneMatrices","mat4",e.skeleton.bones.length),this.positionNode=Tn,this.toPositionNode=Tn,this.previousBoneMatricesNode=null}getSkinnedPosition(e=this.boneMatricesNode,t=this.positionNode){const{skinIndexNode:n,skinWeightNode:i,bindMatrixNode:s,bindMatrixInverseNode:o}=this,u=e.element(n.x),h=e.element(n.y),d=e.element(n.z),m=e.element(n.w),y=s.mul(t),x=Pn(u.mul(i.x).mul(y),h.mul(i.y).mul(y),d.mul(i.z).mul(y),m.mul(i.w).mul(y));return o.mul(x).xyz}getSkinnedNormal(e=this.boneMatricesNode,t=Ir){const{skinIndexNode:n,skinWeightNode:i,bindMatrixNode:s,bindMatrixInverseNode:o}=this,u=e.element(n.x),h=e.element(n.y),d=e.element(n.z),m=e.element(n.w);let y=Pn(i.x.mul(u),i.y.mul(h),i.z.mul(d),i.w.mul(m));return y=o.mul(y).mul(s),y.transformDirection(t).xyz}getPreviousSkinnedPosition(e){const t=e.object;return this.previousBoneMatricesNode===null&&(t.skeleton.previousBoneMatrices=new Float32Array(t.skeleton.boneMatrices),this.previousBoneMatricesNode=id("skeleton.previousBoneMatrices","mat4",t.skeleton.bones.length)),this.getSkinnedPosition(this.previousBoneMatricesNode,u1)}needsPreviousBoneMatrices(e){const t=e.renderer.getMRT();return t&&t.has("velocity")||u8(e.object).useVelocity===!0}setup(e){this.needsPreviousBoneMatrices(e)&&u1.assign(this.getPreviousSkinnedPosition(e));const t=this.getSkinnedPosition();if(this.toPositionNode&&this.toPositionNode.assign(t),e.hasGeometryAttribute("normal")){const n=this.getSkinnedNormal();Ir.assign(n),e.hasGeometryAttribute("tangent")&&Fu.assign(n)}return t}generate(e,t){if(t!=="void")return super.generate(e,t)}update(e){const t=e.object&&e.object.skeleton?e.object.skeleton:this.skinnedMesh.skeleton;v5.get(t)!==e.frameId&&(v5.set(t,e.frameId),this.previousBoneMatricesNode!==null&&t.previousBoneMatrices.set(t.boneMatrices),t.update())}}const av=r=>pe(new ov(r)),JD=(r,e=null)=>{const t=new ov(r);return t.positionNode=_a(new So(r.geometry.getAttribute("position").array,3),"vec3").setPBO(!0).toReadOnly().element(Po).toVar(),t.skinIndexNode=_a(new So(new Uint32Array(r.geometry.getAttribute("skinIndex").array),4),"uvec4").setPBO(!0).toReadOnly().element(Po).toVar(),t.skinWeightNode=_a(new So(r.geometry.getAttribute("skinWeight").array,4),"vec4").setPBO(!0).toReadOnly().element(Po).toVar(),t.bindMatrixNode=Ge(r.bindMatrix,"mat4"),t.bindMatrixInverseNode=Ge(r.bindMatrixInverse,"mat4"),t.boneMatricesNode=Pu(r.skeleton.boneMatrices,"mat4",r.skeleton.bones.length),t.toPositionNode=e,pe(t)};class eF extends Ie{static get type(){return"LoopNode"}constructor(e=[]){super(),this.params=e}getVarName(e){return String.fromCharCode(105+e)}getProperties(e){const t=e.getNodeProperties(this);if(t.stackNode!==void 0)return t;const n={};for(let o=0,u=this.params.length-1;o<u;o++){const h=this.params[o],d=h.isNode!==!0&&h.name||this.getVarName(o),m=h.isNode!==!0&&h.type||"int";n[d]=Ys(d,m)}const i=e.addStack();t.returnsNode=this.params[this.params.length-1](n,e),t.stackNode=i;const s=this.params[0];return s.isNode!==!0&&typeof s.update=="function"&&(t.updateNode=re(this.params[0].update)(n)),e.removeStack(),t}getNodeType(e){const{returnsNode:t}=this.getProperties(e);return t?t.getNodeType(e):"void"}setup(e){this.getProperties(e)}generate(e){const t=this.getProperties(e),n=this.params,i=t.stackNode;for(let u=0,h=n.length-1;u<h;u++){const d=n[u];let m=!1,y=null,x=null,b=null,T=null,M=null,N=null;d.isNode?d.getNodeType(e)==="bool"?(m=!0,T="bool",x=d.build(e,T)):(T="int",b=this.getVarName(u),y="0",x=d.build(e,T),M="<"):(T=d.type||"int",b=d.name||this.getVarName(u),y=d.start,x=d.end,M=d.condition,N=d.update,typeof y=="number"?y=e.generateConst(T,y):y&&y.isNode&&(y=y.build(e,T)),typeof x=="number"?x=e.generateConst(T,x):x&&x.isNode&&(x=x.build(e,T)),y!==void 0&&x===void 0?(y=y+" - 1",x="0",M=">="):x!==void 0&&y===void 0&&(y="0",M="<"),M===void 0&&(Number(y)>Number(x)?M=">=":M="<"));let C;if(m)C=`while ( ${x} )`;else{const B={start:y,end:x},P=B.start,I=B.end;let D;const q=()=>M.includes("<")?"+=":"-=";if(N!=null)switch(typeof N){case"function":D=e.flowStagesNode(t.updateNode,"void").code.replace(/\t|;/g,"");break;case"number":D=b+" "+q()+" "+e.generateConst(T,N);break;case"string":D=b+" "+N;break;default:N.isNode?D=b+" "+q()+" "+N.build(e):(console.error("THREE.TSL: 'Loop( { update: ... } )' is not a function, string or number."),D="break /* invalid update */")}else T==="int"||T==="uint"?N=M.includes("<")?"++":"--":N=q()+" 1.",D=b+" "+N;const O=e.getVar(T,b)+" = "+P,k=b+" "+M+" "+I;C=`for ( ${O}; ${k}; ${D} )`}e.addFlowCode((u===0?`
`:"")+e.tab+C+` {

`).addFlowTab()}const s=i.build(e,"void"),o=t.returnsNode?t.returnsNode.build(e):"";e.removeFlowTab().addFlowCode(`
`+e.tab+s);for(let u=0,h=this.params.length-1;u<h;u++)e.addFlowCode((u===0?"":e.tab)+`}

`).removeFlowTab();return e.addFlowTab(),o}}const Ht=(...r)=>pe(new eF(ga(r,"int"))).toStack(),tF=()=>Ys("continue").toStack(),Av=()=>Ys("break").toStack(),nh=new WeakMap,Gr=new Ut,_5=re(({bufferMap:r,influence:e,stride:t,width:n,depth:i,offset:s})=>{const o=Q(tv).mul(t).add(s),u=o.div(n),h=o.sub(u.mul(n));return _n(r,On(h,u)).depth(i).xyz.mul(e)});function nF(r){const e=r.morphAttributes.position!==void 0,t=r.morphAttributes.normal!==void 0,n=r.morphAttributes.color!==void 0,i=r.morphAttributes.position||r.morphAttributes.normal||r.morphAttributes.color,s=i!==void 0?i.length:0;let o=nh.get(r);if(o===void 0||o.count!==s){let C=function(){M.dispose(),nh.delete(r),r.removeEventListener("dispose",C)};o!==void 0&&o.texture.dispose();const u=r.morphAttributes.position||[],h=r.morphAttributes.normal||[],d=r.morphAttributes.color||[];let m=0;e===!0&&(m=1),t===!0&&(m=2),n===!0&&(m=3);let y=r.attributes.position.count*m,x=1;const b=4096;y>b&&(x=Math.ceil(y/b),y=b);const T=new Float32Array(y*x*4*s),M=new Cw(T,y,x,s);M.type=ci,M.needsUpdate=!0;const N=m*4;for(let B=0;B<s;B++){const P=u[B],I=h[B],D=d[B],q=y*x*4*B;for(let O=0;O<P.count;O++){const k=O*N;e===!0&&(Gr.fromBufferAttribute(P,O),T[q+k+0]=Gr.x,T[q+k+1]=Gr.y,T[q+k+2]=Gr.z,T[q+k+3]=0),t===!0&&(Gr.fromBufferAttribute(I,O),T[q+k+4]=Gr.x,T[q+k+5]=Gr.y,T[q+k+6]=Gr.z,T[q+k+7]=0),n===!0&&(Gr.fromBufferAttribute(D,O),T[q+k+8]=Gr.x,T[q+k+9]=Gr.y,T[q+k+10]=Gr.z,T[q+k+11]=D.itemSize===4?Gr.w:1)}}o={count:s,texture:M,stride:m,size:new Ot(y,x)},nh.set(r,o),r.addEventListener("dispose",C)}return o}class rF extends Ie{static get type(){return"MorphNode"}constructor(e){super("void"),this.mesh=e,this.morphBaseInfluence=Ge(1),this.updateType=lt.OBJECT}setup(e){const{geometry:t}=e,n=t.morphAttributes.position!==void 0,i=t.hasAttribute("normal")&&t.morphAttributes.normal!==void 0,s=t.morphAttributes.position||t.morphAttributes.normal||t.morphAttributes.color,o=s!==void 0?s.length:0,{texture:u,stride:h,size:d}=nF(t);n===!0&&Tn.mulAssign(this.morphBaseInfluence),i===!0&&Ir.mulAssign(this.morphBaseInfluence);const m=Q(d.width);Ht(o,({i:y})=>{const x=V(0).toVar();this.mesh.count>1&&this.mesh.morphTexture!==null&&this.mesh.morphTexture!==void 0?x.assign(_n(this.mesh.morphTexture,On(Q(y).add(1),Q(Po))).r):x.assign(Kt("morphTargetInfluences","float").element(y).toVar()),Xe(x.notEqual(0),()=>{n===!0&&Tn.addAssign(_5({bufferMap:u,influence:x,stride:h,width:m,depth:y,offset:Q(0)})),i===!0&&Ir.addAssign(_5({bufferMap:u,influence:x,stride:h,width:m,depth:y,offset:Q(1)}))})})}update(){const e=this.morphBaseInfluence;this.mesh.geometry.morphTargetsRelative?e.value=1:e.value=1-this.mesh.morphTargetInfluences.reduce((t,n)=>t+n,0)}}const lv=Ke(rF).setParameterLength(1);class WA extends Ie{static get type(){return"LightingNode"}constructor(){super("vec3"),this.isLightingNode=!0}}class iF extends WA{static get type(){return"AONode"}constructor(e=null){super(),this.aoNode=e}setup(e){e.context.ambientOcclusion.mulAssign(this.aoNode)}}class sF extends E9{static get type(){return"LightingContextNode"}constructor(e,t=null,n=null,i=null){super(e),this.lightingModel=t,this.backdropNode=n,this.backdropAlphaNode=i,this._value=null}getContext(){const{backdropNode:e,backdropAlphaNode:t}=this,n=ne().toVar("directDiffuse"),i=ne().toVar("directSpecular"),s=ne().toVar("indirectDiffuse"),o=ne().toVar("indirectSpecular"),u={directDiffuse:n,directSpecular:i,indirectDiffuse:s,indirectSpecular:o};return{radiance:ne().toVar("radiance"),irradiance:ne().toVar("irradiance"),iblIrradiance:ne().toVar("iblIrradiance"),ambientOcclusion:V(1).toVar("ambientOcclusion"),reflectedLight:u,backdrop:e,backdropAlpha:t}}setup(e){return this.value=this._value||(this._value=this.getContext()),this.value.lightingModel=this.lightingModel||e.context.lightingModel,super.setup(e)}}const uv=Ke(sF);class oF extends WA{static get type(){return"IrradianceNode"}constructor(e){super(),this.node=e}setup(e){e.context.irradiance.addAssign(this.node)}}const Za=new Ot;class W1 extends gs{static get type(){return"ViewportTextureNode"}constructor(e=Vs,t=null,n=null){let i=null;n===null?(i=new D6,i.minFilter=pa,n=i):i=n,super(n,e,t),this.generateMipmaps=!1,this.defaultFramebuffer=i,this.isOutputTextureNode=!0,this.updateBeforeType=lt.FRAME,this._cacheTextures=new WeakMap}getTextureForReference(e=null){let t,n;if(this.referenceNode?(t=this.referenceNode.defaultFramebuffer,n=this.referenceNode._cacheTextures):(t=this.defaultFramebuffer,n=this._cacheTextures),e===null)return t;if(n.has(e)===!1){const i=t.clone();n.set(e,i)}return n.get(e)}updateReference(e){const t=e.renderer.getRenderTarget();return this.value=this.getTextureForReference(t),this.value}updateBefore(e){const t=e.renderer,n=t.getRenderTarget();n===null?t.getDrawingBufferSize(Za):Za.set(n.width,n.height);const i=this.getTextureForReference(n);(i.image.width!==Za.width||i.image.height!==Za.height)&&(i.image.width=Za.width,i.image.height=Za.height,i.needsUpdate=!0);const s=i.generateMipmaps;i.generateMipmaps=this.generateMipmaps,t.copyFramebufferToTexture(i),i.generateMipmaps=s}clone(){const e=new this.constructor(this.uvNode,this.levelNode,this.value);return e.generateMipmaps=this.generateMipmaps,e}}const aF=Ke(W1).setParameterLength(0,3),t3=Ke(W1,null,null,{generateMipmaps:!0}).setParameterLength(0,3);let d0=null;class AF extends W1{static get type(){return"ViewportDepthTextureNode"}constructor(e=Vs,t=null){d0===null&&(d0=new Gi),super(e,t,d0)}getTextureForReference(){return d0}}const n3=Ke(AF).setParameterLength(0,2);class Br extends Ie{static get type(){return"ViewportDepthNode"}constructor(e,t=null){super("float"),this.scope=e,this.valueNode=t,this.isViewportDepthNode=!0}generate(e){const{scope:t}=this;return t===Br.DEPTH_BASE?e.getFragDepth():super.generate(e)}setup({camera:e}){const{scope:t}=this,n=this.valueNode;let i=null;if(t===Br.DEPTH_BASE)n!==null&&(i=hv().assign(n));else if(t===Br.DEPTH)e.isPerspectiveCamera?i=cv(wn.z,_o,xo):i=NA(wn.z,_o,xo);else if(t===Br.LINEAR_DEPTH)if(n!==null)if(e.isPerspectiveCamera){const s=r3(n,_o,xo);i=NA(s,_o,xo)}else i=n;else i=NA(wn.z,_o,xo);return i}}Br.DEPTH_BASE="depthBase";Br.DEPTH="depth";Br.LINEAR_DEPTH="linearDepth";const NA=(r,e,t)=>r.add(e).div(e.sub(t)),lF=(r,e,t)=>e.sub(t).mul(r).sub(e),cv=(r,e,t)=>e.add(r).mul(t).div(t.sub(e).mul(r)),r3=(r,e,t)=>e.mul(t).div(t.sub(e).mul(r).sub(t)),i3=(r,e,t)=>{e=e.max(1e-6).toVar();const n=us(r.negate().div(e)),i=us(t.div(e));return n.div(i)},uF=(r,e,t)=>{const n=r.mul(I1(t.div(e)));return V(Math.E).pow(n).mul(e).negate()},hv=Ke(Br,Br.DEPTH_BASE),s3=Ce(Br,Br.DEPTH),c1=Ke(Br,Br.LINEAR_DEPTH).setParameterLength(0,1),cF=c1(n3());s3.assign=r=>hv(r);class mi extends Ie{static get type(){return"ClippingNode"}constructor(e=mi.DEFAULT){super(),this.scope=e}setup(e){super.setup(e);const t=e.clippingContext,{intersectionPlanes:n,unionPlanes:i}=t;return this.hardwareClipping=e.material.hardwareClipping,this.scope===mi.ALPHA_TO_COVERAGE?this.setupAlphaToCoverage(n,i):this.scope===mi.HARDWARE?this.setupHardwareClipping(i,e):this.setupDefault(n,i)}setupAlphaToCoverage(e,t){return re(()=>{const n=V().toVar("distanceToPlane"),i=V().toVar("distanceToGradient"),s=V(1).toVar("clipOpacity"),o=t.length;if(this.hardwareClipping===!1&&o>0){const h=cr(t).setGroup(ke);Ht(o,({i:d})=>{const m=h.element(d);n.assign(wn.dot(m.xyz).negate().add(m.w)),i.assign(n.fwidth().div(2)),s.mulAssign(ms(i.negate(),i,n))})}const u=e.length;if(u>0){const h=cr(e).setGroup(ke),d=V(1).toVar("intersectionClipOpacity");Ht(u,({i:m})=>{const y=h.element(m);n.assign(wn.dot(y.xyz).negate().add(y.w)),i.assign(n.fwidth().div(2)),d.mulAssign(ms(i.negate(),i,n).oneMinus())}),s.mulAssign(d.oneMinus())}Ft.a.mulAssign(s),Ft.a.equal(0).discard()})()}setupDefault(e,t){return re(()=>{const n=t.length;if(this.hardwareClipping===!1&&n>0){const s=cr(t).setGroup(ke);Ht(n,({i:o})=>{const u=s.element(o);wn.dot(u.xyz).greaterThan(u.w).discard()})}const i=e.length;if(i>0){const s=cr(e).setGroup(ke),o=yi(!0).toVar("clipped");Ht(i,({i:u})=>{const h=s.element(u);o.assign(wn.dot(h.xyz).greaterThan(h.w).and(o))}),o.discard()}})()}setupHardwareClipping(e,t){const n=e.length;return t.enableHardwareClipping(n),re(()=>{const i=cr(e).setGroup(ke),s=eo(t.getClipDistance());Ht(n,({i:o})=>{const u=i.element(o),h=wn.dot(u.xyz).sub(u.w).negate();s.element(o).assign(h)})})()}}mi.ALPHA_TO_COVERAGE="alphaToCoverage";mi.DEFAULT="default";mi.HARDWARE="hardware";const hF=()=>pe(new mi),fF=()=>pe(new mi(mi.ALPHA_TO_COVERAGE)),dF=()=>pe(new mi(mi.HARDWARE)),pF=.05,x5=re(([r])=>Js(tt(1e4,Qr(tt(17,r.x).add(tt(.1,r.y)))).mul(Pn(.1,nn(Qr(tt(13,r.y).add(r.x))))))),b5=re(([r])=>x5(ve(x5(r.xy),r.z))),mF=re(([r])=>{const e=yn(hs(Np(r.xyz)),hs(Rp(r.xyz))),t=V(1).div(V(pF).mul(e)).toVar("pixScale"),n=ve(qA(cs(us(t))),qA(q1(us(t)))),i=ve(b5(cs(n.x.mul(r.xyz))),b5(cs(n.y.mul(r.xyz)))),s=Js(us(t)),o=Pn(tt(s.oneMinus(),i.x),tt(s,i.y)),u=Lr(s,s.oneMinus()),h=ne(o.mul(o).div(tt(2,u).mul(bt(1,u))),o.sub(tt(.5,u)).div(bt(1,u)),bt(1,bt(1,o).mul(bt(1,o)).div(tt(2,u).mul(bt(1,u))))),d=o.lessThan(u.oneMinus()).select(o.lessThan(u).select(h.x,h.y),h.z);return vi(d,1e-6,1)}).setLayout({name:"getAlphaHashThreshold",type:"float",inputs:[{name:"position",type:"vec3"}]});class gF extends Y9{static get type(){return"VertexColorNode"}constructor(e){super(null,"vec4"),this.isVertexColorNode=!0,this.index=e}getAttributeName(){const e=this.index;return"color"+(e>0?e:"")}generate(e){const t=this.getAttributeName(e),n=e.hasGeometryAttribute(t);let i;return n===!0?i=super.generate(e):i=e.generateConst(this.nodeType,new Ut(1,1,1,1)),i}serialize(e){super.serialize(e),e.index=this.index}deserialize(e){super.deserialize(e),this.index=e.index}}const fv=(r=0)=>pe(new gF(r)),dv=re(([r,e])=>Lr(1,r.oneMinus().div(e)).oneMinus()).setLayout({name:"blendBurn",type:"vec3",inputs:[{name:"base",type:"vec3"},{name:"blend",type:"vec3"}]}),pv=re(([r,e])=>Lr(r.div(e.oneMinus()),1)).setLayout({name:"blendDodge",type:"vec3",inputs:[{name:"base",type:"vec3"},{name:"blend",type:"vec3"}]}),mv=re(([r,e])=>r.oneMinus().mul(e.oneMinus()).oneMinus()).setLayout({name:"blendScreen",type:"vec3",inputs:[{name:"base",type:"vec3"},{name:"blend",type:"vec3"}]}),gv=re(([r,e])=>Bt(r.mul(2).mul(e),r.oneMinus().mul(2).mul(e.oneMinus()).oneMinus(),U1(.5,r))).setLayout({name:"blendOverlay",type:"vec3",inputs:[{name:"base",type:"vec3"},{name:"blend",type:"vec3"}]}),yF=re(([r,e])=>{const t=e.a.add(r.a.mul(e.a.oneMinus()));return Ve(e.rgb.mul(e.a).add(r.rgb.mul(r.a).mul(e.a.oneMinus())).div(t),t)}).setLayout({name:"blendColor",type:"vec4",inputs:[{name:"base",type:"vec4"},{name:"blend",type:"vec4"}]}),yv=re(([r])=>Ve(r.rgb.mul(r.a),r.a),{color:"vec4",return:"vec4"}),vF=re(([r])=>(Xe(r.a.equal(0),()=>Ve(0)),Ve(r.rgb.div(r.a),r.a)),{color:"vec4",return:"vec4"}),_F=(...r)=>(console.warn('THREE.TSL: "burn" has been renamed. Use "blendBurn" instead.'),dv(r)),xF=(...r)=>(console.warn('THREE.TSL: "dodge" has been renamed. Use "blendDodge" instead.'),pv(r)),bF=(...r)=>(console.warn('THREE.TSL: "screen" has been renamed. Use "blendScreen" instead.'),mv(r)),TF=(...r)=>(console.warn('THREE.TSL: "overlay" has been renamed. Use "blendOverlay" instead.'),gv(r));class Mn extends P4{static get type(){return"NodeMaterial"}get type(){return this.constructor.type}set type(e){}constructor(){super(),this.isNodeMaterial=!0,this.fog=!0,this.lights=!1,this.hardwareClipping=!1,this.lightsNode=null,this.envNode=null,this.aoNode=null,this.colorNode=null,this.normalNode=null,this.opacityNode=null,this.backdropNode=null,this.backdropAlphaNode=null,this.alphaTestNode=null,this.maskNode=null,this.positionNode=null,this.geometryNode=null,this.depthNode=null,this.receivedShadowPositionNode=null,this.castShadowPositionNode=null,this.receivedShadowNode=null,this.castShadowNode=null,this.outputNode=null,this.mrtNode=null,this.fragmentNode=null,this.vertexNode=null,Object.defineProperty(this,"shadowPositionNode",{get:()=>this.receivedShadowPositionNode,set:e=>{console.warn('THREE.NodeMaterial: ".shadowPositionNode" was renamed to ".receivedShadowPositionNode".'),this.receivedShadowPositionNode=e}})}customProgramCacheKey(){return this.type+a8(this)}build(e){this.setup(e)}setupObserver(e){return new QP(e)}setup(e){e.context.setupNormal=()=>EA(this.setupNormal(e),"NORMAL","vec3"),e.context.setupPositionView=()=>this.setupPositionView(e),e.context.setupModelViewProjection=()=>this.setupModelViewProjection(e);const t=e.renderer,n=t.getRenderTarget();e.addStack();const i=EA(this.setupVertex(e),"VERTEX"),s=this.vertexNode||i;e.stack.outputNode=s,this.setupHardwareClipping(e),this.geometryNode!==null&&(e.stack.outputNode=e.stack.outputNode.bypass(this.geometryNode)),e.addFlow("vertex",e.removeStack()),e.addStack();let o;const u=this.setupClipping(e);if((this.depthWrite===!0||this.depthTest===!0)&&(n!==null?n.depthBuffer===!0&&this.setupDepth(e):t.depth===!0&&this.setupDepth(e)),this.fragmentNode===null){this.setupDiffuseColor(e),this.setupVariants(e);const h=this.setupLighting(e);u!==null&&e.stack.add(u);const d=Ve(h,Ft.a).max(0);o=this.setupOutput(e,d),MA.assign(o);const m=this.outputNode!==null;if(m&&(o=this.outputNode),n!==null){const y=t.getMRT(),x=this.mrtNode;y!==null?(m&&MA.assign(o),o=y,x!==null&&(o=y.merge(x))):x!==null&&(o=x)}}else{let h=this.fragmentNode;h.isOutputStructNode!==!0&&(h=Ve(h)),o=this.setupOutput(e,h)}e.stack.outputNode=o,e.addFlow("fragment",e.removeStack()),e.observer=this.setupObserver(e)}setupClipping(e){if(e.clippingContext===null)return null;const{unionPlanes:t,intersectionPlanes:n}=e.clippingContext;let i=null;if(t.length>0||n.length>0){const s=e.renderer.samples;this.alphaToCoverage&&s>1?i=fF():e.stack.add(hF())}return i}setupHardwareClipping(e){if(this.hardwareClipping=!1,e.clippingContext===null)return;const t=e.clippingContext.unionPlanes.length;t>0&&t<=8&&e.isAvailable("clipDistance")&&(e.stack.add(dF()),this.hardwareClipping=!0)}setupDepth(e){const{renderer:t,camera:n}=e;let i=this.depthNode;if(i===null){const s=t.getMRT();s&&s.has("depth")?i=s.get("depth"):t.logarithmicDepthBuffer===!0&&(n.isPerspectiveCamera?i=i3(wn.z,_o,xo):i=NA(wn.z,_o,xo))}i!==null&&s3.assign(i).toStack()}setupPositionView(){return Ca.mul(Tn).xyz}setupModelViewProjection(){return HA.mul(wn)}setupVertex(e){return e.addStack(),this.setupPosition(e),e.context.vertex=e.removeStack(),e3}setupPosition(e){const{object:t,geometry:n}=e;if((n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color)&&lv(t).toStack(),t.isSkinnedMesh===!0&&av(t).toStack(),this.displacementMap){const i=Is("displacementMap","texture"),s=Is("displacementScale","float"),o=Is("displacementBias","float");Tn.addAssign(Ir.normalize().mul(i.x.mul(s).add(o)))}return t.isBatchedMesh&&sv(t).toStack(),t.isInstancedMesh&&t.instanceMatrix&&t.instanceMatrix.isInstancedBufferAttribute===!0&&iv(t).toStack(),this.positionNode!==null&&Tn.assign(EA(this.positionNode,"POSITION","vec3")),Tn}setupDiffuseColor({object:e,geometry:t}){this.maskNode!==null&&yi(this.maskNode).not().discard();let n=this.colorNode?Ve(this.colorNode):Sy;this.vertexColors===!0&&t.hasAttribute("color")&&(n=n.mul(fv())),e.instanceColor&&(n=mu("vec3","vInstanceColor").mul(n)),e.isBatchedMesh&&e._colorsTexture&&(n=mu("vec3","vBatchColor").mul(n)),Ft.assign(n);const i=this.opacityNode?V(this.opacityNode):Zp;Ft.a.assign(Ft.a.mul(i));let s=null;(this.alphaTestNode!==null||this.alphaTest>0)&&(s=this.alphaTestNode!==null?V(this.alphaTestNode):wy,Ft.a.lessThanEqual(s).discard()),this.alphaHash===!0&&Ft.a.lessThan(mF(Tn)).discard(),this.transparent===!1&&this.blending===Os&&this.alphaToCoverage===!1?Ft.a.assign(1):s===null&&Ft.a.lessThanEqual(0).discard()}setupVariants(){}setupOutgoingLight(){return this.lights===!0?ne(0):Ft.rgb}setupNormal(){return this.normalNode?ne(this.normalNode):By}setupEnvironment(){let e=null;return this.envNode?e=this.envNode:this.envMap&&(e=this.envMap.isCubeTexture?Is("envMap","cubeTexture"):Is("envMap","texture")),e}setupLightMap(e){let t=null;return e.material.lightMap&&(t=new oF(Jp)),t}setupLights(e){const t=[],n=this.setupEnvironment(e);n&&n.isLightingNode&&t.push(n);const i=this.setupLightMap(e);if(i&&i.isLightingNode&&t.push(i),this.aoNode!==null||e.material.aoMap){const o=this.aoNode!==null?this.aoNode:ev;t.push(new iF(o))}let s=this.lightsNode||e.lightsNode;return t.length>0&&(s=e.renderer.lighting.createNode([...s.getLights(),...t])),s}setupLightingModel(){}setupLighting(e){const{material:t}=e,{backdropNode:n,backdropAlphaNode:i,emissiveNode:s}=this,u=this.lights===!0||this.lightsNode!==null?this.setupLights(e):null;let h=this.setupOutgoingLight(e);if(u&&u.getScope().hasLights){const d=this.setupLightingModel(e)||null;h=uv(u,d,n,i)}else n!==null&&(h=ne(i!==null?Bt(h,n,i):n));return(s&&s.isNode===!0||t.emissive&&t.emissive.isColor===!0)&&(Jf.assign(ne(s||Ey)),h=h.add(Jf)),h}setupFog(e,t){const n=e.fogNode;return n&&(MA.assign(t),t=Ve(n.toVar())),t}setupPremultipliedAlpha(e,t){return yv(t)}setupOutput(e,t){return this.fog===!0&&(t=this.setupFog(e,t)),this.premultipliedAlpha===!0&&(t=this.setupPremultipliedAlpha(e,t)),t}setDefaultValues(e){for(const n in e){const i=e[n];this[n]===void 0&&(this[n]=i,i&&i.clone&&(this[n]=i.clone()))}const t=Object.getOwnPropertyDescriptors(e.constructor.prototype);for(const n in t)Object.getOwnPropertyDescriptor(this.constructor.prototype,n)===void 0&&t[n].get!==void 0&&Object.defineProperty(this.constructor.prototype,n,t[n])}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{},nodes:{}});const n=P4.prototype.toJSON.call(this,e),i=n1(this);n.inputNodes={};for(const{property:o,childNode:u}of i)n.inputNodes[o]=u.toJSON(e).uuid;function s(o){const u=[];for(const h in o){const d=o[h];delete d.metadata,u.push(d)}return u}if(t){const o=s(e.textures),u=s(e.images),h=s(e.nodes);o.length>0&&(n.textures=o),u.length>0&&(n.images=u),h.length>0&&(n.nodes=h)}return n}copy(e){return this.lightsNode=e.lightsNode,this.envNode=e.envNode,this.colorNode=e.colorNode,this.normalNode=e.normalNode,this.opacityNode=e.opacityNode,this.backdropNode=e.backdropNode,this.backdropAlphaNode=e.backdropAlphaNode,this.alphaTestNode=e.alphaTestNode,this.maskNode=e.maskNode,this.positionNode=e.positionNode,this.geometryNode=e.geometryNode,this.depthNode=e.depthNode,this.receivedShadowPositionNode=e.receivedShadowPositionNode,this.castShadowPositionNode=e.castShadowPositionNode,this.receivedShadowNode=e.receivedShadowNode,this.castShadowNode=e.castShadowNode,this.outputNode=e.outputNode,this.mrtNode=e.mrtNode,this.fragmentNode=e.fragmentNode,this.vertexNode=e.vertexNode,super.copy(e)}}const wF=new _1;class SF extends Mn{static get type(){return"LineBasicNodeMaterial"}constructor(e){super(),this.isLineBasicNodeMaterial=!0,this.setDefaultValues(wF),this.setValues(e)}}const MF=new YT;class EF extends Mn{static get type(){return"LineDashedNodeMaterial"}constructor(e){super(),this.isLineDashedNodeMaterial=!0,this.setDefaultValues(MF),this.dashOffset=0,this.offsetNode=null,this.dashScaleNode=null,this.dashSizeNode=null,this.gapSizeNode=null,this.setValues(e)}setupVariants(){const e=this.offsetNode?V(this.offsetNode):Ky,t=this.dashScaleNode?V(this.dashScaleNode):Qy,n=this.dashSizeNode?V(this.dashSizeNode):Xy,i=this.gapSizeNode?V(this.gapSizeNode):Yy;sc.assign(n),ed.assign(i);const s=Ts(Ks("lineDistance").mul(t));(e?s.add(e):s).mod(sc.add(ed)).greaterThan(sc).discard()}}let p0=null;class NF extends W1{static get type(){return"ViewportSharedTextureNode"}constructor(e=Vs,t=null){p0===null&&(p0=new D6),super(e,t,p0)}getTextureForReference(){return p0}updateReference(){return this}}const RF=Ke(NF).setParameterLength(0,2),vv=r=>pe(r).mul(.5).add(.5),CF=r=>pe(r).mul(2).sub(1),PF=new QT;class BF extends Mn{static get type(){return"MeshNormalNodeMaterial"}constructor(e){super(),this.isMeshNormalNodeMaterial=!0,this.setDefaultValues(PF),this.setValues(e)}setupDiffuseColor(){const e=this.opacityNode?V(this.opacityNode):Zp;Ft.assign(G1(Ve(vv($t),e),m1))}}const o3=re(([r=jp])=>{const e=r.z.atan(r.x).mul(1/(Math.PI*2)).add(.5),t=r.y.clamp(-1,1).asin().mul(1/Math.PI).add(.5);return ve(e,t)});class _v extends Pw{constructor(e=1,t={}){super(e,t),this.isCubeRenderTarget=!0}fromEquirectangularTexture(e,t){const n=t.minFilter,i=t.generateMipmaps;t.generateMipmaps=!0,this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const s=new Vd(5,5,5),o=o3(jp),u=new Mn;u.colorNode=xt(t,o,0),u.side=Tr,u.blending=tu;const h=new Sn(s,u),d=new g1;d.add(h),t.minFilter===pa&&(t.minFilter=zs);const m=new Bw(1,10,this),y=e.getMRT();return e.setMRT(null),m.update(e,d),e.setMRT(y),t.minFilter=n,t.currentGenerateMipmaps=i,h.geometry.dispose(),h.material.dispose(),this}}const Kl=new WeakMap;class DF extends En{static get type(){return"CubeMapNode"}constructor(e){super("vec3"),this.envNode=e,this._cubeTexture=null,this._cubeTextureNode=UA(null);const t=new Ed;t.isRenderTargetTexture=!0,this._defaultTexture=t,this.updateBeforeType=lt.RENDER}updateBefore(e){const{renderer:t,material:n}=e,i=this.envNode;if(i.isTextureNode||i.isMaterialReferenceNode){const s=i.isTextureNode?i.value:n[i.property];if(s&&s.isTexture){const o=s.mapping;if(o===Cd||o===Pd){if(Kl.has(s)){const u=Kl.get(s);T5(u,s.mapping),this._cubeTexture=u}else{const u=s.image;if(FF(u)){const h=new _v(u.height);h.fromEquirectangularTexture(t,s),T5(h.texture,s.mapping),this._cubeTexture=h.texture,Kl.set(s,h.texture),s.addEventListener("dispose",xv)}else this._cubeTexture=this._defaultTexture}this._cubeTextureNode.value=this._cubeTexture}else this._cubeTextureNode=this.envNode}}}setup(e){return this.updateBefore(e),this._cubeTextureNode}}function FF(r){return r==null?!1:r.height>0}function xv(r){const e=r.target;e.removeEventListener("dispose",xv);const t=Kl.get(e);t!==void 0&&(Kl.delete(e),t.dispose())}function T5(r,e){e===Cd?r.mapping=yc:e===Pd&&(r.mapping=vc)}const bv=Ke(DF).setParameterLength(1);class a3 extends WA{static get type(){return"BasicEnvironmentNode"}constructor(e=null){super(),this.envNode=e}setup(e){e.context.environment=bv(this.envNode)}}class LF extends WA{static get type(){return"BasicLightMapNode"}constructor(e=null){super(),this.lightMapNode=e}setup(e){const t=V(1/Math.PI);e.context.irradianceLightMap=this.lightMapNode.mul(t)}}class Q1{start(e){e.lightsNode.setupLights(e,e.lightsNode.getLightNodes(e)),this.indirect(e)}finish(){}direct(){}directRectArea(){}indirect(){}ambientOcclusion(){}}class Tv extends Q1{constructor(){super()}indirect({context:e}){const t=e.ambientOcclusion,n=e.reflectedLight,i=e.irradianceLightMap;n.indirectDiffuse.assign(Ve(0)),i?n.indirectDiffuse.addAssign(i):n.indirectDiffuse.addAssign(Ve(1,1,1,0)),n.indirectDiffuse.mulAssign(t),n.indirectDiffuse.mulAssign(Ft.rgb)}finish(e){const{material:t,context:n}=e,i=n.outgoingLight,s=e.context.environment;if(s)switch(t.combine){case Nw:i.rgb.assign(Bt(i.rgb,i.rgb.mul(s.rgb),Yl.mul(lc)));break;case Ew:i.rgb.assign(Bt(i.rgb,s.rgb,Yl.mul(lc)));break;case Mw:i.rgb.addAssign(s.rgb.mul(Yl.mul(lc)));break;default:console.warn("THREE.BasicLightingModel: Unsupported .combine value:",t.combine);break}}}const IF=new Fs;class qF extends Mn{static get type(){return"MeshBasicNodeMaterial"}constructor(e){super(),this.isMeshBasicNodeMaterial=!0,this.lights=!0,this.setDefaultValues(IF),this.setValues(e)}setupNormal(){return jA(OA)}setupEnvironment(e){const t=super.setupEnvironment(e);return t?new a3(t):null}setupLightMap(e){let t=null;return e.material.lightMap&&(t=new LF(Jp)),t}setupOutgoingLight(){return Ft.rgb}setupLightingModel(){return new Tv}}const kA=re(({f0:r,f90:e,dotVH:t})=>{const n=t.mul(-5.55473).sub(6.98316).mul(t).exp2();return r.mul(n.oneMinus()).add(e.mul(n))}),Ma=re(r=>r.diffuseColor.mul(1/Math.PI)),OF=()=>V(.25),UF=re(({dotNH:r})=>o1.mul(V(.5)).add(1).mul(V(1/Math.PI)).mul(r.pow(o1))),kF=re(({lightDirection:r})=>{const e=r.add(An).normalize(),t=$t.dot(e).clamp(),n=An.dot(e).clamp(),i=kA({f0:Er,f90:1,dotVH:n}),s=OF(),o=UF({dotNH:t});return i.mul(s).mul(o)});class wv extends Tv{constructor(e=!0){super(),this.specular=e}direct({lightDirection:e,lightColor:t,reflectedLight:n}){const s=$t.dot(e).clamp().mul(t);n.directDiffuse.addAssign(s.mul(Ma({diffuseColor:Ft.rgb}))),this.specular===!0&&n.directSpecular.addAssign(s.mul(kF({lightDirection:e})).mul(Yl))}indirect(e){const{ambientOcclusion:t,irradiance:n,reflectedLight:i}=e.context;i.indirectDiffuse.addAssign(n.mul(Ma({diffuseColor:Ft}))),i.indirectDiffuse.mulAssign(t)}}const GF=new Zs;class VF extends Mn{static get type(){return"MeshLambertNodeMaterial"}constructor(e){super(),this.isMeshLambertNodeMaterial=!0,this.lights=!0,this.setDefaultValues(GF),this.setValues(e)}setupEnvironment(e){const t=super.setupEnvironment(e);return t?new a3(t):null}setupLightingModel(){return new wv(!1)}}const zF=new P6;class $F extends Mn{static get type(){return"MeshPhongNodeMaterial"}constructor(e){super(),this.isMeshPhongNodeMaterial=!0,this.lights=!0,this.shininessNode=null,this.specularNode=null,this.setDefaultValues(zF),this.setValues(e)}setupEnvironment(e){const t=super.setupEnvironment(e);return t?new a3(t):null}setupLightingModel(){return new wv}setupVariants(){const e=(this.shininessNode?V(this.shininessNode):My).max(1e-4);o1.assign(e);const t=this.specularNode||Ny;Er.assign(t)}copy(e){return this.shininessNode=e.shininessNode,this.specularNode=e.specularNode,super.copy(e)}}const Sv=re(r=>{if(r.geometry.hasAttribute("normal")===!1)return V(0);const e=OA.dFdx().abs().max(OA.dFdy().abs());return e.x.max(e.y).max(e.z)}),A3=re(r=>{const{roughness:e}=r,t=Sv();let n=e.max(.0525);return n=n.add(t),n=n.min(1),n}),Mv=re(({alpha:r,dotNL:e,dotNV:t})=>{const n=r.pow2(),i=e.mul(n.add(n.oneMinus().mul(t.pow2())).sqrt()),s=t.mul(n.add(n.oneMinus().mul(e.pow2())).sqrt());return Zr(.5,i.add(s).max(J8))}).setLayout({name:"V_GGX_SmithCorrelated",type:"float",inputs:[{name:"alpha",type:"float"},{name:"dotNL",type:"float"},{name:"dotNV",type:"float"}]}),HF=re(({alphaT:r,alphaB:e,dotTV:t,dotBV:n,dotTL:i,dotBL:s,dotNV:o,dotNL:u})=>{const h=u.mul(ne(r.mul(t),e.mul(n),o).length()),d=o.mul(ne(r.mul(i),e.mul(s),u).length());return Zr(.5,h.add(d)).saturate()}).setLayout({name:"V_GGX_SmithCorrelated_Anisotropic",type:"float",inputs:[{name:"alphaT",type:"float",qualifier:"in"},{name:"alphaB",type:"float",qualifier:"in"},{name:"dotTV",type:"float",qualifier:"in"},{name:"dotBV",type:"float",qualifier:"in"},{name:"dotTL",type:"float",qualifier:"in"},{name:"dotBL",type:"float",qualifier:"in"},{name:"dotNV",type:"float",qualifier:"in"},{name:"dotNL",type:"float",qualifier:"in"}]}),Ev=re(({alpha:r,dotNH:e})=>{const t=r.pow2(),n=e.pow2().mul(t.oneMinus()).oneMinus();return t.div(n.pow2()).mul(1/Math.PI)}).setLayout({name:"D_GGX",type:"float",inputs:[{name:"alpha",type:"float"},{name:"dotNH",type:"float"}]}),jF=V(1/Math.PI),WF=re(({alphaT:r,alphaB:e,dotNH:t,dotTH:n,dotBH:i})=>{const s=r.mul(e),o=ne(e.mul(n),r.mul(i),s.mul(t)),u=o.dot(o),h=s.div(u);return jF.mul(s.mul(h.pow2()))}).setLayout({name:"D_GGX_Anisotropic",type:"float",inputs:[{name:"alphaT",type:"float",qualifier:"in"},{name:"alphaB",type:"float",qualifier:"in"},{name:"dotNH",type:"float",qualifier:"in"},{name:"dotTH",type:"float",qualifier:"in"},{name:"dotBH",type:"float",qualifier:"in"}]}),ld=re(({lightDirection:r,f0:e,f90:t,roughness:n,f:i,normalView:s=$t,USE_IRIDESCENCE:o,USE_ANISOTROPY:u})=>{const h=n.pow2(),d=r.add(An).normalize(),m=s.dot(r).clamp(),y=s.dot(An).clamp(),x=s.dot(d).clamp(),b=An.dot(d).clamp();let T=kA({f0:e,f90:t,dotVH:b}),M,N;if(du(o)&&(T=F1.mix(T,i)),du(u)){const C=Wl.dot(r),B=Wl.dot(An),P=Wl.dot(d),I=va.dot(r),D=va.dot(An),q=va.dot(d);M=HF({alphaT:s1,alphaB:h,dotTV:B,dotBV:D,dotTL:C,dotBL:I,dotNV:y,dotNL:m}),N=WF({alphaT:s1,alphaB:h,dotNH:x,dotTH:P,dotBH:q})}else M=Mv({alpha:h,dotNL:m,dotNV:y}),N=Ev({alpha:h,dotNH:x});return T.mul(M).mul(N)}),l3=re(({roughness:r,dotNV:e})=>{const t=Ve(-1,-.0275,-.572,.022),n=Ve(1,.0425,1.04,-.04),i=r.mul(t).add(n),s=i.x.mul(i.x).min(e.mul(-9.28).exp2()).mul(i.x).add(i.y);return ve(-1.04,1.04).mul(s).add(i.zw)}).setLayout({name:"DFGApprox",type:"vec2",inputs:[{name:"roughness",type:"float"},{name:"dotNV",type:"vec3"}]}),Nv=re(r=>{const{dotNV:e,specularColor:t,specularF90:n,roughness:i}=r,s=l3({dotNV:e,roughness:i});return t.mul(s.x).add(n.mul(s.y))}),Rv=re(({f:r,f90:e,dotVH:t})=>{const n=t.oneMinus().saturate(),i=n.mul(n),s=n.mul(i,i).clamp(0,.9999);return r.sub(ne(e).mul(s)).div(s.oneMinus())}).setLayout({name:"Schlick_to_F0",type:"vec3",inputs:[{name:"f",type:"vec3"},{name:"f90",type:"float"},{name:"dotVH",type:"float"}]}),QF=re(({roughness:r,dotNH:e})=>{const t=r.pow2(),n=V(1).div(t),s=e.pow2().oneMinus().max(.0078125);return V(2).add(n).mul(s.pow(n.mul(.5))).div(2*Math.PI)}).setLayout({name:"D_Charlie",type:"float",inputs:[{name:"roughness",type:"float"},{name:"dotNH",type:"float"}]}),XF=re(({dotNV:r,dotNL:e})=>V(1).div(V(4).mul(e.add(r).sub(e.mul(r))))).setLayout({name:"V_Neubelt",type:"float",inputs:[{name:"dotNV",type:"float"},{name:"dotNL",type:"float"}]}),YF=re(({lightDirection:r})=>{const e=r.add(An).normalize(),t=$t.dot(r).clamp(),n=$t.dot(An).clamp(),i=$t.dot(e).clamp(),s=QF({roughness:D1,dotNH:i}),o=XF({dotNV:n,dotNL:t});return ha.mul(s).mul(o)}),KF=re(({N:r,V:e,roughness:t})=>{const s=.0078125,o=r.dot(e).saturate(),u=ve(t,o.oneMinus().sqrt());return u.assign(u.mul(.984375).add(s)),u}).setLayout({name:"LTC_Uv",type:"vec2",inputs:[{name:"N",type:"vec3"},{name:"V",type:"vec3"},{name:"roughness",type:"float"}]}),ZF=re(({f:r})=>{const e=r.length();return yn(e.mul(e).add(r.z).div(e.add(1)),0)}).setLayout({name:"LTC_ClippedSphereFormFactor",type:"float",inputs:[{name:"f",type:"vec3"}]}),m0=re(({v1:r,v2:e})=>{const t=r.dot(e),n=t.abs().toVar(),i=n.mul(.0145206).add(.4965155).mul(n).add(.8543985).toVar(),s=n.add(4.1616724).mul(n).add(3.417594).toVar(),o=i.div(s),u=t.greaterThan(0).select(o,yn(t.mul(t).oneMinus(),1e-7).inverseSqrt().mul(.5).sub(o));return r.cross(e).mul(u)}).setLayout({name:"LTC_EdgeVectorFormFactor",type:"vec3",inputs:[{name:"v1",type:"vec3"},{name:"v2",type:"vec3"}]}),w5=re(({N:r,V:e,P:t,mInv:n,p0:i,p1:s,p2:o,p3:u})=>{const h=s.sub(i).toVar(),d=u.sub(i).toVar(),m=h.cross(d),y=ne().toVar();return Xe(m.dot(t.sub(i)).greaterThanEqual(0),()=>{const x=e.sub(r.mul(e.dot(r))).normalize(),b=r.cross(x).negate(),T=n.mul(fr(x,b,r).transpose()).toVar(),M=T.mul(i.sub(t)).normalize().toVar(),N=T.mul(s.sub(t)).normalize().toVar(),C=T.mul(o.sub(t)).normalize().toVar(),B=T.mul(u.sub(t)).normalize().toVar(),P=ne(0).toVar();P.addAssign(m0({v1:M,v2:N})),P.addAssign(m0({v1:N,v2:C})),P.addAssign(m0({v1:C,v2:B})),P.addAssign(m0({v1:B,v2:M})),y.assign(ne(ZF({f:P})))}),y}).setLayout({name:"LTC_Evaluate",type:"vec3",inputs:[{name:"N",type:"vec3"},{name:"V",type:"vec3"},{name:"P",type:"vec3"},{name:"mInv",type:"mat3"},{name:"p0",type:"vec3"},{name:"p1",type:"vec3"},{name:"p2",type:"vec3"},{name:"p3",type:"vec3"}]}),X1=1/6,Cv=r=>tt(X1,tt(r,tt(r,r.negate().add(3)).sub(3)).add(1)),ud=r=>tt(X1,tt(r,tt(r,tt(3,r).sub(6))).add(4)),Pv=r=>tt(X1,tt(r,tt(r,tt(-3,r).add(3)).add(3)).add(1)),cd=r=>tt(X1,hi(r,3)),S5=r=>Cv(r).add(ud(r)),M5=r=>Pv(r).add(cd(r)),E5=r=>Pn(-1,ud(r).div(Cv(r).add(ud(r)))),N5=r=>Pn(1,cd(r).div(Pv(r).add(cd(r)))),R5=(r,e,t)=>{const n=r.uvNode,i=tt(n,e.zw).add(.5),s=cs(i),o=Js(i),u=S5(o.x),h=M5(o.x),d=E5(o.x),m=N5(o.x),y=E5(o.y),x=N5(o.y),b=ve(s.x.add(d),s.y.add(y)).sub(.5).mul(e.xy),T=ve(s.x.add(m),s.y.add(y)).sub(.5).mul(e.xy),M=ve(s.x.add(d),s.y.add(x)).sub(.5).mul(e.xy),N=ve(s.x.add(m),s.y.add(x)).sub(.5).mul(e.xy),C=S5(o.y).mul(Pn(u.mul(r.sample(b).level(t)),h.mul(r.sample(T).level(t)))),B=M5(o.y).mul(Pn(u.mul(r.sample(M).level(t)),h.mul(r.sample(N).level(t))));return C.add(B)},u3=re(([r,e])=>{const t=ve(r.size(Q(e))),n=ve(r.size(Q(e.add(1)))),i=Zr(1,t),s=Zr(1,n),o=R5(r,Ve(i,t),cs(e)),u=R5(r,Ve(s,n),q1(e));return Js(e).mix(o,u)}),JF=re(([r,e])=>{const t=e.mul(Gp(r));return u3(r,t)}),C5=re(([r,e,t,n,i])=>{const s=ne(Fp(e.negate(),Xs(r),Zr(1,n))),o=ne(hs(i[0].xyz),hs(i[1].xyz),hs(i[2].xyz));return Xs(s).mul(t.mul(o))}).setLayout({name:"getVolumeTransmissionRay",type:"vec3",inputs:[{name:"n",type:"vec3"},{name:"v",type:"vec3"},{name:"thickness",type:"float"},{name:"ior",type:"float"},{name:"modelMatrix",type:"mat4"}]}),eL=re(([r,e])=>r.mul(vi(e.mul(2).sub(2),0,1))).setLayout({name:"applyIorToRoughness",type:"float",inputs:[{name:"roughness",type:"float"},{name:"ior",type:"float"}]}),tL=t3(),nL=t3(),P5=re(([r,e,t],{material:n})=>{const s=(n.side===Tr?tL:nL).sample(r),o=us(Sa.x).mul(eL(e,t));return u3(s,o)}),B5=re(([r,e,t])=>(Xe(t.notEqual(0),()=>{const n=I1(e).negate().div(t);return Sp(n.negate().mul(r))}),ne(1))).setLayout({name:"volumeAttenuation",type:"vec3",inputs:[{name:"transmissionDistance",type:"float"},{name:"attenuationColor",type:"vec3"},{name:"attenuationDistance",type:"float"}]}),rL=re(([r,e,t,n,i,s,o,u,h,d,m,y,x,b,T])=>{let M,N;if(T){M=Ve().toVar(),N=ne().toVar();const D=m.sub(1).mul(T.mul(.025)),q=ne(m.sub(D),m,m.add(D));Ht({start:0,end:3},({i:O})=>{const k=q.element(O),z=C5(r,e,y,k,u),X=o.add(z),W=d.mul(h.mul(Ve(X,1))),K=ve(W.xy.div(W.w)).toVar();K.addAssign(1),K.divAssign(2),K.assign(ve(K.x,K.y.oneMinus()));const Z=P5(K,t,k);M.element(O).assign(Z.element(O)),M.a.addAssign(Z.a),N.element(O).assign(n.element(O).mul(B5(hs(z),x,b).element(O)))}),M.a.divAssign(3)}else{const D=C5(r,e,y,m,u),q=o.add(D),O=d.mul(h.mul(Ve(q,1))),k=ve(O.xy.div(O.w)).toVar();k.addAssign(1),k.divAssign(2),k.assign(ve(k.x,k.y.oneMinus())),M=P5(k,t,m),N=n.mul(B5(hs(D),x,b))}const C=N.rgb.mul(M.rgb),B=r.dot(e).clamp(),P=ne(Nv({dotNV:B,specularColor:i,specularF90:s,roughness:t})),I=N.r.add(N.g,N.b).div(3);return Ve(P.oneMinus().mul(C),M.a.oneMinus().mul(I).oneMinus())}),iL=fr(3.2404542,-.969266,.0556434,-1.5371385,1.8760108,-.2040259,-.4985314,.041556,1.0572252),sL=r=>{const e=r.sqrt();return ne(1).add(e).div(ne(1).sub(e))},D5=(r,e)=>r.sub(e).div(r.add(e)).pow2(),oL=(r,e)=>{const t=r.mul(2*Math.PI*1e-9),n=ne(54856e-17,44201e-17,52481e-17),i=ne(1681e3,1795300,2208400),s=ne(43278e5,93046e5,66121e5),o=V(9747e-17*Math.sqrt(2*Math.PI*45282e5)).mul(t.mul(2239900).add(e.x).cos()).mul(t.pow2().mul(-45282e5).exp());let u=n.mul(s.mul(2*Math.PI).sqrt()).mul(i.mul(t).add(e).cos()).mul(t.pow2().negate().mul(s).exp());return u=ne(u.x.add(o),u.y,u.z).div(10685e-11),iL.mul(u)},aL=re(({outsideIOR:r,eta2:e,cosTheta1:t,thinFilmThickness:n,baseF0:i})=>{const s=Bt(r,e,ms(0,.03,n)),u=r.div(s).pow2().mul(t.pow2().oneMinus()).oneMinus();Xe(u.lessThan(0),()=>ne(1));const h=u.sqrt(),d=D5(s,r),m=kA({f0:d,f90:1,dotVH:t}),y=m.oneMinus(),x=s.lessThan(r).select(Math.PI,0),b=V(Math.PI).sub(x),T=sL(i.clamp(0,.9999)),M=D5(T,s.toVec3()),N=kA({f0:M,f90:1,dotVH:h}),C=ne(T.x.lessThan(s).select(Math.PI,0),T.y.lessThan(s).select(Math.PI,0),T.z.lessThan(s).select(Math.PI,0)),B=s.mul(n,h,2),P=ne(b).add(C),I=m.mul(N).clamp(1e-5,.9999),D=I.sqrt(),q=y.pow2().mul(N).div(ne(1).sub(I)),k=m.add(q).toVar(),z=q.sub(y).toVar();return Ht({start:1,end:2,condition:"<=",name:"m"},({m:X})=>{z.mulAssign(D);const W=oL(V(X).mul(B),V(X).mul(P)).mul(2);k.addAssign(z.mul(W))}),k.max(ne(0))}).setLayout({name:"evalIridescence",type:"vec3",inputs:[{name:"outsideIOR",type:"float"},{name:"eta2",type:"float"},{name:"cosTheta1",type:"float"},{name:"thinFilmThickness",type:"float"},{name:"baseF0",type:"vec3"}]}),AL=re(({normal:r,viewDir:e,roughness:t})=>{const n=r.dot(e).saturate(),i=t.pow2(),s=jn(t.lessThan(.25),V(-339.2).mul(i).add(V(161.4).mul(t)).sub(25.9),V(-8.48).mul(i).add(V(14.3).mul(t)).sub(9.95)),o=jn(t.lessThan(.25),V(44).mul(i).sub(V(23.7).mul(t)).add(3.26),V(1.97).mul(i).sub(V(3.27).mul(t)).add(.72));return jn(t.lessThan(.25),0,V(.1).mul(t).sub(.025)).add(s.mul(n).add(o).exp()).mul(1/Math.PI).saturate()}),rh=ne(.04),ih=V(1);class Bv extends Q1{constructor(e=!1,t=!1,n=!1,i=!1,s=!1,o=!1){super(),this.clearcoat=e,this.sheen=t,this.iridescence=n,this.anisotropy=i,this.transmission=s,this.dispersion=o,this.clearcoatRadiance=null,this.clearcoatSpecularDirect=null,this.clearcoatSpecularIndirect=null,this.sheenSpecularDirect=null,this.sheenSpecularIndirect=null,this.iridescenceFresnel=null,this.iridescenceF0=null}start(e){if(this.clearcoat===!0&&(this.clearcoatRadiance=ne().toVar("clearcoatRadiance"),this.clearcoatSpecularDirect=ne().toVar("clearcoatSpecularDirect"),this.clearcoatSpecularIndirect=ne().toVar("clearcoatSpecularIndirect")),this.sheen===!0&&(this.sheenSpecularDirect=ne().toVar("sheenSpecularDirect"),this.sheenSpecularIndirect=ne().toVar("sheenSpecularIndirect")),this.iridescence===!0){const t=$t.dot(An).clamp();this.iridescenceFresnel=aL({outsideIOR:V(1),eta2:mp,cosTheta1:t,thinFilmThickness:gp,baseF0:Er}),this.iridescenceF0=Rv({f:this.iridescenceFresnel,f90:1,dotVH:t})}if(this.transmission===!0){const t=fs,n=J9.sub(fs).normalize(),i=ko,s=e.context;s.backdrop=rL(i,n,os,Ft,Er,vu,t,fi,wi,HA,Ql,yp,_p,vp,this.dispersion?xp:null),s.backdropAlpha=a1,Ft.a.mulAssign(Bt(1,s.backdrop.a,a1))}super.start(e)}computeMultiscattering(e,t,n){const i=$t.dot(An).clamp(),s=l3({roughness:os,dotNV:i}),u=(this.iridescenceF0?F1.mix(Er,this.iridescenceF0):Er).mul(s.x).add(n.mul(s.y)),d=s.x.add(s.y).oneMinus(),m=Er.add(Er.oneMinus().mul(.047619)),y=u.mul(m).div(d.mul(m).oneMinus());e.addAssign(u),t.addAssign(y.mul(d))}direct({lightDirection:e,lightColor:t,reflectedLight:n}){const s=$t.dot(e).clamp().mul(t);if(this.sheen===!0&&this.sheenSpecularDirect.addAssign(s.mul(YF({lightDirection:e}))),this.clearcoat===!0){const u=fa.dot(e).clamp().mul(t);this.clearcoatSpecularDirect.addAssign(u.mul(ld({lightDirection:e,f0:rh,f90:ih,roughness:yu,normalView:fa})))}n.directDiffuse.addAssign(s.mul(Ma({diffuseColor:Ft.rgb}))),n.directSpecular.addAssign(s.mul(ld({lightDirection:e,f0:Er,f90:1,roughness:os,iridescence:this.iridescence,f:this.iridescenceFresnel,USE_IRIDESCENCE:this.iridescence,USE_ANISOTROPY:this.anisotropy})))}directRectArea({lightColor:e,lightPosition:t,halfWidth:n,halfHeight:i,reflectedLight:s,ltc_1:o,ltc_2:u}){const h=t.add(n).sub(i),d=t.sub(n).sub(i),m=t.sub(n).add(i),y=t.add(n).add(i),x=$t,b=An,T=wn.toVar(),M=KF({N:x,V:b,roughness:os}),N=o.sample(M).toVar(),C=u.sample(M).toVar(),B=fr(ne(N.x,0,N.y),ne(0,1,0),ne(N.z,0,N.w)).toVar(),P=Er.mul(C.x).add(Er.oneMinus().mul(C.y)).toVar();s.directSpecular.addAssign(e.mul(P).mul(w5({N:x,V:b,P:T,mInv:B,p0:h,p1:d,p2:m,p3:y}))),s.directDiffuse.addAssign(e.mul(Ft).mul(w5({N:x,V:b,P:T,mInv:fr(1,0,0,0,1,0,0,0,1),p0:h,p1:d,p2:m,p3:y})))}indirect(e){this.indirectDiffuse(e),this.indirectSpecular(e),this.ambientOcclusion(e)}indirectDiffuse(e){const{irradiance:t,reflectedLight:n}=e.context;n.indirectDiffuse.addAssign(t.mul(Ma({diffuseColor:Ft})))}indirectSpecular(e){const{radiance:t,iblIrradiance:n,reflectedLight:i}=e.context;if(this.sheen===!0&&this.sheenSpecularIndirect.addAssign(n.mul(ha,AL({normal:$t,viewDir:An,roughness:D1}))),this.clearcoat===!0){const m=fa.dot(An).clamp(),y=Nv({dotNV:m,specularColor:rh,specularF90:ih,roughness:yu});this.clearcoatSpecularIndirect.addAssign(this.clearcoatRadiance.mul(y))}const s=ne().toVar("singleScattering"),o=ne().toVar("multiScattering"),u=n.mul(1/Math.PI);this.computeMultiscattering(s,o,vu);const h=s.add(o),d=Ft.mul(h.r.max(h.g).max(h.b).oneMinus());i.indirectSpecular.addAssign(t.mul(s)),i.indirectSpecular.addAssign(o.mul(u)),i.indirectDiffuse.addAssign(d.mul(u))}ambientOcclusion(e){const{ambientOcclusion:t,reflectedLight:n}=e.context,s=$t.dot(An).clamp().add(t),o=os.mul(-16).oneMinus().negate().exp2(),u=t.sub(s.pow(o).oneMinus()).clamp();this.clearcoat===!0&&this.clearcoatSpecularIndirect.mulAssign(t),this.sheen===!0&&this.sheenSpecularIndirect.mulAssign(t),n.indirectDiffuse.mulAssign(t),n.indirectSpecular.mulAssign(u)}finish({context:e}){const{outgoingLight:t}=e;if(this.clearcoat===!0){const n=fa.dot(An).clamp(),i=kA({dotVH:n,f0:rh,f90:ih}),s=t.mul(i1.mul(i).oneMinus()).add(this.clearcoatSpecularDirect.add(this.clearcoatSpecularIndirect).mul(i1));t.assign(s)}if(this.sheen===!0){const n=ha.r.max(ha.g).max(ha.b).mul(.157).oneMinus(),i=t.mul(n).add(this.sheenSpecularDirect,this.sheenSpecularIndirect);t.assign(i)}}}const F5=V(1),hd=V(-2),g0=V(.8),sh=V(-1),y0=V(.4),oh=V(2),v0=V(.305),ah=V(3),L5=V(.21),lL=V(4),I5=V(4),uL=V(16),cL=re(([r])=>{const e=ne(nn(r)).toVar(),t=V(-1).toVar();return Xe(e.x.greaterThan(e.z),()=>{Xe(e.x.greaterThan(e.y),()=>{t.assign(jn(r.x.greaterThan(0),0,3))}).Else(()=>{t.assign(jn(r.y.greaterThan(0),1,4))})}).Else(()=>{Xe(e.z.greaterThan(e.y),()=>{t.assign(jn(r.z.greaterThan(0),2,5))}).Else(()=>{t.assign(jn(r.y.greaterThan(0),1,4))})}),t}).setLayout({name:"getFace",type:"float",inputs:[{name:"direction",type:"vec3"}]}),hL=re(([r,e])=>{const t=ve().toVar();return Xe(e.equal(0),()=>{t.assign(ve(r.z,r.y).div(nn(r.x)))}).ElseIf(e.equal(1),()=>{t.assign(ve(r.x.negate(),r.z.negate()).div(nn(r.y)))}).ElseIf(e.equal(2),()=>{t.assign(ve(r.x.negate(),r.y).div(nn(r.z)))}).ElseIf(e.equal(3),()=>{t.assign(ve(r.z.negate(),r.y).div(nn(r.x)))}).ElseIf(e.equal(4),()=>{t.assign(ve(r.x.negate(),r.z).div(nn(r.y)))}).Else(()=>{t.assign(ve(r.x,r.y).div(nn(r.z)))}),tt(.5,t.add(1))}).setLayout({name:"getUV",type:"vec2",inputs:[{name:"direction",type:"vec3"},{name:"face",type:"float"}]}),fL=re(([r])=>{const e=V(0).toVar();return Xe(r.greaterThanEqual(g0),()=>{e.assign(F5.sub(r).mul(sh.sub(hd)).div(F5.sub(g0)).add(hd))}).ElseIf(r.greaterThanEqual(y0),()=>{e.assign(g0.sub(r).mul(oh.sub(sh)).div(g0.sub(y0)).add(sh))}).ElseIf(r.greaterThanEqual(v0),()=>{e.assign(y0.sub(r).mul(ah.sub(oh)).div(y0.sub(v0)).add(oh))}).ElseIf(r.greaterThanEqual(L5),()=>{e.assign(v0.sub(r).mul(lL.sub(ah)).div(v0.sub(L5)).add(ah))}).Else(()=>{e.assign(V(-2).mul(us(tt(1.16,r))))}),e}).setLayout({name:"roughnessToMip",type:"float",inputs:[{name:"roughness",type:"float"}]}),Dv=re(([r,e])=>{const t=r.toVar();t.assign(tt(2,t).sub(1));const n=ne(t,1).toVar();return Xe(e.equal(0),()=>{n.assign(n.zyx)}).ElseIf(e.equal(1),()=>{n.assign(n.xzy),n.xz.mulAssign(-1)}).ElseIf(e.equal(2),()=>{n.x.mulAssign(-1)}).ElseIf(e.equal(3),()=>{n.assign(n.zyx),n.xz.mulAssign(-1)}).ElseIf(e.equal(4),()=>{n.assign(n.xzy),n.xy.mulAssign(-1)}).ElseIf(e.equal(5),()=>{n.z.mulAssign(-1)}),n}).setLayout({name:"getDirection",type:"vec3",inputs:[{name:"uv",type:"vec2"},{name:"face",type:"float"}]}),Fv=re(([r,e,t,n,i,s])=>{const o=V(t),u=ne(e),h=vi(fL(o),hd,s),d=Js(h),m=cs(h),y=ne(fd(r,u,m,n,i,s)).toVar();return Xe(d.notEqual(0),()=>{const x=ne(fd(r,u,m.add(1),n,i,s)).toVar();y.assign(Bt(y,x,d))}),y}),fd=re(([r,e,t,n,i,s])=>{const o=V(t).toVar(),u=ne(e),h=V(cL(u)).toVar(),d=V(yn(I5.sub(o),0)).toVar();o.assign(yn(o,I5));const m=V(qA(o)).toVar(),y=ve(hL(u,h).mul(m.sub(2)).add(1)).toVar();return Xe(h.greaterThan(2),()=>{y.y.addAssign(m),h.subAssign(3)}),y.x.addAssign(h.mul(m)),y.x.addAssign(d.mul(tt(3,uL))),y.y.addAssign(tt(4,qA(s).sub(m))),y.x.mulAssign(n),y.y.mulAssign(i),r.sample(y).grad(ve(),ve())}),Ah=re(({envMap:r,mipInt:e,outputDirection:t,theta:n,axis:i,CUBEUV_TEXEL_WIDTH:s,CUBEUV_TEXEL_HEIGHT:o,CUBEUV_MAX_MIP:u})=>{const h=Bs(n),d=t.mul(h).add(i.cross(t).mul(Qr(n))).add(i.mul(i.dot(t).mul(h.oneMinus())));return fd(r,d,e,s,o,u)}),Lv=re(({n:r,latitudinal:e,poleAxis:t,outputDirection:n,weights:i,samples:s,dTheta:o,mipInt:u,envMap:h,CUBEUV_TEXEL_WIDTH:d,CUBEUV_TEXEL_HEIGHT:m,CUBEUV_MAX_MIP:y})=>{const x=ne(jn(e,t,k1(t,n))).toVar();Xe(x.equal(ne(0)),()=>{x.assign(ne(n.z,0,n.x.negate()))}),x.assign(Xs(x));const b=ne().toVar();return b.addAssign(i.element(0).mul(Ah({theta:0,axis:x,outputDirection:n,mipInt:u,envMap:h,CUBEUV_TEXEL_WIDTH:d,CUBEUV_TEXEL_HEIGHT:m,CUBEUV_MAX_MIP:y}))),Ht({start:Q(1),end:r},({i:T})=>{Xe(T.greaterThanEqual(s),()=>{Av()});const M=V(o.mul(V(T))).toVar();b.addAssign(i.element(T).mul(Ah({theta:M.mul(-1),axis:x,outputDirection:n,mipInt:u,envMap:h,CUBEUV_TEXEL_WIDTH:d,CUBEUV_TEXEL_HEIGHT:m,CUBEUV_MAX_MIP:y}))),b.addAssign(i.element(T).mul(Ah({theta:M,axis:x,outputDirection:n,mipInt:u,envMap:h,CUBEUV_TEXEL_WIDTH:d,CUBEUV_TEXEL_HEIGHT:m,CUBEUV_MAX_MIP:y})))}),Ve(b,1)}),_A=4,q5=[.125,.215,.35,.446,.526,.582],oa=20,lh=new Ul(-1,1,1,-1,0,1),dL=new Mo(90,1),O5=new Un;let uh=null,ch=0,hh=0;const sa=(1+Math.sqrt(5))/2,Ja=1/sa,U5=[new Re(-sa,Ja,0),new Re(sa,Ja,0),new Re(-Ja,0,sa),new Re(Ja,0,sa),new Re(0,sa,-Ja),new Re(0,sa,Ja),new Re(-1,1,-1),new Re(1,1,-1),new Re(-1,1,1),new Re(1,1,1)],pL=new Re,Iv=new WeakMap,mL=[3,1,5,0,4,2],fh=Dv(Xt(),Ks("faceIndex")).normalize(),c3=ne(fh.x,fh.y,fh.z);class gL{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._lodMeshes=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._backgroundBox=null}get _hasInitialized(){return this._renderer.hasInitialized()}fromScene(e,t=0,n=.1,i=100,s={}){const{size:o=256,position:u=pL,renderTarget:h=null}=s;if(this._setSize(o),this._hasInitialized===!1){console.warn("THREE.PMREMGenerator: .fromScene() called before the backend is initialized. Try using .fromSceneAsync() instead.");const m=h||this._allocateTarget();return s.renderTarget=m,this.fromSceneAsync(e,t,n,i,s),m}uh=this._renderer.getRenderTarget(),ch=this._renderer.getActiveCubeFace(),hh=this._renderer.getActiveMipmapLevel();const d=h||this._allocateTarget();return d.depthBuffer=!0,this._init(d),this._sceneToCubeUV(e,n,i,d,u),t>0&&this._blur(d,0,0,t),this._applyPMREM(d),this._cleanup(d),d}async fromSceneAsync(e,t=0,n=.1,i=100,s={}){return this._hasInitialized===!1&&await this._renderer.init(),this.fromScene(e,t,n,i,s)}fromEquirectangular(e,t=null){if(this._hasInitialized===!1){console.warn("THREE.PMREMGenerator: .fromEquirectangular() called before the backend is initialized. Try using .fromEquirectangularAsync() instead."),this._setSizeFromTexture(e);const n=t||this._allocateTarget();return this.fromEquirectangularAsync(e,n),n}return this._fromTexture(e,t)}async fromEquirectangularAsync(e,t=null){return this._hasInitialized===!1&&await this._renderer.init(),this._fromTexture(e,t)}fromCubemap(e,t=null){if(this._hasInitialized===!1){console.warn("THREE.PMREMGenerator: .fromCubemap() called before the backend is initialized. Try using .fromCubemapAsync() instead."),this._setSizeFromTexture(e);const n=t||this._allocateTarget();return this.fromCubemapAsync(e,t),n}return this._fromTexture(e,t)}async fromCubemapAsync(e,t=null){return this._hasInitialized===!1&&await this._renderer.init(),this._fromTexture(e,t)}async compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=G5(),await this._compileMaterial(this._cubemapMaterial))}async compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=V5(),await this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose(),this._backgroundBox!==null&&(this._backgroundBox.geometry.dispose(),this._backgroundBox.material.dispose())}_setSizeFromTexture(e){e.mapping===yc||e.mapping===vc?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4)}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(uh,ch,hh),e.scissorTest=!1,_0(e,0,0,e.width,e.height)}_fromTexture(e,t){this._setSizeFromTexture(e),uh=this._renderer.getRenderTarget(),ch=this._renderer.getActiveCubeFace(),hh=this._renderer.getActiveMipmapLevel();const n=t||this._allocateTarget();return this._init(n),this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTarget(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize;return k5(e,t)}_init(e){if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e.width||this._pingPongRenderTarget.height!==e.height){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=k5(e.width,e.height);const{_lodMax:t}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas,lodMeshes:this._lodMeshes}=yL(t)),this._blurMaterial=vL(t,e.width,e.height)}}async _compileMaterial(e){const t=new Sn(this._lodPlanes[0],e);await this._renderer.compile(t,lh)}_sceneToCubeUV(e,t,n,i,s){const o=dL;o.near=t,o.far=n;const u=[1,1,1,1,-1,1],h=[1,-1,1,-1,1,-1],d=this._renderer,m=d.autoClear;d.getClearColor(O5),d.autoClear=!1;let y=this._backgroundBox;if(y===null){const T=new Fs({name:"PMREM.Background",side:Tr,depthWrite:!1,depthTest:!1});y=new Sn(new Vd,T)}let x=!1;const b=e.background;b?b.isColor&&(y.material.color.copy(b),e.background=null,x=!0):(y.material.color.copy(O5),x=!0),d.setRenderTarget(i),d.clear(),x&&d.render(y,o);for(let T=0;T<6;T++){const M=T%3;M===0?(o.up.set(0,u[T],0),o.position.set(s.x,s.y,s.z),o.lookAt(s.x+h[T],s.y,s.z)):M===1?(o.up.set(0,0,u[T]),o.position.set(s.x,s.y,s.z),o.lookAt(s.x,s.y+h[T],s.z)):(o.up.set(0,u[T],0),o.position.set(s.x,s.y,s.z),o.lookAt(s.x,s.y,s.z+h[T]));const N=this._cubeSize;_0(i,M*N,T>2?N:0,N,N),d.render(e,o)}d.autoClear=m,e.background=b}_textureToCubeUV(e,t){const n=this._renderer,i=e.mapping===yc||e.mapping===vc;i?this._cubemapMaterial===null&&(this._cubemapMaterial=G5(e)):this._equirectMaterial===null&&(this._equirectMaterial=V5(e));const s=i?this._cubemapMaterial:this._equirectMaterial;s.fragmentNode.value=e;const o=this._lodMeshes[0];o.material=s;const u=this._cubeSize;_0(t,0,0,3*u,2*u),n.setRenderTarget(t),n.render(o,lh)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;const i=this._lodPlanes.length;for(let s=1;s<i;s++){const o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),u=U5[(i-s-1)%U5.length];this._blur(e,s-1,s,o,u)}t.autoClear=n}_blur(e,t,n,i,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,n,i,"latitudinal",s),this._halfBlur(o,e,n,n,i,"longitudinal",s)}_halfBlur(e,t,n,i,s,o,u){const h=this._renderer,d=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const m=3,y=this._lodMeshes[i];y.material=d;const x=Iv.get(d),b=this._sizeLods[n]-1,T=isFinite(s)?Math.PI/(2*b):2*Math.PI/(2*oa-1),M=s/T,N=isFinite(s)?1+Math.floor(m*M):oa;N>oa&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${N} samples when the maximum is set to ${oa}`);const C=[];let B=0;for(let O=0;O<oa;++O){const k=O/M,z=Math.exp(-k*k/2);C.push(z),O===0?B+=z:O<N&&(B+=2*z)}for(let O=0;O<C.length;O++)C[O]=C[O]/B;e.texture.frame=(e.texture.frame||0)+1,x.envMap.value=e.texture,x.samples.value=N,x.weights.array=C,x.latitudinal.value=o==="latitudinal"?1:0,u&&(x.poleAxis.value=u);const{_lodMax:P}=this;x.dTheta.value=T,x.mipInt.value=P-n;const I=this._sizeLods[i],D=3*I*(i>P-_A?i-P+_A:0),q=4*(this._cubeSize-I);_0(t,D,q,3*I,2*I),h.setRenderTarget(t),h.render(y,lh)}}function yL(r){const e=[],t=[],n=[],i=[];let s=r;const o=r-_A+1+q5.length;for(let u=0;u<o;u++){const h=Math.pow(2,s);t.push(h);let d=1/h;u>r-_A?d=q5[u-r+_A-1]:u===0&&(d=0),n.push(d);const m=1/(h-2),y=-m,x=1+m,b=[y,y,x,y,x,x,y,y,x,x,y,x],T=6,M=6,N=3,C=2,B=1,P=new Float32Array(N*M*T),I=new Float32Array(C*M*T),D=new Float32Array(B*M*T);for(let O=0;O<T;O++){const k=O%3*2/3-1,z=O>2?0:-1,X=[k,z,0,k+2/3,z,0,k+2/3,z+1,0,k,z,0,k+2/3,z+1,0,k,z+1,0],W=mL[O];P.set(X,N*M*W),I.set(b,C*M*W);const K=[W,W,W,W,W,W];D.set(K,B*M*W)}const q=new bi;q.setAttribute("position",new Ui(P,N)),q.setAttribute("uv",new Ui(I,C)),q.setAttribute("faceIndex",new Ui(D,B)),e.push(q),i.push(new Sn(q,null)),s>_A&&s--}return{lodPlanes:e,sizeLods:t,sigmas:n,lodMeshes:i}}function k5(r,e){const t={magFilter:zs,minFilter:zs,generateMipmaps:!1,type:Rr,format:Ii,colorSpace:Zg},n=new qo(r,e,t);return n.texture.mapping=kh,n.texture.name="PMREM.cubeUv",n.texture.isPMREMTexture=!0,n.scissorTest=!0,n}function _0(r,e,t,n,i){r.viewport.set(e,t,n,i),r.scissor.set(e,t,n,i)}function h3(r){const e=new Mn;return e.depthTest=!1,e.depthWrite=!1,e.blending=tu,e.name=`PMREM_${r}`,e}function vL(r,e,t){const n=cr(new Array(oa).fill(0)),i=Ge(new Re(0,1,0)),s=Ge(0),o=V(oa),u=Ge(0),h=Ge(1),d=xt(null),m=Ge(0),y=V(1/e),x=V(1/t),b=V(r),T={n:o,latitudinal:u,weights:n,poleAxis:i,outputDirection:c3,dTheta:s,samples:h,envMap:d,mipInt:m,CUBEUV_TEXEL_WIDTH:y,CUBEUV_TEXEL_HEIGHT:x,CUBEUV_MAX_MIP:b},M=h3("blur");return M.fragmentNode=Lv({...T,latitudinal:u.equal(1)}),Iv.set(M,T),M}function G5(r){const e=h3("cubemap");return e.fragmentNode=UA(r,c3),e}function V5(r){const e=h3("equirect");return e.fragmentNode=xt(r,o3(c3),0),e}const z5=new WeakMap;function _L(r){const e=Math.log2(r)-2,t=1/r;return{texelWidth:1/(3*Math.max(Math.pow(2,e),112)),texelHeight:t,maxMip:e}}function xL(r,e,t){const n=bL(e);let i=n.get(r);if((i!==void 0?i.pmremVersion:-1)!==r.pmremVersion){const o=r.image;if(r.isCubeTexture)if(wL(o))i=t.fromCubemap(r,i);else return null;else if(SL(o))i=t.fromEquirectangular(r,i);else return null;i.pmremVersion=r.pmremVersion,n.set(r,i)}return i.texture}function bL(r){let e=z5.get(r);return e===void 0&&(e=new WeakMap,z5.set(r,e)),e}class TL extends En{static get type(){return"PMREMNode"}constructor(e,t=null,n=null){super("vec3"),this._value=e,this._pmrem=null,this.uvNode=t,this.levelNode=n,this._generator=null;const i=new Md;i.isRenderTargetTexture=!0,this._texture=xt(i),this._width=Ge(0),this._height=Ge(0),this._maxMip=Ge(0),this.updateBeforeType=lt.RENDER}set value(e){this._value=e,this._pmrem=null}get value(){return this._value}updateFromTexture(e){const t=_L(e.image.height);this._texture.value=e,this._width.value=t.texelWidth,this._height.value=t.texelHeight,this._maxMip.value=t.maxMip}updateBefore(e){let t=this._pmrem;const n=t?t.pmremVersion:-1,i=this._value;n!==i.pmremVersion&&(i.isPMREMTexture===!0?t=i:t=xL(i,e.renderer,this._generator),t!==null&&(this._pmrem=t,this.updateFromTexture(t)))}setup(e){this._generator===null&&(this._generator=new gL(e.renderer)),this.updateBefore(e);let t=this.uvNode;t===null&&e.context.getUV&&(t=e.context.getUV(this)),t=Xp.mul(ne(t.x,t.y.negate(),t.z));let n=this.levelNode;return n===null&&e.context.getTextureLevel&&(n=e.context.getTextureLevel(this)),Fv(this._texture,t,n,this._width,this._height,this._maxMip)}dispose(){super.dispose(),this._generator!==null&&this._generator.dispose()}}function wL(r){if(r==null)return!1;let e=0;const t=6;for(let n=0;n<t;n++)r[n]!==void 0&&e++;return e===t}function SL(r){return r==null?!1:r.height>0}const f3=Ke(TL).setParameterLength(1,3),$5=new WeakMap;class ML extends WA{static get type(){return"EnvironmentNode"}constructor(e=null){super(),this.envNode=e}setup(e){const{material:t}=e;let n=this.envNode;if(n.isTextureNode||n.isMaterialReferenceNode){const y=n.isTextureNode?n.value:t[n.property];let x=$5.get(y);x===void 0&&(x=f3(y),$5.set(y,x)),n=x}const s=t.useAnisotropy===!0||t.anisotropy>0?Ty:$t,o=n.context(H5(os,s)).mul(Ac),u=n.context(EL(ko)).mul(Math.PI).mul(Ac),h=Xl(o),d=Xl(u);e.context.radiance.addAssign(h),e.context.iblIrradiance.addAssign(d);const m=e.context.lightingModel.clearcoatRadiance;if(m){const y=n.context(H5(yu,fa)).mul(Ac),x=Xl(y);m.addAssign(x)}}}const H5=(r,e)=>{let t=null;return{getUV:()=>(t===null&&(t=An.negate().reflect(e),t=r.mul(r).mix(t,e).normalize(),t=t.transformDirection(wi)),t),getTextureLevel:()=>r}},EL=r=>({getUV:()=>r,getTextureLevel:()=>V(1)}),NL=new HT;class qv extends Mn{static get type(){return"MeshStandardNodeMaterial"}constructor(e){super(),this.isMeshStandardNodeMaterial=!0,this.lights=!0,this.emissiveNode=null,this.metalnessNode=null,this.roughnessNode=null,this.setDefaultValues(NL),this.setValues(e)}setupEnvironment(e){let t=super.setupEnvironment(e);return t===null&&e.environmentNode&&(t=e.environmentNode),t?new ML(t):null}setupLightingModel(){return new Bv}setupSpecular(){const e=Bt(ne(.04),Ft.rgb,gu);Er.assign(e),vu.assign(1)}setupVariants(){const e=this.metalnessNode?V(this.metalnessNode):Py;gu.assign(e);let t=this.roughnessNode?V(this.roughnessNode):Cy;t=A3({roughness:t}),os.assign(t),this.setupSpecular(),Ft.assign(Ve(Ft.rgb.mul(e.oneMinus()),Ft.a))}copy(e){return this.emissiveNode=e.emissiveNode,this.metalnessNode=e.metalnessNode,this.roughnessNode=e.roughnessNode,super.copy(e)}}const RL=new jT;class CL extends qv{static get type(){return"MeshPhysicalNodeMaterial"}constructor(e){super(),this.isMeshPhysicalNodeMaterial=!0,this.clearcoatNode=null,this.clearcoatRoughnessNode=null,this.clearcoatNormalNode=null,this.sheenNode=null,this.sheenRoughnessNode=null,this.iridescenceNode=null,this.iridescenceIORNode=null,this.iridescenceThicknessNode=null,this.specularIntensityNode=null,this.specularColorNode=null,this.iorNode=null,this.transmissionNode=null,this.thicknessNode=null,this.attenuationDistanceNode=null,this.attenuationColorNode=null,this.dispersionNode=null,this.anisotropyNode=null,this.setDefaultValues(RL),this.setValues(e)}get useClearcoat(){return this.clearcoat>0||this.clearcoatNode!==null}get useIridescence(){return this.iridescence>0||this.iridescenceNode!==null}get useSheen(){return this.sheen>0||this.sheenNode!==null}get useAnisotropy(){return this.anisotropy>0||this.anisotropyNode!==null}get useTransmission(){return this.transmission>0||this.transmissionNode!==null}get useDispersion(){return this.dispersion>0||this.dispersionNode!==null}setupSpecular(){const e=this.iorNode?V(this.iorNode):Hy;Ql.assign(e),Er.assign(Bt(Lr(Pp(Ql.sub(1).div(Ql.add(1))).mul(Ry),ne(1)).mul(Ad),Ft.rgb,gu)),vu.assign(Bt(Ad,1,gu))}setupLightingModel(){return new Bv(this.useClearcoat,this.useSheen,this.useIridescence,this.useAnisotropy,this.useTransmission,this.useDispersion)}setupVariants(e){if(super.setupVariants(e),this.useClearcoat){const t=this.clearcoatNode?V(this.clearcoatNode):Dy,n=this.clearcoatRoughnessNode?V(this.clearcoatRoughnessNode):Fy;i1.assign(t),yu.assign(A3({roughness:n}))}if(this.useSheen){const t=this.sheenNode?ne(this.sheenNode):qy,n=this.sheenRoughnessNode?V(this.sheenRoughnessNode):Oy;ha.assign(t),D1.assign(n)}if(this.useIridescence){const t=this.iridescenceNode?V(this.iridescenceNode):ky,n=this.iridescenceIORNode?V(this.iridescenceIORNode):Gy,i=this.iridescenceThicknessNode?V(this.iridescenceThicknessNode):Vy;F1.assign(t),mp.assign(n),gp.assign(i)}if(this.useAnisotropy){const t=(this.anisotropyNode?ve(this.anisotropyNode):Uy).toVar();yo.assign(t.length()),Xe(yo.equal(0),()=>{t.assign(ve(1,0))}).Else(()=>{t.divAssign(ve(yo)),yo.assign(yo.saturate())}),s1.assign(yo.pow2().mix(os.pow2(),1)),Wl.assign(da[0].mul(t.x).add(da[1].mul(t.y))),va.assign(da[1].mul(t.x).sub(da[0].mul(t.y)))}if(this.useTransmission){const t=this.transmissionNode?V(this.transmissionNode):zy,n=this.thicknessNode?V(this.thicknessNode):$y,i=this.attenuationDistanceNode?V(this.attenuationDistanceNode):jy,s=this.attenuationColorNode?ne(this.attenuationColorNode):Wy;if(a1.assign(t),yp.assign(n),vp.assign(i),_p.assign(s),this.useDispersion){const o=this.dispersionNode?V(this.dispersionNode):Jy;xp.assign(o)}}}setupClearcoatNormal(){return this.clearcoatNormalNode?ne(this.clearcoatNormalNode):Ly}setup(e){e.context.setupClearcoatNormal=()=>EA(this.setupClearcoatNormal(e),"NORMAL","vec3"),super.setup(e)}copy(e){return this.clearcoatNode=e.clearcoatNode,this.clearcoatRoughnessNode=e.clearcoatRoughnessNode,this.clearcoatNormalNode=e.clearcoatNormalNode,this.sheenNode=e.sheenNode,this.sheenRoughnessNode=e.sheenRoughnessNode,this.iridescenceNode=e.iridescenceNode,this.iridescenceIORNode=e.iridescenceIORNode,this.iridescenceThicknessNode=e.iridescenceThicknessNode,this.specularIntensityNode=e.specularIntensityNode,this.specularColorNode=e.specularColorNode,this.transmissionNode=e.transmissionNode,this.thicknessNode=e.thicknessNode,this.attenuationDistanceNode=e.attenuationDistanceNode,this.attenuationColorNode=e.attenuationColorNode,this.dispersionNode=e.dispersionNode,this.anisotropyNode=e.anisotropyNode,super.copy(e)}}const PL=re(({normal:r,lightDirection:e,builder:t})=>{const n=r.dot(e),i=ve(n.mul(.5).add(.5),0);if(t.material.gradientMap){const s=Is("gradientMap","texture").context({getUV:()=>i});return ne(s.r)}else{const s=i.fwidth().mul(.5);return Bt(ne(.7),ne(1),ms(V(.7).sub(s.x),V(.7).add(s.x),i.x))}});class BL extends Q1{direct({lightDirection:e,lightColor:t,reflectedLight:n},i){const s=PL({normal:V1,lightDirection:e,builder:i}).mul(t);n.directDiffuse.addAssign(s.mul(Ma({diffuseColor:Ft.rgb})))}indirect(e){const{ambientOcclusion:t,irradiance:n,reflectedLight:i}=e.context;i.indirectDiffuse.addAssign(n.mul(Ma({diffuseColor:Ft}))),i.indirectDiffuse.mulAssign(t)}}const DL=new WT;class FL extends Mn{static get type(){return"MeshToonNodeMaterial"}constructor(e){super(),this.isMeshToonNodeMaterial=!0,this.lights=!0,this.setDefaultValues(DL),this.setValues(e)}setupLightingModel(){return new BL}}const Ov=re(()=>{const r=ne(An.z,0,An.x.negate()).normalize(),e=An.cross(r);return ve(r.dot($t),e.dot($t)).mul(.495).add(.5)}).once(["NORMAL","VERTEX"])().toVar("matcapUV"),LL=new XT;class IL extends Mn{static get type(){return"MeshMatcapNodeMaterial"}constructor(e){super(),this.isMeshMatcapNodeMaterial=!0,this.setDefaultValues(LL),this.setValues(e)}setupVariants(e){const t=Ov;let n;e.material.matcap?n=Is("matcap","texture").context({getUV:()=>t}):n=ne(Bt(.2,.8,t.y)),Ft.rgb.mulAssign(n.rgb)}}class qL extends En{static get type(){return"RotateNode"}constructor(e,t){super(),this.positionNode=e,this.rotationNode=t}getNodeType(e){return this.positionNode.getNodeType(e)}setup(e){const{rotationNode:t,positionNode:n}=this;if(this.getNodeType(e)==="vec2"){const s=t.cos(),o=t.sin();return B1(s,o,o.negate(),s).mul(n)}else{const s=t,o=ya(Ve(1,0,0,0),Ve(0,Bs(s.x),Qr(s.x).negate(),0),Ve(0,Qr(s.x),Bs(s.x),0),Ve(0,0,0,1)),u=ya(Ve(Bs(s.y),0,Qr(s.y),0),Ve(0,1,0,0),Ve(Qr(s.y).negate(),0,Bs(s.y),0),Ve(0,0,0,1)),h=ya(Ve(Bs(s.z),Qr(s.z).negate(),0,0),Ve(Qr(s.z),Bs(s.z),0,0),Ve(0,0,1,0),Ve(0,0,0,1));return o.mul(u).mul(h).mul(Ve(n,1)).xyz}}}const Lu=Ke(qL).setParameterLength(2),OL=new KT;class Uv extends Mn{static get type(){return"SpriteNodeMaterial"}constructor(e){super(),this.isSpriteNodeMaterial=!0,this._useSizeAttenuation=!0,this.positionNode=null,this.rotationNode=null,this.scaleNode=null,this.transparent=!0,this.setDefaultValues(OL),this.setValues(e)}setupPositionView(e){const{object:t,camera:n}=e,{positionNode:i,rotationNode:s,scaleNode:o,sizeAttenuation:u}=this,h=Ca.mul(ne(i||0));let d=ve(fi[0].xyz.length(),fi[1].xyz.length());o!==null&&(d=d.mul(ve(o))),n.isPerspectiveCamera&&u===!1&&(d=d.mul(h.z.negate()));let m=Du.xy;if(t.center&&t.center.isVector2===!0){const b=UB("center","vec2",t);m=m.sub(b.sub(.5))}m=m.mul(d);const y=V(s||Iy),x=Lu(m,y);return Ve(h.xy.add(x),h.zw)}copy(e){return this.positionNode=e.positionNode,this.rotationNode=e.rotationNode,this.scaleNode=e.scaleNode,super.copy(e)}get sizeAttenuation(){return this._useSizeAttenuation}set sizeAttenuation(e){this._useSizeAttenuation!==e&&(this._useSizeAttenuation=e,this.needsUpdate=!0)}}const UL=new B6,kL=new Ot;class GL extends Uv{static get type(){return"PointsNodeMaterial"}constructor(e){super(),this.sizeNode=null,this.isPointsNodeMaterial=!0,this.setDefaultValues(UL),this.setValues(e)}setupPositionView(){const{positionNode:e}=this;return Ca.mul(ne(e||Tn)).xyz}setupVertexSprite(e){const{material:t,camera:n}=e,{rotationNode:i,scaleNode:s,sizeNode:o,sizeAttenuation:u}=this;let h=super.setupVertex(e);if(t.isNodeMaterial!==!0)return h;let d=o!==null?ve(o):Zy;d=d.mul(K9),n.isPerspectiveCamera&&u===!0&&(d=d.mul(VL.div(wn.z.negate()))),s&&s.isNode&&(d=d.mul(ve(s)));let m=Du.xy;if(i&&i.isNode){const y=V(i);m=Lu(m,y)}return m=m.mul(d),m=m.div(Hp.div(2)),m=m.mul(h.w),h=h.add(Ve(m,0,0)),h}setupVertex(e){return e.object.isPoints?super.setupVertex(e):this.setupVertexSprite(e)}get alphaToCoverage(){return this._useAlphaToCoverage}set alphaToCoverage(e){this._useAlphaToCoverage!==e&&(this._useAlphaToCoverage=e,this.needsUpdate=!0)}}const VL=Ge(1).onFrameUpdate(function({renderer:r}){const e=r.getSize(kL);this.value=.5*e.y});class zL extends Q1{constructor(){super(),this.shadowNode=V(1).toVar("shadowMask")}direct({lightNode:e}){e.shadowNode!==null&&this.shadowNode.mulAssign(e.shadowNode)}finish({context:e}){Ft.a.mulAssign(this.shadowNode.oneMinus()),e.outgoingLight.rgb.assign(Ft.rgb)}}const $L=new ZT;class HL extends Mn{static get type(){return"ShadowNodeMaterial"}constructor(e){super(),this.isShadowNodeMaterial=!0,this.lights=!0,this.transparent=!0,this.setDefaultValues($L),this.setValues(e)}setupLightingModel(){return new zL}}Gs("vec3");Gs("vec3");Gs("vec3");class jL{constructor(e,t){this.nodes=e,this.info=t,this._context=typeof self<"u"?self:null,this._animationLoop=null,this._requestId=null}start(){const e=(t,n)=>{this._requestId=this._context.requestAnimationFrame(e),this.info.autoReset===!0&&this.info.reset(),this.nodes.nodeFrame.update(),this.info.frame=this.nodes.nodeFrame.frameId,this._animationLoop!==null&&this._animationLoop(t,n)};e()}stop(){this._context.cancelAnimationFrame(this._requestId),this._requestId=null}getAnimationLoop(){return this._animationLoop}setAnimationLoop(e){this._animationLoop=e}getContext(){return this._context}setContext(e){this._context=e}dispose(){this.stop()}}class zi{constructor(){this.weakMap=new WeakMap}get(e){let t=this.weakMap;for(let n=0;n<e.length-1;n++)if(t=t.get(e[n]),t===void 0)return;return t.get(e[e.length-1])}set(e,t){let n=this.weakMap;for(let i=0;i<e.length-1;i++){const s=e[i];n.has(s)===!1&&n.set(s,new WeakMap),n=n.get(s)}return n.set(e[e.length-1],t),this}delete(e){let t=this.weakMap;for(let n=0;n<e.length-1;n++)if(t=t.get(e[n]),t===void 0)return!1;return t.delete(e[e.length-1])}}let WL=0;function QL(r){const e=Object.keys(r);let t=Object.getPrototypeOf(r);for(;t;){const n=Object.getOwnPropertyDescriptors(t);for(const i in n)if(n[i]!==void 0){const s=n[i];s&&typeof s.get=="function"&&e.push(i)}t=Object.getPrototypeOf(t)}return e}class XL{constructor(e,t,n,i,s,o,u,h,d,m){this.id=WL++,this._nodes=e,this._geometries=t,this.renderer=n,this.object=i,this.material=s,this.scene=o,this.camera=u,this.lightsNode=h,this.context=d,this.geometry=i.geometry,this.version=s.version,this.drawRange=null,this.attributes=null,this.attributesId=null,this.pipeline=null,this.group=null,this.vertexBuffers=null,this.drawParams=null,this.bundle=null,this.clippingContext=m,this.clippingContextCacheKey=m!==null?m.cacheKey:"",this.initialNodesCacheKey=this.getDynamicCacheKey(),this.initialCacheKey=this.getCacheKey(),this._nodeBuilderState=null,this._bindings=null,this._monitor=null,this.onDispose=null,this.isRenderObject=!0,this.onMaterialDispose=()=>{this.dispose()},this.onGeometryDispose=()=>{this.attributes=null,this.attributesId=null},this.material.addEventListener("dispose",this.onMaterialDispose),this.geometry.addEventListener("dispose",this.onGeometryDispose)}updateClipping(e){this.clippingContext=e}get clippingNeedsUpdate(){return this.clippingContext===null||this.clippingContext.cacheKey===this.clippingContextCacheKey?!1:(this.clippingContextCacheKey=this.clippingContext.cacheKey,!0)}get hardwareClippingPlanes(){return this.material.hardwareClipping===!0?this.clippingContext.unionClippingCount:0}getNodeBuilderState(){return this._nodeBuilderState||(this._nodeBuilderState=this._nodes.getForRender(this))}getMonitor(){return this._monitor||(this._monitor=this.getNodeBuilderState().observer)}getBindings(){return this._bindings||(this._bindings=this.getNodeBuilderState().createBindings())}getBindingGroup(e){for(const t of this.getBindings())if(t.name===e)return t}getIndex(){return this._geometries.getIndex(this)}getIndirect(){return this._geometries.getIndirect(this)}getChainArray(){return[this.object,this.material,this.context,this.lightsNode]}setGeometry(e){this.geometry=e,this.attributes=null,this.attributesId=null}getAttributes(){if(this.attributes!==null)return this.attributes;const e=this.getNodeBuilderState().nodeAttributes,t=this.geometry,n=[],i=new Set,s={};for(const o of e){let u;if(o.node&&o.node.attribute?u=o.node.attribute:(u=t.getAttribute(o.name),s[o.name]=u.version),u===void 0)continue;n.push(u);const h=u.isInterleavedBufferAttribute?u.data:u;i.add(h)}return this.attributes=n,this.attributesId=s,this.vertexBuffers=Array.from(i.values()),n}getVertexBuffers(){return this.vertexBuffers===null&&this.getAttributes(),this.vertexBuffers}getDrawParameters(){const{object:e,material:t,geometry:n,group:i,drawRange:s}=this,o=this.drawParams||(this.drawParams={vertexCount:0,firstVertex:0,instanceCount:0,firstInstance:0}),u=this.getIndex(),h=u!==null;let d=1;if(n.isInstancedBufferGeometry===!0?d=n.instanceCount:e.count!==void 0&&(d=Math.max(0,e.count)),d===0)return null;if(o.instanceCount=d,e.isBatchedMesh===!0)return o;let m=1;t.wireframe===!0&&!e.isPoints&&!e.isLineSegments&&!e.isLine&&!e.isLineLoop&&(m=2);let y=s.start*m,x=(s.start+s.count)*m;i!==null&&(y=Math.max(y,i.start*m),x=Math.min(x,(i.start+i.count)*m));const b=n.attributes.position;let T=1/0;h?T=u.count:b!=null&&(T=b.count),y=Math.max(y,0),x=Math.min(x,T);const M=x-y;return M<0||M===1/0?null:(o.vertexCount=M,o.firstVertex=y,o)}getGeometryCacheKey(){const{geometry:e}=this;let t="";for(const n of Object.keys(e.attributes).sort()){const i=e.attributes[n];t+=n+",",i.data&&(t+=i.data.stride+","),i.offset&&(t+=i.offset+","),i.itemSize&&(t+=i.itemSize+","),i.normalized&&(t+="n,")}for(const n of Object.keys(e.morphAttributes).sort()){const i=e.morphAttributes[n];t+="morph-"+n+",";for(let s=0,o=i.length;s<o;s++){const u=i[s];t+=u.id+","}}return e.index&&(t+="index,"),t}getMaterialCacheKey(){const{object:e,material:t,renderer:n}=this;let i=t.customProgramCacheKey();for(const s of QL(t)){if(/^(is[A-Z]|_)|^(visible|version|uuid|name|opacity|userData)$/.test(s))continue;const o=t[s];let u;if(o!==null){const h=typeof o;h==="number"?u=o!==0?"1":"0":h==="object"?(u="{",o.isTexture&&(u+=o.mapping,n.backend.isWebGPUBackend===!0&&(u+=o.magFilter,u+=o.minFilter,u+=o.wrapS,u+=o.wrapT,u+=o.wrapR)),u+="}"):u=String(o)}else u=String(o);i+=u+","}return i+=this.clippingContextCacheKey+",",e.geometry&&(i+=this.getGeometryCacheKey()),e.skeleton&&(i+=e.skeleton.bones.length+","),e.isBatchedMesh&&(i+=e._matricesTexture.uuid+",",e._colorsTexture!==null&&(i+=e._colorsTexture.uuid+",")),(e.isInstancedMesh||e.count>1)&&(i+=e.uuid+","),i+=e.receiveShadow+",",o8(i)}get needsGeometryUpdate(){if(this.geometry.id!==this.object.geometry.id)return!0;if(this.attributes!==null){const e=this.attributesId;for(const t in e){const n=this.geometry.getAttribute(t);if(n===void 0||e[t]!==n.id)return!0}}return!1}get needsUpdate(){return this.initialNodesCacheKey!==this.getDynamicCacheKey()||this.clippingNeedsUpdate}getDynamicCacheKey(){let e=0;return this.material.isShadowPassMaterial!==!0&&(e=this._nodes.getCacheKey(this.scene,this.lightsNode)),this.camera.isArrayCamera&&(e=t1(e,this.camera.cameras.length)),this.object.receiveShadow&&(e=t1(e,1)),e}getCacheKey(){return this.getMaterialCacheKey()+this.getDynamicCacheKey()}dispose(){this.material.removeEventListener("dispose",this.onMaterialDispose),this.geometry.removeEventListener("dispose",this.onGeometryDispose),this.onDispose()}}const Yo=[];class YL{constructor(e,t,n,i,s,o){this.renderer=e,this.nodes=t,this.geometries=n,this.pipelines=i,this.bindings=s,this.info=o,this.chainMaps={}}get(e,t,n,i,s,o,u,h){const d=this.getChainMap(h);Yo[0]=e,Yo[1]=t,Yo[2]=o,Yo[3]=s;let m=d.get(Yo);return m===void 0?(m=this.createRenderObject(this.nodes,this.geometries,this.renderer,e,t,n,i,s,o,u,h),d.set(Yo,m)):(m.updateClipping(u),m.needsGeometryUpdate&&m.setGeometry(e.geometry),(m.version!==t.version||m.needsUpdate)&&(m.initialCacheKey!==m.getCacheKey()?(m.dispose(),m=this.get(e,t,n,i,s,o,u,h)):m.version=t.version)),Yo.length=0,m}getChainMap(e="default"){return this.chainMaps[e]||(this.chainMaps[e]=new zi)}dispose(){this.chainMaps={}}createRenderObject(e,t,n,i,s,o,u,h,d,m,y){const x=this.getChainMap(y),b=new XL(e,t,n,i,s,o,u,h,d,m);return b.onDispose=()=>{this.pipelines.delete(b),this.bindings.delete(b),this.nodes.delete(b),x.delete(b.getChainArray())},b}}class Go{constructor(){this.data=new WeakMap}get(e){let t=this.data.get(e);return t===void 0&&(t={},this.data.set(e,t)),t}delete(e){let t=null;return this.data.has(e)&&(t=this.data.get(e),this.data.delete(e)),t}has(e){return this.data.has(e)}dispose(){this.data=new WeakMap}}const di={VERTEX:1,INDEX:2,STORAGE:3,INDIRECT:4},bo=16,KL=211,ZL=212;class JL extends Go{constructor(e){super(),this.backend=e}delete(e){const t=super.delete(e);return t!==null&&this.backend.destroyAttribute(e),t}update(e,t){const n=this.get(e);if(n.version===void 0)t===di.VERTEX?this.backend.createAttribute(e):t===di.INDEX?this.backend.createIndexAttribute(e):t===di.STORAGE?this.backend.createStorageAttribute(e):t===di.INDIRECT&&this.backend.createIndirectStorageAttribute(e),n.version=this._getBufferAttribute(e).version;else{const i=this._getBufferAttribute(e);(n.version<i.version||i.usage===fA)&&(this.backend.updateAttribute(e),n.version=i.version)}}_getBufferAttribute(e){return e.isInterleavedBufferAttribute&&(e=e.data),e}}function kv(r){return r.index!==null?r.index.version:r.attributes.position.version}function j5(r){const e=[],t=r.index,n=r.attributes.position;if(t!==null){const s=t.array;for(let o=0,u=s.length;o<u;o+=3){const h=s[o+0],d=s[o+1],m=s[o+2];e.push(h,d,d,m,m,h)}}else{const s=n.array;for(let o=0,u=s.length/3-1;o<u;o+=3){const h=o+0,d=o+1,m=o+2;e.push(h,d,d,m,m,h)}}const i=new(ow(e)?iw:sw)(e,1);return i.version=kv(r),i}class eI extends Go{constructor(e,t){super(),this.attributes=e,this.info=t,this.wireframes=new WeakMap,this.attributeCall=new WeakMap}has(e){const t=e.geometry;return super.has(t)&&this.get(t).initialized===!0}updateForRender(e){this.has(e)===!1&&this.initGeometry(e),this.updateAttributes(e)}initGeometry(e){const t=e.geometry,n=this.get(t);n.initialized=!0,this.info.memory.geometries++;const i=()=>{this.info.memory.geometries--;const s=t.index,o=e.getAttributes();s!==null&&this.attributes.delete(s);for(const h of o)this.attributes.delete(h);const u=this.wireframes.get(t);u!==void 0&&this.attributes.delete(u),t.removeEventListener("dispose",i)};t.addEventListener("dispose",i)}updateAttributes(e){const t=e.getAttributes();for(const s of t)s.isStorageBufferAttribute||s.isStorageInstancedBufferAttribute?this.updateAttribute(s,di.STORAGE):this.updateAttribute(s,di.VERTEX);const n=this.getIndex(e);n!==null&&this.updateAttribute(n,di.INDEX);const i=e.geometry.indirect;i!==null&&this.updateAttribute(i,di.INDIRECT)}updateAttribute(e,t){const n=this.info.render.calls;e.isInterleavedBufferAttribute?this.attributeCall.get(e)===void 0?(this.attributes.update(e,t),this.attributeCall.set(e,n)):this.attributeCall.get(e.data)!==n&&(this.attributes.update(e,t),this.attributeCall.set(e.data,n),this.attributeCall.set(e,n)):this.attributeCall.get(e)!==n&&(this.attributes.update(e,t),this.attributeCall.set(e,n))}getIndirect(e){return e.geometry.indirect}getIndex(e){const{geometry:t,material:n}=e;let i=t.index;if(n.wireframe===!0){const s=this.wireframes;let o=s.get(t);o===void 0?(o=j5(t),s.set(t,o)):o.version!==kv(t)&&(this.attributes.delete(o),o=j5(t),s.set(t,o)),i=o}return i}}class tI{constructor(){this.autoReset=!0,this.frame=0,this.calls=0,this.render={calls:0,frameCalls:0,drawCalls:0,triangles:0,points:0,lines:0,timestamp:0},this.compute={calls:0,frameCalls:0,timestamp:0},this.memory={geometries:0,textures:0}}update(e,t,n){this.render.drawCalls++,e.isMesh||e.isSprite?this.render.triangles+=n*(t/3):e.isPoints?this.render.points+=n*t:e.isLineSegments?this.render.lines+=n*(t/2):e.isLine?this.render.lines+=n*(t-1):console.error("THREE.WebGPUInfo: Unknown object type.")}reset(){this.render.drawCalls=0,this.render.frameCalls=0,this.compute.frameCalls=0,this.render.triangles=0,this.render.points=0,this.render.lines=0}dispose(){this.reset(),this.calls=0,this.render.calls=0,this.compute.calls=0,this.render.timestamp=0,this.compute.timestamp=0,this.memory.geometries=0,this.memory.textures=0}}class Gv{constructor(e){this.cacheKey=e,this.usedTimes=0}}class nI extends Gv{constructor(e,t,n){super(e),this.vertexProgram=t,this.fragmentProgram=n}}class rI extends Gv{constructor(e,t){super(e),this.computeProgram=t,this.isComputePipeline=!0}}let iI=0;class dh{constructor(e,t,n,i=null,s=null){this.id=iI++,this.code=e,this.stage=t,this.name=n,this.transforms=i,this.attributes=s,this.usedTimes=0}}class sI extends Go{constructor(e,t){super(),this.backend=e,this.nodes=t,this.bindings=null,this.caches=new Map,this.programs={vertex:new Map,fragment:new Map,compute:new Map}}getForCompute(e,t){const{backend:n}=this,i=this.get(e);if(this._needsComputeUpdate(e)){const s=i.pipeline;s&&(s.usedTimes--,s.computeProgram.usedTimes--);const o=this.nodes.getForCompute(e);let u=this.programs.compute.get(o.computeShader);u===void 0&&(s&&s.computeProgram.usedTimes===0&&this._releaseProgram(s.computeProgram),u=new dh(o.computeShader,"compute",e.name,o.transforms,o.nodeAttributes),this.programs.compute.set(o.computeShader,u),n.createProgram(u));const h=this._getComputeCacheKey(e,u);let d=this.caches.get(h);d===void 0&&(s&&s.usedTimes===0&&this._releasePipeline(s),d=this._getComputePipeline(e,u,h,t)),d.usedTimes++,u.usedTimes++,i.version=e.version,i.pipeline=d}return i.pipeline}getForRender(e,t=null){const{backend:n}=this,i=this.get(e);if(this._needsRenderUpdate(e)){const s=i.pipeline;s&&(s.usedTimes--,s.vertexProgram.usedTimes--,s.fragmentProgram.usedTimes--);const o=e.getNodeBuilderState(),u=e.material?e.material.name:"";let h=this.programs.vertex.get(o.vertexShader);h===void 0&&(s&&s.vertexProgram.usedTimes===0&&this._releaseProgram(s.vertexProgram),h=new dh(o.vertexShader,"vertex",u),this.programs.vertex.set(o.vertexShader,h),n.createProgram(h));let d=this.programs.fragment.get(o.fragmentShader);d===void 0&&(s&&s.fragmentProgram.usedTimes===0&&this._releaseProgram(s.fragmentProgram),d=new dh(o.fragmentShader,"fragment",u),this.programs.fragment.set(o.fragmentShader,d),n.createProgram(d));const m=this._getRenderCacheKey(e,h,d);let y=this.caches.get(m);y===void 0?(s&&s.usedTimes===0&&this._releasePipeline(s),y=this._getRenderPipeline(e,h,d,m,t)):e.pipeline=y,y.usedTimes++,h.usedTimes++,d.usedTimes++,i.pipeline=y}return i.pipeline}delete(e){const t=this.get(e).pipeline;return t&&(t.usedTimes--,t.usedTimes===0&&this._releasePipeline(t),t.isComputePipeline?(t.computeProgram.usedTimes--,t.computeProgram.usedTimes===0&&this._releaseProgram(t.computeProgram)):(t.fragmentProgram.usedTimes--,t.vertexProgram.usedTimes--,t.vertexProgram.usedTimes===0&&this._releaseProgram(t.vertexProgram),t.fragmentProgram.usedTimes===0&&this._releaseProgram(t.fragmentProgram))),super.delete(e)}dispose(){super.dispose(),this.caches=new Map,this.programs={vertex:new Map,fragment:new Map,compute:new Map}}updateForRender(e){this.getForRender(e)}_getComputePipeline(e,t,n,i){n=n||this._getComputeCacheKey(e,t);let s=this.caches.get(n);return s===void 0&&(s=new rI(n,t),this.caches.set(n,s),this.backend.createComputePipeline(s,i)),s}_getRenderPipeline(e,t,n,i,s){i=i||this._getRenderCacheKey(e,t,n);let o=this.caches.get(i);return o===void 0&&(o=new nI(i,t,n),this.caches.set(i,o),e.pipeline=o,this.backend.createRenderPipeline(e,s)),o}_getComputeCacheKey(e,t){return e.id+","+t.id}_getRenderCacheKey(e,t,n){return t.id+","+n.id+","+this.backend.getRenderCacheKey(e)}_releasePipeline(e){this.caches.delete(e.cacheKey)}_releaseProgram(e){const t=e.code,n=e.stage;this.programs[n].delete(t)}_needsComputeUpdate(e){const t=this.get(e);return t.pipeline===void 0||t.version!==e.version}_needsRenderUpdate(e){return this.get(e).pipeline===void 0||this.backend.needsRenderUpdate(e)}}class oI extends Go{constructor(e,t,n,i,s,o){super(),this.backend=e,this.textures=n,this.pipelines=s,this.attributes=i,this.nodes=t,this.info=o,this.pipelines.bindings=this}getForRender(e){const t=e.getBindings();for(const n of t){const i=this.get(n);i.bindGroup===void 0&&(this._init(n),this.backend.createBindings(n,t,0),i.bindGroup=n)}return t}getForCompute(e){const t=this.nodes.getForCompute(e).bindings;for(const n of t){const i=this.get(n);i.bindGroup===void 0&&(this._init(n),this.backend.createBindings(n,t,0),i.bindGroup=n)}return t}updateForCompute(e){this._updateBindings(this.getForCompute(e))}updateForRender(e){this._updateBindings(this.getForRender(e))}_updateBindings(e){for(const t of e)this._update(t,e)}_init(e){for(const t of e.bindings)if(t.isSampledTexture)this.textures.updateTexture(t.texture);else if(t.isStorageBuffer){const n=t.attribute,i=n.isIndirectStorageBufferAttribute?di.INDIRECT:di.STORAGE;this.attributes.update(n,i)}}_update(e,t){const{backend:n}=this;let i=!1,s=!0,o=0,u=0;for(const h of e.bindings)if(!(h.isNodeUniformsGroup&&this.nodes.updateGroup(h)===!1)){if(h.isStorageBuffer){const d=h.attribute,m=d.isIndirectStorageBufferAttribute?di.INDIRECT:di.STORAGE;this.attributes.update(d,m)}if(h.isUniformBuffer)h.update()&&n.updateBinding(h);else if(h.isSampledTexture){const d=h.update(),m=h.texture,y=this.textures.get(m);if(d&&(this.textures.updateTexture(m),h.generation!==y.generation&&(h.generation=y.generation,i=!0,s=!1)),n.get(m).externalTexture!==void 0||y.isDefaultTexture?s=!1:(o=o*10+m.id,u+=m.version),m.isStorageTexture===!0){const b=this.get(m);h.store===!0?b.needsMipmap=!0:this.textures.needsMipmaps(m)&&b.needsMipmap===!0&&(this.backend.generateMipmaps(m),b.needsMipmap=!1)}}else h.isSampler&&h.update()}i===!0&&this.backend.updateBindings(e,t,s?o:0,u)}}function aI(r,e){return r.groupOrder!==e.groupOrder?r.groupOrder-e.groupOrder:r.renderOrder!==e.renderOrder?r.renderOrder-e.renderOrder:r.z!==e.z?r.z-e.z:r.id-e.id}function W5(r,e){return r.groupOrder!==e.groupOrder?r.groupOrder-e.groupOrder:r.renderOrder!==e.renderOrder?r.renderOrder-e.renderOrder:r.z!==e.z?e.z-r.z:r.id-e.id}function Q5(r){return(r.transmission>0||r.transmissionNode)&&r.side===pi&&r.forceSinglePass===!1}class AI{constructor(e,t,n){this.renderItems=[],this.renderItemsIndex=0,this.opaque=[],this.transparentDoublePass=[],this.transparent=[],this.bundles=[],this.lightsNode=e.getNode(t,n),this.lightsArray=[],this.scene=t,this.camera=n,this.occlusionQueryCount=0}begin(){return this.renderItemsIndex=0,this.opaque.length=0,this.transparentDoublePass.length=0,this.transparent.length=0,this.bundles.length=0,this.lightsArray.length=0,this.occlusionQueryCount=0,this}getNextRenderItem(e,t,n,i,s,o,u){let h=this.renderItems[this.renderItemsIndex];return h===void 0?(h={id:e.id,object:e,geometry:t,material:n,groupOrder:i,renderOrder:e.renderOrder,z:s,group:o,clippingContext:u},this.renderItems[this.renderItemsIndex]=h):(h.id=e.id,h.object=e,h.geometry=t,h.material=n,h.groupOrder=i,h.renderOrder=e.renderOrder,h.z=s,h.group=o,h.clippingContext=u),this.renderItemsIndex++,h}push(e,t,n,i,s,o,u){const h=this.getNextRenderItem(e,t,n,i,s,o,u);e.occlusionTest===!0&&this.occlusionQueryCount++,n.transparent===!0||n.transmission>0?(Q5(n)&&this.transparentDoublePass.push(h),this.transparent.push(h)):this.opaque.push(h)}unshift(e,t,n,i,s,o,u){const h=this.getNextRenderItem(e,t,n,i,s,o,u);n.transparent===!0||n.transmission>0?(Q5(n)&&this.transparentDoublePass.unshift(h),this.transparent.unshift(h)):this.opaque.unshift(h)}pushBundle(e){this.bundles.push(e)}pushLight(e){this.lightsArray.push(e)}sort(e,t){this.opaque.length>1&&this.opaque.sort(e||aI),this.transparentDoublePass.length>1&&this.transparentDoublePass.sort(t||W5),this.transparent.length>1&&this.transparent.sort(t||W5)}finish(){this.lightsNode.setLights(this.lightsArray);for(let e=this.renderItemsIndex,t=this.renderItems.length;e<t;e++){const n=this.renderItems[e];if(n.id===null)break;n.id=null,n.object=null,n.geometry=null,n.material=null,n.groupOrder=null,n.renderOrder=null,n.z=null,n.group=null,n.clippingContext=null}}}const dl=[];class lI{constructor(e){this.lighting=e,this.lists=new zi}get(e,t){const n=this.lists;dl[0]=e,dl[1]=t;let i=n.get(dl);return i===void 0&&(i=new AI(this.lighting,e,t),n.set(dl,i)),dl.length=0,i}dispose(){this.lists=new zi}}let uI=0;class cI{constructor(){this.id=uI++,this.color=!0,this.clearColor=!0,this.clearColorValue={r:0,g:0,b:0,a:1},this.depth=!0,this.clearDepth=!0,this.clearDepthValue=1,this.stencil=!1,this.clearStencil=!0,this.clearStencilValue=1,this.viewport=!1,this.viewportValue=new Ut,this.scissor=!1,this.scissorValue=new Ut,this.renderTarget=null,this.textures=null,this.depthTexture=null,this.activeCubeFace=0,this.activeMipmapLevel=0,this.sampleCount=1,this.width=0,this.height=0,this.occlusionQueryCount=0,this.clippingContext=null,this.isRenderContext=!0}getCacheKey(){return Vv(this)}}function Vv(r){const{textures:e,activeCubeFace:t,activeMipmapLevel:n}=r,i=[t,n];for(const s of e)i.push(s.id);return M1(i)}const pl=[],hI=new g1,fI=new Sd;class dI{constructor(){this.chainMaps={}}get(e,t,n=null){pl[0]=e,pl[1]=t;let i;if(n===null)i="default";else{const u=n.texture.format;i=`${n.textures.length}:${u}:${n.samples}:${n.depthBuffer}:${n.stencilBuffer}`}const s=this._getChainMap(i);let o=s.get(pl);return o===void 0&&(o=new cI,s.set(pl,o)),pl.length=0,n!==null&&(o.sampleCount=n.samples===0?1:n.samples),o}getForClear(e=null){return this.get(hI,fI,e)}_getChainMap(e){return this.chainMaps[e]||(this.chainMaps[e]=new zi)}dispose(){this.chainMaps={}}}const pI=new Re;class mI extends Go{constructor(e,t,n){super(),this.renderer=e,this.backend=t,this.info=n}updateRenderTarget(e,t=0){const n=this.get(e),i=e.samples===0?1:e.samples,s=n.depthTextureMips||(n.depthTextureMips={}),o=e.textures,u=this.getSize(o[0]),h=u.width>>t,d=u.height>>t;let m=e.depthTexture||s[t];const y=e.depthBuffer===!0||e.stencilBuffer===!0;let x=!1;m===void 0&&y&&(m=new Gi,m.format=e.stencilBuffer?No:Ro,m.type=e.stencilBuffer?Eo:In,m.image.width=h,m.image.height=d,m.image.depth=u.depth,m.isArrayTexture=e.multiview===!0&&u.depth>1,s[t]=m),(n.width!==u.width||u.height!==n.height)&&(x=!0,m&&(m.needsUpdate=!0,m.image.width=h,m.image.height=d,m.image.depth=m.isArrayTexture?m.image.depth:1)),n.width=u.width,n.height=u.height,n.textures=o,n.depthTexture=m||null,n.depth=e.depthBuffer,n.stencil=e.stencilBuffer,n.renderTarget=e,n.sampleCount!==i&&(x=!0,m&&(m.needsUpdate=!0),n.sampleCount=i);const b={sampleCount:i};if(e.isXRRenderTarget!==!0){for(let T=0;T<o.length;T++){const M=o[T];x&&(M.needsUpdate=!0),this.updateTexture(M,b)}m&&this.updateTexture(m,b)}if(n.initialized!==!0){n.initialized=!0;const T=()=>{e.removeEventListener("dispose",T);for(let M=0;M<o.length;M++)this._destroyTexture(o[M]);m&&this._destroyTexture(m),this.delete(e),this.backend.delete(e)};e.addEventListener("dispose",T)}}updateTexture(e,t={}){const n=this.get(e);if(n.initialized===!0&&n.version===e.version)return;const i=e.isRenderTargetTexture||e.isDepthTexture||e.isFramebufferTexture,s=this.backend;if(i&&n.initialized===!0&&(s.destroySampler(e),s.destroyTexture(e)),e.isFramebufferTexture){const d=this.renderer.getRenderTarget();d?e.type=d.texture.type:e.type=Xr}const{width:o,height:u,depth:h}=this.getSize(e);if(t.width=o,t.height=u,t.depth=h,t.needsMipmaps=this.needsMipmaps(e),t.levels=t.needsMipmaps?this.getMipLevels(e,o,u):1,e.isCubeTexture&&e.mipmaps.length>0&&t.levels++,i||e.isStorageTexture===!0||e.isExternalTexture===!0)s.createSampler(e),s.createTexture(e,t),n.generation=e.version;else if(n.initialized!==!0&&s.createSampler(e),e.version>0){const m=e.image;if(m===void 0)console.warn("THREE.Renderer: Texture marked for update but image is undefined.");else if(m.complete===!1)console.warn("THREE.Renderer: Texture marked for update but image is incomplete.");else{if(e.images){const y=[];for(const x of e.images)y.push(x);t.images=y}else t.image=m;(n.isDefaultTexture===void 0||n.isDefaultTexture===!0)&&(s.createTexture(e,t),n.isDefaultTexture=!1,n.generation=e.version),e.source.dataReady===!0&&s.updateTexture(e,t),t.needsMipmaps&&e.mipmaps.length===0&&s.generateMipmaps(e),e.onUpdate&&e.onUpdate(e)}}else s.createDefaultTexture(e),n.isDefaultTexture=!0,n.generation=e.version;if(n.initialized!==!0){n.initialized=!0,n.generation=e.version,this.info.memory.textures++,e.isVideoTexture&&bn.getTransfer(e.colorSpace)!==dt&&console.warn("WebGPURenderer: Video textures must use a color space with a sRGB transfer function, e.g. SRGBColorSpace.");const d=()=>{e.removeEventListener("dispose",d),this._destroyTexture(e)};e.addEventListener("dispose",d)}n.version=e.version}getSize(e,t=pI){let n=e.images?e.images[0]:e.image;return n?(n.image!==void 0&&(n=n.image),typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement?(t.width=n.videoWidth||1,t.height=n.videoHeight||1,t.depth=1):n instanceof VideoFrame?(t.width=n.displayWidth||1,t.height=n.displayHeight||1,t.depth=1):(t.width=n.width||1,t.height=n.height||1,t.depth=e.isCubeTexture?6:n.depth||1)):t.width=t.height=t.depth=1,t}getMipLevels(e,t,n){let i;return e.mipmaps.length>0?i=e.mipmaps.length:e.isCompressedTexture===!0?i=1:i=Math.floor(Math.log2(Math.max(t,n)))+1,i}needsMipmaps(e){return e.generateMipmaps===!0||e.mipmaps.length>0}_destroyTexture(e){this.has(e)===!0&&(this.backend.destroySampler(e),this.backend.destroyTexture(e),this.delete(e),this.info.memory.textures--)}}class d3 extends Un{constructor(e,t,n,i=1){super(e,t,n),this.a=i}set(e,t,n,i=1){return this.a=i,super.set(e,t,n)}copy(e){return e.a!==void 0&&(this.a=e.a),super.copy(e)}clone(){return new this.constructor(this.r,this.g,this.b,this.a)}}class zv extends kt{static get type(){return"ParameterNode"}constructor(e,t=null){super(e,t),this.isParameterNode=!0}getHash(){return this.uuid}generate(){return this.name}}const gI=(r,e)=>pe(new zv(r,e));class yI extends Ie{static get type(){return"StackNode"}constructor(e=null){super(),this.nodes=[],this.outputNode=null,this.parent=e,this._currentCond=null,this._expressionNode=null,this.isStackNode=!0}getNodeType(e){return this.hasOutput?this.outputNode.getNodeType(e):"void"}getMemberType(e,t){return this.hasOutput?this.outputNode.getMemberType(e,t):"void"}add(e){return e.isNode!==!0?(console.error("THREE.TSL: Invalid node added to stack."),this):(this.nodes.push(e),this)}If(e,t){const n=new vA(t);return this._currentCond=jn(e,n),this.add(this._currentCond)}ElseIf(e,t){const n=new vA(t),i=jn(e,n);return this._currentCond.elseNode=i,this._currentCond=i,this}Else(e){return this._currentCond.elseNode=new vA(e),this}Switch(e){return this._expressionNode=pe(e),this}Case(...e){const t=[];if(e.length>=2)for(let u=0;u<e.length-1;u++)t.push(this._expressionNode.equal(pe(e[u])));else console.error("THREE.TSL: Invalid parameter length. Case() requires at least two parameters.");const n=e[e.length-1],i=new vA(n);let s=t[0];for(let u=1;u<t.length;u++)s=s.or(t[u]);const o=jn(s,i);return this._currentCond===null?(this._currentCond=o,this.add(this._currentCond)):(this._currentCond.elseNode=o,this._currentCond=o,this)}Default(e){return this.Else(e),this}setup(e){const t=e.getNodeProperties(this);let n=0;for(const i of this.getChildren())i.isVarNode&&i.intent===!0&&e.getNodeProperties(i).assign!==!0||(t["node"+n++]=i);return t.outputNode||null}get hasOutput(){return this.outputNode&&this.outputNode.isNode}build(e,...t){const n=e.currentStack,i=C1();pu(this),e.currentStack=this;const s=e.buildStage;for(const u of this.nodes)if(!(u.isVarNode&&u.intent===!0&&e.getNodeProperties(u).assign!==!0)){if(s==="setup")u.build(e);else if(s==="analyze")u.build(e,this);else if(s==="generate"){const h=e.getDataFromNode(u,"any").stages,d=h&&h[e.shaderStage];if(u.isVarNode&&d&&d.length===1&&d[0]&&d[0].isStackNode)continue;u.build(e,"void")}}let o;return this.hasOutput?o=this.outputNode.build(e,...t):o=super.build(e,...t),pu(i),e.currentStack=n,o}}const uc=Ke(yI).setParameterLength(0,1);function vI(r){return Object.entries(r).map(([e,t])=>typeof t=="string"?{name:e,type:t,atomic:!1}:{name:e,type:t.type,atomic:t.atomic||!1})}class _I extends Ie{static get type(){return"StructTypeNode"}constructor(e,t=null){super("struct"),this.membersLayout=vI(e),this.name=t,this.isStructLayoutNode=!0}getLength(){const t=Float32Array.BYTES_PER_ELEMENT;let n=0;for(const i of this.membersLayout){const s=i.type,o=YP(s)*t,u=KP(s),h=n%8,d=h%u,m=h+d;n+=d,m!==0&&8-m<o&&(n+=8-m),n+=o}return Math.ceil(n/8)*8/t}getMemberType(e,t){const n=this.membersLayout.find(i=>i.name===t);return n?n.type:"void"}getNodeType(e){return e.getStructTypeFromNode(this,this.membersLayout,this.name).name}setup(e){e.getStructTypeFromNode(this,this.membersLayout,this.name),e.addInclude(this)}generate(e){return this.getNodeType(e)}}class xI extends Ie{static get type(){return"StructNode"}constructor(e,t){super("vec3"),this.structTypeNode=e,this.values=t,this.isStructNode=!0}getNodeType(e){return this.structTypeNode.getNodeType(e)}getMemberType(e,t){return this.structTypeNode.getMemberType(e,t)}generate(e){const t=e.getVarFromNode(this),n=t.type,i=e.getPropertyName(t);return e.addLineFlowCode(`${i} = ${e.generateStruct(n,this.structTypeNode.membersLayout,this.values)}`,this),t.name}}const bI=(r,e=null)=>{const t=new _I(r,e),n=(...i)=>{let s=null;if(i.length>0)if(i[0].isNode){s={};const o=Object.keys(r);for(let u=0;u<i.length;u++)s[o[u]]=i[u]}else s=i[0];return pe(new xI(t,s))};return n.layout=t,n.isStruct=!0,n};class $v extends Ie{static get type(){return"OutputStructNode"}constructor(...e){super(),this.members=e,this.isOutputStructNode=!0}getNodeType(e){const t=e.getNodeProperties(this);if(t.membersLayout===void 0){const n=this.members,i=[];for(let s=0;s<n.length;s++){const o="m"+s,u=n[s].getNodeType(e);i.push({name:o,type:u,index:s})}t.membersLayout=i,t.structType=e.getOutputStructTypeFromNode(this,t.membersLayout)}return t.structType.name}generate(e){const t=e.getOutputStructName(),n=this.members,i=t!==""?t+".":"";for(let s=0;s<n.length;s++){const o=n[s].build(e);e.addLineFlowCode(`${i}m${s} = ${o}`,this)}return t}}const TI=Ke($v);function Hv(r,e){for(let t=0;t<r.length;t++)if(r[t].name===e)return t;return-1}class wI extends $v{static get type(){return"MRTNode"}constructor(e){super(),this.outputNodes=e,this.isMRTNode=!0}has(e){return this.outputNodes[e]!==void 0}get(e){return this.outputNodes[e]}merge(e){const t={...this.outputNodes,...e.outputNodes};return jv(t)}setup(e){const t=this.outputNodes,n=e.renderer.getRenderTarget(),i=[],s=n.textures;for(const o in t){const u=Hv(s,o);i[u]=Ve(t[o])}return this.members=i,super.setup(e)}}const jv=Ke(wI);class Iu extends En{static get type(){return"BitcastNode"}constructor(e,t,n=null){super(),this.valueNode=e,this.conversionType=t,this.inputType=n,this.isBitcastNode=!0}getNodeType(e){if(this.inputType!==null){const t=this.valueNode.getNodeType(e),n=e.getTypeLength(t);return e.getTypeFromLength(n,this.conversionType)}return this.conversionType}generate(e){const t=this.getNodeType(e);let n="";if(this.inputType!==null){const i=this.valueNode.getNodeType(e);n=e.getTypeLength(i)===1?this.inputType:e.changeComponentType(i,this.inputType)}else n=this.valueNode.getNodeType(e);return`${e.getBitcastMethod(t,n)}( ${this.valueNode.build(e,n)} )`}}const SI=Ee(Iu).setParameterLength(2),MI=r=>new Iu(r,"int","float"),EI=r=>new Iu(r,"uint","float"),NI=r=>new Iu(r,"float","int"),RI=r=>new Iu(r,"float","uint"),CI=re(([r])=>{const e=r.toUint().mul(747796405).add(2891336453),t=e.shiftRight(e.shiftRight(28).add(4)).bitXor(e).mul(277803737);return t.shiftRight(22).bitXor(t).toFloat().mul(1/2**32)}),dd=(r,e)=>hi(tt(4,r.mul(bt(1,r))),e),PI=(r,e)=>r.lessThan(.5)?dd(r.mul(2),e).div(2):bt(1,dd(tt(bt(1,r),2),e).div(2)),BI=(r,e,t)=>hi(Zr(hi(r,e),Pn(hi(r,e),hi(bt(1,r),t))),1/e),DI=(r,e)=>Qr(A1.mul(e.mul(r).sub(1))).div(A1.mul(e.mul(r).sub(1))),Ds=re(([r])=>r.fract().sub(.5).abs()).setLayout({name:"tri",type:"float",inputs:[{name:"x",type:"float"}]}),FI=re(([r])=>ne(Ds(r.z.add(Ds(r.y.mul(1)))),Ds(r.z.add(Ds(r.x.mul(1)))),Ds(r.y.add(Ds(r.x.mul(1)))))).setLayout({name:"tri3",type:"vec3",inputs:[{name:"p",type:"vec3"}]}),LI=re(([r,e,t])=>{const n=ne(r).toVar(),i=V(1.4).toVar(),s=V(0).toVar(),o=ne(n).toVar();return Ht({start:V(0),end:V(3),type:"float",condition:"<="},()=>{const u=ne(FI(o.mul(2))).toVar();n.addAssign(u.add(t.mul(V(.1).mul(e)))),o.mulAssign(1.8),i.mulAssign(1.5),n.mulAssign(1.2);const h=V(Ds(n.z.add(Ds(n.x.add(Ds(n.y)))))).toVar();s.addAssign(h.div(i)),o.addAssign(.14)}),s}).setLayout({name:"triNoise3D",type:"float",inputs:[{name:"position",type:"vec3"},{name:"speed",type:"float"},{name:"time",type:"float"}]});class II extends Ie{static get type(){return"FunctionOverloadingNode"}constructor(e=[],...t){super(),this.functionNodes=e,this.parametersNodes=t,this._candidateFnCall=null,this.global=!0}getNodeType(){return this.functionNodes[0].shaderNode.layout.type}setup(e){const t=this.parametersNodes;let n=this._candidateFnCall;if(n===null){let i=null,s=-1;for(const o of this.functionNodes){const h=o.shaderNode.layout;if(h===null)throw new Error("FunctionOverloadingNode: FunctionNode must be a layout.");const d=h.inputs;if(t.length===d.length){let m=0;for(let y=0;y<t.length;y++){const x=t[y],b=d[y];x.getNodeType(e)===b.type?m++:m=0}m>s&&(i=o,s=m)}}this._candidateFnCall=n=i(...t)}return n}}const qI=Ke(II),rr=r=>(...e)=>qI(r,...e),QA=Ge(0).setGroup(ke).onRenderUpdate(r=>r.time),OI=Ge(0).setGroup(ke).onRenderUpdate(r=>r.deltaTime),Wv=Ge(0,"uint").setGroup(ke).onRenderUpdate(r=>r.frameId),UI=(r=QA)=>r.add(.75).mul(Math.PI*2).sin().mul(.5).add(.5),kI=(r=QA)=>r.fract().round(),GI=(r=QA)=>r.add(.5).fract().mul(2).sub(1).abs(),VI=(r=QA)=>r.fract(),zI=re(([r,e,t=ve(.5)])=>Lu(r.sub(t),e).add(t)),$I=re(([r,e,t=ve(.5)])=>{const n=r.sub(t),i=n.dot(n),o=i.mul(i).mul(e);return r.add(n.mul(o))}),HI=re(({position:r=null,horizontal:e=!0,vertical:t=!1})=>{let n;r!==null?(n=fi.toVar(),n[3][0]=r.x,n[3][1]=r.y,n[3][2]=r.z):n=fi;const i=wi.mul(n);return du(e)&&(i[0][0]=fi[0].length(),i[0][1]=0,i[0][2]=0),du(t)&&(i[1][0]=0,i[1][1]=fi[1].length(),i[1][2]=0),i[2][0]=0,i[2][1]=0,i[2][2]=1,HA.mul(i).mul(Tn)}),jI=re(([r=null])=>{const e=c1();return c1(n3(r)).sub(e).lessThan(0).select(Vs,r)});class WI extends Ie{static get type(){return"SpriteSheetUVNode"}constructor(e,t=Xt(),n=V(0)){super("vec2"),this.countNode=e,this.uvNode=t,this.frameNode=n}setup(){const{frameNode:e,uvNode:t,countNode:n}=this,{width:i,height:s}=n,o=e.mod(i.mul(s)).floor(),u=o.mod(i),h=s.sub(o.add(1).div(i).ceil()),d=n.reciprocal(),m=ve(u,h);return t.add(m).mul(d)}}const QI=Ke(WI).setParameterLength(3),Qv=re(([r,e=null,t=null,n=V(1),i=Tn,s=Ir])=>{let o=s.abs().normalize();o=o.div(o.dot(ne(1)));const u=i.yz.mul(n),h=i.zx.mul(n),d=i.xy.mul(n),m=r.value,y=e!==null?e.value:m,x=t!==null?t.value:m,b=xt(m,u).mul(o.x),T=xt(y,h).mul(o.y),M=xt(x,d).mul(o.z);return Pn(b,T,M)}),XI=(...r)=>Qv(...r),eA=new Bd,Ko=new Re,tA=new Re,ph=new Re,ml=new mn,x0=new Re(0,0,-1),Ji=new Ut,gl=new Re,b0=new Re,yl=new Ut,T0=new Ot,h1=new qo,YI=Vs.flipX();h1.depthTexture=new Gi(1,1);let w0=!1;class p3 extends gs{static get type(){return"ReflectorNode"}constructor(e={}){super(e.defaultTexture||h1.texture,YI),this._reflectorBaseNode=e.reflector||new KI(this,e),this._depthNode=null,this.setUpdateMatrix(!1)}get reflector(){return this._reflectorBaseNode}get target(){return this._reflectorBaseNode.target}getDepthNode(){if(this._depthNode===null){if(this._reflectorBaseNode.depth!==!0)throw new Error("THREE.ReflectorNode: Depth node can only be requested when the reflector is created with { depth: true }. ");this._depthNode=pe(new p3({defaultTexture:h1.depthTexture,reflector:this._reflectorBaseNode}))}return this._depthNode}setup(e){return e.object.isQuadMesh||this._reflectorBaseNode.build(e),super.setup(e)}clone(){const e=new this.constructor(this.reflectorNode);return e.uvNode=this.uvNode,e.levelNode=this.levelNode,e.biasNode=this.biasNode,e.sampler=this.sampler,e.depthNode=this.depthNode,e.compareNode=this.compareNode,e.gradNode=this.gradNode,e._reflectorBaseNode=this._reflectorBaseNode,e}dispose(){super.dispose(),this._reflectorBaseNode.dispose()}}class KI extends Ie{static get type(){return"ReflectorBaseNode"}constructor(e,t={}){super();const{target:n=new x1,resolutionScale:i=1,generateMipmaps:s=!1,bounces:o=!0,depth:u=!1,samples:h=0}=t;this.textureNode=e,this.target=n,this.resolutionScale=i,t.resolution!==void 0&&(ki('THREE.ReflectorNode: The "resolution" parameter has been renamed to "resolutionScale".'),this.resolutionScale=t.resolution),this.generateMipmaps=s,this.bounces=o,this.depth=u,this.samples=h,this.updateBeforeType=o?lt.RENDER:lt.FRAME,this.virtualCameras=new WeakMap,this.renderTargets=new Map,this.forceUpdate=!1,this.hasOutput=!1}_updateResolution(e,t){const n=this.resolutionScale;t.getDrawingBufferSize(T0),e.setSize(Math.round(T0.width*n),Math.round(T0.height*n))}setup(e){return this._updateResolution(h1,e.renderer),super.setup(e)}dispose(){super.dispose();for(const e of this.renderTargets.values())e.dispose()}getVirtualCamera(e){let t=this.virtualCameras.get(e);return t===void 0&&(t=e.clone(),this.virtualCameras.set(e,t)),t}getRenderTarget(e){let t=this.renderTargets.get(e);return t===void 0&&(t=new qo(0,0,{type:Rr,samples:this.samples}),this.generateMipmaps===!0&&(t.texture.minFilter=Rw,t.texture.generateMipmaps=!0),this.depth===!0&&(t.depthTexture=new Gi),this.renderTargets.set(e,t)),t}updateBefore(e){if(this.bounces===!1&&w0)return!1;w0=!0;const{scene:t,camera:n,renderer:i,material:s}=e,{target:o}=this,u=this.getVirtualCamera(n),h=this.getRenderTarget(u);i.getDrawingBufferSize(T0),this._updateResolution(h,i),tA.setFromMatrixPosition(o.matrixWorld),ph.setFromMatrixPosition(n.matrixWorld),ml.extractRotation(o.matrixWorld),Ko.set(0,0,1),Ko.applyMatrix4(ml),gl.subVectors(tA,ph);const d=gl.dot(Ko)>0;let m=!1;if(d===!0&&this.forceUpdate===!1){if(this.hasOutput===!1){w0=!1;return}m=!0}gl.reflect(Ko).negate(),gl.add(tA),ml.extractRotation(n.matrixWorld),x0.set(0,0,-1),x0.applyMatrix4(ml),x0.add(ph),b0.subVectors(tA,x0),b0.reflect(Ko).negate(),b0.add(tA),u.coordinateSystem=n.coordinateSystem,u.position.copy(gl),u.up.set(0,1,0),u.up.applyMatrix4(ml),u.up.reflect(Ko),u.lookAt(b0),u.near=n.near,u.far=n.far,u.updateMatrixWorld(),u.projectionMatrix.copy(n.projectionMatrix),eA.setFromNormalAndCoplanarPoint(Ko,tA),eA.applyMatrix4(u.matrixWorldInverse),Ji.set(eA.normal.x,eA.normal.y,eA.normal.z,eA.constant);const y=u.projectionMatrix;yl.x=(Math.sign(Ji.x)+y.elements[8])/y.elements[0],yl.y=(Math.sign(Ji.y)+y.elements[9])/y.elements[5],yl.z=-1,yl.w=(1+y.elements[10])/y.elements[14],Ji.multiplyScalar(1/Ji.dot(yl));const x=0;y.elements[2]=Ji.x,y.elements[6]=Ji.y,y.elements[10]=i.coordinateSystem===zA?Ji.z-x:Ji.z+1-x,y.elements[14]=Ji.w,this.textureNode.value=h.texture,this.depth===!0&&(this.textureNode.getDepthNode().value=h.depthTexture),s.visible=!1;const b=i.getRenderTarget(),T=i.getMRT(),M=i.autoClear;i.setMRT(null),i.setRenderTarget(h),i.autoClear=!0,m?(i.clear(),this.hasOutput=!1):(i.render(t,u),this.hasOutput=!0),i.setMRT(T),i.setRenderTarget(b),i.autoClear=M,s.visible=!0,w0=!1,this.forceUpdate=!1}get resolution(){return ki('THREE.ReflectorNode: The "resolution" property has been renamed to "resolutionScale".'),this.resolutionScale}set resolution(e){ki('THREE.ReflectorNode: The "resolution" property has been renamed to "resolutionScale".'),this.resolutionScale=e}}const ZI=r=>pe(new p3(r)),mh=new Ul(-1,1,1,-1,0,1);class JI extends bi{constructor(e=!1){super();const t=e===!1?[0,-1,0,1,2,1]:[0,2,0,0,2,0];this.setAttribute("position",new Bo([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new Bo(t,2))}}const eq=new JI;class Y1 extends Sn{constructor(e=null){super(eq,e),this.camera=mh,this.isQuadMesh=!0}async renderAsync(e){return e.renderAsync(this,mh)}render(e){e.render(this,mh)}}const tq=new Ot;class nq extends gs{static get type(){return"RTTNode"}constructor(e,t=null,n=null,i={type:Rr}){const s=new qo(t,n,i);super(s.texture,Xt()),this.isRTTNode=!0,this.node=e,this.width=t,this.height=n,this.pixelRatio=1,this.renderTarget=s,this.textureNeedsUpdate=!0,this.autoUpdate=!0,this._rttNode=null,this._quadMesh=new Y1(new Mn),this.updateBeforeType=lt.RENDER}get autoResize(){return this.width===null}setup(e){return this._rttNode=this.node.context(e.getSharedContext()),this._quadMesh.material.name="RTT",this._quadMesh.material.needsUpdate=!0,super.setup(e)}setSize(e,t){this.width=e,this.height=t;const n=e*this.pixelRatio,i=t*this.pixelRatio;this.renderTarget.setSize(n,i),this.textureNeedsUpdate=!0}setPixelRatio(e){this.pixelRatio=e,this.setSize(this.width,this.height)}updateBefore({renderer:e}){if(this.textureNeedsUpdate===!1&&this.autoUpdate===!1)return;if(this.textureNeedsUpdate=!1,this.autoResize===!0){const n=e.getPixelRatio(),i=e.getSize(tq),s=i.width*n,o=i.height*n;(s!==this.renderTarget.width||o!==this.renderTarget.height)&&(this.renderTarget.setSize(s,o),this.textureNeedsUpdate=!0)}this._quadMesh.material.fragmentNode=this._rttNode;const t=e.getRenderTarget();e.setRenderTarget(this.renderTarget),this._quadMesh.render(e),e.setRenderTarget(t)}clone(){const e=new gs(this.value,this.uvNode,this.levelNode);return e.sampler=this.sampler,e.referenceNode=this,e}}const Xv=(r,...e)=>pe(new nq(pe(r),...e)),rq=(r,...e)=>r.isSampleNode||r.isTextureNode?r:r.isPassNode?r.getTextureNode():Xv(r,...e),cA=re(([r,e,t],n)=>{let i;n.renderer.coordinateSystem===zA?(r=ve(r.x,r.y.oneMinus()).mul(2).sub(1),i=Ve(ne(r,e),1)):i=Ve(ne(r.x,r.y.oneMinus(),e).mul(2).sub(1),1);const s=Ve(t.mul(i));return s.xyz.div(s.w)}),iq=re(([r,e])=>{const t=e.mul(Ve(r,1)),n=t.xy.div(t.w).mul(.5).add(.5).toVar();return ve(n.x,n.y.oneMinus())}),sq=re(([r,e,t])=>{const n=Co(_n(e)),i=On(r.mul(n)).toVar(),s=_n(e,i).toVar(),o=_n(e,i.sub(On(2,0))).toVar(),u=_n(e,i.sub(On(1,0))).toVar(),h=_n(e,i.add(On(1,0))).toVar(),d=_n(e,i.add(On(2,0))).toVar(),m=_n(e,i.add(On(0,2))).toVar(),y=_n(e,i.add(On(0,1))).toVar(),x=_n(e,i.sub(On(0,1))).toVar(),b=_n(e,i.sub(On(0,2))).toVar(),T=nn(bt(V(2).mul(u).sub(o),s)).toVar(),M=nn(bt(V(2).mul(h).sub(d),s)).toVar(),N=nn(bt(V(2).mul(y).sub(m),s)).toVar(),C=nn(bt(V(2).mul(x).sub(b),s)).toVar(),B=cA(r,s,t).toVar(),P=T.lessThan(M).select(B.sub(cA(r.sub(ve(V(1).div(n.x),0)),u,t)),B.negate().add(cA(r.add(ve(V(1).div(n.x),0)),h,t))),I=N.lessThan(C).select(B.sub(cA(r.add(ve(0,V(1).div(n.y))),y,t)),B.negate().add(cA(r.sub(ve(0,V(1).div(n.y))),x,t)));return Xs(k1(P,I))});class oq extends Ie{static get type(){return"SampleNode"}constructor(e,t=null){super(),this.callback=e,this.uvNode=t,this.isSampleNode=!0}setup(){return this.sample(Xt())}sample(e){return this.callback(e)}}const aq=(r,e=null)=>pe(new oq(r,pe(e)));class Lo extends Ie{static get type(){return"EventNode"}constructor(e,t){super("void"),this.eventType=e,this.callback=t,e===Lo.OBJECT?this.updateType=lt.OBJECT:e===Lo.MATERIAL&&(this.updateType=lt.RENDER)}update(e){this.callback(e)}}Lo.OBJECT="object";Lo.MATERIAL="material";const Yv=(r,e)=>pe(new Lo(r,e)).toStack(),Aq=r=>Yv(Lo.OBJECT,r),lq=r=>Yv(Lo.MATERIAL,r);class cc extends So{constructor(e,t,n=Float32Array){const i=ArrayBuffer.isView(e)?e:new n(e*t);super(i,t),this.isStorageInstancedBufferAttribute=!0}}class uq extends Ui{constructor(e,t,n=Float32Array){const i=ArrayBuffer.isView(e)?e:new n(e*t);super(i,t),this.isStorageBufferAttribute=!0}}const cq=(r,e="float")=>{let t,n;e.isStruct===!0?(t=e.layout.getLength(),n=r1("float")):(t=l8(e),n=r1(e));const i=new uq(r,t,n);return _a(i,e,r)},hq=(r,e="float")=>{let t,n;e.isStruct===!0?(t=e.layout.getLength(),n=r1("float")):(t=l8(e),n=r1(e));const i=new cc(r,t,n);return _a(i,e,r)};class fq extends Ie{static get type(){return"PointUVNode"}constructor(){super("vec2"),this.isPointUVNode=!0}generate(){return"vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y )"}}const dq=Ce(fq),vl=new Jl,gh=new mn;class Dr extends Ie{static get type(){return"SceneNode"}constructor(e=Dr.BACKGROUND_BLURRINESS,t=null){super(),this.scope=e,this.scene=t}setup(e){const t=this.scope,n=this.scene!==null?this.scene:e.scene;let i;return t===Dr.BACKGROUND_BLURRINESS?i=Kt("backgroundBlurriness","float",n):t===Dr.BACKGROUND_INTENSITY?i=Kt("backgroundIntensity","float",n):t===Dr.BACKGROUND_ROTATION?i=Ge("mat4").setName("backgroundRotation").setGroup(ke).onRenderUpdate(()=>{const s=n.background;return s!==null&&s.isTexture&&s.mapping!==nw?(vl.copy(n.backgroundRotation),vl.x*=-1,vl.y*=-1,vl.z*=-1,gh.makeRotationFromEuler(vl)):gh.identity(),gh}):console.error("THREE.SceneNode: Unknown scope:",t),i}}Dr.BACKGROUND_BLURRINESS="backgroundBlurriness";Dr.BACKGROUND_INTENSITY="backgroundIntensity";Dr.BACKGROUND_ROTATION="backgroundRotation";const Kv=Ce(Dr,Dr.BACKGROUND_BLURRINESS),pd=Ce(Dr,Dr.BACKGROUND_INTENSITY),Zv=Ce(Dr,Dr.BACKGROUND_ROTATION);class pq extends gs{static get type(){return"StorageTextureNode"}constructor(e,t,n=null){super(e,t),this.storeNode=n,this.isStorageTextureNode=!0,this.access=Jn.WRITE_ONLY}getInputType(){return"storageTexture"}setup(e){super.setup(e);const t=e.getNodeProperties(this);return t.storeNode=this.storeNode,t}setAccess(e){return this.access=e,this}generate(e,t){let n;return this.storeNode!==null?n=this.generateStore(e):n=super.generate(e,t),n}toReadWrite(){return this.setAccess(Jn.READ_WRITE)}toReadOnly(){return this.setAccess(Jn.READ_ONLY)}toWriteOnly(){return this.setAccess(Jn.WRITE_ONLY)}generateStore(e){const t=e.getNodeProperties(this),{uvNode:n,storeNode:i,depthNode:s}=t,o=super.generate(e,"property"),u=n.build(e,this.value.is3DTexture===!0?"uvec3":"uvec2"),h=i.build(e,"vec4"),d=s?s.build(e,"int"):null,m=e.generateTextureStore(e,o,u,d,h);e.addLineFlowCode(m,this)}clone(){const e=super.clone();return e.storeNode=this.storeNode,e}}const Jv=Ke(pq).setParameterLength(1,3),mq=(r,e,t)=>{const n=Jv(r,e,t);return t!==null&&n.toStack(),n},gq=re(({texture:r,uv:e})=>{const n=ne().toVar();return Xe(e.x.lessThan(1e-4),()=>{n.assign(ne(1,0,0))}).ElseIf(e.y.lessThan(1e-4),()=>{n.assign(ne(0,1,0))}).ElseIf(e.z.lessThan(1e-4),()=>{n.assign(ne(0,0,1))}).ElseIf(e.x.greaterThan(1-1e-4),()=>{n.assign(ne(-1,0,0))}).ElseIf(e.y.greaterThan(1-1e-4),()=>{n.assign(ne(0,-1,0))}).ElseIf(e.z.greaterThan(1-1e-4),()=>{n.assign(ne(0,0,-1))}).Else(()=>{const s=r.sample(e.add(ne(-.01,0,0))).r.sub(r.sample(e.add(ne(.01,0,0))).r),o=r.sample(e.add(ne(0,-.01,0))).r.sub(r.sample(e.add(ne(0,.01,0))).r),u=r.sample(e.add(ne(0,0,-.01))).r.sub(r.sample(e.add(ne(0,0,.01))).r);n.assign(ne(s,o,u))}),n.normalize()});class yq extends gs{static get type(){return"Texture3DNode"}constructor(e,t=null,n=null){super(e,t,n),this.isTexture3DNode=!0}getInputType(){return"texture3D"}getDefaultUV(){return ne(.5,.5,.5)}setUpdateMatrix(){}setupUV(e,t){const n=this.value;return e.isFlipY()&&(n.isRenderTargetTexture===!0||n.isFramebufferTexture===!0)&&(this.sampler?t=t.flipY():t=t.setY(Q(Co(this,this.levelNode).y).sub(t.y).sub(1))),t}generateUV(e,t){return t.build(e,"vec3")}generateOffset(e,t){return t.build(e,"ivec3")}normal(e){return gq({texture:this,uv:e})}}const e_=Ke(yq).setParameterLength(1,3);class vq extends z1{static get type(){return"UserDataNode"}constructor(e,t,n=null){super(e,t,n),this.userData=n}updateReference(e){return this.reference=this.userData!==null?this.userData:e.object.userData,this.reference}}const _q=(r,e,t)=>pe(new vq(r,e,t)),X5=new WeakMap;class xq extends En{static get type(){return"VelocityNode"}constructor(){super("vec2"),this.projectionMatrix=null,this.updateType=lt.OBJECT,this.updateAfterType=lt.OBJECT,this.previousModelWorldMatrix=Ge(new mn),this.previousProjectionMatrix=Ge(new mn).setGroup(ke),this.previousCameraViewMatrix=Ge(new mn)}setProjectionMatrix(e){this.projectionMatrix=e}update({frameId:e,camera:t,object:n}){const i=Y5(n);this.previousModelWorldMatrix.value.copy(i);const s=t_(t);s.frameId!==e&&(s.frameId=e,s.previousProjectionMatrix===void 0?(s.previousProjectionMatrix=new mn,s.previousCameraViewMatrix=new mn,s.currentProjectionMatrix=new mn,s.currentCameraViewMatrix=new mn,s.previousProjectionMatrix.copy(this.projectionMatrix||t.projectionMatrix),s.previousCameraViewMatrix.copy(t.matrixWorldInverse)):(s.previousProjectionMatrix.copy(s.currentProjectionMatrix),s.previousCameraViewMatrix.copy(s.currentCameraViewMatrix)),s.currentProjectionMatrix.copy(this.projectionMatrix||t.projectionMatrix),s.currentCameraViewMatrix.copy(t.matrixWorldInverse),this.previousProjectionMatrix.value.copy(s.previousProjectionMatrix),this.previousCameraViewMatrix.value.copy(s.previousCameraViewMatrix))}updateAfter({object:e}){Y5(e).copy(e.matrixWorld)}setup(){const e=this.projectionMatrix===null?HA:Ge(this.projectionMatrix),t=this.previousCameraViewMatrix.mul(this.previousModelWorldMatrix),n=e.mul(Ca).mul(Tn),i=this.previousProjectionMatrix.mul(t).mul(u1),s=n.xy.div(n.w),o=i.xy.div(i.w);return bt(s,o)}}function t_(r){let e=X5.get(r);return e===void 0&&(e={},X5.set(r,e)),e}function Y5(r,e=0){const t=t_(r);let n=t[e];return n===void 0&&(t[e]=n=new mn,t[e].copy(r.matrixWorld)),n}const bq=Ce(xq),Tq=re(([r])=>m3(r.rgb)),wq=re(([r,e=V(1)])=>e.mix(m3(r.rgb),r.rgb)),Sq=re(([r,e=V(1)])=>{const t=Pn(r.r,r.g,r.b).div(3),n=r.r.max(r.g.max(r.b)),i=n.sub(t).mul(e).mul(-3);return Bt(r.rgb,n,i)}),Mq=re(([r,e=V(1)])=>{const t=ne(.57735,.57735,.57735),n=e.cos();return ne(r.rgb.mul(n).add(t.cross(r.rgb).mul(e.sin()).add(t.mul(Oo(t,r.rgb).mul(n.oneMinus())))))}),m3=(r,e=ne(bn.getLuminanceCoefficients(new Re)))=>Oo(r,e),Eq=re(([r,e=ne(1),t=ne(0),n=ne(1),i=V(1),s=ne(bn.getLuminanceCoefficients(new Re,Zg))])=>{const o=r.rgb.dot(ne(s)),u=yn(r.rgb.mul(e).add(t),0).toVar(),h=u.pow(n).toVar();return Xe(u.r.greaterThan(0),()=>{u.r.assign(h.r)}),Xe(u.g.greaterThan(0),()=>{u.g.assign(h.g)}),Xe(u.b.greaterThan(0),()=>{u.b.assign(h.b)}),u.assign(o.add(u.sub(o).mul(i))),Ve(u.rgb,r.a)});class Nq extends En{static get type(){return"PosterizeNode"}constructor(e,t){super(),this.sourceNode=e,this.stepsNode=t}setup(){const{sourceNode:e,stepsNode:t}=this;return e.mul(t).floor().div(t)}}const Rq=Ke(Nq).setParameterLength(2),S0=new Ot;class n_ extends gs{static get type(){return"PassTextureNode"}constructor(e,t){super(t),this.passNode=e,this.setUpdateMatrix(!1)}setup(e){return this.passNode.build(e),super.setup(e)}clone(){return new this.constructor(this.passNode,this.value)}}class K5 extends n_{static get type(){return"PassMultipleTextureNode"}constructor(e,t,n=!1){super(e,null),this.textureName=t,this.previousTexture=n}updateTexture(){this.value=this.previousTexture?this.passNode.getPreviousTexture(this.textureName):this.passNode.getTexture(this.textureName)}setup(e){return this.updateTexture(),super.setup(e)}clone(){const e=new this.constructor(this.passNode,this.textureName,this.previousTexture);return e.uvNode=this.uvNode,e.levelNode=this.levelNode,e.biasNode=this.biasNode,e.sampler=this.sampler,e.depthNode=this.depthNode,e.compareNode=this.compareNode,e.gradNode=this.gradNode,e}}class ys extends En{static get type(){return"PassNode"}constructor(e,t,n,i={}){super("vec4"),this.scope=e,this.scene=t,this.camera=n,this.options=i,this._pixelRatio=1,this._width=1,this._height=1;const s=new Gi;s.isRenderTargetTexture=!0,s.name="depth";const o=new qo(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:Rr,...i});o.texture.name="output",o.depthTexture=s,this.renderTarget=o,this._textures={output:o.texture,depth:s},this._textureNodes={},this._linearDepthNodes={},this._viewZNodes={},this._previousTextures={},this._previousTextureNodes={},this._cameraNear=Ge(0),this._cameraFar=Ge(0),this._mrt=null,this._layers=null,this._resolution=1,this._viewport=null,this._scissor=null,this.isPassNode=!0,this.updateBeforeType=lt.FRAME,this.global=!0}setResolution(e){return this._resolution=e,this}getResolution(){return this._resolution}setLayers(e){return this._layers=e,this}getLayers(){return this._layers}setMRT(e){return this._mrt=e,this}getMRT(){return this._mrt}getTexture(e){let t=this._textures[e];return t===void 0&&(t=this.renderTarget.texture.clone(),t.name=e,this._textures[e]=t,this.renderTarget.textures.push(t)),t}getPreviousTexture(e){let t=this._previousTextures[e];return t===void 0&&(t=this.getTexture(e).clone(),this._previousTextures[e]=t),t}toggleTexture(e){const t=this._previousTextures[e];if(t!==void 0){const n=this._textures[e],i=this.renderTarget.textures.indexOf(n);this.renderTarget.textures[i]=t,this._textures[e]=t,this._previousTextures[e]=n,this._textureNodes[e].updateTexture(),this._previousTextureNodes[e].updateTexture()}}getTextureNode(e="output"){let t=this._textureNodes[e];return t===void 0&&(t=pe(new K5(this,e)),t.updateTexture(),this._textureNodes[e]=t),t}getPreviousTextureNode(e="output"){let t=this._previousTextureNodes[e];return t===void 0&&(this._textureNodes[e]===void 0&&this.getTextureNode(e),t=pe(new K5(this,e,!0)),t.updateTexture(),this._previousTextureNodes[e]=t),t}getViewZNode(e="depth"){let t=this._viewZNodes[e];if(t===void 0){const n=this._cameraNear,i=this._cameraFar;this._viewZNodes[e]=t=r3(this.getTextureNode(e),n,i)}return t}getLinearDepthNode(e="depth"){let t=this._linearDepthNodes[e];if(t===void 0){const n=this._cameraNear,i=this._cameraFar,s=this.getViewZNode(e);this._linearDepthNodes[e]=t=NA(s,n,i)}return t}async compileAsync(e){const t=e.getRenderTarget(),n=e.getMRT();e.setRenderTarget(this.renderTarget),e.setMRT(this._mrt),await e.compileAsync(this.scene,this.camera),e.setRenderTarget(t),e.setMRT(n)}setup({renderer:e}){return this.renderTarget.samples=this.options.samples===void 0?e.samples:this.options.samples,this.renderTarget.texture.type=e.getColorBufferType(),this.scope===ys.COLOR?this.getTextureNode():this.getLinearDepthNode()}updateBefore(e){const{renderer:t}=e,{scene:n}=this;let i,s;const o=t.getOutputRenderTarget();o&&o.isXRRenderTarget===!0?(s=1,i=t.xr.getCamera(),t.xr.updateCamera(i),S0.set(o.width,o.height)):(i=this.camera,s=t.getPixelRatio(),t.getSize(S0)),this._pixelRatio=s,this.setSize(S0.width,S0.height);const u=t.getRenderTarget(),h=t.getMRT(),d=i.layers.mask;this._cameraNear.value=i.near,this._cameraFar.value=i.far,this._layers!==null&&(i.layers.mask=this._layers.mask);for(const m in this._previousTextures)this.toggleTexture(m);t.setRenderTarget(this.renderTarget),t.setMRT(this._mrt),t.render(n,i),t.setRenderTarget(u),t.setMRT(h),i.layers.mask=d}setSize(e,t){this._width=e,this._height=t;const n=this._width*this._pixelRatio*this._resolution,i=this._height*this._pixelRatio*this._resolution;this.renderTarget.setSize(n,i),this._scissor!==null&&this.renderTarget.scissor.copy(this._scissor),this._viewport!==null&&this.renderTarget.viewport.copy(this._viewport)}setScissor(e,t,n,i){e===null?this._scissor=null:(this._scissor===null&&(this._scissor=new Ut),e.isVector4?this._scissor.copy(e):this._scissor.set(e,t,n,i),this._scissor.multiplyScalar(this._pixelRatio*this._resolution).floor())}setViewport(e,t,n,i){e===null?this._viewport=null:(this._viewport===null&&(this._viewport=new Ut),e.isVector4?this._viewport.copy(e):this._viewport.set(e,t,n,i),this._viewport.multiplyScalar(this._pixelRatio*this._resolution).floor())}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget.dispose()}}ys.COLOR="color";ys.DEPTH="depth";const Cq=(r,e,t)=>pe(new ys(ys.COLOR,r,e,t)),Pq=(r,e)=>pe(new n_(r,e)),Bq=(r,e,t)=>pe(new ys(ys.DEPTH,r,e,t));class Dq extends ys{static get type(){return"ToonOutlinePassNode"}constructor(e,t,n,i,s){super(ys.COLOR,e,t),this.colorNode=n,this.thicknessNode=i,this.alphaNode=s,this._materialCache=new WeakMap}updateBefore(e){const{renderer:t}=e,n=t.getRenderObjectFunction();t.setRenderObjectFunction((i,s,o,u,h,d,m,y)=>{if((h.isMeshToonMaterial||h.isMeshToonNodeMaterial)&&h.wireframe===!1){const x=this._getOutlineMaterial(h);t.renderObject(i,s,o,u,x,d,m,y)}t.renderObject(i,s,o,u,h,d,m,y)}),super.updateBefore(e),t.setRenderObjectFunction(n)}_createMaterial(){const e=new Mn;e.isMeshToonOutlineMaterial=!0,e.name="Toon_Outline",e.side=Tr;const t=Ir.negate(),n=HA.mul(Ca),i=V(1),s=n.mul(Ve(Tn,1)),o=n.mul(Ve(Tn.add(t),1)),u=Xs(s.sub(o));return e.vertexNode=s.add(u.mul(this.thicknessNode).mul(s.w).mul(i)),e.colorNode=Ve(this.colorNode,this.alphaNode),e}_getOutlineMaterial(e){let t=this._materialCache.get(e);return t===void 0&&(t=this._createMaterial(),this._materialCache.set(e,t)),t}}const Fq=(r,e,t=new Un(0,0,0),n=.003,i=1)=>pe(new Dq(r,e,pe(t),pe(n),pe(i))),r_=re(([r,e])=>r.mul(e).clamp()).setLayout({name:"linearToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]}),i_=re(([r,e])=>(r=r.mul(e),r.div(r.add(1)).clamp())).setLayout({name:"reinhardToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]}),s_=re(([r,e])=>{r=r.mul(e),r=r.sub(.004).max(0);const t=r.mul(r.mul(6.2).add(.5)),n=r.mul(r.mul(6.2).add(1.7)).add(.06);return t.div(n).pow(2.2)}).setLayout({name:"cineonToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]}),Lq=re(([r])=>{const e=r.mul(r.add(.0245786)).sub(90537e-9),t=r.mul(r.add(.432951).mul(.983729)).add(.238081);return e.div(t)}),o_=re(([r,e])=>{const t=fr(.59719,.35458,.04823,.076,.90834,.01566,.0284,.13383,.83777),n=fr(1.60475,-.53108,-.07367,-.10208,1.10813,-.00605,-.00327,-.07276,1.07602);return r=r.mul(e).div(.6),r=t.mul(r),r=Lq(r),r=n.mul(r),r.clamp()}).setLayout({name:"acesFilmicToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]}),Iq=fr(ne(1.6605,-.1246,-.0182),ne(-.5876,1.1329,-.1006),ne(-.0728,-.0083,1.1187)),qq=fr(ne(.6274,.0691,.0164),ne(.3293,.9195,.088),ne(.0433,.0113,.8956)),Oq=re(([r])=>{const e=ne(r).toVar(),t=ne(e.mul(e)).toVar(),n=ne(t.mul(t)).toVar();return V(15.5).mul(n.mul(t)).sub(tt(40.14,n.mul(e))).add(tt(31.96,n).sub(tt(6.868,t.mul(e))).add(tt(.4298,t).add(tt(.1191,e).sub(.00232))))}),a_=re(([r,e])=>{const t=ne(r).toVar(),n=fr(ne(.856627153315983,.137318972929847,.11189821299995),ne(.0951212405381588,.761241990602591,.0767994186031903),ne(.0482516061458583,.101439036467562,.811302368396859)),i=fr(ne(1.1271005818144368,-.1413297634984383,-.14132976349843826),ne(-.11060664309660323,1.157823702216272,-.11060664309660294),ne(-.016493938717834573,-.016493938717834257,1.2519364065950405)),s=V(-12.47393),o=V(4.026069);return t.mulAssign(e),t.assign(qq.mul(t)),t.assign(n.mul(t)),t.assign(yn(t,1e-10)),t.assign(us(t)),t.assign(t.sub(s).div(o.sub(s))),t.assign(vi(t,0,1)),t.assign(Oq(t)),t.assign(i.mul(t)),t.assign(hi(yn(ne(0),t),ne(2.2))),t.assign(Iq.mul(t)),t.assign(vi(t,0,1)),t}).setLayout({name:"agxToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]}),A_=re(([r,e])=>{const t=V(.76),n=V(.15);r=r.mul(e);const i=Lr(r.r,Lr(r.g,r.b)),s=jn(i.lessThan(.08),i.sub(tt(6.25,i.mul(i))),.04);r.subAssign(s);const o=yn(r.r,yn(r.g,r.b));Xe(o.lessThan(t),()=>r);const u=bt(1,t),h=bt(1,u.mul(u).div(o.add(u.sub(t))));r.mulAssign(h.div(o));const d=bt(1,Zr(1,n.mul(o.sub(h)).add(1)));return Bt(r,ne(h),d)}).setLayout({name:"neutralToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]});class lr extends Ie{static get type(){return"CodeNode"}constructor(e="",t=[],n=""){super("code"),this.isCodeNode=!0,this.global=!0,this.code=e,this.includes=t,this.language=n}setIncludes(e){return this.includes=e,this}getIncludes(){return this.includes}generate(e){const t=this.getIncludes(e);for(const i of t)i.build(e);const n=e.getCodeFromNode(this,this.getNodeType(e));return n.code=this.code,n.code}serialize(e){super.serialize(e),e.code=this.code,e.language=this.language}deserialize(e){super.deserialize(e),this.code=e.code,this.language=e.language}}const K1=Ke(lr).setParameterLength(1,3),Uq=(r,e)=>K1(r,e,"js"),kq=(r,e)=>K1(r,e,"wgsl"),Gq=(r,e)=>K1(r,e,"glsl");class l_ extends lr{static get type(){return"FunctionNode"}constructor(e="",t=[],n=""){super(e,t,n)}getNodeType(e){return this.getNodeFunction(e).type}getMemberType(e,t){const n=this.getNodeType(e);return e.getStructTypeNode(n).getMemberType(e,t)}getInputs(e){return this.getNodeFunction(e).inputs}getNodeFunction(e){const t=e.getDataFromNode(this);let n=t.nodeFunction;return n===void 0&&(n=e.parser.parseFunction(this.code),t.nodeFunction=n),n}generate(e,t){super.generate(e);const n=this.getNodeFunction(e),i=n.name,s=n.type,o=e.getCodeFromNode(this,s);i!==""&&(o.name=i);const u=e.getPropertyName(o),h=this.getNodeFunction(e).getCode(u);return o.code=h+`
`,t==="property"?u:e.format(`${u}()`,s,t)}}const u_=(r,e=[],t="")=>{for(let s=0;s<e.length;s++){const o=e[s];typeof o=="function"&&(e[s]=o.functionNode)}const n=pe(new l_(r,e,t)),i=(...s)=>n.call(...s);return i.functionNode=n,i},Vq=(r,e)=>u_(r,e,"glsl"),zq=(r,e)=>u_(r,e,"wgsl");class $q extends Ie{static get type(){return"ScriptableValueNode"}constructor(e=null){super(),this._value=e,this._cache=null,this.inputType=null,this.outputType=null,this.events=new Rd,this.isScriptableValueNode=!0}get isScriptableOutputNode(){return this.outputType!==null}set value(e){this._value!==e&&(this._cache&&this.inputType==="URL"&&this.value.value instanceof ArrayBuffer&&(URL.revokeObjectURL(this._cache),this._cache=null),this._value=e,this.events.dispatchEvent({type:"change"}),this.refresh())}get value(){return this._value}refresh(){this.events.dispatchEvent({type:"refresh"})}getValue(){const e=this.value;if(e&&this._cache===null&&this.inputType==="URL"&&e.value instanceof ArrayBuffer)this._cache=URL.createObjectURL(new Blob([e.value]));else if(e&&e.value!==null&&e.value!==void 0&&((this.inputType==="URL"||this.inputType==="String")&&typeof e.value=="string"||this.inputType==="Number"&&typeof e.value=="number"||this.inputType==="Vector2"&&e.value.isVector2||this.inputType==="Vector3"&&e.value.isVector3||this.inputType==="Vector4"&&e.value.isVector4||this.inputType==="Color"&&e.value.isColor||this.inputType==="Matrix3"&&e.value.isMatrix3||this.inputType==="Matrix4"&&e.value.isMatrix4))return e.value;return this._cache||e}getNodeType(e){return this.value&&this.value.isNode?this.value.getNodeType(e):"float"}setup(){return this.value&&this.value.isNode?this.value:V()}serialize(e){super.serialize(e),this.value!==null?this.inputType==="ArrayBuffer"?e.value=c8(this.value):e.value=this.value?this.value.toJSON(e.meta).uuid:null:e.value=null,e.inputType=this.inputType,e.outputType=this.outputType}deserialize(e){super.deserialize(e);let t=null;e.value!==null&&(e.inputType==="ArrayBuffer"?t=h8(e.value):e.inputType==="Texture"?t=e.meta.textures[e.value]:t=e.meta.nodes[e.value]||null),this.value=t,this.inputType=e.inputType,this.outputType=e.outputType}}const hc=Ke($q).setParameterLength(1);class c_ extends Map{get(e,t=null,...n){if(this.has(e))return super.get(e);if(t!==null){const i=t(...n);return this.set(e,i),i}}}class Hq{constructor(e){this.scriptableNode=e}get parameters(){return this.scriptableNode.parameters}get layout(){return this.scriptableNode.getLayout()}getInputLayout(e){return this.scriptableNode.getInputLayout(e)}get(e){const t=this.parameters[e];return t?t.getValue():null}}const fc=new c_;class jq extends Ie{static get type(){return"ScriptableNode"}constructor(e=null,t={}){super(),this.codeNode=e,this.parameters=t,this._local=new c_,this._output=hc(null),this._outputs={},this._source=this.source,this._method=null,this._object=null,this._value=null,this._needsOutputUpdate=!0,this.onRefresh=this.onRefresh.bind(this),this.isScriptableNode=!0}get source(){return this.codeNode?this.codeNode.code:""}setLocal(e,t){return this._local.set(e,t)}getLocal(e){return this._local.get(e)}onRefresh(){this._refresh()}getInputLayout(e){for(const t of this.getLayout())if(t.inputType&&(t.id===e||t.name===e))return t}getOutputLayout(e){for(const t of this.getLayout())if(t.outputType&&(t.id===e||t.name===e))return t}setOutput(e,t){const n=this._outputs;return n[e]===void 0?n[e]=hc(t):n[e].value=t,this}getOutput(e){return this._outputs[e]}getParameter(e){return this.parameters[e]}setParameter(e,t){const n=this.parameters;return t&&t.isScriptableNode?(this.deleteParameter(e),n[e]=t,n[e].getDefaultOutput().events.addEventListener("refresh",this.onRefresh)):t&&t.isScriptableValueNode?(this.deleteParameter(e),n[e]=t,n[e].events.addEventListener("refresh",this.onRefresh)):n[e]===void 0?(n[e]=hc(t),n[e].events.addEventListener("refresh",this.onRefresh)):n[e].value=t,this}getValue(){return this.getDefaultOutput().getValue()}deleteParameter(e){let t=this.parameters[e];return t&&(t.isScriptableNode&&(t=t.getDefaultOutput()),t.events.removeEventListener("refresh",this.onRefresh)),this}clearParameters(){for(const e of Object.keys(this.parameters))this.deleteParameter(e);return this.needsUpdate=!0,this}call(e,...t){const i=this.getObject()[e];if(typeof i=="function")return i(...t)}async callAsync(e,...t){const i=this.getObject()[e];if(typeof i=="function")return i.constructor.name==="AsyncFunction"?await i(...t):i(...t)}getNodeType(e){return this.getDefaultOutputNode().getNodeType(e)}refresh(e=null){e!==null?this.getOutput(e).refresh():this._refresh()}getObject(){if(this.needsUpdate&&this.dispose(),this._object!==null)return this._object;const e=()=>this.refresh(),t=(d,m)=>this.setOutput(d,m),n=new Hq(this),i=fc.get("THREE"),s=fc.get("TSL"),o=this.getMethod(),u=[n,this._local,fc,e,t,i,s];this._object=o(...u);const h=this._object.layout;if(h&&(h.cache===!1&&this._local.clear(),this._output.outputType=h.outputType||null,Array.isArray(h.elements)))for(const d of h.elements){const m=d.id||d.name;d.inputType&&(this.getParameter(m)===void 0&&this.setParameter(m,null),this.getParameter(m).inputType=d.inputType),d.outputType&&(this.getOutput(m)===void 0&&this.setOutput(m,null),this.getOutput(m).outputType=d.outputType)}return this._object}deserialize(e){super.deserialize(e);for(const t in this.parameters){let n=this.parameters[t];n.isScriptableNode&&(n=n.getDefaultOutput()),n.events.addEventListener("refresh",this.onRefresh)}}getLayout(){return this.getObject().layout}getDefaultOutputNode(){const e=this.getDefaultOutput().value;return e&&e.isNode?e:V()}getDefaultOutput(){return this._exec()._output}getMethod(){if(this.needsUpdate&&this.dispose(),this._method!==null)return this._method;const e=["parameters","local","global","refresh","setOutput","THREE","TSL"],n=["layout","init","main","dispose"].join(", "),i="var "+n+`; var output = {};
`,s=`
return { ...output, `+n+" };",o=i+this.codeNode.code+s;return this._method=new Function(...e,o),this._method}dispose(){this._method!==null&&(this._object&&typeof this._object.dispose=="function"&&this._object.dispose(),this._method=null,this._object=null,this._source=null,this._value=null,this._needsOutputUpdate=!0,this._output.value=null,this._outputs={})}setup(){return this.getDefaultOutputNode()}getCacheKey(e){const t=[o8(this.source),this.getDefaultOutputNode().getCacheKey(e)];for(const n in this.parameters)t.push(this.parameters[n].getCacheKey(e));return M1(t)}set needsUpdate(e){e===!0&&this.dispose()}get needsUpdate(){return this.source!==this._source}_exec(){return this.codeNode===null?this:(this._needsOutputUpdate===!0&&(this._value=this.call("main"),this._needsOutputUpdate=!1),this._output.value=this._value,this)}_refresh(){this.needsUpdate=!0,this._exec(),this._output.refresh()}}const Wq=Ke(jq).setParameterLength(1,2);function h_(r){let e;const t=r.context.getViewZ;return t!==void 0&&(e=t(this)),(e||wn.z).negate()}const g3=re(([r,e],t)=>{const n=h_(t);return ms(r,e,n)}),y3=re(([r],e)=>{const t=h_(e);return r.mul(r,t,t).negate().exp().oneMinus()}),xu=re(([r,e])=>Ve(e.toFloat().mix(MA.rgb,r.toVec3()),MA.a));function Qq(r,e,t){return console.warn('THREE.TSL: "rangeFog( color, near, far )" is deprecated. Use "fog( color, rangeFogFactor( near, far ) )" instead.'),xu(r,g3(e,t))}function Xq(r,e){return console.warn('THREE.TSL: "densityFog( color, density )" is deprecated. Use "fog( color, densityFogFactor( density ) )" instead.'),xu(r,y3(e))}let Zo=null,Jo=null;class Yq extends Ie{static get type(){return"RangeNode"}constructor(e=V(),t=V()){super(),this.minNode=e,this.maxNode=t}getVectorLength(e){const t=e.getTypeLength(wo(this.minNode.value)),n=e.getTypeLength(wo(this.maxNode.value));return t>n?t:n}getNodeType(e){return e.object.count>1?e.getTypeFromLength(this.getVectorLength(e)):"float"}setup(e){const t=e.object;let n=null;if(t.count>1){const i=this.minNode.value,s=this.maxNode.value,o=e.getTypeLength(wo(i)),u=e.getTypeLength(wo(s));Zo=Zo||new Ut,Jo=Jo||new Ut,Zo.setScalar(0),Jo.setScalar(0),o===1?Zo.setScalar(i):i.isColor?Zo.set(i.r,i.g,i.b,1):Zo.set(i.x,i.y,i.z||0,i.w||0),u===1?Jo.setScalar(s):s.isColor?Jo.set(s.r,s.g,s.b,1):Jo.set(s.x,s.y,s.z||0,s.w||0);const h=4,d=h*t.count,m=new Float32Array(d);for(let x=0;x<d;x++){const b=x%h,T=Zo.getComponent(b),M=Jo.getComponent(b);m[x]=kd.lerp(T,M,Math.random())}const y=this.getNodeType(e);if(t.count<=4096)n=Pu(m,"vec4",t.count).element(Po).convert(y);else{const x=new So(m,4);e.geometry.setAttribute("__range"+this.id,x),n=l1(x).convert(y)}}else n=V(0);return n}}const Kq=Ke(Yq).setParameterLength(2);class Zq extends Ie{static get type(){return"ComputeBuiltinNode"}constructor(e,t){super(t),this._builtinName=e}getHash(e){return this.getBuiltinName(e)}getNodeType(){return this.nodeType}setBuiltinName(e){return this._builtinName=e,this}getBuiltinName(){return this._builtinName}hasBuiltin(e){return e.hasBuiltin(this._builtinName)}generate(e,t){const n=this.getBuiltinName(e),i=this.getNodeType(e);return e.shaderStage==="compute"?e.format(n,i,t):(console.warn(`ComputeBuiltinNode: Compute built-in value ${n} can not be accessed in the ${e.shaderStage} stage`),e.generateConst(i))}serialize(e){super.serialize(e),e.global=this.global,e._builtinName=this._builtinName}deserialize(e){super.deserialize(e),this.global=e.global,this._builtinName=e._builtinName}}const qu=(r,e)=>pe(new Zq(r,e)),Jq=qu("numWorkgroups","uvec3"),eO=qu("workgroupId","uvec3"),tO=qu("globalId","uvec3"),nO=qu("localId","uvec3"),rO=qu("subgroupSize","uint");class iO extends Ie{constructor(e){super(),this.scope=e}generate(e){const{scope:t}=this,{renderer:n}=e;n.backend.isWebGLBackend===!0?e.addFlowCode(`	// ${t}Barrier 
`):e.addLineFlowCode(`${t}Barrier()`,this)}}const v3=Ke(iO),sO=()=>v3("workgroup").toStack(),oO=()=>v3("storage").toStack(),aO=()=>v3("texture").toStack();class AO extends Ra{constructor(e,t){super(e,t),this.isWorkgroupInfoElementNode=!0}generate(e,t){let n;const i=e.context.assign;if(n=super.generate(e),i!==!0){const s=this.getNodeType(e);n=e.format(n,s,t)}return n}}class lO extends Ie{constructor(e,t,n=0){super(t),this.bufferType=t,this.bufferCount=n,this.isWorkgroupInfoNode=!0,this.elementType=t,this.scope=e,this.name=""}setName(e){return this.name=e,this}label(e){return console.warn('THREE.TSL: "label()" has been deprecated. Use "setName()" instead.'),this.setName(e)}setScope(e){return this.scope=e,this}getElementType(){return this.elementType}getInputType(){return`${this.scope}Array`}element(e){return pe(new AO(this,e))}generate(e){const t=this.name!==""?this.name:`${this.scope}Array_${this.id}`;return e.getScopedArray(t,this.scope.toLowerCase(),this.bufferType,this.bufferCount)}}const uO=(r,e)=>pe(new lO("Workgroup",r,e));class kn extends Ie{static get type(){return"AtomicFunctionNode"}constructor(e,t,n){super("uint"),this.method=e,this.pointerNode=t,this.valueNode=n,this.parents=!0}getInputType(e){return this.pointerNode.getNodeType(e)}getNodeType(e){return this.getInputType(e)}generate(e){const t=e.getNodeProperties(this),n=t.parents,i=this.method,s=this.getNodeType(e),o=this.getInputType(e),u=this.pointerNode,h=this.valueNode,d=[];d.push(`&${u.build(e,o)}`),h!==null&&d.push(h.build(e,o));const m=`${e.getMethod(i,s)}( ${d.join(", ")} )`;if(n?n.length===1&&n[0].isStackNode===!0:!1)e.addLineFlowCode(m,this);else return t.constNode===void 0&&(t.constNode=Ys(m,s).toConst()),t.constNode.build(e)}}kn.ATOMIC_LOAD="atomicLoad";kn.ATOMIC_STORE="atomicStore";kn.ATOMIC_ADD="atomicAdd";kn.ATOMIC_SUB="atomicSub";kn.ATOMIC_MAX="atomicMax";kn.ATOMIC_MIN="atomicMin";kn.ATOMIC_AND="atomicAnd";kn.ATOMIC_OR="atomicOr";kn.ATOMIC_XOR="atomicXor";const cO=Ke(kn),ws=(r,e,t)=>cO(r,e,t).toStack(),hO=r=>ws(kn.ATOMIC_LOAD,r,null),fO=(r,e)=>ws(kn.ATOMIC_STORE,r,e),dO=(r,e)=>ws(kn.ATOMIC_ADD,r,e),pO=(r,e)=>ws(kn.ATOMIC_SUB,r,e),mO=(r,e)=>ws(kn.ATOMIC_MAX,r,e),gO=(r,e)=>ws(kn.ATOMIC_MIN,r,e),yO=(r,e)=>ws(kn.ATOMIC_AND,r,e),vO=(r,e)=>ws(kn.ATOMIC_OR,r,e),_O=(r,e)=>ws(kn.ATOMIC_XOR,r,e);class Be extends En{static get type(){return"SubgroupFunctionNode"}constructor(e,t=null,n=null){super(),this.method=e,this.aNode=t,this.bNode=n}getInputType(e){const t=this.aNode?this.aNode.getNodeType(e):null,n=this.bNode?this.bNode.getNodeType(e):null,i=e.isMatrix(t)?0:e.getTypeLength(t),s=e.isMatrix(n)?0:e.getTypeLength(n);return i>s?t:n}getNodeType(e){const t=this.method;return t===Be.SUBGROUP_ELECT?"bool":t===Be.SUBGROUP_BALLOT?"uvec4":this.getInputType(e)}generate(e,t){const n=this.method,i=this.getNodeType(e),s=this.getInputType(e),o=this.aNode,u=this.bNode,h=[];if(n===Be.SUBGROUP_BROADCAST||n===Be.SUBGROUP_SHUFFLE||n===Be.QUAD_BROADCAST){const m=u.getNodeType(e);h.push(o.build(e,i),u.build(e,m==="float"?"int":i))}else n===Be.SUBGROUP_SHUFFLE_XOR||n===Be.SUBGROUP_SHUFFLE_DOWN||n===Be.SUBGROUP_SHUFFLE_UP?h.push(o.build(e,i),u.build(e,"uint")):(o!==null&&h.push(o.build(e,s)),u!==null&&h.push(u.build(e,s)));const d=h.length===0?"()":`( ${h.join(", ")} )`;return e.format(`${e.getMethod(n,i)}${d}`,i,t)}serialize(e){super.serialize(e),e.method=this.method}deserialize(e){super.deserialize(e),this.method=e.method}}Be.SUBGROUP_ELECT="subgroupElect";Be.SUBGROUP_BALLOT="subgroupBallot";Be.SUBGROUP_ADD="subgroupAdd";Be.SUBGROUP_INCLUSIVE_ADD="subgroupInclusiveAdd";Be.SUBGROUP_EXCLUSIVE_AND="subgroupExclusiveAdd";Be.SUBGROUP_MUL="subgroupMul";Be.SUBGROUP_INCLUSIVE_MUL="subgroupInclusiveMul";Be.SUBGROUP_EXCLUSIVE_MUL="subgroupExclusiveMul";Be.SUBGROUP_AND="subgroupAnd";Be.SUBGROUP_OR="subgroupOr";Be.SUBGROUP_XOR="subgroupXor";Be.SUBGROUP_MIN="subgroupMin";Be.SUBGROUP_MAX="subgroupMax";Be.SUBGROUP_ALL="subgroupAll";Be.SUBGROUP_ANY="subgroupAny";Be.SUBGROUP_BROADCAST_FIRST="subgroupBroadcastFirst";Be.QUAD_SWAP_X="quadSwapX";Be.QUAD_SWAP_Y="quadSwapY";Be.QUAD_SWAP_DIAGONAL="quadSwapDiagonal";Be.SUBGROUP_BROADCAST="subgroupBroadcast";Be.SUBGROUP_SHUFFLE="subgroupShuffle";Be.SUBGROUP_SHUFFLE_XOR="subgroupShuffleXor";Be.SUBGROUP_SHUFFLE_UP="subgroupShuffleUp";Be.SUBGROUP_SHUFFLE_DOWN="subgroupShuffleDown";Be.QUAD_BROADCAST="quadBroadcast";const xO=Ee(Be,Be.SUBGROUP_ELECT).setParameterLength(0),bO=Ee(Be,Be.SUBGROUP_BALLOT).setParameterLength(1),TO=Ee(Be,Be.SUBGROUP_ADD).setParameterLength(1),wO=Ee(Be,Be.SUBGROUP_INCLUSIVE_ADD).setParameterLength(1),SO=Ee(Be,Be.SUBGROUP_EXCLUSIVE_AND).setParameterLength(1),MO=Ee(Be,Be.SUBGROUP_MUL).setParameterLength(1),EO=Ee(Be,Be.SUBGROUP_INCLUSIVE_MUL).setParameterLength(1),NO=Ee(Be,Be.SUBGROUP_EXCLUSIVE_MUL).setParameterLength(1),RO=Ee(Be,Be.SUBGROUP_AND).setParameterLength(1),CO=Ee(Be,Be.SUBGROUP_OR).setParameterLength(1),PO=Ee(Be,Be.SUBGROUP_XOR).setParameterLength(1),BO=Ee(Be,Be.SUBGROUP_MIN).setParameterLength(1),DO=Ee(Be,Be.SUBGROUP_MAX).setParameterLength(1),FO=Ee(Be,Be.SUBGROUP_ALL).setParameterLength(0),LO=Ee(Be,Be.SUBGROUP_ANY).setParameterLength(0),IO=Ee(Be,Be.SUBGROUP_BROADCAST_FIRST).setParameterLength(2),qO=Ee(Be,Be.QUAD_SWAP_X).setParameterLength(1),OO=Ee(Be,Be.QUAD_SWAP_Y).setParameterLength(1),UO=Ee(Be,Be.QUAD_SWAP_DIAGONAL).setParameterLength(1),kO=Ee(Be,Be.SUBGROUP_BROADCAST).setParameterLength(2),GO=Ee(Be,Be.SUBGROUP_SHUFFLE).setParameterLength(2),VO=Ee(Be,Be.SUBGROUP_SHUFFLE_XOR).setParameterLength(2),zO=Ee(Be,Be.SUBGROUP_SHUFFLE_UP).setParameterLength(2),$O=Ee(Be,Be.SUBGROUP_SHUFFLE_DOWN).setParameterLength(2),HO=Ee(Be,Be.QUAD_BROADCAST).setParameterLength(1);let M0;function Z1(r){M0=M0||new WeakMap;let e=M0.get(r);return e===void 0&&M0.set(r,e={}),e}function J1(r){const e=Z1(r);return e.shadowMatrix||(e.shadowMatrix=Ge("mat4").setGroup(ke).onRenderUpdate(t=>((r.castShadow!==!0||t.renderer.shadowMap.enabled===!1)&&r.shadow.updateMatrices(r),r.shadow.matrix)))}function f_(r,e=fs){const t=J1(r).mul(e);return t.xyz.div(t.w)}function _3(r){const e=Z1(r);return e.position||(e.position=Ge(new Re).setGroup(ke).onRenderUpdate((t,n)=>n.value.setFromMatrixPosition(r.matrixWorld)))}function d_(r){const e=Z1(r);return e.targetPosition||(e.targetPosition=Ge(new Re).setGroup(ke).onRenderUpdate((t,n)=>n.value.setFromMatrixPosition(r.target.matrixWorld)))}function x3(r){const e=Z1(r);return e.viewPosition||(e.viewPosition=Ge(new Re).setGroup(ke).onRenderUpdate(({camera:t},n)=>{n.value=n.value||new Re,n.value.setFromMatrixPosition(r.matrixWorld),n.value.applyMatrix4(t.matrixWorldInverse)}))}const b3=r=>wi.transformDirection(_3(r).sub(d_(r))),jO=r=>r.sort((e,t)=>e.id-t.id),WO=(r,e)=>{for(const t of e)if(t.isAnalyticLightNode&&t.light.id===r)return t;return null},yh=new WeakMap,_l=[];class T3 extends Ie{static get type(){return"LightsNode"}constructor(){super("vec3"),this.totalDiffuseNode=Gs("vec3","totalDiffuse"),this.totalSpecularNode=Gs("vec3","totalSpecular"),this.outgoingLightNode=Gs("vec3","outgoingLight"),this._lights=[],this._lightNodes=null,this._lightNodesHash=null,this.global=!0}customCacheKey(){const e=this._lights;for(let n=0;n<e.length;n++){const i=e[n];if(_l.push(i.id),_l.push(i.castShadow?1:0),i.isSpotLight===!0){const s=i.map!==null?i.map.id:-1,o=i.colorNode?i.colorNode.getCacheKey():-1;_l.push(s,o)}}const t=M1(_l);return _l.length=0,t}getHash(e){if(this._lightNodesHash===null){this._lightNodes===null&&this.setupLightsNode(e);const t=[];for(const n of this._lightNodes)t.push(n.getHash());this._lightNodesHash="lights-"+t.join(",")}return this._lightNodesHash}analyze(e){const t=e.getNodeProperties(this);for(const n of t.nodes)n.build(e);t.outputNode.build(e)}setupLightsNode(e){const t=[],n=this._lightNodes,i=jO(this._lights),s=e.renderer.library;for(const o of i)if(o.isNode)t.push(pe(o));else{let u=null;if(n!==null&&(u=WO(o.id,n)),u===null){const h=s.getLightNodeClass(o.constructor);if(h===null){console.warn(`LightsNode.setupNodeLights: Light node not found for ${o.constructor.name}`);continue}let d=null;yh.has(o)?d=yh.get(o):(d=pe(new h(o)),yh.set(o,d)),t.push(d)}}this._lightNodes=t}setupDirectLight(e,t,n){const{lightingModel:i,reflectedLight:s}=e.context;i.direct({...n,lightNode:t,reflectedLight:s},e)}setupDirectRectAreaLight(e,t,n){const{lightingModel:i,reflectedLight:s}=e.context;i.directRectArea({...n,lightNode:t,reflectedLight:s},e)}setupLights(e,t){for(const n of t)n.build(e)}getLightNodes(e){return this._lightNodes===null&&this.setupLightsNode(e),this._lightNodes}setup(e){const t=e.lightsNode;e.lightsNode=this;let n=this.outgoingLightNode;const i=e.context,s=i.lightingModel,o=e.getNodeProperties(this);if(s){const{totalDiffuseNode:u,totalSpecularNode:h}=this;i.outgoingLight=n;const d=e.addStack();o.nodes=d.nodes,s.start(e);const{backdrop:m,backdropAlpha:y}=i,{directDiffuse:x,directSpecular:b,indirectDiffuse:T,indirectSpecular:M}=i.reflectedLight;let N=x.add(T);m!==null&&(y!==null?N=ne(y.mix(N,m)):N=ne(m),i.material.transparent=!0),u.assign(N),h.assign(b.add(M)),n.assign(u.add(h)),s.finish(e),n=n.bypass(e.removeStack())}else o.nodes=[];return e.lightsNode=t,n}setLights(e){return this._lights=e,this._lightNodes=null,this._lightNodesHash=null,this}getLights(){return this._lights}get hasLights(){return this._lights.length>0}}const QO=(r=[])=>pe(new T3).setLights(r);class XO extends Ie{static get type(){return"ShadowBaseNode"}constructor(e){super(),this.light=e,this.updateBeforeType=lt.RENDER,this.isShadowBaseNode=!0}setupShadowPosition({context:e,material:t}){w3.assign(t.receivedShadowPositionNode||e.shadowPositionWorld||fs)}}const w3=Gs("vec3","shadowPositionWorld");function YO(r,e={}){return e.toneMapping=r.toneMapping,e.toneMappingExposure=r.toneMappingExposure,e.outputColorSpace=r.outputColorSpace,e.renderTarget=r.getRenderTarget(),e.activeCubeFace=r.getActiveCubeFace(),e.activeMipmapLevel=r.getActiveMipmapLevel(),e.renderObjectFunction=r.getRenderObjectFunction(),e.pixelRatio=r.getPixelRatio(),e.mrt=r.getMRT(),e.clearColor=r.getClearColor(e.clearColor||new Un),e.clearAlpha=r.getClearAlpha(),e.autoClear=r.autoClear,e.scissorTest=r.getScissorTest(),e}function KO(r,e){return e=YO(r,e),r.setMRT(null),r.setRenderObjectFunction(null),r.setClearColor(0,1),r.autoClear=!0,e}function ZO(r,e){r.toneMapping=e.toneMapping,r.toneMappingExposure=e.toneMappingExposure,r.outputColorSpace=e.outputColorSpace,r.setRenderTarget(e.renderTarget,e.activeCubeFace,e.activeMipmapLevel),r.setRenderObjectFunction(e.renderObjectFunction),r.setPixelRatio(e.pixelRatio),r.setMRT(e.mrt),r.setClearColor(e.clearColor,e.clearAlpha),r.autoClear=e.autoClear,r.setScissorTest(e.scissorTest)}function JO(r,e={}){return e.background=r.background,e.backgroundNode=r.backgroundNode,e.overrideMaterial=r.overrideMaterial,e}function eU(r,e){return e=JO(r,e),r.background=null,r.backgroundNode=null,r.overrideMaterial=null,e}function tU(r,e){r.background=e.background,r.backgroundNode=e.backgroundNode,r.overrideMaterial=e.overrideMaterial}function nU(r,e,t){return t=KO(r,t),t=eU(e,t),t}function rU(r,e,t){ZO(r,t),tU(e,t)}const Z5=new WeakMap,p_=re(({depthTexture:r,shadowCoord:e,depthLayer:t})=>{let n=xt(r,e.xy).setName("t_basic");return r.isArrayTexture&&(n=n.depth(t)),n.compare(e.z)}),m_=re(({depthTexture:r,shadowCoord:e,shadow:t,depthLayer:n})=>{const i=(N,C)=>{let B=xt(r,N);return r.isArrayTexture&&(B=B.depth(n)),B.compare(C)},s=Kt("mapSize","vec2",t).setGroup(ke),o=Kt("radius","float",t).setGroup(ke),u=ve(1).div(s),h=u.x.negate().mul(o),d=u.y.negate().mul(o),m=u.x.mul(o),y=u.y.mul(o),x=h.div(2),b=d.div(2),T=m.div(2),M=y.div(2);return Pn(i(e.xy.add(ve(h,d)),e.z),i(e.xy.add(ve(0,d)),e.z),i(e.xy.add(ve(m,d)),e.z),i(e.xy.add(ve(x,b)),e.z),i(e.xy.add(ve(0,b)),e.z),i(e.xy.add(ve(T,b)),e.z),i(e.xy.add(ve(h,0)),e.z),i(e.xy.add(ve(x,0)),e.z),i(e.xy,e.z),i(e.xy.add(ve(T,0)),e.z),i(e.xy.add(ve(m,0)),e.z),i(e.xy.add(ve(x,M)),e.z),i(e.xy.add(ve(0,M)),e.z),i(e.xy.add(ve(T,M)),e.z),i(e.xy.add(ve(h,y)),e.z),i(e.xy.add(ve(0,y)),e.z),i(e.xy.add(ve(m,y)),e.z)).mul(1/17)}),g_=re(({depthTexture:r,shadowCoord:e,shadow:t,depthLayer:n})=>{const i=(y,x)=>{let b=xt(r,y);return r.isArrayTexture&&(b=b.depth(n)),b.compare(x)},s=Kt("mapSize","vec2",t).setGroup(ke),o=ve(1).div(s),u=o.x,h=o.y,d=e.xy,m=Js(d.mul(s).add(.5));return d.subAssign(m.mul(o)),Pn(i(d,e.z),i(d.add(ve(u,0)),e.z),i(d.add(ve(0,h)),e.z),i(d.add(o),e.z),Bt(i(d.add(ve(u.negate(),0)),e.z),i(d.add(ve(u.mul(2),0)),e.z),m.x),Bt(i(d.add(ve(u.negate(),h)),e.z),i(d.add(ve(u.mul(2),h)),e.z),m.x),Bt(i(d.add(ve(0,h.negate())),e.z),i(d.add(ve(0,h.mul(2))),e.z),m.y),Bt(i(d.add(ve(u,h.negate())),e.z),i(d.add(ve(u,h.mul(2))),e.z),m.y),Bt(Bt(i(d.add(ve(u.negate(),h.negate())),e.z),i(d.add(ve(u.mul(2),h.negate())),e.z),m.x),Bt(i(d.add(ve(u.negate(),h.mul(2))),e.z),i(d.add(ve(u.mul(2),h.mul(2))),e.z),m.x),m.y)).mul(1/9)}),y_=re(({depthTexture:r,shadowCoord:e,depthLayer:t})=>{const n=V(1).toVar();let i=xt(r).sample(e.xy);r.isArrayTexture&&(i=i.depth(t)),i=i.rg;const s=U1(e.z,i.x);return Xe(s.notEqual(V(1)),()=>{const o=e.z.sub(i.x),u=yn(0,i.y.mul(i.y));let h=u.div(u.add(o.mul(o)));h=vi(bt(h,.3).div(.95-.3)),n.assign(vi(yn(s,h)))}),n}),iU=re(([r,e,t])=>{let n=fs.sub(r).length();return n=n.sub(e).div(t.sub(e)),n=n.saturate(),n}),sU=r=>{const e=r.shadow.camera,t=Kt("near","float",e).setGroup(ke),n=Kt("far","float",e).setGroup(ke),i=ey(r);return iU(i,t,n)},v_=r=>{let e=Z5.get(r);if(e===void 0){const t=r.isPointLight?sU(r):null;e=new Mn,e.colorNode=Ve(0,0,0,1),e.depthNode=t,e.isShadowPassMaterial=!0,e.name="ShadowMaterial",e.fog=!1,Z5.set(r,e)}return e},J5=new zi,nA=[],__=(r,e,t,n)=>{nA[0]=r,nA[1]=e;let i=J5.get(nA);return(i===void 0||i.shadowType!==t||i.useVelocity!==n)&&(i=(s,o,u,h,d,m,...y)=>{(s.castShadow===!0||s.receiveShadow&&t===H0)&&(n&&(u8(s).useVelocity=!0),s.onBeforeShadow(r,s,u,e.camera,h,o.overrideMaterial,m),r.renderObject(s,o,u,h,d,m,...y),s.onAfterShadow(r,s,u,e.camera,h,o.overrideMaterial,m))},i.shadowType=t,i.useVelocity=n,J5.set(nA,i)),nA[0]=null,nA[1]=null,i},oU=re(({samples:r,radius:e,size:t,shadowPass:n,depthLayer:i})=>{const s=V(0).toVar("meanVertical"),o=V(0).toVar("squareMeanVertical"),u=r.lessThanEqual(V(1)).select(V(0),V(2).div(r.sub(1))),h=r.lessThanEqual(V(1)).select(V(0),V(-1));Ht({start:Q(0),end:Q(r),type:"int",condition:"<"},({i:m})=>{const y=h.add(V(m).mul(u));let x=n.sample(Pn(Bu.xy,ve(0,y).mul(e)).div(t));n.value.isArrayTexture&&(x=x.depth(i)),x=x.x,s.addAssign(x),o.addAssign(x.mul(x))}),s.divAssign(r),o.divAssign(r);const d=bs(o.sub(s.mul(s)));return ve(s,d)}),aU=re(({samples:r,radius:e,size:t,shadowPass:n,depthLayer:i})=>{const s=V(0).toVar("meanHorizontal"),o=V(0).toVar("squareMeanHorizontal"),u=r.lessThanEqual(V(1)).select(V(0),V(2).div(r.sub(1))),h=r.lessThanEqual(V(1)).select(V(0),V(-1));Ht({start:Q(0),end:Q(r),type:"int",condition:"<"},({i:m})=>{const y=h.add(V(m).mul(u));let x=n.sample(Pn(Bu.xy,ve(y,0).mul(e)).div(t));n.value.isArrayTexture&&(x=x.depth(i)),s.addAssign(x.x),o.addAssign(Pn(x.y.mul(x.y),x.x.mul(x.x)))}),s.divAssign(r),o.divAssign(r);const d=bs(o.sub(s.mul(s)));return ve(s,d)}),AU=[p_,m_,g_,y_];let vh;const E0=new Y1;class x_ extends XO{static get type(){return"ShadowNode"}constructor(e,t=null){super(e),this.shadow=t||e.shadow,this.shadowMap=null,this.vsmShadowMapVertical=null,this.vsmShadowMapHorizontal=null,this.vsmMaterialVertical=null,this.vsmMaterialHorizontal=null,this._node=null,this._cameraFrameId=new WeakMap,this.isShadowNode=!0,this.depthLayer=0}setupShadowFilter(e,{filterFn:t,depthTexture:n,shadowCoord:i,shadow:s,depthLayer:o}){const u=i.x.greaterThanEqual(0).and(i.x.lessThanEqual(1)).and(i.y.greaterThanEqual(0)).and(i.y.lessThanEqual(1)).and(i.z.lessThanEqual(1)),h=t({depthTexture:n,shadowCoord:i,shadow:s,depthLayer:o});return u.select(h,V(1))}setupShadowCoord(e,t){const{shadow:n}=this,{renderer:i}=e,s=Kt("bias","float",n).setGroup(ke);let o=t,u;if(n.camera.isOrthographicCamera||i.logarithmicDepthBuffer!==!0)o=o.xyz.div(o.w),u=o.z,i.coordinateSystem===zA&&(u=u.mul(2).sub(1));else{const h=o.w;o=o.xy.div(h);const d=Kt("near","float",n.camera).setGroup(ke),m=Kt("far","float",n.camera).setGroup(ke);u=i3(h.negate(),d,m)}return o=ne(o.x,o.y.oneMinus(),u.add(s)),o}getShadowFilterFn(e){return AU[e]}setupRenderTarget(e,t){const n=new Gi(e.mapSize.width,e.mapSize.height);n.name="ShadowDepthTexture",n.compareFunction=Fd;const i=t.createRenderTarget(e.mapSize.width,e.mapSize.height);return i.texture.name="ShadowMap",i.texture.type=e.mapType,i.depthTexture=n,{shadowMap:i,depthTexture:n}}setupShadow(e){const{renderer:t}=e,{light:n,shadow:i}=this,s=t.shadowMap.type,{depthTexture:o,shadowMap:u}=this.setupRenderTarget(i,e);if(i.camera.updateProjectionMatrix(),s===H0&&i.isPointLightShadow!==!0){o.compareFunction=null,u.depth>1?(u._vsmShadowMapVertical||(u._vsmShadowMapVertical=e.createRenderTarget(i.mapSize.width,i.mapSize.height,{format:la,type:Rr,depth:u.depth,depthBuffer:!1}),u._vsmShadowMapVertical.texture.name="VSMVertical"),this.vsmShadowMapVertical=u._vsmShadowMapVertical,u._vsmShadowMapHorizontal||(u._vsmShadowMapHorizontal=e.createRenderTarget(i.mapSize.width,i.mapSize.height,{format:la,type:Rr,depth:u.depth,depthBuffer:!1}),u._vsmShadowMapHorizontal.texture.name="VSMHorizontal"),this.vsmShadowMapHorizontal=u._vsmShadowMapHorizontal):(this.vsmShadowMapVertical=e.createRenderTarget(i.mapSize.width,i.mapSize.height,{format:la,type:Rr,depthBuffer:!1}),this.vsmShadowMapHorizontal=e.createRenderTarget(i.mapSize.width,i.mapSize.height,{format:la,type:Rr,depthBuffer:!1}));let C=xt(o);o.isArrayTexture&&(C=C.depth(this.depthLayer));let B=xt(this.vsmShadowMapVertical.texture);o.isArrayTexture&&(B=B.depth(this.depthLayer));const P=Kt("blurSamples","float",i).setGroup(ke),I=Kt("radius","float",i).setGroup(ke),D=Kt("mapSize","vec2",i).setGroup(ke);let q=this.vsmMaterialVertical||(this.vsmMaterialVertical=new Mn);q.fragmentNode=oU({samples:P,radius:I,size:D,shadowPass:C,depthLayer:this.depthLayer}).context(e.getSharedContext()),q.name="VSMVertical",q=this.vsmMaterialHorizontal||(this.vsmMaterialHorizontal=new Mn),q.fragmentNode=aU({samples:P,radius:I,size:D,shadowPass:B,depthLayer:this.depthLayer}).context(e.getSharedContext()),q.name="VSMHorizontal"}const h=Kt("intensity","float",i).setGroup(ke),d=Kt("normalBias","float",i).setGroup(ke),m=J1(n).mul(w3.add(ko.mul(d))),y=this.setupShadowCoord(e,m),x=i.filterNode||this.getShadowFilterFn(t.shadowMap.type)||null;if(x===null)throw new Error("THREE.WebGPURenderer: Shadow map type not supported yet.");const b=s===H0&&i.isPointLightShadow!==!0?this.vsmShadowMapHorizontal.texture:o,T=this.setupShadowFilter(e,{filterFn:x,shadowTexture:u.texture,depthTexture:b,shadowCoord:y,shadow:i,depthLayer:this.depthLayer});let M=xt(u.texture,y);o.isArrayTexture&&(M=M.depth(this.depthLayer));const N=Bt(1,T.rgb.mix(M,1),h.mul(M.a)).toVar();return this.shadowMap=u,this.shadow.map=u,N}setup(e){if(e.renderer.shadowMap.enabled!==!1)return re(()=>{let t=this._node;return this.setupShadowPosition(e),t===null&&(this._node=t=this.setupShadow(e)),e.material.shadowNode&&console.warn('THREE.NodeMaterial: ".shadowNode" is deprecated. Use ".castShadowNode" instead.'),e.material.receivedShadowNode&&(t=e.material.receivedShadowNode(t)),t})()}renderShadow(e){const{shadow:t,shadowMap:n,light:i}=this,{renderer:s,scene:o}=e;t.updateMatrices(i),n.setSize(t.mapSize.width,t.mapSize.height,n.depth),s.render(o,t.camera)}updateShadow(e){const{shadowMap:t,light:n,shadow:i}=this,{renderer:s,scene:o,camera:u}=e,h=s.shadowMap.type,d=t.depthTexture.version;this._depthVersionCached=d;const m=i.camera.layers.mask;(i.camera.layers.mask&4294967294)===0&&(i.camera.layers.mask=u.layers.mask);const y=s.getRenderObjectFunction(),x=s.getMRT(),b=x?x.has("velocity"):!1;vh=nU(s,o,vh),o.overrideMaterial=v_(n),s.setRenderObjectFunction(__(s,i,h,b)),s.setClearColor(0,0),s.setRenderTarget(t),this.renderShadow(e),s.setRenderObjectFunction(y),h===H0&&i.isPointLightShadow!==!0&&this.vsmPass(s),i.camera.layers.mask=m,rU(s,o,vh)}vsmPass(e){const{shadow:t}=this,n=this.shadowMap.depth;this.vsmShadowMapVertical.setSize(t.mapSize.width,t.mapSize.height,n),this.vsmShadowMapHorizontal.setSize(t.mapSize.width,t.mapSize.height,n),e.setRenderTarget(this.vsmShadowMapVertical),E0.material=this.vsmMaterialVertical,E0.render(e),e.setRenderTarget(this.vsmShadowMapHorizontal),E0.material=this.vsmMaterialHorizontal,E0.render(e)}dispose(){this.shadowMap.dispose(),this.shadowMap=null,this.vsmShadowMapVertical!==null&&(this.vsmShadowMapVertical.dispose(),this.vsmShadowMapVertical=null,this.vsmMaterialVertical.dispose(),this.vsmMaterialVertical=null),this.vsmShadowMapHorizontal!==null&&(this.vsmShadowMapHorizontal.dispose(),this.vsmShadowMapHorizontal=null,this.vsmMaterialHorizontal.dispose(),this.vsmMaterialHorizontal=null),super.dispose()}updateBefore(e){const{shadow:t}=this;let n=t.needsUpdate||t.autoUpdate;n&&(this._cameraFrameId[e.camera]===e.frameId&&(n=!1),this._cameraFrameId[e.camera]=e.frameId),n&&(this.updateShadow(e),this.shadowMap.depthTexture.version===this._depthVersionCached&&(t.needsUpdate=!1))}}const b_=(r,e)=>pe(new x_(r,e)),lU=new Un,Bi=re(([r,e])=>{const t=r.toVar(),n=nn(t),i=Zr(1,yn(n.x,yn(n.y,n.z)));n.mulAssign(i),t.mulAssign(i.mul(e.mul(2).oneMinus()));const s=ve(t.xy).toVar(),u=e.mul(1.5).oneMinus();return Xe(n.z.greaterThanEqual(u),()=>{Xe(t.z.greaterThan(0),()=>{s.x.assign(bt(4,t.x))})}).ElseIf(n.x.greaterThanEqual(u),()=>{const h=_u(t.x);s.x.assign(t.z.mul(h).add(h.mul(2)))}).ElseIf(n.y.greaterThanEqual(u),()=>{const h=_u(t.y);s.x.assign(t.x.add(h.mul(2)).add(2)),s.y.assign(t.z.mul(h).sub(2))}),ve(.125,.25).mul(s).add(ve(.375,.75)).flipY()}).setLayout({name:"cubeToUV",type:"vec2",inputs:[{name:"pos",type:"vec3"},{name:"texelSizeY",type:"float"}]}),T_=re(({depthTexture:r,bd3D:e,dp:t,texelSize:n})=>xt(r,Bi(e,n.y)).compare(t)),w_=re(({depthTexture:r,bd3D:e,dp:t,texelSize:n,shadow:i})=>{const s=Kt("radius","float",i).setGroup(ke),o=ve(-1,1).mul(s).mul(n.y);return xt(r,Bi(e.add(o.xyy),n.y)).compare(t).add(xt(r,Bi(e.add(o.yyy),n.y)).compare(t)).add(xt(r,Bi(e.add(o.xyx),n.y)).compare(t)).add(xt(r,Bi(e.add(o.yyx),n.y)).compare(t)).add(xt(r,Bi(e,n.y)).compare(t)).add(xt(r,Bi(e.add(o.xxy),n.y)).compare(t)).add(xt(r,Bi(e.add(o.yxy),n.y)).compare(t)).add(xt(r,Bi(e.add(o.xxx),n.y)).compare(t)).add(xt(r,Bi(e.add(o.yxx),n.y)).compare(t)).mul(1/9)}),uU=re(({filterFn:r,depthTexture:e,shadowCoord:t,shadow:n})=>{const i=t.xyz.toVar(),s=i.length(),o=Ge("float").setGroup(ke).onRenderUpdate(()=>n.camera.near),u=Ge("float").setGroup(ke).onRenderUpdate(()=>n.camera.far),h=Kt("bias","float",n).setGroup(ke),d=Ge(n.mapSize).setGroup(ke),m=V(1).toVar();return Xe(s.sub(u).lessThanEqual(0).and(s.sub(o).greaterThanEqual(0)),()=>{const y=s.sub(o).div(u.sub(o)).toVar();y.addAssign(h);const x=i.normalize(),b=ve(1).div(d.mul(ve(4,2)));m.assign(r({depthTexture:e,bd3D:x,dp:y,texelSize:b,shadow:n}))}),m}),eg=new Ut,rA=new Ot,xl=new Ot;class cU extends x_{static get type(){return"PointShadowNode"}constructor(e,t=null){super(e,t)}getShadowFilterFn(e){return e===JT?T_:w_}setupShadowCoord(e,t){return t}setupShadowFilter(e,{filterFn:t,shadowTexture:n,depthTexture:i,shadowCoord:s,shadow:o}){return uU({filterFn:t,shadowTexture:n,depthTexture:i,shadowCoord:s,shadow:o})}renderShadow(e){const{shadow:t,shadowMap:n,light:i}=this,{renderer:s,scene:o}=e,u=t.getFrameExtents();xl.copy(t.mapSize),xl.multiply(u),n.setSize(xl.width,xl.height),rA.copy(t.mapSize);const h=s.autoClear,d=s.getClearColor(lU),m=s.getClearAlpha();s.autoClear=!1,s.setClearColor(t.clearColor,t.clearAlpha),s.clear();const y=t.getViewportCount();for(let x=0;x<y;x++){const b=t.getViewport(x),T=rA.x*b.x,M=xl.y-rA.y-rA.y*b.y;eg.set(T,M,rA.x*b.z,rA.y*b.w),n.viewport.copy(eg),t.updateMatrices(i,x),s.render(o,t.camera)}s.autoClear=h,s.setClearColor(d,m)}}const S_=(r,e)=>pe(new cU(r,e));class Pa extends WA{static get type(){return"AnalyticLightNode"}constructor(e=null){super(),this.light=e,this.color=new Un,this.colorNode=e&&e.colorNode||Ge(this.color).setGroup(ke),this.baseColorNode=null,this.shadowNode=null,this.shadowColorNode=null,this.isAnalyticLightNode=!0,this.updateType=lt.FRAME}getHash(){return this.light.uuid}getLightVector(e){return x3(this.light).sub(e.context.positionView||wn)}setupDirect(){}setupDirectRectArea(){}setupShadowNode(){return b_(this.light)}setupShadow(e){const{renderer:t}=e;if(t.shadowMap.enabled===!1)return;let n=this.shadowColorNode;if(n===null){const i=this.light.shadow.shadowNode;let s;i!==void 0?s=pe(i):s=this.setupShadowNode(),this.shadowNode=s,this.shadowColorNode=n=this.colorNode.mul(s),this.baseColorNode=this.colorNode}this.colorNode=n}setup(e){this.colorNode=this.baseColorNode||this.colorNode,this.light.castShadow?e.object.receiveShadow&&this.setupShadow(e):this.shadowNode!==null&&(this.shadowNode.dispose(),this.shadowNode=null,this.shadowColorNode=null);const t=this.setupDirect(e),n=this.setupDirectRectArea(e);t&&e.lightsNode.setupDirectLight(e,this,t),n&&e.lightsNode.setupDirectRectAreaLight(e,this,n)}update(){const{light:e}=this;this.color.copy(e.color).multiplyScalar(e.intensity)}}const S3=re(({lightDistance:r,cutoffDistance:e,decayExponent:t})=>{const n=r.pow(t).max(.01).reciprocal();return e.greaterThan(0).select(n.mul(r.div(e).pow4().oneMinus().clamp().pow2()),n)}),M_=({color:r,lightVector:e,cutoffDistance:t,decayExponent:n})=>{const i=e.normalize(),s=e.length(),o=S3({lightDistance:s,cutoffDistance:t,decayExponent:n}),u=r.mul(o);return{lightDirection:i,lightColor:u}};class hU extends Pa{static get type(){return"PointLightNode"}constructor(e=null){super(e),this.cutoffDistanceNode=Ge(0).setGroup(ke),this.decayExponentNode=Ge(2).setGroup(ke)}update(e){const{light:t}=this;super.update(e),this.cutoffDistanceNode.value=t.distance,this.decayExponentNode.value=t.decay}setupShadowNode(){return S_(this.light)}setupDirect(e){return M_({color:this.colorNode,lightVector:this.getLightVector(e),cutoffDistance:this.cutoffDistanceNode,decayExponent:this.decayExponentNode})}}const fU=re(([r=Xt()])=>{const e=r.mul(2),t=e.x.floor(),n=e.y.floor();return t.add(n).mod(2).sign()}),dU=re(([r=Xt()],{renderer:e,material:t})=>{const n=Bp(r.mul(2).sub(1));let i;if(t.alphaToCoverage&&e.samples>1){const s=V(n.fwidth()).toVar();i=ms(s.oneMinus(),s.add(1),n).oneMinus()}else i=jn(n.greaterThan(1),0,1);return i}),Zl=re(([r,e,t])=>{const n=V(t).toVar(),i=V(e).toVar(),s=yi(r).toVar();return jn(s,i,n)}).setLayout({name:"mx_select",type:"float",inputs:[{name:"b",type:"bool"},{name:"t",type:"float"},{name:"f",type:"float"}]}),f1=re(([r,e])=>{const t=yi(e).toVar(),n=V(r).toVar();return jn(t,n.negate(),n)}).setLayout({name:"mx_negate_if",type:"float",inputs:[{name:"val",type:"float"},{name:"b",type:"bool"}]}),Cn=re(([r])=>{const e=V(r).toVar();return Q(cs(e))}).setLayout({name:"mx_floor",type:"int",inputs:[{name:"x",type:"float"}]}),cn=re(([r,e])=>{const t=V(r).toVar();return e.assign(Cn(t)),t.sub(V(e))}),pU=re(([r,e,t,n,i,s])=>{const o=V(s).toVar(),u=V(i).toVar(),h=V(n).toVar(),d=V(t).toVar(),m=V(e).toVar(),y=V(r).toVar(),x=V(bt(1,u)).toVar();return bt(1,o).mul(y.mul(x).add(m.mul(u))).add(o.mul(d.mul(x).add(h.mul(u))))}).setLayout({name:"mx_bilerp_0",type:"float",inputs:[{name:"v0",type:"float"},{name:"v1",type:"float"},{name:"v2",type:"float"},{name:"v3",type:"float"},{name:"s",type:"float"},{name:"t",type:"float"}]}),mU=re(([r,e,t,n,i,s])=>{const o=V(s).toVar(),u=V(i).toVar(),h=ne(n).toVar(),d=ne(t).toVar(),m=ne(e).toVar(),y=ne(r).toVar(),x=V(bt(1,u)).toVar();return bt(1,o).mul(y.mul(x).add(m.mul(u))).add(o.mul(d.mul(x).add(h.mul(u))))}).setLayout({name:"mx_bilerp_1",type:"vec3",inputs:[{name:"v0",type:"vec3"},{name:"v1",type:"vec3"},{name:"v2",type:"vec3"},{name:"v3",type:"vec3"},{name:"s",type:"float"},{name:"t",type:"float"}]}),E_=rr([pU,mU]),gU=re(([r,e,t,n,i,s,o,u,h,d,m])=>{const y=V(m).toVar(),x=V(d).toVar(),b=V(h).toVar(),T=V(u).toVar(),M=V(o).toVar(),N=V(s).toVar(),C=V(i).toVar(),B=V(n).toVar(),P=V(t).toVar(),I=V(e).toVar(),D=V(r).toVar(),q=V(bt(1,b)).toVar(),O=V(bt(1,x)).toVar();return V(bt(1,y)).toVar().mul(O.mul(D.mul(q).add(I.mul(b))).add(x.mul(P.mul(q).add(B.mul(b))))).add(y.mul(O.mul(C.mul(q).add(N.mul(b))).add(x.mul(M.mul(q).add(T.mul(b))))))}).setLayout({name:"mx_trilerp_0",type:"float",inputs:[{name:"v0",type:"float"},{name:"v1",type:"float"},{name:"v2",type:"float"},{name:"v3",type:"float"},{name:"v4",type:"float"},{name:"v5",type:"float"},{name:"v6",type:"float"},{name:"v7",type:"float"},{name:"s",type:"float"},{name:"t",type:"float"},{name:"r",type:"float"}]}),yU=re(([r,e,t,n,i,s,o,u,h,d,m])=>{const y=V(m).toVar(),x=V(d).toVar(),b=V(h).toVar(),T=ne(u).toVar(),M=ne(o).toVar(),N=ne(s).toVar(),C=ne(i).toVar(),B=ne(n).toVar(),P=ne(t).toVar(),I=ne(e).toVar(),D=ne(r).toVar(),q=V(bt(1,b)).toVar(),O=V(bt(1,x)).toVar();return V(bt(1,y)).toVar().mul(O.mul(D.mul(q).add(I.mul(b))).add(x.mul(P.mul(q).add(B.mul(b))))).add(y.mul(O.mul(C.mul(q).add(N.mul(b))).add(x.mul(M.mul(q).add(T.mul(b))))))}).setLayout({name:"mx_trilerp_1",type:"vec3",inputs:[{name:"v0",type:"vec3"},{name:"v1",type:"vec3"},{name:"v2",type:"vec3"},{name:"v3",type:"vec3"},{name:"v4",type:"vec3"},{name:"v5",type:"vec3"},{name:"v6",type:"vec3"},{name:"v7",type:"vec3"},{name:"s",type:"float"},{name:"t",type:"float"},{name:"r",type:"float"}]}),N_=rr([gU,yU]),vU=re(([r,e,t])=>{const n=V(t).toVar(),i=V(e).toVar(),s=Fe(r).toVar(),o=Fe(s.bitAnd(Fe(7))).toVar(),u=V(Zl(o.lessThan(Fe(4)),i,n)).toVar(),h=V(tt(2,Zl(o.lessThan(Fe(4)),n,i))).toVar();return f1(u,yi(o.bitAnd(Fe(1)))).add(f1(h,yi(o.bitAnd(Fe(2)))))}).setLayout({name:"mx_gradient_float_0",type:"float",inputs:[{name:"hash",type:"uint"},{name:"x",type:"float"},{name:"y",type:"float"}]}),_U=re(([r,e,t,n])=>{const i=V(n).toVar(),s=V(t).toVar(),o=V(e).toVar(),u=Fe(r).toVar(),h=Fe(u.bitAnd(Fe(15))).toVar(),d=V(Zl(h.lessThan(Fe(8)),o,s)).toVar(),m=V(Zl(h.lessThan(Fe(4)),s,Zl(h.equal(Fe(12)).or(h.equal(Fe(14))),o,i))).toVar();return f1(d,yi(h.bitAnd(Fe(1)))).add(f1(m,yi(h.bitAnd(Fe(2)))))}).setLayout({name:"mx_gradient_float_1",type:"float",inputs:[{name:"hash",type:"uint"},{name:"x",type:"float"},{name:"y",type:"float"},{name:"z",type:"float"}]}),Hn=rr([vU,_U]),xU=re(([r,e,t])=>{const n=V(t).toVar(),i=V(e).toVar(),s=$A(r).toVar();return ne(Hn(s.x,i,n),Hn(s.y,i,n),Hn(s.z,i,n))}).setLayout({name:"mx_gradient_vec3_0",type:"vec3",inputs:[{name:"hash",type:"uvec3"},{name:"x",type:"float"},{name:"y",type:"float"}]}),bU=re(([r,e,t,n])=>{const i=V(n).toVar(),s=V(t).toVar(),o=V(e).toVar(),u=$A(r).toVar();return ne(Hn(u.x,o,s,i),Hn(u.y,o,s,i),Hn(u.z,o,s,i))}).setLayout({name:"mx_gradient_vec3_1",type:"vec3",inputs:[{name:"hash",type:"uvec3"},{name:"x",type:"float"},{name:"y",type:"float"},{name:"z",type:"float"}]}),Ai=rr([xU,bU]),TU=re(([r])=>{const e=V(r).toVar();return tt(.6616,e)}).setLayout({name:"mx_gradient_scale2d_0",type:"float",inputs:[{name:"v",type:"float"}]}),wU=re(([r])=>{const e=V(r).toVar();return tt(.982,e)}).setLayout({name:"mx_gradient_scale3d_0",type:"float",inputs:[{name:"v",type:"float"}]}),SU=re(([r])=>{const e=ne(r).toVar();return tt(.6616,e)}).setLayout({name:"mx_gradient_scale2d_1",type:"vec3",inputs:[{name:"v",type:"vec3"}]}),R_=rr([TU,SU]),MU=re(([r])=>{const e=ne(r).toVar();return tt(.982,e)}).setLayout({name:"mx_gradient_scale3d_1",type:"vec3",inputs:[{name:"v",type:"vec3"}]}),C_=rr([wU,MU]),jr=re(([r,e])=>{const t=Q(e).toVar(),n=Fe(r).toVar();return n.shiftLeft(t).bitOr(n.shiftRight(Q(32).sub(t)))}).setLayout({name:"mx_rotl32",type:"uint",inputs:[{name:"x",type:"uint"},{name:"k",type:"int"}]}),P_=re(([r,e,t])=>{r.subAssign(t),r.bitXorAssign(jr(t,Q(4))),t.addAssign(e),e.subAssign(r),e.bitXorAssign(jr(r,Q(6))),r.addAssign(t),t.subAssign(e),t.bitXorAssign(jr(e,Q(8))),e.addAssign(r),r.subAssign(t),r.bitXorAssign(jr(t,Q(16))),t.addAssign(e),e.subAssign(r),e.bitXorAssign(jr(r,Q(19))),r.addAssign(t),t.subAssign(e),t.bitXorAssign(jr(e,Q(4))),e.addAssign(r)}),Ou=re(([r,e,t])=>{const n=Fe(t).toVar(),i=Fe(e).toVar(),s=Fe(r).toVar();return n.bitXorAssign(i),n.subAssign(jr(i,Q(14))),s.bitXorAssign(n),s.subAssign(jr(n,Q(11))),i.bitXorAssign(s),i.subAssign(jr(s,Q(25))),n.bitXorAssign(i),n.subAssign(jr(i,Q(16))),s.bitXorAssign(n),s.subAssign(jr(n,Q(4))),i.bitXorAssign(s),i.subAssign(jr(s,Q(14))),n.bitXorAssign(i),n.subAssign(jr(i,Q(24))),n}).setLayout({name:"mx_bjfinal",type:"uint",inputs:[{name:"a",type:"uint"},{name:"b",type:"uint"},{name:"c",type:"uint"}]}),hr=re(([r])=>{const e=Fe(r).toVar();return V(e).div(V(Fe(Q(4294967295))))}).setLayout({name:"mx_bits_to_01",type:"float",inputs:[{name:"bits",type:"uint"}]}),ds=re(([r])=>{const e=V(r).toVar();return e.mul(e).mul(e).mul(e.mul(e.mul(6).sub(15)).add(10))}).setLayout({name:"mx_fade",type:"float",inputs:[{name:"t",type:"float"}]}),EU=re(([r])=>{const e=Q(r).toVar(),t=Fe(Fe(1)).toVar(),n=Fe(Fe(Q(3735928559)).add(t.shiftLeft(Fe(2))).add(Fe(13))).toVar();return Ou(n.add(Fe(e)),n,n)}).setLayout({name:"mx_hash_int_0",type:"uint",inputs:[{name:"x",type:"int"}]}),NU=re(([r,e])=>{const t=Q(e).toVar(),n=Q(r).toVar(),i=Fe(Fe(2)).toVar(),s=Fe().toVar(),o=Fe().toVar(),u=Fe().toVar();return s.assign(o.assign(u.assign(Fe(Q(3735928559)).add(i.shiftLeft(Fe(2))).add(Fe(13))))),s.addAssign(Fe(n)),o.addAssign(Fe(t)),Ou(s,o,u)}).setLayout({name:"mx_hash_int_1",type:"uint",inputs:[{name:"x",type:"int"},{name:"y",type:"int"}]}),RU=re(([r,e,t])=>{const n=Q(t).toVar(),i=Q(e).toVar(),s=Q(r).toVar(),o=Fe(Fe(3)).toVar(),u=Fe().toVar(),h=Fe().toVar(),d=Fe().toVar();return u.assign(h.assign(d.assign(Fe(Q(3735928559)).add(o.shiftLeft(Fe(2))).add(Fe(13))))),u.addAssign(Fe(s)),h.addAssign(Fe(i)),d.addAssign(Fe(n)),Ou(u,h,d)}).setLayout({name:"mx_hash_int_2",type:"uint",inputs:[{name:"x",type:"int"},{name:"y",type:"int"},{name:"z",type:"int"}]}),CU=re(([r,e,t,n])=>{const i=Q(n).toVar(),s=Q(t).toVar(),o=Q(e).toVar(),u=Q(r).toVar(),h=Fe(Fe(4)).toVar(),d=Fe().toVar(),m=Fe().toVar(),y=Fe().toVar();return d.assign(m.assign(y.assign(Fe(Q(3735928559)).add(h.shiftLeft(Fe(2))).add(Fe(13))))),d.addAssign(Fe(u)),m.addAssign(Fe(o)),y.addAssign(Fe(s)),P_(d,m,y),d.addAssign(Fe(i)),Ou(d,m,y)}).setLayout({name:"mx_hash_int_3",type:"uint",inputs:[{name:"x",type:"int"},{name:"y",type:"int"},{name:"z",type:"int"},{name:"xx",type:"int"}]}),PU=re(([r,e,t,n,i])=>{const s=Q(i).toVar(),o=Q(n).toVar(),u=Q(t).toVar(),h=Q(e).toVar(),d=Q(r).toVar(),m=Fe(Fe(5)).toVar(),y=Fe().toVar(),x=Fe().toVar(),b=Fe().toVar();return y.assign(x.assign(b.assign(Fe(Q(3735928559)).add(m.shiftLeft(Fe(2))).add(Fe(13))))),y.addAssign(Fe(d)),x.addAssign(Fe(h)),b.addAssign(Fe(u)),P_(y,x,b),y.addAssign(Fe(o)),x.addAssign(Fe(s)),Ou(y,x,b)}).setLayout({name:"mx_hash_int_4",type:"uint",inputs:[{name:"x",type:"int"},{name:"y",type:"int"},{name:"z",type:"int"},{name:"xx",type:"int"},{name:"yy",type:"int"}]}),zt=rr([EU,NU,RU,CU,PU]),BU=re(([r,e])=>{const t=Q(e).toVar(),n=Q(r).toVar(),i=Fe(zt(n,t)).toVar(),s=$A().toVar();return s.x.assign(i.bitAnd(Q(255))),s.y.assign(i.shiftRight(Q(8)).bitAnd(Q(255))),s.z.assign(i.shiftRight(Q(16)).bitAnd(Q(255))),s}).setLayout({name:"mx_hash_vec3_0",type:"uvec3",inputs:[{name:"x",type:"int"},{name:"y",type:"int"}]}),DU=re(([r,e,t])=>{const n=Q(t).toVar(),i=Q(e).toVar(),s=Q(r).toVar(),o=Fe(zt(s,i,n)).toVar(),u=$A().toVar();return u.x.assign(o.bitAnd(Q(255))),u.y.assign(o.shiftRight(Q(8)).bitAnd(Q(255))),u.z.assign(o.shiftRight(Q(16)).bitAnd(Q(255))),u}).setLayout({name:"mx_hash_vec3_1",type:"uvec3",inputs:[{name:"x",type:"int"},{name:"y",type:"int"},{name:"z",type:"int"}]}),li=rr([BU,DU]),FU=re(([r])=>{const e=ve(r).toVar(),t=Q().toVar(),n=Q().toVar(),i=V(cn(e.x,t)).toVar(),s=V(cn(e.y,n)).toVar(),o=V(ds(i)).toVar(),u=V(ds(s)).toVar(),h=V(E_(Hn(zt(t,n),i,s),Hn(zt(t.add(Q(1)),n),i.sub(1),s),Hn(zt(t,n.add(Q(1))),i,s.sub(1)),Hn(zt(t.add(Q(1)),n.add(Q(1))),i.sub(1),s.sub(1)),o,u)).toVar();return R_(h)}).setLayout({name:"mx_perlin_noise_float_0",type:"float",inputs:[{name:"p",type:"vec2"}]}),LU=re(([r])=>{const e=ne(r).toVar(),t=Q().toVar(),n=Q().toVar(),i=Q().toVar(),s=V(cn(e.x,t)).toVar(),o=V(cn(e.y,n)).toVar(),u=V(cn(e.z,i)).toVar(),h=V(ds(s)).toVar(),d=V(ds(o)).toVar(),m=V(ds(u)).toVar(),y=V(N_(Hn(zt(t,n,i),s,o,u),Hn(zt(t.add(Q(1)),n,i),s.sub(1),o,u),Hn(zt(t,n.add(Q(1)),i),s,o.sub(1),u),Hn(zt(t.add(Q(1)),n.add(Q(1)),i),s.sub(1),o.sub(1),u),Hn(zt(t,n,i.add(Q(1))),s,o,u.sub(1)),Hn(zt(t.add(Q(1)),n,i.add(Q(1))),s.sub(1),o,u.sub(1)),Hn(zt(t,n.add(Q(1)),i.add(Q(1))),s,o.sub(1),u.sub(1)),Hn(zt(t.add(Q(1)),n.add(Q(1)),i.add(Q(1))),s.sub(1),o.sub(1),u.sub(1)),h,d,m)).toVar();return C_(y)}).setLayout({name:"mx_perlin_noise_float_1",type:"float",inputs:[{name:"p",type:"vec3"}]}),M3=rr([FU,LU]),IU=re(([r])=>{const e=ve(r).toVar(),t=Q().toVar(),n=Q().toVar(),i=V(cn(e.x,t)).toVar(),s=V(cn(e.y,n)).toVar(),o=V(ds(i)).toVar(),u=V(ds(s)).toVar(),h=ne(E_(Ai(li(t,n),i,s),Ai(li(t.add(Q(1)),n),i.sub(1),s),Ai(li(t,n.add(Q(1))),i,s.sub(1)),Ai(li(t.add(Q(1)),n.add(Q(1))),i.sub(1),s.sub(1)),o,u)).toVar();return R_(h)}).setLayout({name:"mx_perlin_noise_vec3_0",type:"vec3",inputs:[{name:"p",type:"vec2"}]}),qU=re(([r])=>{const e=ne(r).toVar(),t=Q().toVar(),n=Q().toVar(),i=Q().toVar(),s=V(cn(e.x,t)).toVar(),o=V(cn(e.y,n)).toVar(),u=V(cn(e.z,i)).toVar(),h=V(ds(s)).toVar(),d=V(ds(o)).toVar(),m=V(ds(u)).toVar(),y=ne(N_(Ai(li(t,n,i),s,o,u),Ai(li(t.add(Q(1)),n,i),s.sub(1),o,u),Ai(li(t,n.add(Q(1)),i),s,o.sub(1),u),Ai(li(t.add(Q(1)),n.add(Q(1)),i),s.sub(1),o.sub(1),u),Ai(li(t,n,i.add(Q(1))),s,o,u.sub(1)),Ai(li(t.add(Q(1)),n,i.add(Q(1))),s.sub(1),o,u.sub(1)),Ai(li(t,n.add(Q(1)),i.add(Q(1))),s,o.sub(1),u.sub(1)),Ai(li(t.add(Q(1)),n.add(Q(1)),i.add(Q(1))),s.sub(1),o.sub(1),u.sub(1)),h,d,m)).toVar();return C_(y)}).setLayout({name:"mx_perlin_noise_vec3_1",type:"vec3",inputs:[{name:"p",type:"vec3"}]}),Uu=rr([IU,qU]),OU=re(([r])=>{const e=V(r).toVar(),t=Q(Cn(e)).toVar();return hr(zt(t))}).setLayout({name:"mx_cell_noise_float_0",type:"float",inputs:[{name:"p",type:"float"}]}),UU=re(([r])=>{const e=ve(r).toVar(),t=Q(Cn(e.x)).toVar(),n=Q(Cn(e.y)).toVar();return hr(zt(t,n))}).setLayout({name:"mx_cell_noise_float_1",type:"float",inputs:[{name:"p",type:"vec2"}]}),kU=re(([r])=>{const e=ne(r).toVar(),t=Q(Cn(e.x)).toVar(),n=Q(Cn(e.y)).toVar(),i=Q(Cn(e.z)).toVar();return hr(zt(t,n,i))}).setLayout({name:"mx_cell_noise_float_2",type:"float",inputs:[{name:"p",type:"vec3"}]}),GU=re(([r])=>{const e=Ve(r).toVar(),t=Q(Cn(e.x)).toVar(),n=Q(Cn(e.y)).toVar(),i=Q(Cn(e.z)).toVar(),s=Q(Cn(e.w)).toVar();return hr(zt(t,n,i,s))}).setLayout({name:"mx_cell_noise_float_3",type:"float",inputs:[{name:"p",type:"vec4"}]}),VU=rr([OU,UU,kU,GU]),zU=re(([r])=>{const e=V(r).toVar(),t=Q(Cn(e)).toVar();return ne(hr(zt(t,Q(0))),hr(zt(t,Q(1))),hr(zt(t,Q(2))))}).setLayout({name:"mx_cell_noise_vec3_0",type:"vec3",inputs:[{name:"p",type:"float"}]}),$U=re(([r])=>{const e=ve(r).toVar(),t=Q(Cn(e.x)).toVar(),n=Q(Cn(e.y)).toVar();return ne(hr(zt(t,n,Q(0))),hr(zt(t,n,Q(1))),hr(zt(t,n,Q(2))))}).setLayout({name:"mx_cell_noise_vec3_1",type:"vec3",inputs:[{name:"p",type:"vec2"}]}),HU=re(([r])=>{const e=ne(r).toVar(),t=Q(Cn(e.x)).toVar(),n=Q(Cn(e.y)).toVar(),i=Q(Cn(e.z)).toVar();return ne(hr(zt(t,n,i,Q(0))),hr(zt(t,n,i,Q(1))),hr(zt(t,n,i,Q(2))))}).setLayout({name:"mx_cell_noise_vec3_2",type:"vec3",inputs:[{name:"p",type:"vec3"}]}),jU=re(([r])=>{const e=Ve(r).toVar(),t=Q(Cn(e.x)).toVar(),n=Q(Cn(e.y)).toVar(),i=Q(Cn(e.z)).toVar(),s=Q(Cn(e.w)).toVar();return ne(hr(zt(t,n,i,s,Q(0))),hr(zt(t,n,i,s,Q(1))),hr(zt(t,n,i,s,Q(2))))}).setLayout({name:"mx_cell_noise_vec3_3",type:"vec3",inputs:[{name:"p",type:"vec4"}]}),e2=rr([zU,$U,HU,jU]),d1=re(([r,e,t,n])=>{const i=V(n).toVar(),s=V(t).toVar(),o=Q(e).toVar(),u=ne(r).toVar(),h=V(0).toVar(),d=V(1).toVar();return Ht(o,()=>{h.addAssign(d.mul(M3(u))),d.mulAssign(i),u.mulAssign(s)}),h}).setLayout({name:"mx_fractal_noise_float",type:"float",inputs:[{name:"p",type:"vec3"},{name:"octaves",type:"int"},{name:"lacunarity",type:"float"},{name:"diminish",type:"float"}]}),t2=re(([r,e,t,n])=>{const i=V(n).toVar(),s=V(t).toVar(),o=Q(e).toVar(),u=ne(r).toVar(),h=ne(0).toVar(),d=V(1).toVar();return Ht(o,()=>{h.addAssign(d.mul(Uu(u))),d.mulAssign(i),u.mulAssign(s)}),h}).setLayout({name:"mx_fractal_noise_vec3",type:"vec3",inputs:[{name:"p",type:"vec3"},{name:"octaves",type:"int"},{name:"lacunarity",type:"float"},{name:"diminish",type:"float"}]}),WU=re(([r,e,t,n])=>{const i=V(n).toVar(),s=V(t).toVar(),o=Q(e).toVar(),u=ne(r).toVar();return ve(d1(u,o,s,i),d1(u.add(ne(Q(19),Q(193),Q(17))),o,s,i))}).setLayout({name:"mx_fractal_noise_vec2",type:"vec2",inputs:[{name:"p",type:"vec3"},{name:"octaves",type:"int"},{name:"lacunarity",type:"float"},{name:"diminish",type:"float"}]}),QU=re(([r,e,t,n])=>{const i=V(n).toVar(),s=V(t).toVar(),o=Q(e).toVar(),u=ne(r).toVar(),h=ne(t2(u,o,s,i)).toVar(),d=V(d1(u.add(ne(Q(19),Q(193),Q(17))),o,s,i)).toVar();return Ve(h,d)}).setLayout({name:"mx_fractal_noise_vec4",type:"vec4",inputs:[{name:"p",type:"vec3"},{name:"octaves",type:"int"},{name:"lacunarity",type:"float"},{name:"diminish",type:"float"}]}),XU=re(([r,e,t,n,i,s,o])=>{const u=Q(o).toVar(),h=V(s).toVar(),d=Q(i).toVar(),m=Q(n).toVar(),y=Q(t).toVar(),x=Q(e).toVar(),b=ve(r).toVar(),T=ne(e2(ve(x.add(m),y.add(d)))).toVar(),M=ve(T.x,T.y).toVar();M.subAssign(.5),M.mulAssign(h),M.addAssign(.5);const N=ve(ve(V(x),V(y)).add(M)).toVar(),C=ve(N.sub(b)).toVar();return Xe(u.equal(Q(2)),()=>nn(C.x).add(nn(C.y))),Xe(u.equal(Q(3)),()=>yn(nn(C.x),nn(C.y))),Oo(C,C)}).setLayout({name:"mx_worley_distance_0",type:"float",inputs:[{name:"p",type:"vec2"},{name:"x",type:"int"},{name:"y",type:"int"},{name:"xoff",type:"int"},{name:"yoff",type:"int"},{name:"jitter",type:"float"},{name:"metric",type:"int"}]}),YU=re(([r,e,t,n,i,s,o,u,h])=>{const d=Q(h).toVar(),m=V(u).toVar(),y=Q(o).toVar(),x=Q(s).toVar(),b=Q(i).toVar(),T=Q(n).toVar(),M=Q(t).toVar(),N=Q(e).toVar(),C=ne(r).toVar(),B=ne(e2(ne(N.add(b),M.add(x),T.add(y)))).toVar();B.subAssign(.5),B.mulAssign(m),B.addAssign(.5);const P=ne(ne(V(N),V(M),V(T)).add(B)).toVar(),I=ne(P.sub(C)).toVar();return Xe(d.equal(Q(2)),()=>nn(I.x).add(nn(I.y)).add(nn(I.z))),Xe(d.equal(Q(3)),()=>yn(nn(I.x),nn(I.y),nn(I.z))),Oo(I,I)}).setLayout({name:"mx_worley_distance_1",type:"float",inputs:[{name:"p",type:"vec3"},{name:"x",type:"int"},{name:"y",type:"int"},{name:"z",type:"int"},{name:"xoff",type:"int"},{name:"yoff",type:"int"},{name:"zoff",type:"int"},{name:"jitter",type:"float"},{name:"metric",type:"int"}]}),XA=rr([XU,YU]),KU=re(([r,e,t])=>{const n=Q(t).toVar(),i=V(e).toVar(),s=ve(r).toVar(),o=Q().toVar(),u=Q().toVar(),h=ve(cn(s.x,o),cn(s.y,u)).toVar(),d=V(1e6).toVar();return Ht({start:-1,end:Q(1),name:"x",condition:"<="},({x:m})=>{Ht({start:-1,end:Q(1),name:"y",condition:"<="},({y})=>{const x=V(XA(h,m,y,o,u,i,n)).toVar();d.assign(Lr(d,x))})}),Xe(n.equal(Q(0)),()=>{d.assign(bs(d))}),d}).setLayout({name:"mx_worley_noise_float_0",type:"float",inputs:[{name:"p",type:"vec2"},{name:"jitter",type:"float"},{name:"metric",type:"int"}]}),ZU=re(([r,e,t])=>{const n=Q(t).toVar(),i=V(e).toVar(),s=ve(r).toVar(),o=Q().toVar(),u=Q().toVar(),h=ve(cn(s.x,o),cn(s.y,u)).toVar(),d=ve(1e6,1e6).toVar();return Ht({start:-1,end:Q(1),name:"x",condition:"<="},({x:m})=>{Ht({start:-1,end:Q(1),name:"y",condition:"<="},({y})=>{const x=V(XA(h,m,y,o,u,i,n)).toVar();Xe(x.lessThan(d.x),()=>{d.y.assign(d.x),d.x.assign(x)}).ElseIf(x.lessThan(d.y),()=>{d.y.assign(x)})})}),Xe(n.equal(Q(0)),()=>{d.assign(bs(d))}),d}).setLayout({name:"mx_worley_noise_vec2_0",type:"vec2",inputs:[{name:"p",type:"vec2"},{name:"jitter",type:"float"},{name:"metric",type:"int"}]}),JU=re(([r,e,t])=>{const n=Q(t).toVar(),i=V(e).toVar(),s=ve(r).toVar(),o=Q().toVar(),u=Q().toVar(),h=ve(cn(s.x,o),cn(s.y,u)).toVar(),d=ne(1e6,1e6,1e6).toVar();return Ht({start:-1,end:Q(1),name:"x",condition:"<="},({x:m})=>{Ht({start:-1,end:Q(1),name:"y",condition:"<="},({y})=>{const x=V(XA(h,m,y,o,u,i,n)).toVar();Xe(x.lessThan(d.x),()=>{d.z.assign(d.y),d.y.assign(d.x),d.x.assign(x)}).ElseIf(x.lessThan(d.y),()=>{d.z.assign(d.y),d.y.assign(x)}).ElseIf(x.lessThan(d.z),()=>{d.z.assign(x)})})}),Xe(n.equal(Q(0)),()=>{d.assign(bs(d))}),d}).setLayout({name:"mx_worley_noise_vec3_0",type:"vec3",inputs:[{name:"p",type:"vec2"},{name:"jitter",type:"float"},{name:"metric",type:"int"}]}),ek=re(([r,e,t])=>{const n=Q(t).toVar(),i=V(e).toVar(),s=ne(r).toVar(),o=Q().toVar(),u=Q().toVar(),h=Q().toVar(),d=ne(cn(s.x,o),cn(s.y,u),cn(s.z,h)).toVar(),m=V(1e6).toVar();return Ht({start:-1,end:Q(1),name:"x",condition:"<="},({x:y})=>{Ht({start:-1,end:Q(1),name:"y",condition:"<="},({y:x})=>{Ht({start:-1,end:Q(1),name:"z",condition:"<="},({z:b})=>{const T=V(XA(d,y,x,b,o,u,h,i,n)).toVar();m.assign(Lr(m,T))})})}),Xe(n.equal(Q(0)),()=>{m.assign(bs(m))}),m}).setLayout({name:"mx_worley_noise_float_1",type:"float",inputs:[{name:"p",type:"vec3"},{name:"jitter",type:"float"},{name:"metric",type:"int"}]}),tk=rr([KU,ek]),nk=re(([r,e,t])=>{const n=Q(t).toVar(),i=V(e).toVar(),s=ne(r).toVar(),o=Q().toVar(),u=Q().toVar(),h=Q().toVar(),d=ne(cn(s.x,o),cn(s.y,u),cn(s.z,h)).toVar(),m=ve(1e6,1e6).toVar();return Ht({start:-1,end:Q(1),name:"x",condition:"<="},({x:y})=>{Ht({start:-1,end:Q(1),name:"y",condition:"<="},({y:x})=>{Ht({start:-1,end:Q(1),name:"z",condition:"<="},({z:b})=>{const T=V(XA(d,y,x,b,o,u,h,i,n)).toVar();Xe(T.lessThan(m.x),()=>{m.y.assign(m.x),m.x.assign(T)}).ElseIf(T.lessThan(m.y),()=>{m.y.assign(T)})})})}),Xe(n.equal(Q(0)),()=>{m.assign(bs(m))}),m}).setLayout({name:"mx_worley_noise_vec2_1",type:"vec2",inputs:[{name:"p",type:"vec3"},{name:"jitter",type:"float"},{name:"metric",type:"int"}]}),rk=rr([ZU,nk]),ik=re(([r,e,t])=>{const n=Q(t).toVar(),i=V(e).toVar(),s=ne(r).toVar(),o=Q().toVar(),u=Q().toVar(),h=Q().toVar(),d=ne(cn(s.x,o),cn(s.y,u),cn(s.z,h)).toVar(),m=ne(1e6,1e6,1e6).toVar();return Ht({start:-1,end:Q(1),name:"x",condition:"<="},({x:y})=>{Ht({start:-1,end:Q(1),name:"y",condition:"<="},({y:x})=>{Ht({start:-1,end:Q(1),name:"z",condition:"<="},({z:b})=>{const T=V(XA(d,y,x,b,o,u,h,i,n)).toVar();Xe(T.lessThan(m.x),()=>{m.z.assign(m.y),m.y.assign(m.x),m.x.assign(T)}).ElseIf(T.lessThan(m.y),()=>{m.z.assign(m.y),m.y.assign(T)}).ElseIf(T.lessThan(m.z),()=>{m.z.assign(T)})})})}),Xe(n.equal(Q(0)),()=>{m.assign(bs(m))}),m}).setLayout({name:"mx_worley_noise_vec3_1",type:"vec3",inputs:[{name:"p",type:"vec3"},{name:"jitter",type:"float"},{name:"metric",type:"int"}]}),E3=rr([JU,ik]),sk=re(([r,e,t,n,i,s,o,u,h,d,m])=>{const y=Q(r).toVar(),x=ve(e).toVar(),b=ve(t).toVar(),T=ve(n).toVar(),M=V(i).toVar(),N=V(s).toVar(),C=V(o).toVar(),B=yi(u).toVar(),P=Q(h).toVar(),I=V(d).toVar(),D=V(m).toVar(),q=x.mul(b).add(T),O=V(0).toVar();return Xe(y.equal(Q(0)),()=>{O.assign(Uu(q))}),Xe(y.equal(Q(1)),()=>{O.assign(e2(q))}),Xe(y.equal(Q(2)),()=>{O.assign(E3(q,M,Q(0)))}),Xe(y.equal(Q(3)),()=>{O.assign(t2(ne(q,0),P,I,D))}),O.assign(O.mul(C.sub(N)).add(N)),Xe(B,()=>{O.assign(vi(O,N,C))}),O}).setLayout({name:"mx_unifiednoise2d",type:"float",inputs:[{name:"noiseType",type:"int"},{name:"texcoord",type:"vec2"},{name:"freq",type:"vec2"},{name:"offset",type:"vec2"},{name:"jitter",type:"float"},{name:"outmin",type:"float"},{name:"outmax",type:"float"},{name:"clampoutput",type:"bool"},{name:"octaves",type:"int"},{name:"lacunarity",type:"float"},{name:"diminish",type:"float"}]}),ok=re(([r,e,t,n,i,s,o,u,h,d,m])=>{const y=Q(r).toVar(),x=ne(e).toVar(),b=ne(t).toVar(),T=ne(n).toVar(),M=V(i).toVar(),N=V(s).toVar(),C=V(o).toVar(),B=yi(u).toVar(),P=Q(h).toVar(),I=V(d).toVar(),D=V(m).toVar(),q=x.mul(b).add(T),O=V(0).toVar();return Xe(y.equal(Q(0)),()=>{O.assign(Uu(q))}),Xe(y.equal(Q(1)),()=>{O.assign(e2(q))}),Xe(y.equal(Q(2)),()=>{O.assign(E3(q,M,Q(0)))}),Xe(y.equal(Q(3)),()=>{O.assign(t2(q,P,I,D))}),O.assign(O.mul(C.sub(N)).add(N)),Xe(B,()=>{O.assign(vi(O,N,C))}),O}).setLayout({name:"mx_unifiednoise3d",type:"float",inputs:[{name:"noiseType",type:"int"},{name:"position",type:"vec3"},{name:"freq",type:"vec3"},{name:"offset",type:"vec3"},{name:"jitter",type:"float"},{name:"outmin",type:"float"},{name:"outmax",type:"float"},{name:"clampoutput",type:"bool"},{name:"octaves",type:"int"},{name:"lacunarity",type:"float"},{name:"diminish",type:"float"}]}),ak=re(([r])=>{const e=r.y,t=r.z,n=ne().toVar();return Xe(e.lessThan(1e-4),()=>{n.assign(ne(t,t,t))}).Else(()=>{let i=r.x;i=i.sub(cs(i)).mul(6).toVar();const s=Q(Cp(i)),o=i.sub(V(s)),u=t.mul(e.oneMinus()),h=t.mul(e.mul(o).oneMinus()),d=t.mul(e.mul(o.oneMinus()).oneMinus());Xe(s.equal(Q(0)),()=>{n.assign(ne(t,d,u))}).ElseIf(s.equal(Q(1)),()=>{n.assign(ne(h,t,u))}).ElseIf(s.equal(Q(2)),()=>{n.assign(ne(u,t,d))}).ElseIf(s.equal(Q(3)),()=>{n.assign(ne(u,h,t))}).ElseIf(s.equal(Q(4)),()=>{n.assign(ne(d,u,t))}).Else(()=>{n.assign(ne(t,u,h))})}),n}).setLayout({name:"mx_hsvtorgb",type:"vec3",inputs:[{name:"hsv",type:"vec3"}]}),Ak=re(([r])=>{const e=ne(r).toVar(),t=V(e.x).toVar(),n=V(e.y).toVar(),i=V(e.z).toVar(),s=V(Lr(t,Lr(n,i))).toVar(),o=V(yn(t,yn(n,i))).toVar(),u=V(o.sub(s)).toVar(),h=V().toVar(),d=V().toVar(),m=V().toVar();return m.assign(o),Xe(o.greaterThan(0),()=>{d.assign(u.div(o))}).Else(()=>{d.assign(0)}),Xe(d.lessThanEqual(0),()=>{h.assign(0)}).Else(()=>{Xe(t.greaterThanEqual(o),()=>{h.assign(n.sub(i).div(u))}).ElseIf(n.greaterThanEqual(o),()=>{h.assign(Pn(2,i.sub(t).div(u)))}).Else(()=>{h.assign(Pn(4,t.sub(n).div(u)))}),h.mulAssign(1/6),Xe(h.lessThan(0),()=>{h.addAssign(1)})}),ne(h,d,m)}).setLayout({name:"mx_rgbtohsv",type:"vec3",inputs:[{name:"c",type:"vec3"}]}),lk=re(([r])=>{const e=ne(r).toVar(),t=pp(wp(e,ne(.04045))).toVar(),n=ne(e.div(12.92)).toVar(),i=ne(hi(yn(e.add(ne(.055)),ne(0)).div(1.055),ne(2.4))).toVar();return Bt(n,i,t)}).setLayout({name:"mx_srgb_texture_to_lin_rec709",type:"vec3",inputs:[{name:"color",type:"vec3"}]}),B_=(r,e)=>{r=V(r),e=V(e);const t=ve(e.dFdx(),e.dFdy()).length().mul(.7071067811865476);return ms(r.sub(t),r.add(t),e)},D_=(r,e,t,n)=>Bt(r,e,t[n].clamp()),uk=(r,e,t=Xt())=>D_(r,e,t,"x"),ck=(r,e,t=Xt())=>D_(r,e,t,"y"),hk=(r,e,t,n,i=Xt())=>{const s=i.x.clamp(),o=i.y.clamp(),u=Bt(r,e,s),h=Bt(t,n,s);return Bt(u,h,o)},F_=(r,e,t,n,i)=>Bt(r,e,B_(t,n[i])),fk=(r,e,t,n=Xt())=>F_(r,e,t,n,"x"),dk=(r,e,t,n=Xt())=>F_(r,e,t,n,"y"),pk=(r=1,e=0,t=Xt())=>t.mul(r).add(e),mk=(r,e=1)=>(r=V(r),r.abs().pow(e).mul(r.sign())),gk=(r,e=1,t=.5)=>V(r).sub(t).mul(e).add(t),yk=(r=Xt(),e=1,t=0)=>M3(r.convert("vec2|vec3")).mul(e).add(t),vk=(r=Xt(),e=1,t=0)=>Uu(r.convert("vec2|vec3")).mul(e).add(t),_k=(r=Xt(),e=1,t=0)=>(r=r.convert("vec2|vec3"),Ve(Uu(r),M3(r.add(ve(19,73)))).mul(e).add(t)),xk=(r,e=Xt(),t=ve(1,1),n=ve(0,0),i=1,s=0,o=1,u=!1,h=1,d=2,m=.5)=>sk(r,e.convert("vec2|vec3"),t,n,i,s,o,u,h,d,m),bk=(r,e=Xt(),t=ve(1,1),n=ve(0,0),i=1,s=0,o=1,u=!1,h=1,d=2,m=.5)=>ok(r,e.convert("vec2|vec3"),t,n,i,s,o,u,h,d,m),Tk=(r=Xt(),e=1)=>tk(r.convert("vec2|vec3"),e,Q(1)),wk=(r=Xt(),e=1)=>rk(r.convert("vec2|vec3"),e,Q(1)),Sk=(r=Xt(),e=1)=>E3(r.convert("vec2|vec3"),e,Q(1)),Mk=(r=Xt())=>VU(r.convert("vec2|vec3")),Ek=(r=Xt(),e=3,t=2,n=.5,i=1)=>d1(r,Q(e),t,n).mul(i),Nk=(r=Xt(),e=3,t=2,n=.5,i=1)=>WU(r,Q(e),t,n).mul(i),Rk=(r=Xt(),e=3,t=2,n=.5,i=1)=>t2(r,Q(e),t,n).mul(i),Ck=(r=Xt(),e=3,t=2,n=.5,i=1)=>QU(r,Q(e),t,n).mul(i),Pk=(r,e=V(0))=>Pn(r,e),Bk=(r,e=V(0))=>bt(r,e),Dk=(r,e=V(1))=>tt(r,e),Fk=(r,e=V(1))=>Zr(r,e),Lk=(r,e=V(1))=>Nu(r,e),Ik=(r,e=V(1))=>hi(r,e),qk=(r=V(0),e=V(1))=>O1(r,e),Ok=()=>QA,Uk=()=>Wv,kk=(r,e=V(1))=>bt(e,r),Gk=(r,e,t,n)=>r.greaterThan(e).mix(t,n),Vk=(r,e,t,n)=>r.greaterThanEqual(e).mix(t,n),zk=(r,e,t,n)=>r.equal(e).mix(t,n),$k=(r,e=null)=>{if(typeof e=="string"){const t={x:0,r:0,y:1,g:1,z:2,b:2,w:3,a:3},n=e.replace(/^out/,"").toLowerCase();if(t[n]!==void 0)return r.element(t[n])}if(typeof e=="number")return r.element(e);if(typeof e=="string"&&e.length===1){const t={x:0,r:0,y:1,g:1,z:2,b:2,w:3,a:3};if(t[e]!==void 0)return r.element(t[e])}return r},Hk=(r,e=ve(.5,.5),t=ve(1,1),n=V(0),i=ve(0,0))=>{let s=r;if(e&&(s=s.sub(e)),t&&(s=s.mul(t)),n){const o=n.mul(Math.PI/180),u=o.cos(),h=o.sin();s=ve(s.x.mul(u).sub(s.y.mul(h)),s.x.mul(h).add(s.y.mul(u)))}return e&&(s=s.add(e)),i&&(s=s.add(i)),s},jk=(r,e)=>{r=ve(r),e=V(e);const t=e.mul(Math.PI/180);return Lu(r,t)},Wk=(r,e,t)=>{r=ne(r),e=V(e),t=ne(t);const n=e.mul(Math.PI/180),i=t.normalize(),s=n.cos(),o=n.sin(),u=V(1).sub(s);return r.mul(s).add(i.cross(r).mul(o)).add(i.mul(i.dot(r)).mul(u))},Qk=(r,e)=>(r=ne(r),e=V(e),Kp(r,e)),Xk=re(([r,e,t])=>{const n=Xs(r).toVar(),i=bt(V(.5).mul(e.sub(t)),fs).div(n).toVar(),s=bt(V(-.5).mul(e.sub(t)),fs).div(n).toVar(),o=ne().toVar();o.x=n.x.greaterThan(V(0)).select(i.x,s.x),o.y=n.y.greaterThan(V(0)).select(i.y,s.y),o.z=n.z.greaterThan(V(0)).select(i.z,s.z);const u=Lr(o.x,o.y,o.z).toVar();return fs.add(n.mul(u)).toVar().sub(t)}),L_=re(([r,e])=>{const t=r.x,n=r.y,i=r.z;let s=e.element(0).mul(.886227);return s=s.add(e.element(1).mul(2*.511664).mul(n)),s=s.add(e.element(2).mul(2*.511664).mul(i)),s=s.add(e.element(3).mul(2*.511664).mul(t)),s=s.add(e.element(4).mul(2*.429043).mul(t).mul(n)),s=s.add(e.element(5).mul(2*.429043).mul(n).mul(i)),s=s.add(e.element(6).mul(i.mul(i).mul(.743125).sub(.247708))),s=s.add(e.element(7).mul(2*.429043).mul(t).mul(i)),s=s.add(e.element(8).mul(.429043).mul(tt(t,t).sub(tt(n,n)))),s});var E=Object.freeze({__proto__:null,BRDF_GGX:ld,BRDF_Lambert:Ma,BasicPointShadowFilter:T_,BasicShadowFilter:p_,Break:Av,Const:P9,Continue:tF,DFGApprox:l3,D_GGX:Ev,Discard:W9,EPSILON:J8,F_Schlick:kA,Fn:re,INFINITY:RB,If:Xe,Loop:Ht,NodeAccess:Jn,NodeShaderStage:Ll,NodeType:ZP,NodeUpdateType:lt,OnMaterialUpdate:lq,OnObjectUpdate:Aq,PCFShadowFilter:m_,PCFSoftShadowFilter:g_,PI:A1,PI2:CB,PointShadowFilter:w_,Return:jB,Schlick_to_F0:Rv,ScriptableNodeResources:fc,ShaderNode:vA,Stack:P1,Switch:_B,TBNViewMatrix:da,VSMShadowFilter:y_,V_GGX_SmithCorrelated:Mv,Var:C9,VarIntent:B9,abs:nn,acesFilmicToneMapping:o_,acos:Ep,add:Pn,addMethodChaining:de,addNodeElement:XB,agxToneMapping:a_,all:e9,alphaT:s1,and:O8,anisotropy:yo,anisotropyB:va,anisotropyT:Wl,any:t9,append:wB,array:P8,arrayBuffer:bB,asin:s9,assign:B8,atan:O1,atan2:M9,atomicAdd:dO,atomicAnd:yO,atomicFunc:ws,atomicLoad:hO,atomicMax:mO,atomicMin:gO,atomicOr:vO,atomicStore:fO,atomicSub:pO,atomicXor:_O,attenuationColor:_p,attenuationDistance:vp,attribute:Ks,attributeArray:cq,backgroundBlurriness:Kv,backgroundIntensity:pd,backgroundRotation:Zv,batch:sv,bentNormalView:Ty,billboarding:HI,bitAnd:V8,bitNot:z8,bitOr:$8,bitXor:H8,bitangentGeometry:FD,bitangentLocal:LD,bitangentView:xy,bitangentWorld:ID,bitcast:SI,blendBurn:dv,blendColor:yF,blendDodge:pv,blendOverlay:gv,blendScreen:mv,blur:Lv,bool:yi,buffer:Pu,bufferAttribute:Cu,builtin:eo,bumpMap:Kp,burn:_F,bvec2:x8,bvec3:pp,bvec4:S8,bypass:z9,cache:Xl,call:D8,cameraFar:xo,cameraIndex:Uo,cameraNear:_o,cameraNormalMatrix:lD,cameraPosition:J9,cameraProjectionMatrix:HA,cameraProjectionMatrixInverse:aD,cameraViewMatrix:wi,cameraViewport:uD,cameraWorldMatrix:AD,cbrt:x9,cdl:Eq,ceil:q1,checker:fU,cineonToneMapping:s_,clamp:vi,clearcoat:i1,clearcoatNormalView:fa,clearcoatRoughness:yu,code:K1,color:v8,colorSpaceToWorking:G1,colorToDirection:CF,compute:V9,computeKernel:kp,computeSkinning:JD,context:Ru,convert:E8,convertColorSpace:qB,convertToTexture:rq,cos:Bs,cross:k1,cubeTexture:UA,cubeTextureBase:Yp,cubeToUV:Bi,dFdx:Np,dFdy:Rp,dashSize:sc,debug:X9,decrement:K8,decrementBefore:X8,defaultBuildStages:Xf,defaultShaderStages:f8,defined:du,degrees:r9,deltaTime:OI,densityFog:Xq,densityFogFactor:y3,depth:s3,depthPass:Bq,determinant:h9,difference:g9,diffuseColor:Ft,directPointLight:M_,directionToColor:vv,directionToFaceDirection:jA,dispersion:xp,distance:m9,div:Zr,dodge:xF,dot:Oo,drawIndex:nv,dynamicBufferAttribute:G9,element:M8,emissive:Jf,equal:Tp,equals:d9,equirectUV:o3,exp:Sp,exp2:qA,expression:Ys,faceDirection:Wp,faceForward:Lp,faceforward:PB,float:V,floatBitsToInt:MI,floatBitsToUint:EI,floor:cs,fog:xu,fract:Js,frameGroup:C8,frameId:Wv,frontFacing:ry,fwidth:u9,gain:PI,gapSize:ed,getConstNodeType:y8,getCurrentStack:C1,getDirection:Dv,getDistanceAttenuation:S3,getGeometryRoughness:Sv,getNormalFromDepth:sq,getParallaxCorrectNormal:Xk,getRoughness:A3,getScreenPosition:iq,getShIrradianceAt:L_,getShadowMaterial:v_,getShadowRenderObjectFunction:__,getTextureIndex:Hv,getViewPosition:cA,globalId:tO,glsl:Gq,glslFn:Vq,grayscale:Tq,greaterThan:wp,greaterThanEqual:q8,hash:CI,highpModelNormalViewMatrix:rd,highpModelViewMatrix:nd,hue:Mq,increment:Y8,incrementBefore:Q8,instance:jD,instanceIndex:Po,instancedArray:hq,instancedBufferAttribute:l1,instancedDynamicBufferAttribute:td,instancedMesh:iv,int:Q,intBitsToFloat:NI,inverse:f9,inverseSqrt:Mp,inversesqrt:BB,invocationLocalIndex:HD,invocationSubgroupIndex:$D,ior:Ql,iridescence:F1,iridescenceIOR:mp,iridescenceThickness:gp,ivec2:On,ivec3:b8,ivec4:T8,js:Uq,label:R9,length:hs,lengthSq:Bp,lessThan:L8,lessThanEqual:I8,lightPosition:_3,lightProjectionUV:f_,lightShadowMatrix:J1,lightTargetDirection:b3,lightTargetPosition:d_,lightViewPosition:x3,lightingContext:uv,lights:QO,linearDepth:c1,linearToneMapping:r_,localId:nO,log:I1,log2:us,logarithmicDepthToViewZ:uF,luminance:m3,mat2:B1,mat3:fr,mat4:ya,matcapUV:Ov,materialAO:ev,materialAlphaTest:wy,materialAnisotropy:Uy,materialAnisotropyVector:uA,materialAttenuationColor:Wy,materialAttenuationDistance:jy,materialClearcoat:Dy,materialClearcoatNormal:Ly,materialClearcoatRoughness:Fy,materialColor:Sy,materialDispersion:Jy,materialEmissive:Ey,materialEnvIntensity:Ac,materialEnvRotation:Xp,materialIOR:Hy,materialIridescence:ky,materialIridescenceIOR:Gy,materialIridescenceThickness:Vy,materialLightMap:Jp,materialLineDashOffset:Ky,materialLineDashSize:Xy,materialLineGapSize:Yy,materialLineScale:Qy,materialLineWidth:VD,materialMetalness:Py,materialNormal:By,materialOpacity:Zp,materialPointSize:Zy,materialReference:Is,materialReflectivity:lc,materialRefractionRatio:ay,materialRotation:Iy,materialRoughness:Cy,materialSheen:qy,materialSheenRoughness:Oy,materialShininess:My,materialSpecular:Ny,materialSpecularColor:Ry,materialSpecularIntensity:Ad,materialSpecularStrength:Yl,materialThickness:$y,materialTransmission:zy,max:yn,maxMipLevel:Gp,mediumpModelViewMatrix:ny,metalness:gu,min:Lr,mix:Bt,mixElement:T9,mod:Nu,modInt:Z8,modelDirection:mD,modelNormalMatrix:ty,modelPosition:gD,modelRadius:_D,modelScale:yD,modelViewMatrix:Ca,modelViewPosition:vD,modelViewProjection:e3,modelWorldMatrix:fi,modelWorldMatrixInverse:xD,morphReference:lv,mrt:jv,mul:tt,mx_aastep:B_,mx_add:Pk,mx_atan2:qk,mx_cell_noise_float:Mk,mx_contrast:gk,mx_divide:Fk,mx_fractal_noise_float:Ek,mx_fractal_noise_vec2:Nk,mx_fractal_noise_vec3:Rk,mx_fractal_noise_vec4:Ck,mx_frame:Uk,mx_heighttonormal:Qk,mx_hsvtorgb:ak,mx_ifequal:zk,mx_ifgreater:Gk,mx_ifgreatereq:Vk,mx_invert:kk,mx_modulo:Lk,mx_multiply:Dk,mx_noise_float:yk,mx_noise_vec3:vk,mx_noise_vec4:_k,mx_place2d:Hk,mx_power:Ik,mx_ramp4:hk,mx_ramplr:uk,mx_ramptb:ck,mx_rgbtohsv:Ak,mx_rotate2d:jk,mx_rotate3d:Wk,mx_safepower:mk,mx_separate:$k,mx_splitlr:fk,mx_splittb:dk,mx_srgb_texture_to_lin_rec709:lk,mx_subtract:Bk,mx_timer:Ok,mx_transform_uv:pk,mx_unifiednoise2d:xk,mx_unifiednoise3d:bk,mx_worley_noise_float:Tk,mx_worley_noise_vec2:wk,mx_worley_noise_vec3:Sk,negate:o9,neutralToneMapping:A_,nodeArray:ga,nodeImmutable:Ce,nodeObject:pe,nodeObjectIntent:Il,nodeObjects:R1,nodeProxy:Ke,nodeProxyIntent:Ee,normalFlat:iy,normalGeometry:V1,normalLocal:Ir,normalMap:ad,normalView:$t,normalViewGeometry:OA,normalWorld:ko,normalWorldGeometry:sy,normalize:Xs,not:k8,notEqual:F8,numWorkgroups:Jq,objectDirection:cD,objectGroup:bp,objectPosition:ey,objectRadius:pD,objectScale:fD,objectViewPosition:dD,objectWorldMatrix:hD,oneMinus:a9,or:U8,orthographicDepthToViewZ:lF,oscSawtooth:VI,oscSine:UI,oscSquare:kI,oscTriangle:GI,output:MA,outputStruct:TI,overlay:TF,overloadingFn:rr,parabola:dd,parallaxDirection:by,parallaxUV:qD,parameter:gI,pass:Cq,passTexture:Pq,pcurve:BI,perspectiveDepthToViewZ:r3,pmremTexture:f3,pointShadow:S_,pointUV:dq,pointWidth:SB,positionGeometry:Du,positionLocal:Tn,positionPrevious:u1,positionView:wn,positionViewDirection:An,positionWorld:fs,positionWorldDirection:jp,posterize:Rq,pow:hi,pow2:Pp,pow3:y9,pow4:v9,premultiplyAlpha:yv,property:Gs,quadBroadcast:HO,quadSwapDiagonal:UO,quadSwapX:qO,quadSwapY:OO,radians:n9,rand:b9,range:Kq,rangeFog:Qq,rangeFogFactor:g3,reciprocal:l9,reference:Kt,referenceBuffer:id,reflect:p9,reflectVector:uy,reflectView:Ay,reflector:ZI,refract:Fp,refractVector:cy,refractView:ly,reinhardToneMapping:i_,remap:H9,remapClamp:j9,renderGroup:ke,renderOutput:Q9,rendererReference:O9,rotate:Lu,rotateUV:zI,roughness:os,round:A9,rtt:Xv,sRGBTransferEOTF:F9,sRGBTransferOETF:L9,sample:aq,sampler:eD,samplerComparison:tD,saturate:Dp,saturation:wq,screen:bF,screenCoordinate:Bu,screenDPR:K9,screenSize:Sa,screenUV:Vs,scriptable:Wq,scriptableValue:hc,select:jn,setCurrentStack:pu,setName:Ip,shaderStages:Yf,shadow:b_,shadowPositionWorld:w3,shapeCircle:dU,sharedUniformGroup:L1,sheen:ha,sheenRoughness:D1,shiftLeft:j8,shiftRight:W8,shininess:o1,sign:_u,sin:Qr,sinc:DI,skinning:av,smoothstep:ms,smoothstepElement:w9,specularColor:Er,specularF90:vu,spherizeUV:$I,split:TB,spritesheetUV:QI,sqrt:bs,stack:uc,step:U1,stepElement:S9,storage:_a,storageBarrier:oO,storageObject:ZD,storageTexture:Jv,string:xB,struct:bI,sub:bt,subBuild:EA,subgroupAdd:TO,subgroupAll:FO,subgroupAnd:RO,subgroupAny:LO,subgroupBallot:bO,subgroupBroadcast:kO,subgroupBroadcastFirst:IO,subgroupElect:xO,subgroupExclusiveAdd:SO,subgroupExclusiveMul:NO,subgroupInclusiveAdd:wO,subgroupInclusiveMul:EO,subgroupIndex:zD,subgroupMax:DO,subgroupMin:BO,subgroupMul:MO,subgroupOr:CO,subgroupShuffle:GO,subgroupShuffleDown:$O,subgroupShuffleUp:zO,subgroupShuffleXor:VO,subgroupSize:rO,subgroupXor:PO,tan:i9,tangentGeometry:$1,tangentLocal:Fu,tangentView:H1,tangentWorld:_y,texture:xt,texture3D:e_,textureBarrier:aO,textureBicubic:JF,textureBicubicLevel:u3,textureCubeUV:Fv,textureLoad:_n,textureSize:Co,textureStore:mq,thickness:yp,time:QA,toneMapping:U9,toneMappingExposure:k9,toonOutlinePass:Fq,transformDirection:_9,transformNormal:oy,transformNormalToView:Qp,transformedClearcoatNormalView:SD,transformedNormalView:TD,transformedNormalWorld:wD,transmission:a1,transpose:c9,triNoise3D:LI,triplanarTexture:XI,triplanarTextures:Qv,trunc:Cp,uint:Fe,uintBitsToFloat:RI,uniform:Ge,uniformArray:cr,uniformCubeTexture:ED,uniformFlow:N9,uniformGroup:R8,uniformTexture:JB,unpremultiplyAlpha:vF,userData:_q,uv:Xt,uvec2:_8,uvec3:$A,uvec4:w8,varying:Ts,varyingProperty:mu,vec2:ve,vec3:ne,vec4:Ve,vectorComponents:Na,velocity:bq,vertexColor:fv,vertexIndex:tv,vertexStage:D9,vibrance:Sq,viewZToLogarithmicDepth:i3,viewZToOrthographicDepth:NA,viewZToPerspectiveDepth:cv,viewport:$p,viewportCoordinate:Z9,viewportDepthTexture:n3,viewportLinearDepth:cF,viewportMipTexture:t3,viewportResolution:oD,viewportSafeUV:jI,viewportSharedTexture:RF,viewportSize:Hp,viewportTexture:aF,viewportUV:sD,wgsl:kq,wgslFn:zq,workgroupArray:uO,workgroupBarrier:sO,workgroupId:eO,workingToColorSpace:I9,xor:G8});const Ei=new d3;class Yk extends Go{constructor(e,t){super(),this.renderer=e,this.nodes=t}update(e,t,n){const i=this.renderer,s=this.nodes.getBackgroundNode(e)||e.background;let o=!1;if(s===null)i._clearColor.getRGB(Ei),Ei.a=i._clearColor.a;else if(s.isColor===!0)s.getRGB(Ei),Ei.a=1,o=!0;else if(s.isNode===!0){const h=this.get(e),d=s;Ei.copy(i._clearColor);let m=h.backgroundMesh;if(m===void 0){let M=function(){s.removeEventListener("dispose",M),m.material.dispose(),m.geometry.dispose()};const x=Ru(Ve(d).mul(pd),{getUV:()=>Zv.mul(sy),getTextureLevel:()=>Kv});let b=e3;b=b.setZ(b.w);const T=new Mn;T.name="Background.material",T.side=Tr,T.depthTest=!1,T.depthWrite=!1,T.allowOverride=!1,T.fog=!1,T.lights=!1,T.vertexNode=b,T.colorNode=x,h.backgroundMeshNode=x,h.backgroundMesh=m=new Sn(new Ea(1,32,32),T),m.frustumCulled=!1,m.name="Background.mesh",m.onBeforeRender=function(N,C,B){this.matrixWorld.copyPosition(B.matrixWorld)},s.addEventListener("dispose",M)}const y=d.getCacheKey();h.backgroundCacheKey!==y&&(h.backgroundMeshNode.node=Ve(d).mul(pd),h.backgroundMeshNode.needsUpdate=!0,m.material.needsUpdate=!0,h.backgroundCacheKey=y),t.unshift(m,m.geometry,m.material,0,0,null,null)}else console.error("THREE.Renderer: Unsupported background configuration.",s);const u=i.xr.getEnvironmentBlendMode();if(u==="additive"?Ei.set(0,0,0,1):u==="alpha-blend"&&Ei.set(0,0,0,0),i.autoClear===!0||o===!0){const h=n.clearColorValue;h.r=Ei.r,h.g=Ei.g,h.b=Ei.b,h.a=Ei.a,(i.backend.isWebGLBackend===!0||i.alpha===!0)&&(h.r*=h.a,h.g*=h.a,h.b*=h.a),n.depthClearValue=i._clearDepth,n.stencilClearValue=i._clearStencil,n.clearColor=i.autoClearColor===!0,n.clearDepth=i.autoClearDepth===!0,n.clearStencil=i.autoClearStencil===!0}else n.clearColor=!1,n.clearDepth=!1,n.clearStencil=!1}}let Kk=0;class md{constructor(e="",t=[],n=0,i=[]){this.name=e,this.bindings=t,this.index=n,this.bindingsReference=i,this.id=Kk++}}class Zk{constructor(e,t,n,i,s,o,u,h,d,m=[]){this.vertexShader=e,this.fragmentShader=t,this.computeShader=n,this.transforms=m,this.nodeAttributes=i,this.bindings=s,this.updateNodes=o,this.updateBeforeNodes=u,this.updateAfterNodes=h,this.observer=d,this.usedTimes=0}createBindings(){const e=[];for(const t of this.bindings)if(t.bindings[0].groupNode.shared!==!0){const i=new md(t.name,[],t.index,t.bindingsReference);e.push(i);for(const s of t.bindings)i.bindings.push(s.clone())}else e.push(t);return e}}class tg{constructor(e,t,n=null){this.isNodeAttribute=!0,this.name=e,this.type=t,this.node=n}}class Jk{constructor(e,t,n){this.isNodeUniform=!0,this.name=e,this.type=t,this.node=n}get value(){return this.node.value}set value(e){this.node.value=e}get id(){return this.node.id}get groupNode(){return this.node.groupNode}}class I_{constructor(e,t,n=!1,i=null){this.isNodeVar=!0,this.name=e,this.type=t,this.readOnly=n,this.count=i}}class eG extends I_{constructor(e,t,n=null,i=null){super(e,t),this.needsInterpolation=!1,this.isNodeVarying=!0,this.interpolationType=n,this.interpolationSampling=i}}class tG{constructor(e,t,n=""){this.name=e,this.type=t,this.code=n,Object.defineProperty(this,"isNodeCode",{value:!0})}}let nG=0;class _h{constructor(e=null){this.id=nG++,this.nodesData=new WeakMap,this.parent=e}getData(e){let t=this.nodesData.get(e);return t===void 0&&this.parent!==null&&(t=this.parent.getData(e)),t}setData(e,t){this.nodesData.set(e,t)}}class rG{constructor(e,t){this.name=e,this.members=t,this.output=!1}}class Vo{constructor(e,t){this.name=e,this.value=t,this.boundary=0,this.itemSize=0,this.offset=0}setValue(e){this.value=e}getValue(){return this.value}}class iG extends Vo{constructor(e,t=0){super(e,t),this.isNumberUniform=!0,this.boundary=4,this.itemSize=1}}class sG extends Vo{constructor(e,t=new Ot){super(e,t),this.isVector2Uniform=!0,this.boundary=8,this.itemSize=2}}class oG extends Vo{constructor(e,t=new Re){super(e,t),this.isVector3Uniform=!0,this.boundary=16,this.itemSize=3}}class aG extends Vo{constructor(e,t=new Ut){super(e,t),this.isVector4Uniform=!0,this.boundary=16,this.itemSize=4}}class AG extends Vo{constructor(e,t=new Un){super(e,t),this.isColorUniform=!0,this.boundary=16,this.itemSize=3}}class lG extends Vo{constructor(e,t=new F6){super(e,t),this.isMatrix2Uniform=!0,this.boundary=8,this.itemSize=4}}class uG extends Vo{constructor(e,t=new Tu){super(e,t),this.isMatrix3Uniform=!0,this.boundary=48,this.itemSize=12}}class cG extends Vo{constructor(e,t=new mn){super(e,t),this.isMatrix4Uniform=!0,this.boundary=64,this.itemSize=16}}class hG extends iG{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class fG extends sG{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class dG extends oG{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class pG extends aG{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class mG extends AG{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class gG extends lG{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class yG extends uG{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class vG extends cG{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}const ng=new WeakMap,_G=new Map([[Int8Array,"int"],[Int16Array,"int"],[Int32Array,"int"],[Uint8Array,"uint"],[Uint16Array,"uint"],[Uint32Array,"uint"],[Float32Array,"float"]]),N0=r=>/e/g.test(r)?String(r).replace(/\+/g,""):(r=Number(r),r+(r%1?"":".0"));class q_{constructor(e,t,n){this.object=e,this.material=e&&e.material||null,this.geometry=e&&e.geometry||null,this.renderer=t,this.parser=n,this.scene=null,this.camera=null,this.nodes=[],this.sequentialNodes=[],this.updateNodes=[],this.updateBeforeNodes=[],this.updateAfterNodes=[],this.hashNodes={},this.observer=null,this.lightsNode=null,this.environmentNode=null,this.fogNode=null,this.clippingContext=null,this.vertexShader=null,this.fragmentShader=null,this.computeShader=null,this.flowNodes={vertex:[],fragment:[],compute:[]},this.flowCode={vertex:"",fragment:"",compute:""},this.uniforms={vertex:[],fragment:[],compute:[],index:0},this.structs={vertex:[],fragment:[],compute:[],index:0},this.types={vertex:[],fragment:[],compute:[],index:0},this.bindings={vertex:{},fragment:{},compute:{}},this.bindingsIndexes={},this.bindGroups=null,this.attributes=[],this.bufferAttributes=[],this.varyings=[],this.codes={},this.vars={},this.declarations={},this.flow={code:""},this.chaining=[],this.stack=uc(),this.stacks=[],this.tab="	",this.currentFunctionNode=null,this.context={material:this.material},this.cache=new _h,this.globalCache=this.cache,this.flowsData=new WeakMap,this.shaderStage=null,this.buildStage=null,this.subBuildLayers=[],this.currentStack=null,this.subBuildFn=null}getBindGroupsCache(){let e=ng.get(this.renderer);return e===void 0&&(e=new zi,ng.set(this.renderer,e)),e}createRenderTarget(e,t,n){return new qo(e,t,n)}createCubeRenderTarget(e,t){return new _v(e,t)}includes(e){return this.nodes.includes(e)}getOutputStructName(){}_getBindGroup(e,t){const n=this.getBindGroupsCache(),i=[];let s=!0;for(const u of t)i.push(u),s=s&&u.groupNode.shared!==!0;let o;return s?(o=n.get(i),o===void 0&&(o=new md(e,i,this.bindingsIndexes[e].group,i),n.set(i,o))):o=new md(e,i,this.bindingsIndexes[e].group,i),o}getBindGroupArray(e,t){const n=this.bindings[t];let i=n[e];return i===void 0&&(this.bindingsIndexes[e]===void 0&&(this.bindingsIndexes[e]={binding:0,group:Object.keys(this.bindingsIndexes).length}),n[e]=i=[]),i}getBindings(){let e=this.bindGroups;if(e===null){const t={},n=this.bindings;for(const i of Yf)for(const s in n[i]){const o=n[i][s];(t[s]||(t[s]=[])).push(...o)}e=[];for(const i in t){const s=t[i],o=this._getBindGroup(i,s);e.push(o)}this.bindGroups=e}return e}sortBindingGroups(){const e=this.getBindings();e.sort((t,n)=>t.bindings[0].groupNode.order-n.bindings[0].groupNode.order);for(let t=0;t<e.length;t++){const n=e[t];this.bindingsIndexes[n.name].group=t,n.index=t}}setHashNode(e,t){this.hashNodes[t]=e}addNode(e){this.nodes.includes(e)===!1&&(this.nodes.push(e),this.setHashNode(e,e.getHash(this)))}addSequentialNode(e){this.sequentialNodes.includes(e)===!1&&this.sequentialNodes.push(e)}buildUpdateNodes(){for(const e of this.nodes)e.getUpdateType()!==lt.NONE&&this.updateNodes.push(e);for(const e of this.sequentialNodes){const t=e.getUpdateBeforeType(),n=e.getUpdateAfterType();t!==lt.NONE&&this.updateBeforeNodes.push(e),n!==lt.NONE&&this.updateAfterNodes.push(e)}}get currentNode(){return this.chaining[this.chaining.length-1]}isFilteredTexture(e){return e.magFilter===zs||e.magFilter===Gh||e.magFilter===eu||e.magFilter===pa||e.minFilter===zs||e.minFilter===Gh||e.minFilter===eu||e.minFilter===pa}addChain(e){this.chaining.push(e)}removeChain(e){if(this.chaining.pop()!==e)throw new Error("NodeBuilder: Invalid node chaining!")}getMethod(e){return e}getTernary(){return null}getNodeFromHash(e){return this.hashNodes[e]}addFlow(e,t){return this.flowNodes[e].push(t),t}setContext(e){this.context=e}getContext(){return this.context}getSharedContext(){return{...this.context},this.context}setCache(e){this.cache=e}getCache(){return this.cache}getCacheFromNode(e,t=!0){const n=this.getDataFromNode(e);return n.cache===void 0&&(n.cache=new _h(t?this.getCache():null)),n.cache}isAvailable(){return!1}getVertexIndex(){console.warn("Abstract function.")}getInstanceIndex(){console.warn("Abstract function.")}getDrawIndex(){console.warn("Abstract function.")}getFrontFacing(){console.warn("Abstract function.")}getFragCoord(){console.warn("Abstract function.")}isFlipY(){return!1}increaseUsage(e){const t=this.getDataFromNode(e);return t.usageCount=t.usageCount===void 0?1:t.usageCount+1,t.usageCount}generateTexture(){console.warn("Abstract function.")}generateTextureLod(){console.warn("Abstract function.")}generateArrayDeclaration(e,t){return this.getType(e)+"[ "+t+" ]"}generateArray(e,t,n=null){let i=this.generateArrayDeclaration(e,t)+"( ";for(let s=0;s<t;s++){const o=n?n[s]:null;o!==null?i+=o.build(this,e):i+=this.generateConst(e),s<t-1&&(i+=", ")}return i+=" )",i}generateStruct(e,t,n=null){const i=[];for(const s of t){const{name:o,type:u}=s;n&&n[o]&&n[o].isNode?i.push(n[o].build(this,u)):i.push(this.generateConst(u))}return e+"( "+i.join(", ")+" )"}generateConst(e,t=null){if(t===null&&(e==="float"||e==="int"||e==="uint"?t=0:e==="bool"?t=!1:e==="color"?t=new Un:e==="vec2"?t=new Ot:e==="vec3"?t=new Re:e==="vec4"&&(t=new Ut)),e==="float")return N0(t);if(e==="int")return`${Math.round(t)}`;if(e==="uint")return t>=0?`${Math.round(t)}u`:"0u";if(e==="bool")return t?"true":"false";if(e==="color")return`${this.getType("vec3")}( ${N0(t.r)}, ${N0(t.g)}, ${N0(t.b)} )`;const n=this.getTypeLength(e),i=this.getComponentType(e),s=o=>this.generateConst(i,o);if(n===2)return`${this.getType(e)}( ${s(t.x)}, ${s(t.y)} )`;if(n===3)return`${this.getType(e)}( ${s(t.x)}, ${s(t.y)}, ${s(t.z)} )`;if(n===4&&e!=="mat2")return`${this.getType(e)}( ${s(t.x)}, ${s(t.y)}, ${s(t.z)}, ${s(t.w)} )`;if(n>=4&&t&&(t.isMatrix2||t.isMatrix3||t.isMatrix4))return`${this.getType(e)}( ${t.elements.map(s).join(", ")} )`;if(n>4)return`${this.getType(e)}()`;throw new Error(`NodeBuilder: Type '${e}' not found in generate constant attempt.`)}getType(e){return e==="color"?"vec3":e}hasGeometryAttribute(e){return this.geometry&&this.geometry.getAttribute(e)!==void 0}getAttribute(e,t){const n=this.attributes;for(const s of n)if(s.name===e)return s;const i=new tg(e,t);return this.registerDeclaration(i),n.push(i),i}getPropertyName(e){return e.name}isVector(e){return/vec\d/.test(e)}isMatrix(e){return/mat\d/.test(e)}isReference(e){return e==="void"||e==="property"||e==="sampler"||e==="samplerComparison"||e==="texture"||e==="cubeTexture"||e==="storageTexture"||e==="depthTexture"||e==="texture3D"}needsToWorkingColorSpace(){return!1}getComponentTypeFromTexture(e){const t=e.type;if(e.isDataTexture){if(t===vr)return"int";if(t===In)return"uint"}return"float"}getElementType(e){return e==="mat2"?"vec2":e==="mat3"?"vec3":e==="mat4"?"vec4":this.getComponentType(e)}getComponentType(e){if(e=this.getVectorType(e),e==="float"||e==="bool"||e==="int"||e==="uint")return e;const t=/(b|i|u|)(vec|mat)([2-4])/.exec(e);return t===null?null:t[1]==="b"?"bool":t[1]==="i"?"int":t[1]==="u"?"uint":"float"}getVectorType(e){return e==="color"?"vec3":e==="texture"||e==="cubeTexture"||e==="storageTexture"||e==="texture3D"?"vec4":e}getTypeFromLength(e,t="float"){if(e===1)return t;let n=A8(e);const i=t==="float"?"":t[0];return/mat2/.test(t)===!0&&(n=n.replace("vec","mat")),i+n}getTypeFromArray(e){return _G.get(e.constructor)}isInteger(e){return/int|uint|(i|u)vec/.test(e)}getTypeFromAttribute(e){let t=e;e.isInterleavedBufferAttribute&&(t=e.data);const n=t.array,i=e.itemSize,s=e.normalized;let o;return!(e instanceof L6)&&s!==!0&&(o=this.getTypeFromArray(n)),this.getTypeFromLength(i,o)}getTypeLength(e){const t=this.getVectorType(e),n=/vec([2-4])/.exec(t);return n!==null?Number(n[1]):t==="float"||t==="bool"||t==="int"||t==="uint"?1:/mat2/.test(e)===!0?4:/mat3/.test(e)===!0?9:/mat4/.test(e)===!0?16:0}getVectorFromMatrix(e){return e.replace("mat","vec")}changeComponentType(e,t){return this.getTypeFromLength(this.getTypeLength(e),t)}getIntegerType(e){const t=this.getComponentType(e);return t==="int"||t==="uint"?e:this.changeComponentType(e,"int")}addStack(){this.stack=uc(this.stack);const e=C1();return this.stacks.push(e),pu(this.stack),this.stack}removeStack(){const e=this.stack;return this.stack=e.parent,pu(this.stacks.pop()),e}getDataFromNode(e,t=this.shaderStage,n=null){n=n===null?e.isGlobal(this)?this.globalCache:this.cache:n;let i=n.getData(e);i===void 0&&(i={},n.setData(e,i)),i[t]===void 0&&(i[t]={});let s=i[t];const o=i.any?i.any.subBuilds:null,u=this.getClosestSubBuild(o);return u&&(s.subBuildsCache===void 0&&(s.subBuildsCache={}),s=s.subBuildsCache[u]||(s.subBuildsCache[u]={}),s.subBuilds=o),s}getNodeProperties(e,t="any"){const n=this.getDataFromNode(e,t);return n.properties||(n.properties={outputNode:null})}getBufferAttributeFromNode(e,t){const n=this.getDataFromNode(e);let i=n.bufferAttribute;if(i===void 0){const s=this.uniforms.index++;i=new tg("nodeAttribute"+s,t,e),this.bufferAttributes.push(i),n.bufferAttribute=i}return i}getStructTypeNode(e,t=this.shaderStage){return this.types[t][e]||null}getStructTypeFromNode(e,t,n=null,i=this.shaderStage){const s=this.getDataFromNode(e,i,this.globalCache);let o=s.structType;if(o===void 0){const u=this.structs.index++;n===null&&(n="StructType"+u),o=new rG(n,t),this.structs[i].push(o),this.types[i][n]=e,s.structType=o}return o}getOutputStructTypeFromNode(e,t){const n=this.getStructTypeFromNode(e,t,"OutputType","fragment");return n.output=!0,n}getUniformFromNode(e,t,n=this.shaderStage,i=null){const s=this.getDataFromNode(e,n,this.globalCache);let o=s.uniform;if(o===void 0){const u=this.uniforms.index++;o=new Jk(i||"nodeUniform"+u,t,e),this.uniforms[n].push(o),this.registerDeclaration(o),s.uniform=o}return o}getVarFromNode(e,t=null,n=e.getNodeType(this),i=this.shaderStage,s=!1){const o=this.getDataFromNode(e,i),u=this.getSubBuildProperty("variable",o.subBuilds);let h=o[u];if(h===void 0){const d=s?"_const":"_var",m=this.vars[i]||(this.vars[i]=[]),y=this.vars[d]||(this.vars[d]=0);t===null&&(t=(s?"nodeConst":"nodeVar")+y,this.vars[d]++),u!=="variable"&&(t=this.getSubBuildProperty(t,o.subBuilds));const x=e.getArrayCount(this);h=new I_(t,n,s,x),s||m.push(h),this.registerDeclaration(h),o[u]=h}return h}isDeterministic(e){if(e.isMathNode)return this.isDeterministic(e.aNode)&&(e.bNode?this.isDeterministic(e.bNode):!0)&&(e.cNode?this.isDeterministic(e.cNode):!0);if(e.isOperatorNode)return this.isDeterministic(e.aNode)&&(e.bNode?this.isDeterministic(e.bNode):!0);if(e.isArrayNode){if(e.values!==null){for(const t of e.values)if(!this.isDeterministic(t))return!1}return!0}else if(e.isConstNode)return!0;return!1}getVaryingFromNode(e,t=null,n=e.getNodeType(this),i=null,s=null){const o=this.getDataFromNode(e,"any"),u=this.getSubBuildProperty("varying",o.subBuilds);let h=o[u];if(h===void 0){const d=this.varyings,m=d.length;t===null&&(t="nodeVarying"+m),u!=="varying"&&(t=this.getSubBuildProperty(t,o.subBuilds)),h=new eG(t,n,i,s),d.push(h),this.registerDeclaration(h),o[u]=h}return h}registerDeclaration(e){const t=this.shaderStage,n=this.declarations[t]||(this.declarations[t]={}),i=this.getPropertyName(e);let s=1,o=i;for(;n[o]!==void 0;)o=i+"_"+s++;s>1&&(e.name=o,console.warn(`THREE.TSL: Declaration name '${i}' of '${e.type}' already in use. Renamed to '${o}'.`)),n[o]=e}getCodeFromNode(e,t,n=this.shaderStage){const i=this.getDataFromNode(e);let s=i.code;if(s===void 0){const o=this.codes[n]||(this.codes[n]=[]),u=o.length;s=new tG("nodeCode"+u,t),o.push(s),i.code=s}return s}addFlowCodeHierarchy(e,t){const{flowCodes:n,flowCodeBlock:i}=this.getDataFromNode(e);let s=!0,o=t;for(;o;){if(i.get(o)===!0){s=!1;break}o=this.getDataFromNode(o).parentNodeBlock}if(s)for(const u of n)this.addLineFlowCode(u)}addLineFlowCodeBlock(e,t,n){const i=this.getDataFromNode(e),s=i.flowCodes||(i.flowCodes=[]),o=i.flowCodeBlock||(i.flowCodeBlock=new WeakMap);s.push(t),o.set(n,!0)}addLineFlowCode(e,t=null){return e===""?this:(t!==null&&this.context.nodeBlock&&this.addLineFlowCodeBlock(t,e,this.context.nodeBlock),e=this.tab+e,/;\s*$/.test(e)||(e=e+`;
`),this.flow.code+=e,this)}addFlowCode(e){return this.flow.code+=e,this}addFlowTab(){return this.tab+="	",this}removeFlowTab(){return this.tab=this.tab.slice(0,-1),this}getFlowData(e){return this.flowsData.get(e)}flowNode(e){const t=e.getNodeType(this),n=this.flowChildNode(e,t);return this.flowsData.set(e,n),n}addInclude(e){this.currentFunctionNode!==null&&this.currentFunctionNode.includes.push(e)}buildFunctionNode(e){const t=new l_,n=this.currentFunctionNode;return this.currentFunctionNode=t,t.code=this.buildFunctionCode(e),this.currentFunctionNode=n,t}flowShaderNode(e){const t=e.layout,n={[Symbol.iterator](){let o=0;const u=Object.values(this);return{next:()=>({value:u[o],done:o++>=u.length})}}};for(const o of t.inputs)n[o.name]=new zv(o.type,o.name);e.layout=null;const i=e.call(n),s=this.flowStagesNode(i,t.type);return e.layout=t,s}flowBuildStage(e,t,n=null){const i=this.getBuildStage();this.setBuildStage(t);const s=e.build(this,n);return this.setBuildStage(i),s}flowStagesNode(e,t=null){const n=this.flow,i=this.vars,s=this.declarations,o=this.cache,u=this.buildStage,h=this.stack,d={code:""};this.flow=d,this.vars={},this.declarations={},this.cache=new _h,this.stack=uc();for(const m of Xf)this.setBuildStage(m),d.result=e.build(this,t);return d.vars=this.getVars(this.shaderStage),this.flow=n,this.vars=i,this.declarations=s,this.cache=o,this.stack=h,this.setBuildStage(u),d}getFunctionOperator(){return null}buildFunctionCode(){console.warn("Abstract function.")}flowChildNode(e,t=null){const n=this.flow,i={code:""};return this.flow=i,i.result=e.build(this,t),this.flow=n,i}flowNodeFromShaderStage(e,t,n=null,i=null){const s=this.tab,o=this.cache,u=this.shaderStage,h=this.context;this.setShaderStage(e);const d={...this.context};delete d.nodeBlock,this.cache=this.globalCache,this.tab="	",this.context=d;let m=null;if(this.buildStage==="generate"){const y=this.flowChildNode(t,n);i!==null&&(y.code+=`${this.tab+i} = ${y.result};
`),this.flowCode[e]=this.flowCode[e]+y.code,m=y}else m=t.build(this);return this.setShaderStage(u),this.cache=o,this.tab=s,this.context=h,m}getAttributesArray(){return this.attributes.concat(this.bufferAttributes)}getAttributes(){console.warn("Abstract function.")}getVaryings(){console.warn("Abstract function.")}getVar(e,t,n=null){return`${n!==null?this.generateArrayDeclaration(e,n):this.getType(e)} ${t}`}getVars(e){let t="";const n=this.vars[e];if(n!==void 0)for(const i of n)t+=`${this.getVar(i.type,i.name)}; `;return t}getUniforms(){console.warn("Abstract function.")}getCodes(e){const t=this.codes[e];let n="";if(t!==void 0)for(const i of t)n+=i.code+`
`;return n}getHash(){return this.vertexShader+this.fragmentShader+this.computeShader}setShaderStage(e){this.shaderStage=e}getShaderStage(){return this.shaderStage}setBuildStage(e){this.buildStage=e}getBuildStage(){return this.buildStage}buildCode(){console.warn("Abstract function.")}get subBuild(){return this.subBuildLayers[this.subBuildLayers.length-1]||null}addSubBuild(e){this.subBuildLayers.push(e)}removeSubBuild(){return this.subBuildLayers.pop()}getClosestSubBuild(e){let t;if(e&&e.isNode?e.isShaderCallNodeInternal?t=e.shaderNode.subBuilds:e.isStackNode?t=[e.subBuild]:t=this.getDataFromNode(e,"any").subBuilds:e instanceof Set?t=[...e]:t=e,!t)return null;const n=this.subBuildLayers;for(let i=t.length-1;i>=0;i--){const s=t[i];if(n.includes(s))return s}return null}getSubBuildOutput(e){return this.getSubBuildProperty("outputNode",e)}getSubBuildProperty(e="",t=null){let n;t!==null?n=this.getClosestSubBuild(t):n=this.subBuildFn;let i;return n?i=e?n+"_"+e:n:i=e,i}build(){const{object:e,material:t,renderer:n}=this;if(t!==null){let i=n.library.fromMaterial(t);i===null&&(console.error(`NodeMaterial: Material "${t.type}" is not compatible.`),i=new Mn),i.build(this)}else this.addFlow("compute",e);for(const i of Xf){this.setBuildStage(i),this.context.vertex&&this.context.vertex.isNode&&this.flowNodeFromShaderStage("vertex",this.context.vertex);for(const s of Yf){this.setShaderStage(s);const o=this.flowNodes[s];for(const u of o)i==="generate"?this.flowNode(u):u.build(this)}}return this.setBuildStage(null),this.setShaderStage(null),this.buildCode(),this.buildUpdateNodes(),this}getNodeUniform(e,t){if(t==="float"||t==="int"||t==="uint")return new hG(e);if(t==="vec2"||t==="ivec2"||t==="uvec2")return new fG(e);if(t==="vec3"||t==="ivec3"||t==="uvec3")return new dG(e);if(t==="vec4"||t==="ivec4"||t==="uvec4")return new pG(e);if(t==="color")return new mG(e);if(t==="mat2")return new gG(e);if(t==="mat3")return new yG(e);if(t==="mat4")return new vG(e);throw new Error(`Uniform "${t}" not declared.`)}format(e,t,n){if(t=this.getVectorType(t),n=this.getVectorType(n),t===n||n===null||this.isReference(n))return e;const i=this.getTypeLength(t),s=this.getTypeLength(n);return i===16&&s===9?`${this.getType(n)}( ${e}[ 0 ].xyz, ${e}[ 1 ].xyz, ${e}[ 2 ].xyz )`:i===9&&s===4?`${this.getType(n)}( ${e}[ 0 ].xy, ${e}[ 1 ].xy )`:i>4||s>4||s===0?e:i===s?`${this.getType(n)}( ${e} )`:i>s?(e=n==="bool"?`all( ${e} )`:`${e}.${"xyz".slice(0,s)}`,this.format(e,this.getTypeFromLength(s,this.getComponentType(t)),n)):s===4&&i>1?`${this.getType(n)}( ${this.format(e,t,"vec3")}, 1.0 )`:i===2?`${this.getType(n)}( ${this.format(e,t,"vec2")}, 0.0 )`:(i===1&&s>1&&t!==this.getComponentType(n)&&(e=`${this.getType(this.getComponentType(n))}( ${e} )`),`${this.getType(n)}( ${e} )`)}getSignature(){return`// Three.js r${e6} - Node System
`}}class rg{constructor(){this.time=0,this.deltaTime=0,this.frameId=0,this.renderId=0,this.updateMap=new WeakMap,this.updateBeforeMap=new WeakMap,this.updateAfterMap=new WeakMap,this.renderer=null,this.material=null,this.camera=null,this.object=null,this.scene=null}_getMaps(e,t){let n=e.get(t);return n===void 0&&(n={renderMap:new WeakMap,frameMap:new WeakMap},e.set(t,n)),n}updateBeforeNode(e){const t=e.getUpdateBeforeType(),n=e.updateReference(this);if(t===lt.FRAME){const{frameMap:i}=this._getMaps(this.updateBeforeMap,n);i.get(n)!==this.frameId&&e.updateBefore(this)!==!1&&i.set(n,this.frameId)}else if(t===lt.RENDER){const{renderMap:i}=this._getMaps(this.updateBeforeMap,n);i.get(n)!==this.renderId&&e.updateBefore(this)!==!1&&i.set(n,this.renderId)}else t===lt.OBJECT&&e.updateBefore(this)}updateAfterNode(e){const t=e.getUpdateAfterType(),n=e.updateReference(this);if(t===lt.FRAME){const{frameMap:i}=this._getMaps(this.updateAfterMap,n);i.get(n)!==this.frameId&&e.updateAfter(this)!==!1&&i.set(n,this.frameId)}else if(t===lt.RENDER){const{renderMap:i}=this._getMaps(this.updateAfterMap,n);i.get(n)!==this.renderId&&e.updateAfter(this)!==!1&&i.set(n,this.renderId)}else t===lt.OBJECT&&e.updateAfter(this)}updateNode(e){const t=e.getUpdateType(),n=e.updateReference(this);if(t===lt.FRAME){const{frameMap:i}=this._getMaps(this.updateMap,n);i.get(n)!==this.frameId&&e.update(this)!==!1&&i.set(n,this.frameId)}else if(t===lt.RENDER){const{renderMap:i}=this._getMaps(this.updateMap,n);i.get(n)!==this.renderId&&e.update(this)!==!1&&i.set(n,this.renderId)}else t===lt.OBJECT&&e.update(this)}update(){this.frameId++,this.lastTime===void 0&&(this.lastTime=performance.now()),this.deltaTime=(performance.now()-this.lastTime)/1e3,this.lastTime=performance.now(),this.time+=this.deltaTime}}class N3{constructor(e,t,n=null,i="",s=!1){this.type=e,this.name=t,this.count=n,this.qualifier=i,this.isConst=s}}N3.isNodeFunctionInput=!0;class xG extends Pa{static get type(){return"DirectionalLightNode"}constructor(e=null){super(e)}setupDirect(){const e=this.colorNode;return{lightDirection:b3(this.light),lightColor:e}}}const xh=new mn,R0=new mn;let bl=null;class bG extends Pa{static get type(){return"RectAreaLightNode"}constructor(e=null){super(e),this.halfHeight=Ge(new Re).setGroup(ke),this.halfWidth=Ge(new Re).setGroup(ke),this.updateType=lt.RENDER}update(e){super.update(e);const{light:t}=this,n=e.camera.matrixWorldInverse;R0.identity(),xh.copy(t.matrixWorld),xh.premultiply(n),R0.extractRotation(xh),this.halfWidth.value.set(t.width*.5,0,0),this.halfHeight.value.set(0,t.height*.5,0),this.halfWidth.value.applyMatrix4(R0),this.halfHeight.value.applyMatrix4(R0)}setupDirectRectArea(e){let t,n;e.isAvailable("float32Filterable")?(t=xt(bl.LTC_FLOAT_1),n=xt(bl.LTC_FLOAT_2)):(t=xt(bl.LTC_HALF_1),n=xt(bl.LTC_HALF_2));const{colorNode:i,light:s}=this,o=x3(s);return{lightColor:i,lightPosition:o,halfWidth:this.halfWidth,halfHeight:this.halfHeight,ltc_1:t,ltc_2:n}}static setLTC(e){bl=e}}class R3 extends Pa{static get type(){return"SpotLightNode"}constructor(e=null){super(e),this.coneCosNode=Ge(0).setGroup(ke),this.penumbraCosNode=Ge(0).setGroup(ke),this.cutoffDistanceNode=Ge(0).setGroup(ke),this.decayExponentNode=Ge(0).setGroup(ke),this.colorNode=Ge(this.color).setGroup(ke)}update(e){super.update(e);const{light:t}=this;this.coneCosNode.value=Math.cos(t.angle),this.penumbraCosNode.value=Math.cos(t.angle*(1-t.penumbra)),this.cutoffDistanceNode.value=t.distance,this.decayExponentNode.value=t.decay}getSpotAttenuation(e,t){const{coneCosNode:n,penumbraCosNode:i}=this;return ms(n,i,t)}getLightCoord(e){const t=e.getNodeProperties(this);let n=t.projectionUV;return n===void 0&&(n=f_(this.light,e.context.positionWorld),t.projectionUV=n),n}setupDirect(e){const{colorNode:t,cutoffDistanceNode:n,decayExponentNode:i,light:s}=this,o=this.getLightVector(e),u=o.normalize(),h=u.dot(b3(s)),d=this.getSpotAttenuation(e,h),m=o.length(),y=S3({lightDistance:m,cutoffDistance:n,decayExponent:i});let x=t.mul(d).mul(y),b,T;return s.colorNode?(T=this.getLightCoord(e),b=s.colorNode(T)):s.map&&(T=this.getLightCoord(e),b=xt(s.map,T.xy).onRenderUpdate(()=>s.map)),b&&(x=T.mul(2).sub(1).abs().lessThan(1).all().select(x.mul(b),x)),{lightColor:x,lightDirection:u}}}class TG extends R3{static get type(){return"IESSpotLightNode"}getSpotAttenuation(e,t){const n=this.light.iesMap;let i=null;if(n&&n.isTexture===!0){const s=t.acos().mul(1/Math.PI);i=xt(n,ve(s,0),0).r}else i=super.getSpotAttenuation(t);return i}}const wG=re(([r,e])=>{const t=r.abs().sub(e);return hs(yn(t,0)).add(Lr(yn(t.x,t.y),0))});class SG extends R3{static get type(){return"ProjectorLightNode"}update(e){super.update(e);const t=this.light;if(this.penumbraCosNode.value=Math.min(Math.cos(t.angle*(1-t.penumbra)),.99999),t.aspect===null){let n=1;t.map!==null&&(n=t.map.width/t.map.height),t.shadow.aspect=n}else t.shadow.aspect=t.aspect}getSpotAttenuation(e){const t=V(0),n=this.penumbraCosNode,i=J1(this.light).mul(e.context.positionWorld||fs);return Xe(i.w.greaterThan(0),()=>{const s=i.xyz.div(i.w),o=wG(s.xy.sub(ve(.5)),ve(.5)),u=Zr(-1,bt(1,Ep(n)).sub(1));t.assign(Dp(o.mul(-2).mul(u)))}),t}}class MG extends Pa{static get type(){return"AmbientLightNode"}constructor(e=null){super(e)}setup({context:e}){e.irradiance.addAssign(this.colorNode)}}class EG extends Pa{static get type(){return"HemisphereLightNode"}constructor(e=null){super(e),this.lightPositionNode=_3(e),this.lightDirectionNode=this.lightPositionNode.normalize(),this.groundColorNode=Ge(new Un).setGroup(ke)}update(e){const{light:t}=this;super.update(e),this.lightPositionNode.object3d=t,this.groundColorNode.value.copy(t.groundColor).multiplyScalar(t.intensity)}setup(e){const{colorNode:t,groundColorNode:n,lightDirectionNode:i}=this,o=ko.dot(i).mul(.5).add(.5),u=Bt(n,t,o);e.context.irradiance.addAssign(u)}}class NG extends Pa{static get type(){return"LightProbeNode"}constructor(e=null){super(e);const t=[];for(let n=0;n<9;n++)t.push(new Re);this.lightProbe=cr(t)}update(e){const{light:t}=this;super.update(e);for(let n=0;n<9;n++)this.lightProbe.array[n].copy(t.sh.coefficients[n]).multiplyScalar(t.intensity)}setup(e){const t=L_(ko,this.lightProbe);e.context.irradiance.addAssign(t)}}class O_{parseFunction(){console.warn("Abstract function.")}}class C3{constructor(e,t,n="",i=""){this.type=e,this.inputs=t,this.name=n,this.precision=i}getCode(){console.warn("Abstract function.")}}C3.isNodeFunction=!0;const RG=/^\s*(highp|mediump|lowp)?\s*([a-z_0-9]+)\s*([a-z_0-9]+)?\s*\(([\s\S]*?)\)/i,CG=/[a-z_0-9]+/ig,ig="#pragma main",PG=r=>{r=r.trim();const e=r.indexOf(ig),t=e!==-1?r.slice(e+ig.length):r,n=t.match(RG);if(n!==null&&n.length===5){const i=n[4],s=[];let o=null;for(;(o=CG.exec(i))!==null;)s.push(o);const u=[];let h=0;for(;h<s.length;){const T=s[h][0]==="const";T===!0&&h++;let M=s[h][0];M==="in"||M==="out"||M==="inout"?h++:M="";const N=s[h++][0];let C=Number.parseInt(s[h][0]);Number.isNaN(C)===!1?h++:C=null;const B=s[h++][0];u.push(new N3(N,B,C,M,T))}const d=t.substring(n[0].length),m=n[3]!==void 0?n[3]:"",y=n[2],x=n[1]!==void 0?n[1]:"",b=e!==-1?r.slice(0,e):"";return{type:y,inputs:u,name:m,precision:x,inputsCode:i,blockCode:d,headerCode:b}}else throw new Error("FunctionNode: Function is not a GLSL code.")};class BG extends C3{constructor(e){const{type:t,inputs:n,name:i,precision:s,inputsCode:o,blockCode:u,headerCode:h}=PG(e);super(t,n,i,s),this.inputsCode=o,this.blockCode=u,this.headerCode=h}getCode(e=this.name){let t;const n=this.blockCode;if(n!==""){const{type:i,inputsCode:s,headerCode:o,precision:u}=this;let h=`${i} ${e} ( ${s.trim()} )`;u!==""&&(h=`${u} ${h}`),t=o+h+n}else t="";return t}}class DG extends O_{parseFunction(e){return new BG(e)}}const sg=new WeakMap,es=[],ea=[];class FG extends Go{constructor(e,t){super(),this.renderer=e,this.backend=t,this.nodeFrame=new rg,this.nodeBuilderCache=new Map,this.callHashCache=new zi,this.groupsData=new zi,this.cacheLib={}}updateGroup(e){const t=e.groupNode,n=t.name;if(n===bp.name)return!0;if(n===ke.name){const s=this.get(e),o=this.nodeFrame.renderId;return s.renderId!==o?(s.renderId=o,!0):!1}if(n===C8.name){const s=this.get(e),o=this.nodeFrame.frameId;return s.frameId!==o?(s.frameId=o,!0):!1}es[0]=t,es[1]=e;let i=this.groupsData.get(es);return i===void 0&&this.groupsData.set(es,i={}),es.length=0,i.version!==t.version?(i.version=t.version,!0):!1}getForRenderCacheKey(e){return e.initialCacheKey}getForRender(e){const t=this.get(e);let n=t.nodeBuilderState;if(n===void 0){const{nodeBuilderCache:i}=this,s=this.getForRenderCacheKey(e);if(n=i.get(s),n===void 0){const o=this.backend.createNodeBuilder(e.object,this.renderer);o.scene=e.scene,o.material=e.material,o.camera=e.camera,o.context.material=e.material,o.lightsNode=e.lightsNode,o.environmentNode=this.getEnvironmentNode(e.scene),o.fogNode=this.getFogNode(e.scene),o.clippingContext=e.clippingContext,this.renderer.getOutputRenderTarget()&&this.renderer.getOutputRenderTarget().multiview&&o.enableMultiview(),o.build(),n=this._createNodeBuilderState(o),i.set(s,n)}n.usedTimes++,t.nodeBuilderState=n}return n}delete(e){if(e.isRenderObject){const t=this.get(e).nodeBuilderState;t.usedTimes--,t.usedTimes===0&&this.nodeBuilderCache.delete(this.getForRenderCacheKey(e))}return super.delete(e)}getForCompute(e){const t=this.get(e);let n=t.nodeBuilderState;if(n===void 0){const i=this.backend.createNodeBuilder(e,this.renderer);i.build(),n=this._createNodeBuilderState(i),t.nodeBuilderState=n}return n}_createNodeBuilderState(e){return new Zk(e.vertexShader,e.fragmentShader,e.computeShader,e.getAttributesArray(),e.getBindings(),e.updateNodes,e.updateBeforeNodes,e.updateAfterNodes,e.observer,e.transforms)}getEnvironmentNode(e){this.updateEnvironment(e);let t=null;if(e.environmentNode&&e.environmentNode.isNode)t=e.environmentNode;else{const n=this.get(e);n.environmentNode&&(t=n.environmentNode)}return t}getBackgroundNode(e){this.updateBackground(e);let t=null;if(e.backgroundNode&&e.backgroundNode.isNode)t=e.backgroundNode;else{const n=this.get(e);n.backgroundNode&&(t=n.backgroundNode)}return t}getFogNode(e){return this.updateFog(e),e.fogNode||this.get(e).fogNode||null}getCacheKey(e,t){es[0]=e,es[1]=t;const n=this.renderer.info.calls,i=this.callHashCache.get(es)||{};if(i.callId!==n){const s=this.getEnvironmentNode(e),o=this.getFogNode(e);t&&ea.push(t.getCacheKey(!0)),s&&ea.push(s.getCacheKey()),o&&ea.push(o.getCacheKey()),ea.push(this.renderer.getOutputRenderTarget()&&this.renderer.getOutputRenderTarget().multiview?1:0),ea.push(this.renderer.shadowMap.enabled?1:0),i.callId=n,i.cacheKey=M1(ea),this.callHashCache.set(es,i),ea.length=0}return es.length=0,i.cacheKey}get isToneMappingState(){return!this.renderer.getRenderTarget()}updateBackground(e){const t=this.get(e),n=e.background;if(n){const i=e.backgroundBlurriness===0&&t.backgroundBlurriness>0||e.backgroundBlurriness>0&&t.backgroundBlurriness===0;if(t.background!==n||i){const s=this.getCacheNode("background",n,()=>{if(n.isCubeTexture===!0||n.mapping===Cd||n.mapping===Pd||n.mapping===kh){if(e.backgroundBlurriness>0||n.mapping===kh)return f3(n);{let o;return n.isCubeTexture===!0?o=UA(n):o=xt(n),bv(o)}}else{if(n.isTexture===!0)return xt(n,Vs.flipY()).setUpdateMatrix(!0);n.isColor!==!0&&console.error("WebGPUNodes: Unsupported background configuration.",n)}},i);t.backgroundNode=s,t.background=n,t.backgroundBlurriness=e.backgroundBlurriness}}else t.backgroundNode&&(delete t.backgroundNode,delete t.background)}getCacheNode(e,t,n,i=!1){const s=this.cacheLib[e]||(this.cacheLib[e]=new WeakMap);let o=s.get(t);return(o===void 0||i)&&(o=n(),s.set(t,o)),o}updateFog(e){const t=this.get(e),n=e.fog;if(n){if(t.fog!==n){const i=this.getCacheNode("fog",n,()=>{if(n.isFogExp2){const s=Kt("color","color",n).setGroup(ke),o=Kt("density","float",n).setGroup(ke);return xu(s,y3(o))}else if(n.isFog){const s=Kt("color","color",n).setGroup(ke),o=Kt("near","float",n).setGroup(ke),u=Kt("far","float",n).setGroup(ke);return xu(s,g3(o,u))}else console.error("THREE.Renderer: Unsupported fog configuration.",n)});t.fogNode=i,t.fog=n}}else delete t.fogNode,delete t.fog}updateEnvironment(e){const t=this.get(e),n=e.environment;if(n){if(t.environment!==n){const i=this.getCacheNode("environment",n,()=>{if(n.isCubeTexture===!0)return UA(n);if(n.isTexture===!0)return xt(n);console.error("Nodes: Unsupported environment configuration.",n)});t.environmentNode=i,t.environment=n}}else t.environmentNode&&(delete t.environmentNode,delete t.environment)}getNodeFrame(e=this.renderer,t=null,n=null,i=null,s=null){const o=this.nodeFrame;return o.renderer=e,o.scene=t,o.object=n,o.camera=i,o.material=s,o}getNodeFrameForRender(e){return this.getNodeFrame(e.renderer,e.scene,e.object,e.camera,e.material)}getOutputCacheKey(){const e=this.renderer;return e.toneMapping+","+e.currentColorSpace+","+e.xr.isPresenting}hasOutputChange(e){return sg.get(e)!==this.getOutputCacheKey()}getOutputNode(e){const t=this.renderer,n=this.getOutputCacheKey(),i=e.isArrayTexture?e_(e,ne(Vs,eo("gl_ViewID_OVR"))).renderOutput(t.toneMapping,t.currentColorSpace):xt(e,Vs).renderOutput(t.toneMapping,t.currentColorSpace);return sg.set(e,n),i}updateBefore(e){const t=e.getNodeBuilderState();for(const n of t.updateBeforeNodes)this.getNodeFrameForRender(e).updateBeforeNode(n)}updateAfter(e){const t=e.getNodeBuilderState();for(const n of t.updateAfterNodes)this.getNodeFrameForRender(e).updateAfterNode(n)}updateForCompute(e){const t=this.getNodeFrame(),n=this.getForCompute(e);for(const i of n.updateNodes)t.updateNode(i)}updateForRender(e){const t=this.getNodeFrameForRender(e),n=e.getNodeBuilderState();for(const i of n.updateNodes)t.updateNode(i)}needsRefresh(e){const t=this.getNodeFrameForRender(e);return e.getMonitor().needsRefresh(e,t)}dispose(){super.dispose(),this.nodeFrame=new rg,this.nodeBuilderCache=new Map,this.cacheLib={}}}const bh=new Bd;class p1{constructor(e=null){this.version=0,this.clipIntersection=null,this.cacheKey="",this.shadowPass=!1,this.viewNormalMatrix=new Tu,this.clippingGroupContexts=new WeakMap,this.intersectionPlanes=[],this.unionPlanes=[],this.parentVersion=null,e!==null&&(this.viewNormalMatrix=e.viewNormalMatrix,this.clippingGroupContexts=e.clippingGroupContexts,this.shadowPass=e.shadowPass,this.viewMatrix=e.viewMatrix)}projectPlanes(e,t,n){const i=e.length;for(let s=0;s<i;s++){bh.copy(e[s]).applyMatrix4(this.viewMatrix,this.viewNormalMatrix);const o=t[n+s],u=bh.normal;o.x=-u.x,o.y=-u.y,o.z=-u.z,o.w=bh.constant}}updateGlobal(e,t){this.shadowPass=e.overrideMaterial!==null&&e.overrideMaterial.isShadowPassMaterial,this.viewMatrix=t.matrixWorldInverse,this.viewNormalMatrix.getNormalMatrix(this.viewMatrix)}update(e,t){let n=!1;e.version!==this.parentVersion&&(this.intersectionPlanes=Array.from(e.intersectionPlanes),this.unionPlanes=Array.from(e.unionPlanes),this.parentVersion=e.version),this.clipIntersection!==t.clipIntersection&&(this.clipIntersection=t.clipIntersection,this.clipIntersection?this.unionPlanes.length=e.unionPlanes.length:this.intersectionPlanes.length=e.intersectionPlanes.length);const i=t.clippingPlanes,s=i.length;let o,u;if(this.clipIntersection?(o=this.intersectionPlanes,u=e.intersectionPlanes.length):(o=this.unionPlanes,u=e.unionPlanes.length),o.length!==u+s){o.length=u+s;for(let h=0;h<s;h++)o[u+h]=new Ut;n=!0}this.projectPlanes(i,o,u),n&&(this.version++,this.cacheKey=`${this.intersectionPlanes.length}:${this.unionPlanes.length}`)}getGroupContext(e){if(this.shadowPass&&!e.clipShadows)return this;let t=this.clippingGroupContexts.get(e);return t===void 0&&(t=new p1(this),this.clippingGroupContexts.set(e,t)),t.update(this,e),t}get unionClippingCount(){return this.unionPlanes.length}}class LG{constructor(e,t){this.bundleGroup=e,this.camera=t}}const Tl=[];class IG{constructor(){this.bundles=new zi}get(e,t){const n=this.bundles;Tl[0]=e,Tl[1]=t;let i=n.get(Tl);return i===void 0&&(i=new LG(e,t),n.set(Tl,i)),Tl.length=0,i}dispose(){this.bundles=new zi}}class U_{constructor(){this.lightNodes=new WeakMap,this.materialNodes=new Map,this.toneMappingNodes=new Map}fromMaterial(e){if(e.isNodeMaterial)return e;let t=null;const n=this.getMaterialNodeClass(e.type);if(n!==null){t=new n;for(const i in e)t[i]=e[i]}return t}addToneMapping(e,t){this.addType(e,t,this.toneMappingNodes)}getToneMappingFunction(e){return this.toneMappingNodes.get(e)||null}getMaterialNodeClass(e){return this.materialNodes.get(e)||null}addMaterial(e,t){this.addType(e,t,this.materialNodes)}getLightNodeClass(e){return this.lightNodes.get(e)||null}addLight(e,t){this.addClass(e,t,this.lightNodes)}addType(e,t,n){if(n.has(t)){console.warn(`Redefinition of node ${t}`);return}if(typeof e!="function")throw new Error(`Node class ${e.name} is not a class.`);if(typeof t=="function"||typeof t=="object")throw new Error(`Base class ${t} is not a class.`);n.set(t,e)}addClass(e,t,n){if(n.has(t)){console.warn(`Redefinition of node ${t.name}`);return}if(typeof e!="function")throw new Error(`Node class ${e.name} is not a class.`);if(typeof t!="function")throw new Error(`Base class ${t.name} is not a class.`);n.set(t,e)}}const qG=new T3,wl=[];class OG extends zi{constructor(){super()}createNode(e=[]){return new T3().setLights(e)}getNode(e,t){if(e.isQuadMesh)return qG;wl[0]=e,wl[1]=t;let n=this.get(wl);return n===void 0&&(n=this.createNode(),this.set(wl,n)),wl.length=0,n}}class ql extends qo{constructor(e=1,t=1,n={}){super(e,t,n),this.isXRRenderTarget=!0,this._hasExternalTextures=!1,this._autoAllocateDepthBuffer=!0,this._isOpaqueFramebuffer=!1}copy(e){return super.copy(e),this._hasExternalTextures=e._hasExternalTextures,this._autoAllocateDepthBuffer=e._autoAllocateDepthBuffer,this._isOpaqueFramebuffer=e._isOpaqueFramebuffer,this}}const og=new Re,ag=new Re;class UG extends Rd{constructor(e,t=!1){super(),this.enabled=!1,this.isPresenting=!1,this.cameraAutoUpdate=!0,this._renderer=e,this._cameraL=new Mo,this._cameraL.viewport=new Ut,this._cameraR=new Mo,this._cameraR.viewport=new Ut,this._cameras=[this._cameraL,this._cameraR],this._cameraXR=new DT,this._currentDepthNear=null,this._currentDepthFar=null,this._controllers=[],this._controllerInputSources=[],this._xrRenderTarget=null,this._layers=[],this._sessionUsesLayers=!1,this._supportsGlBinding=typeof XRWebGLBinding<"u",this._frameBufferTargets=null,this._createXRLayer=HG.bind(this),this._gl=null,this._currentAnimationContext=null,this._currentAnimationLoop=null,this._currentPixelRatio=null,this._currentSize=new Ot,this._onSessionEvent=VG.bind(this),this._onSessionEnd=zG.bind(this),this._onInputSourcesChange=$G.bind(this),this._onAnimationFrame=jG.bind(this),this._referenceSpace=null,this._referenceSpaceType="local-floor",this._customReferenceSpace=null,this._framebufferScaleFactor=1,this._foveation=1,this._session=null,this._glBaseLayer=null,this._glBinding=null,this._glProjLayer=null,this._xrFrame=null,this._supportsLayers=this._supportsGlBinding&&"createProjectionLayer"in XRWebGLBinding.prototype,this._useMultiviewIfPossible=t,this._useMultiview=!1}getController(e){return this._getController(e).getTargetRaySpace()}getControllerGrip(e){return this._getController(e).getGripSpace()}getHand(e){return this._getController(e).getHandSpace()}getFoveation(){if(!(this._glProjLayer===null&&this._glBaseLayer===null))return this._foveation}setFoveation(e){this._foveation=e,this._glProjLayer!==null&&(this._glProjLayer.fixedFoveation=e),this._glBaseLayer!==null&&this._glBaseLayer.fixedFoveation!==void 0&&(this._glBaseLayer.fixedFoveation=e)}getFramebufferScaleFactor(){return this._framebufferScaleFactor}setFramebufferScaleFactor(e){this._framebufferScaleFactor=e,this.isPresenting===!0&&console.warn("THREE.XRManager: Cannot change framebuffer scale while presenting.")}getReferenceSpaceType(){return this._referenceSpaceType}setReferenceSpaceType(e){this._referenceSpaceType=e,this.isPresenting===!0&&console.warn("THREE.XRManager: Cannot change reference space type while presenting.")}getReferenceSpace(){return this._customReferenceSpace||this._referenceSpace}setReferenceSpace(e){this._customReferenceSpace=e}getCamera(){return this._cameraXR}getEnvironmentBlendMode(){if(this._session!==null)return this._session.environmentBlendMode}getBinding(){return this._glBinding===null&&this._supportsGlBinding&&(this._glBinding=new XRWebGLBinding(this._session,this._gl)),this._glBinding}getFrame(){return this._xrFrame}useMultiview(){return this._useMultiview}createQuadLayer(e,t,n,i,s,o,u,h={}){const d=new FT(e,t),m=new ql(s,o,{format:Ii,type:Xr,depthTexture:new Gi(s,o,h.stencil?Eo:In,void 0,void 0,void 0,void 0,void 0,void 0,h.stencil?No:Ro),stencilBuffer:h.stencil,resolveDepthBuffer:!1,resolveStencilBuffer:!1});m._autoAllocateDepthBuffer=!0;const y=new Fs({color:16777215,side:Ol});y.map=m.texture,y.map.offset.y=1,y.map.repeat.y=-1;const x=new Sn(d,y);x.position.copy(n),x.quaternion.copy(i);const b={type:"quad",width:e,height:t,translation:n,quaternion:i,pixelwidth:s,pixelheight:o,plane:x,material:y,rendercall:u,renderTarget:m};if(this._layers.push(b),this._session!==null){b.plane.material=new Fs({color:16777215,side:Ol}),b.plane.material.blending=kl,b.plane.material.blendEquation=Ls,b.plane.material.blendSrc=mo,b.plane.material.blendDst=mo,b.xrlayer=this._createXRLayer(b);const T=this._session.renderState.layers;T.unshift(b.xrlayer),this._session.updateRenderState({layers:T})}else m.isXRRenderTarget=!1;return x}createCylinderLayer(e,t,n,i,s,o,u,h,d={}){const m=new Jg(e,e,e*t/n,64,64,!0,Math.PI-t/2,t),y=new ql(o,u,{format:Ii,type:Xr,depthTexture:new Gi(o,u,d.stencil?Eo:In,void 0,void 0,void 0,void 0,void 0,void 0,d.stencil?No:Ro),stencilBuffer:d.stencil,resolveDepthBuffer:!1,resolveStencilBuffer:!1});y._autoAllocateDepthBuffer=!0;const x=new Fs({color:16777215,side:Tr});x.map=y.texture,x.map.offset.y=1,x.map.repeat.y=-1;const b=new Sn(m,x);b.position.copy(i),b.quaternion.copy(s);const T={type:"cylinder",radius:e,centralAngle:t,aspectratio:n,translation:i,quaternion:s,pixelwidth:o,pixelheight:u,plane:b,material:x,rendercall:h,renderTarget:y};if(this._layers.push(T),this._session!==null){T.plane.material=new Fs({color:16777215,side:Tr}),T.plane.material.blending=kl,T.plane.material.blendEquation=Ls,T.plane.material.blendSrc=mo,T.plane.material.blendDst=mo,T.xrlayer=this._createXRLayer(T);const M=this._session.renderState.layers;M.unshift(T.xrlayer),this._session.updateRenderState({layers:M})}else y.isXRRenderTarget=!1;return b}renderLayers(){const e=new Re,t=new Uh,n=this._renderer,i=this.isPresenting,s=n.getOutputRenderTarget(),o=n._frameBufferTarget;this.isPresenting=!1;const u=new Ot;n.getSize(u);const h=n._quad;for(const d of this._layers)if(d.renderTarget.isXRRenderTarget=this._session!==null,d.renderTarget._hasExternalTextures=d.renderTarget.isXRRenderTarget,d.renderTarget.isXRRenderTarget&&this._sessionUsesLayers){d.xrlayer.transform=new XRRigidTransform(d.plane.getWorldPosition(e),d.plane.getWorldQuaternion(t));const m=this._glBinding.getSubImage(d.xrlayer,this._xrFrame);n.backend.setXRRenderTargetTextures(d.renderTarget,m.colorTexture,void 0),n._setXRLayerSize(d.renderTarget.width,d.renderTarget.height),n.setOutputRenderTarget(d.renderTarget),n.setRenderTarget(null),n._frameBufferTarget=null,this._frameBufferTargets||(this._frameBufferTargets=new WeakMap);const{frameBufferTarget:y,quad:x}=this._frameBufferTargets.get(d.renderTarget)||{frameBufferTarget:null,quad:null};y?(n._frameBufferTarget=y,n._quad=x):(n._quad=new Y1(new Mn),this._frameBufferTargets.set(d.renderTarget,{frameBufferTarget:n._getFrameBufferTarget(),quad:n._quad})),d.rendercall(),n._frameBufferTarget=null}else n.setRenderTarget(d.renderTarget),d.rendercall();n.setRenderTarget(null),n.setOutputRenderTarget(s),n._frameBufferTarget=o,n._setXRLayerSize(u.x,u.y),n._quad=h,this.isPresenting=i}getSession(){return this._session}async setSession(e){const t=this._renderer,n=t.backend;this._gl=t.getContext();const i=this._gl,s=i.getContextAttributes();if(this._session=e,e!==null){if(n.isWebGPUBackend===!0)throw new Error('THREE.XRManager: XR is currently not supported with a WebGPU backend. Use WebGL by passing "{ forceWebGL: true }" to the constructor of the renderer.');if(e.addEventListener("select",this._onSessionEvent),e.addEventListener("selectstart",this._onSessionEvent),e.addEventListener("selectend",this._onSessionEvent),e.addEventListener("squeeze",this._onSessionEvent),e.addEventListener("squeezestart",this._onSessionEvent),e.addEventListener("squeezeend",this._onSessionEvent),e.addEventListener("end",this._onSessionEnd),e.addEventListener("inputsourceschange",this._onInputSourcesChange),await n.makeXRCompatible(),this._currentPixelRatio=t.getPixelRatio(),t.getSize(this._currentSize),this._currentAnimationContext=t._animation.getContext(),this._currentAnimationLoop=t._animation.getAnimationLoop(),t._animation.stop(),this._supportsLayers===!0){let o=null,u=null,h=null;t.depth&&(h=t.stencil?i.DEPTH24_STENCIL8:i.DEPTH_COMPONENT24,o=t.stencil?No:Ro,u=t.stencil?Eo:In);const d={colorFormat:i.RGBA8,depthFormat:h,scaleFactor:this._framebufferScaleFactor,clearOnAccess:!1};this._useMultiviewIfPossible&&t.hasFeature("OVR_multiview2")&&(d.textureType="texture-array",this._useMultiview=!0),this._glBinding=this.getBinding();const m=this._glBinding.createProjectionLayer(d),y=[m];this._glProjLayer=m,t.setPixelRatio(1),t._setXRLayerSize(m.textureWidth,m.textureHeight);const x=this._useMultiview?2:1,b=new Gi(m.textureWidth,m.textureHeight,u,void 0,void 0,void 0,void 0,void 0,void 0,o,x);if(this._xrRenderTarget=new ql(m.textureWidth,m.textureHeight,{format:Ii,type:Xr,colorSpace:t.outputColorSpace,depthTexture:b,stencilBuffer:t.stencil,samples:s.antialias?4:0,resolveDepthBuffer:m.ignoreDepthValues===!1,resolveStencilBuffer:m.ignoreDepthValues===!1,depth:this._useMultiview?2:1,multiview:this._useMultiview}),this._xrRenderTarget._hasExternalTextures=!0,this._xrRenderTarget.depth=this._useMultiview?2:1,this._sessionUsesLayers=e.enabledFeatures.includes("layers"),this._referenceSpace=await e.requestReferenceSpace(this.getReferenceSpaceType()),this._sessionUsesLayers)for(const T of this._layers)T.plane.material=new Fs({color:16777215,side:T.type==="cylinder"?Tr:Ol}),T.plane.material.blending=kl,T.plane.material.blendEquation=Ls,T.plane.material.blendSrc=mo,T.plane.material.blendDst=mo,T.xrlayer=this._createXRLayer(T),y.unshift(T.xrlayer);e.updateRenderState({layers:y})}else{const o={antialias:t.samples>0,alpha:!0,depth:t.depth,stencil:t.stencil,framebufferScaleFactor:this.getFramebufferScaleFactor()},u=new XRWebGLLayer(e,i,o);this._glBaseLayer=u,e.updateRenderState({baseLayer:u}),t.setPixelRatio(1),t._setXRLayerSize(u.framebufferWidth,u.framebufferHeight),this._xrRenderTarget=new ql(u.framebufferWidth,u.framebufferHeight,{format:Ii,type:Xr,colorSpace:t.outputColorSpace,stencilBuffer:t.stencil,resolveDepthBuffer:u.ignoreDepthValues===!1,resolveStencilBuffer:u.ignoreDepthValues===!1}),this._xrRenderTarget._isOpaqueFramebuffer=!0,this._referenceSpace=await e.requestReferenceSpace(this.getReferenceSpaceType())}this.setFoveation(this.getFoveation()),t._animation.setAnimationLoop(this._onAnimationFrame),t._animation.setContext(e),t._animation.start(),this.isPresenting=!0,this.dispatchEvent({type:"sessionstart"})}}updateCamera(e){const t=this._session;if(t===null)return;const n=e.near,i=e.far,s=this._cameraXR,o=this._cameraL,u=this._cameraR;s.near=u.near=o.near=n,s.far=u.far=o.far=i,s.isMultiViewCamera=this._useMultiview,(this._currentDepthNear!==s.near||this._currentDepthFar!==s.far)&&(t.updateRenderState({depthNear:s.near,depthFar:s.far}),this._currentDepthNear=s.near,this._currentDepthFar=s.far),s.layers.mask=e.layers.mask|6,o.layers.mask=s.layers.mask&3,u.layers.mask=s.layers.mask&5;const h=e.parent,d=s.cameras;Ag(s,h);for(let m=0;m<d.length;m++)Ag(d[m],h);d.length===2?kG(s,o,u):s.projectionMatrix.copy(o.projectionMatrix),GG(e,s,h)}_getController(e){let t=this._controllers[e];return t===void 0&&(t=new LT,this._controllers[e]=t),t}}function kG(r,e,t){og.setFromMatrixPosition(e.matrixWorld),ag.setFromMatrixPosition(t.matrixWorld);const n=og.distanceTo(ag),i=e.projectionMatrix.elements,s=t.projectionMatrix.elements,o=i[14]/(i[10]-1),u=i[14]/(i[10]+1),h=(i[9]+1)/i[5],d=(i[9]-1)/i[5],m=(i[8]-1)/i[0],y=(s[8]+1)/s[0],x=o*m,b=o*y,T=n/(-m+y),M=T*-m;if(e.matrixWorld.decompose(r.position,r.quaternion,r.scale),r.translateX(M),r.translateZ(T),r.matrixWorld.compose(r.position,r.quaternion,r.scale),r.matrixWorldInverse.copy(r.matrixWorld).invert(),i[10]===-1)r.projectionMatrix.copy(e.projectionMatrix),r.projectionMatrixInverse.copy(e.projectionMatrixInverse);else{const N=o+T,C=u+T,B=x-M,P=b+(n-M),I=h*u/C*N,D=d*u/C*N;r.projectionMatrix.makePerspective(B,P,I,D,N,C),r.projectionMatrixInverse.copy(r.projectionMatrix).invert()}}function Ag(r,e){e===null?r.matrixWorld.copy(r.matrix):r.matrixWorld.multiplyMatrices(e.matrixWorld,r.matrix),r.matrixWorldInverse.copy(r.matrixWorld).invert()}function GG(r,e,t){t===null?r.matrix.copy(e.matrixWorld):(r.matrix.copy(t.matrixWorld),r.matrix.invert(),r.matrix.multiply(e.matrixWorld)),r.matrix.decompose(r.position,r.quaternion,r.scale),r.updateMatrixWorld(!0),r.projectionMatrix.copy(e.projectionMatrix),r.projectionMatrixInverse.copy(e.projectionMatrixInverse),r.isPerspectiveCamera&&(r.fov=rw*2*Math.atan(1/r.projectionMatrix.elements[5]),r.zoom=1)}function VG(r){const e=this._controllerInputSources.indexOf(r.inputSource);if(e===-1)return;const t=this._controllers[e];if(t!==void 0){const n=this.getReferenceSpace();t.update(r.inputSource,r.frame,n),t.dispatchEvent({type:r.type,data:r.inputSource})}}function zG(){const r=this._session,e=this._renderer;r.removeEventListener("select",this._onSessionEvent),r.removeEventListener("selectstart",this._onSessionEvent),r.removeEventListener("selectend",this._onSessionEvent),r.removeEventListener("squeeze",this._onSessionEvent),r.removeEventListener("squeezestart",this._onSessionEvent),r.removeEventListener("squeezeend",this._onSessionEvent),r.removeEventListener("end",this._onSessionEnd),r.removeEventListener("inputsourceschange",this._onInputSourcesChange);for(let t=0;t<this._controllers.length;t++){const n=this._controllerInputSources[t];n!==null&&(this._controllerInputSources[t]=null,this._controllers[t].disconnect(n))}if(this._currentDepthNear=null,this._currentDepthFar=null,e._resetXRState(),this._session=null,this._xrRenderTarget=null,this._sessionUsesLayers===!0)for(const t of this._layers)t.renderTarget=new ql(t.pixelwidth,t.pixelheight,{format:Ii,type:Xr,depthTexture:new Gi(t.pixelwidth,t.pixelheight,t.stencilBuffer?Eo:In,void 0,void 0,void 0,void 0,void 0,void 0,t.stencilBuffer?No:Ro),stencilBuffer:t.stencilBuffer,resolveDepthBuffer:!1,resolveStencilBuffer:!1}),t.renderTarget.isXRRenderTarget=!1,t.plane.material=t.material,t.material.map=t.renderTarget.texture,t.material.map.offset.y=1,t.material.map.repeat.y=-1,delete t.xrlayer;this.isPresenting=!1,this._useMultiview=!1,e._animation.stop(),e._animation.setAnimationLoop(this._currentAnimationLoop),e._animation.setContext(this._currentAnimationContext),e._animation.start(),e.setPixelRatio(this._currentPixelRatio),e.setSize(this._currentSize.width,this._currentSize.height,!1),this.dispatchEvent({type:"sessionend"})}function $G(r){const e=this._controllers,t=this._controllerInputSources;for(let n=0;n<r.removed.length;n++){const i=r.removed[n],s=t.indexOf(i);s>=0&&(t[s]=null,e[s].disconnect(i))}for(let n=0;n<r.added.length;n++){const i=r.added[n];let s=t.indexOf(i);if(s===-1){for(let u=0;u<e.length;u++)if(u>=t.length){t.push(i),s=u;break}else if(t[u]===null){t[u]=i,s=u;break}if(s===-1)break}const o=e[s];o&&o.connect(i)}}function HG(r){return r.type==="quad"?this._glBinding.createQuadLayer({transform:new XRRigidTransform(r.translation,r.quaternion),width:r.width/2,height:r.height/2,space:this._referenceSpace,viewPixelWidth:r.pixelwidth,viewPixelHeight:r.pixelheight,clearOnAccess:!1}):this._glBinding.createCylinderLayer({transform:new XRRigidTransform(r.translation,r.quaternion),radius:r.radius,centralAngle:r.centralAngle,aspectRatio:r.aspectRatio,space:this._referenceSpace,viewPixelWidth:r.pixelwidth,viewPixelHeight:r.pixelheight,clearOnAccess:!1})}function jG(r,e){if(e===void 0)return;const t=this._cameraXR,n=this._renderer,i=n.backend,s=this._glBaseLayer,o=this.getReferenceSpace(),u=e.getViewerPose(o);if(this._xrFrame=e,u!==null){const h=u.views;this._glBaseLayer!==null&&i.setXRTarget(s.framebuffer);let d=!1;h.length!==t.cameras.length&&(t.cameras.length=0,d=!0);for(let m=0;m<h.length;m++){const y=h[m];let x;if(this._supportsLayers===!0){const T=this._glBinding.getViewSubImage(this._glProjLayer,y);x=T.viewport,m===0&&i.setXRRenderTargetTextures(this._xrRenderTarget,T.colorTexture,this._glProjLayer.ignoreDepthValues&&!this._useMultiview?void 0:T.depthStencilTexture)}else x=s.getViewport(y);let b=this._cameras[m];b===void 0&&(b=new Mo,b.layers.enable(m),b.viewport=new Ut,this._cameras[m]=b),b.matrix.fromArray(y.transform.matrix),b.matrix.decompose(b.position,b.quaternion,b.scale),b.projectionMatrix.fromArray(y.projectionMatrix),b.projectionMatrixInverse.copy(b.projectionMatrix).invert(),b.viewport.set(x.x,x.y,x.width,x.height),m===0&&(t.matrix.copy(b.matrix),t.matrix.decompose(t.position,t.quaternion,t.scale)),d===!0&&t.cameras.push(b)}n.setOutputRenderTarget(this._xrRenderTarget)}for(let h=0;h<this._controllers.length;h++){const d=this._controllerInputSources[h],m=this._controllers[h];d!==null&&m!==void 0&&m.update(d,e,o)}this._currentAnimationLoop&&this._currentAnimationLoop(r,e),e.detectedPlanes&&this.dispatchEvent({type:"planesdetected",data:e}),this._xrFrame=null}const lg=new g1,iA=new Ot,Th=new Ut,wh=new Xg,Sh=new _T,C0=new mn,Rs=new Ut;class WG{constructor(e,t={}){this.isRenderer=!0;const{logarithmicDepthBuffer:n=!1,alpha:i=!0,depth:s=!0,stencil:o=!1,antialias:u=!1,samples:h=0,getFallback:d=null,colorBufferType:m=Rr,multiview:y=!1}=t;this.domElement=e.getDomElement(),this.backend=e,this.samples=h||u===!0?4:0,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.alpha=i,this.logarithmicDepthBuffer=n,this.outputColorSpace=m1,this.toneMapping=bA,this.toneMappingExposure=1,this.sortObjects=!0,this.depth=s,this.stencil=o,this.info=new tI,this.overrideNodes={modelViewMatrix:null,modelNormalViewMatrix:null},this.library=new U_,this.lighting=new OG,this._getFallback=d,this._pixelRatio=1,this._width=this.domElement.width,this._height=this.domElement.height,this._viewport=new Ut(0,0,this._width,this._height),this._scissor=new Ut(0,0,this._width,this._height),this._scissorTest=!1,this._attributes=null,this._geometries=null,this._nodes=null,this._animation=null,this._bindings=null,this._objects=null,this._pipelines=null,this._bundles=null,this._renderLists=null,this._renderContexts=null,this._textures=null,this._background=null,this._quad=new Y1(new Mn),this._quad.material.name="Renderer_output",this._currentRenderContext=null,this._opaqueSort=null,this._transparentSort=null,this._frameBufferTarget=null;const x=this.alpha===!0?0:1;this._clearColor=new d3(0,0,0,x),this._clearDepth=1,this._clearStencil=0,this._renderTarget=null,this._activeCubeFace=0,this._activeMipmapLevel=0,this._outputRenderTarget=null,this._mrt=null,this._renderObjectFunction=null,this._currentRenderObjectFunction=null,this._currentRenderBundle=null,this._handleObjectFunction=this._renderObjectDirect,this._isDeviceLost=!1,this.onDeviceLost=this._onDeviceLost,this._colorBufferType=m,this._initialized=!1,this._initPromise=null,this._compilationPromises=null,this.transparent=!0,this.opaque=!0,this.shadowMap={enabled:!1,type:vT},this.xr=new UG(this,y),this.debug={checkShaderErrors:!0,onShaderError:null,getShaderAsync:async(b,T,M)=>{await this.compileAsync(b,T);const N=this._renderLists.get(b,T),C=this._renderContexts.get(b,T,this._renderTarget),B=b.overrideMaterial||M.material,P=this._objects.get(M,B,b,T,N.lightsNode,C,C.clippingContext),{fragmentShader:I,vertexShader:D}=P.getNodeBuilderState();return{fragmentShader:I,vertexShader:D}}}}async init(){if(this._initialized)throw new Error("Renderer: Backend has already been initialized.");return this._initPromise!==null?this._initPromise:(this._initPromise=new Promise(async(e,t)=>{let n=this.backend;try{await n.init(this)}catch(i){if(this._getFallback!==null)try{this.backend=n=this._getFallback(i),await n.init(this)}catch(s){t(s);return}else{t(i);return}}this._nodes=new FG(this,n),this._animation=new jL(this._nodes,this.info),this._attributes=new JL(n),this._background=new Yk(this,this._nodes),this._geometries=new eI(this._attributes,this.info),this._textures=new mI(this,n,this.info),this._pipelines=new sI(n,this._nodes),this._bindings=new oI(n,this._nodes,this._textures,this._attributes,this._pipelines,this.info),this._objects=new YL(this,this._nodes,this._geometries,this._pipelines,this._bindings,this.info),this._renderLists=new lI(this.lighting),this._bundles=new IG,this._renderContexts=new dI,this._animation.start(),this._initialized=!0,e(this)}),this._initPromise)}get coordinateSystem(){return this.backend.coordinateSystem}async compileAsync(e,t,n=null){if(this._isDeviceLost===!0)return;this._initialized===!1&&await this.init();const i=this._nodes.nodeFrame,s=i.renderId,o=this._currentRenderContext,u=this._currentRenderObjectFunction,h=this._compilationPromises,d=e.isScene===!0?e:lg;n===null&&(n=e);const m=this._renderTarget,y=this._renderContexts.get(n,t,m),x=this._activeMipmapLevel,b=[];this._currentRenderContext=y,this._currentRenderObjectFunction=this.renderObject,this._handleObjectFunction=this._createObjectPipeline,this._compilationPromises=b,i.renderId++,i.update(),y.depth=this.depth,y.stencil=this.stencil,y.clippingContext||(y.clippingContext=new p1),y.clippingContext.updateGlobal(d,t),d.onBeforeRender(this,e,t,m);const T=this._renderLists.get(e,t);if(T.begin(),this._projectObject(e,t,0,T,y.clippingContext),n!==e&&n.traverseVisible(function(P){P.isLight&&P.layers.test(t.layers)&&T.pushLight(P)}),T.finish(),m!==null){this._textures.updateRenderTarget(m,x);const P=this._textures.get(m);y.textures=P.textures,y.depthTexture=P.depthTexture}else y.textures=null,y.depthTexture=null;this._background.update(d,T,y);const M=T.opaque,N=T.transparent,C=T.transparentDoublePass,B=T.lightsNode;this.opaque===!0&&M.length>0&&this._renderObjects(M,t,d,B),this.transparent===!0&&N.length>0&&this._renderTransparents(N,C,t,d,B),i.renderId=s,this._currentRenderContext=o,this._currentRenderObjectFunction=u,this._compilationPromises=h,this._handleObjectFunction=this._renderObjectDirect,await Promise.all(b)}async renderAsync(e,t){this._initialized===!1&&await this.init(),this._renderScene(e,t)}async waitForGPU(){await this.backend.waitForGPU()}set highPrecision(e){e===!0?(this.overrideNodes.modelViewMatrix=nd,this.overrideNodes.modelNormalViewMatrix=rd):this.highPrecision&&(this.overrideNodes.modelViewMatrix=null,this.overrideNodes.modelNormalViewMatrix=null)}get highPrecision(){return this.overrideNodes.modelViewMatrix===nd&&this.overrideNodes.modelNormalViewMatrix===rd}setMRT(e){return this._mrt=e,this}getMRT(){return this._mrt}getColorBufferType(){return this._colorBufferType}_onDeviceLost(e){let t=`THREE.WebGPURenderer: ${e.api} Device Lost:

Message: ${e.message}`;e.reason&&(t+=`
Reason: ${e.reason}`),console.error(t),this._isDeviceLost=!0}_renderBundle(e,t,n){const{bundleGroup:i,camera:s,renderList:o}=e,u=this._currentRenderContext,h=this._bundles.get(i,s),d=this.backend.get(h);d.renderContexts===void 0&&(d.renderContexts=new Set);const m=i.version!==d.version,y=d.renderContexts.has(u)===!1||m;if(d.renderContexts.add(u),y){this.backend.beginBundle(u),(d.renderObjects===void 0||m)&&(d.renderObjects=[]),this._currentRenderBundle=h;const{transparentDoublePass:x,transparent:b,opaque:T}=o;this.opaque===!0&&T.length>0&&this._renderObjects(T,s,t,n),this.transparent===!0&&b.length>0&&this._renderTransparents(b,x,s,t,n),this._currentRenderBundle=null,this.backend.finishBundle(u,h),d.version=i.version}else{const{renderObjects:x}=d;for(let b=0,T=x.length;b<T;b++){const M=x[b];this._nodes.needsRefresh(M)&&(this._nodes.updateBefore(M),this._nodes.updateForRender(M),this._bindings.updateForRender(M),this._nodes.updateAfter(M))}}this.backend.addBundle(u,h)}render(e,t){if(this._initialized===!1)return console.warn("THREE.Renderer: .render() called before the backend is initialized. Try using .renderAsync() instead."),this.renderAsync(e,t);this._renderScene(e,t)}_getFrameBufferTarget(){const{currentToneMapping:e,currentColorSpace:t}=this,n=e!==bA,i=t!==bn.workingColorSpace;if(n===!1&&i===!1)return null;const{width:s,height:o}=this.getDrawingBufferSize(iA),{depth:u,stencil:h}=this;let d=this._frameBufferTarget;d===null&&(d=new qo(s,o,{depthBuffer:u,stencilBuffer:h,type:this._colorBufferType,format:Ii,colorSpace:bn.workingColorSpace,generateMipmaps:!1,minFilter:zs,magFilter:zs,samples:this.samples}),d.isPostProcessingRenderTarget=!0,this._frameBufferTarget=d);const m=this.getOutputRenderTarget();return d.depthBuffer=u,d.stencilBuffer=h,m!==null?d.setSize(m.width,m.height,m.depth):d.setSize(s,o,1),d.viewport.copy(this._viewport),d.scissor.copy(this._scissor),d.viewport.multiplyScalar(this._pixelRatio),d.scissor.multiplyScalar(this._pixelRatio),d.scissorTest=this._scissorTest,d.multiview=m!==null?m.multiview:!1,d.resolveDepthBuffer=m!==null?m.resolveDepthBuffer:!0,d._autoAllocateDepthBuffer=m!==null?m._autoAllocateDepthBuffer:!1,d}_renderScene(e,t,n=!0){if(this._isDeviceLost===!0)return;const i=n?this._getFrameBufferTarget():null,s=this._nodes.nodeFrame,o=s.renderId,u=this._currentRenderContext,h=this._currentRenderObjectFunction,d=e.isScene===!0?e:lg,m=this._renderTarget||this._outputRenderTarget,y=this._activeCubeFace,x=this._activeMipmapLevel;let b;i!==null?(b=i,this.setRenderTarget(b)):b=m;const T=this._renderContexts.get(e,t,b);this._currentRenderContext=T,this._currentRenderObjectFunction=this._renderObjectFunction||this.renderObject,this.info.calls++,this.info.render.calls++,this.info.render.frameCalls++,s.renderId=this.info.calls;const M=this.coordinateSystem,N=this.xr;if(t.coordinateSystem!==M&&N.isPresenting===!1&&(t.coordinateSystem=M,t.updateProjectionMatrix(),t.isArrayCamera))for(const Z of t.cameras)Z.coordinateSystem=M,Z.updateProjectionMatrix();e.matrixWorldAutoUpdate===!0&&e.updateMatrixWorld(),t.parent===null&&t.matrixWorldAutoUpdate===!0&&t.updateMatrixWorld(),N.enabled===!0&&N.isPresenting===!0&&(N.cameraAutoUpdate===!0&&N.updateCamera(t),t=N.getCamera());let C=this._viewport,B=this._scissor,P=this._pixelRatio;b!==null&&(C=b.viewport,B=b.scissor,P=1),this.getDrawingBufferSize(iA),Th.set(0,0,iA.width,iA.height);const I=C.minDepth===void 0?0:C.minDepth,D=C.maxDepth===void 0?1:C.maxDepth;T.viewportValue.copy(C).multiplyScalar(P).floor(),T.viewportValue.width>>=x,T.viewportValue.height>>=x,T.viewportValue.minDepth=I,T.viewportValue.maxDepth=D,T.viewport=T.viewportValue.equals(Th)===!1,T.scissorValue.copy(B).multiplyScalar(P).floor(),T.scissor=this._scissorTest&&T.scissorValue.equals(Th)===!1,T.scissorValue.width>>=x,T.scissorValue.height>>=x,T.clippingContext||(T.clippingContext=new p1),T.clippingContext.updateGlobal(d,t),d.onBeforeRender(this,e,t,b);const q=t.isArrayCamera?Sh:wh;t.isArrayCamera||(C0.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),q.setFromProjectionMatrix(C0,t.coordinateSystem,t.reversedDepth));const O=this._renderLists.get(e,t);if(O.begin(),this._projectObject(e,t,0,O,T.clippingContext),O.finish(),this.sortObjects===!0&&O.sort(this._opaqueSort,this._transparentSort),b!==null){this._textures.updateRenderTarget(b,x);const Z=this._textures.get(b);T.textures=Z.textures,T.depthTexture=Z.depthTexture,T.width=Z.width,T.height=Z.height,T.renderTarget=b,T.depth=b.depthBuffer,T.stencil=b.stencilBuffer}else T.textures=null,T.depthTexture=null,T.width=iA.width,T.height=iA.height,T.depth=this.depth,T.stencil=this.stencil;T.width>>=x,T.height>>=x,T.activeCubeFace=y,T.activeMipmapLevel=x,T.occlusionQueryCount=O.occlusionQueryCount,T.scissorValue.max(Rs.set(0,0,0,0)),T.scissorValue.x+T.scissorValue.width>T.width&&(T.scissorValue.width=Math.max(T.width-T.scissorValue.x,0)),T.scissorValue.y+T.scissorValue.height>T.height&&(T.scissorValue.height=Math.max(T.height-T.scissorValue.y,0)),this._background.update(d,O,T),T.camera=t,this.backend.beginRender(T);const{bundles:k,lightsNode:z,transparentDoublePass:X,transparent:W,opaque:K}=O;return k.length>0&&this._renderBundles(k,d,z),this.opaque===!0&&K.length>0&&this._renderObjects(K,t,d,z),this.transparent===!0&&W.length>0&&this._renderTransparents(W,X,t,d,z),this.backend.finishRender(T),s.renderId=o,this._currentRenderContext=u,this._currentRenderObjectFunction=h,i!==null&&(this.setRenderTarget(m,y,x),this._renderOutput(b)),d.onAfterRender(this,e,t,b),T}_setXRLayerSize(e,t){this._width=e,this._height=t,this.setViewport(0,0,e,t)}_renderOutput(e){const t=this._quad;this._nodes.hasOutputChange(e.texture)&&(t.material.fragmentNode=this._nodes.getOutputNode(e.texture),t.material.needsUpdate=!0);const n=this.autoClear,i=this.xr.enabled;this.autoClear=!1,this.xr.enabled=!1,this._renderScene(t,t.camera,!1),this.autoClear=n,this.xr.enabled=i}getMaxAnisotropy(){return this.backend.getMaxAnisotropy()}getActiveCubeFace(){return this._activeCubeFace}getActiveMipmapLevel(){return this._activeMipmapLevel}async setAnimationLoop(e){this._initialized===!1&&await this.init(),this._animation.setAnimationLoop(e)}async getArrayBufferAsync(e){return await this.backend.getArrayBufferAsync(e)}getContext(){return this.backend.getContext()}getPixelRatio(){return this._pixelRatio}getDrawingBufferSize(e){return e.set(this._width*this._pixelRatio,this._height*this._pixelRatio).floor()}getSize(e){return e.set(this._width,this._height)}setPixelRatio(e=1){this._pixelRatio!==e&&(this._pixelRatio=e,this.setSize(this._width,this._height,!1))}setDrawingBufferSize(e,t,n){this.xr&&this.xr.isPresenting||(this._width=e,this._height=t,this._pixelRatio=n,this.domElement.width=Math.floor(e*n),this.domElement.height=Math.floor(t*n),this.setViewport(0,0,e,t),this._initialized&&this.backend.updateSize())}setSize(e,t,n=!0){this.xr&&this.xr.isPresenting||(this._width=e,this._height=t,this.domElement.width=Math.floor(e*this._pixelRatio),this.domElement.height=Math.floor(t*this._pixelRatio),n===!0&&(this.domElement.style.width=e+"px",this.domElement.style.height=t+"px"),this.setViewport(0,0,e,t),this._initialized&&this.backend.updateSize())}setOpaqueSort(e){this._opaqueSort=e}setTransparentSort(e){this._transparentSort=e}getScissor(e){const t=this._scissor;return e.x=t.x,e.y=t.y,e.width=t.width,e.height=t.height,e}setScissor(e,t,n,i){const s=this._scissor;e.isVector4?s.copy(e):s.set(e,t,n,i)}getScissorTest(){return this._scissorTest}setScissorTest(e){this._scissorTest=e,this.backend.setScissorTest(e)}getViewport(e){return e.copy(this._viewport)}setViewport(e,t,n,i,s=0,o=1){const u=this._viewport;e.isVector4?u.copy(e):u.set(e,t,n,i),u.minDepth=s,u.maxDepth=o}getClearColor(e){return e.copy(this._clearColor)}setClearColor(e,t=1){this._clearColor.set(e),this._clearColor.a=t}getClearAlpha(){return this._clearColor.a}setClearAlpha(e){this._clearColor.a=e}getClearDepth(){return this._clearDepth}setClearDepth(e){this._clearDepth=e}getClearStencil(){return this._clearStencil}setClearStencil(e){this._clearStencil=e}isOccluded(e){const t=this._currentRenderContext;return t&&this.backend.isOccluded(t,e)}clear(e=!0,t=!0,n=!0){if(this._initialized===!1)return console.warn("THREE.Renderer: .clear() called before the backend is initialized. Try using .clearAsync() instead."),this.clearAsync(e,t,n);const i=this._renderTarget||this._getFrameBufferTarget();let s=null;if(i!==null){this._textures.updateRenderTarget(i);const o=this._textures.get(i);s=this._renderContexts.getForClear(i),s.textures=o.textures,s.depthTexture=o.depthTexture,s.width=o.width,s.height=o.height,s.renderTarget=i,s.depth=i.depthBuffer,s.stencil=i.stencilBuffer,s.clearColorValue=this.backend.getClearColor(),s.activeCubeFace=this.getActiveCubeFace(),s.activeMipmapLevel=this.getActiveMipmapLevel()}this.backend.clear(e,t,n,s),i!==null&&this._renderTarget===null&&this._renderOutput(i)}clearColor(){return this.clear(!0,!1,!1)}clearDepth(){return this.clear(!1,!0,!1)}clearStencil(){return this.clear(!1,!1,!0)}async clearAsync(e=!0,t=!0,n=!0){this._initialized===!1&&await this.init(),this.clear(e,t,n)}async clearColorAsync(){this.clearAsync(!0,!1,!1)}async clearDepthAsync(){this.clearAsync(!1,!0,!1)}async clearStencilAsync(){this.clearAsync(!1,!1,!0)}get currentToneMapping(){return this.isOutputTarget?this.toneMapping:bA}get currentColorSpace(){return this.isOutputTarget?this.outputColorSpace:bn.workingColorSpace}get isOutputTarget(){return this._renderTarget===this._outputRenderTarget||this._renderTarget===null}dispose(){this._initialized===!0&&(this.info.dispose(),this.backend.dispose(),this._animation.dispose(),this._objects.dispose(),this._pipelines.dispose(),this._nodes.dispose(),this._bindings.dispose(),this._renderLists.dispose(),this._renderContexts.dispose(),this._textures.dispose(),this._frameBufferTarget!==null&&this._frameBufferTarget.dispose(),Object.values(this.backend.timestampQueryPool).forEach(e=>{e!==null&&e.dispose()})),this.setRenderTarget(null),this.setAnimationLoop(null)}setRenderTarget(e,t=0,n=0){this._renderTarget=e,this._activeCubeFace=t,this._activeMipmapLevel=n}getRenderTarget(){return this._renderTarget}setOutputRenderTarget(e){this._outputRenderTarget=e}getOutputRenderTarget(){return this._outputRenderTarget}_resetXRState(){this.backend.setXRTarget(null),this.setOutputRenderTarget(null),this.setRenderTarget(null),this._frameBufferTarget.dispose(),this._frameBufferTarget=null}setRenderObjectFunction(e){this._renderObjectFunction=e}getRenderObjectFunction(){return this._renderObjectFunction}compute(e,t=null){if(this._isDeviceLost===!0)return;if(this._initialized===!1)return console.warn("THREE.Renderer: .compute() called before the backend is initialized. Try using .computeAsync() instead."),this.computeAsync(e);const n=this._nodes.nodeFrame,i=n.renderId;this.info.calls++,this.info.compute.calls++,this.info.compute.frameCalls++,n.renderId=this.info.calls;const s=this.backend,o=this._pipelines,u=this._bindings,h=this._nodes,d=Array.isArray(e)?e:[e];if(d[0]===void 0||d[0].isComputeNode!==!0)throw new Error("THREE.Renderer: .compute() expects a ComputeNode.");s.beginCompute(e);for(const m of d){if(o.has(m)===!1){const b=()=>{m.removeEventListener("dispose",b),o.delete(m),u.delete(m),h.delete(m)};m.addEventListener("dispose",b);const T=m.onInitFunction;T!==null&&T.call(m,{renderer:this})}h.updateForCompute(m),u.updateForCompute(m);const y=u.getForCompute(m),x=o.getForCompute(m,y);s.compute(e,m,y,x,t)}s.finishCompute(e),n.renderId=i}async computeAsync(e,t=null){this._initialized===!1&&await this.init(),this.compute(e,t)}async hasFeatureAsync(e){return this._initialized===!1&&await this.init(),this.backend.hasFeature(e)}async resolveTimestampsAsync(e="render"){return this._initialized===!1&&await this.init(),this.backend.resolveTimestampsAsync(e)}hasFeature(e){return this._initialized===!1?(console.warn("THREE.Renderer: .hasFeature() called before the backend is initialized. Try using .hasFeatureAsync() instead."),!1):this.backend.hasFeature(e)}hasInitialized(){return this._initialized}async initTextureAsync(e){this._initialized===!1&&await this.init(),this._textures.updateTexture(e)}initTexture(e){this._initialized===!1&&console.warn("THREE.Renderer: .initTexture() called before the backend is initialized. Try using .initTextureAsync() instead."),this._textures.updateTexture(e)}copyFramebufferToTexture(e,t=null){if(t!==null)if(t.isVector2)t=Rs.set(t.x,t.y,e.image.width,e.image.height).floor();else if(t.isVector4)t=Rs.copy(t).floor();else{console.error("THREE.Renderer.copyFramebufferToTexture: Invalid rectangle.");return}else t=Rs.set(0,0,e.image.width,e.image.height);let n=this._currentRenderContext,i;n!==null?i=n.renderTarget:(i=this._renderTarget||this._getFrameBufferTarget(),i!==null&&(this._textures.updateRenderTarget(i),n=this._textures.get(i))),this._textures.updateTexture(e,{renderTarget:i}),this.backend.copyFramebufferToTexture(e,n,t)}copyTextureToTexture(e,t,n=null,i=null,s=0,o=0){this._textures.updateTexture(e),this._textures.updateTexture(t),this.backend.copyTextureToTexture(e,t,n,i,s,o)}async readRenderTargetPixelsAsync(e,t,n,i,s,o=0,u=0){return this.backend.copyTextureToBuffer(e.textures[o],t,n,i,s,u)}_projectObject(e,t,n,i,s){if(e.visible===!1)return;if(e.layers.test(t.layers)){if(e.isGroup)n=e.renderOrder,e.isClippingGroup&&e.enabled&&(s=s.getGroupContext(e));else if(e.isLOD)e.autoUpdate===!0&&e.update(t);else if(e.isLight)i.pushLight(e);else if(e.isSprite){const h=t.isArrayCamera?Sh:wh;if(!e.frustumCulled||h.intersectsSprite(e,t)){this.sortObjects===!0&&Rs.setFromMatrixPosition(e.matrixWorld).applyMatrix4(C0);const{geometry:d,material:m}=e;m.visible&&i.push(e,d,m,n,Rs.z,null,s)}}else if(e.isLineLoop)console.error("THREE.Renderer: Objects of type THREE.LineLoop are not supported. Please use THREE.Line or THREE.LineSegments.");else if(e.isMesh||e.isLine||e.isPoints){const h=t.isArrayCamera?Sh:wh;if(!e.frustumCulled||h.intersectsObject(e,t)){const{geometry:d,material:m}=e;if(this.sortObjects===!0&&(d.boundingSphere===null&&d.computeBoundingSphere(),Rs.copy(d.boundingSphere.center).applyMatrix4(e.matrixWorld).applyMatrix4(C0)),Array.isArray(m)){const y=d.groups;for(let x=0,b=y.length;x<b;x++){const T=y[x],M=m[T.materialIndex];M&&M.visible&&i.push(e,d,M,n,Rs.z,T,s)}}else m.visible&&i.push(e,d,m,n,Rs.z,null,s)}}}if(e.isBundleGroup===!0&&this.backend.beginBundle!==void 0){const h=i;i=this._renderLists.get(e,t),i.begin(),h.pushBundle({bundleGroup:e,camera:t,renderList:i}),i.finish()}const u=e.children;for(let h=0,d=u.length;h<d;h++)this._projectObject(u[h],t,n,i,s)}_renderBundles(e,t,n){for(const i of e)this._renderBundle(i,t,n)}_renderTransparents(e,t,n,i,s){if(t.length>0){for(const{material:o}of t)o.side=Tr;this._renderObjects(t,n,i,s,"backSide");for(const{material:o}of t)o.side=Ol;this._renderObjects(e,n,i,s);for(const{material:o}of t)o.side=pi}else this._renderObjects(e,n,i,s)}_renderObjects(e,t,n,i,s=null){for(let o=0,u=e.length;o<u;o++){const{object:h,geometry:d,material:m,group:y,clippingContext:x}=e[o];this._currentRenderObjectFunction(h,n,t,d,m,y,i,x,s)}}renderObject(e,t,n,i,s,o,u,h=null,d=null){let m,y,x;if(e.onBeforeRender(this,t,n,i,s,o),s.allowOverride===!0&&t.overrideMaterial!==null){const b=t.overrideMaterial;s.positionNode&&s.positionNode.isNode&&(m=b.positionNode,b.positionNode=s.positionNode),b.alphaTest=s.alphaTest,b.alphaMap=s.alphaMap,b.transparent=s.transparent||s.transmission>0,b.isShadowPassMaterial&&(b.side=s.shadowSide===null?s.side:s.shadowSide,s.depthNode&&s.depthNode.isNode&&(x=b.depthNode,b.depthNode=s.depthNode),s.castShadowNode&&s.castShadowNode.isNode&&(y=b.colorNode,b.colorNode=s.castShadowNode),s.castShadowPositionNode&&s.castShadowPositionNode.isNode&&(m=b.positionNode,b.positionNode=s.castShadowPositionNode)),s=b}s.transparent===!0&&s.side===pi&&s.forceSinglePass===!1?(s.side=Tr,this._handleObjectFunction(e,s,t,n,u,o,h,"backSide"),s.side=Ol,this._handleObjectFunction(e,s,t,n,u,o,h,d),s.side=pi):this._handleObjectFunction(e,s,t,n,u,o,h,d),m!==void 0&&(t.overrideMaterial.positionNode=m),x!==void 0&&(t.overrideMaterial.depthNode=x),y!==void 0&&(t.overrideMaterial.colorNode=y),e.onAfterRender(this,t,n,i,s,o)}_renderObjectDirect(e,t,n,i,s,o,u,h){const d=this._objects.get(e,t,n,i,s,this._currentRenderContext,u,h);d.drawRange=e.geometry.drawRange,d.group=o;const m=this._nodes.needsRefresh(d);m&&(this._nodes.updateBefore(d),this._geometries.updateForRender(d),this._nodes.updateForRender(d),this._bindings.updateForRender(d)),this._pipelines.updateForRender(d),this._currentRenderBundle!==null&&(this.backend.get(this._currentRenderBundle).renderObjects.push(d),d.bundle=this._currentRenderBundle.bundleGroup),this.backend.draw(d,this.info),m&&this._nodes.updateAfter(d)}_createObjectPipeline(e,t,n,i,s,o,u,h){const d=this._objects.get(e,t,n,i,s,this._currentRenderContext,u,h);d.drawRange=e.geometry.drawRange,d.group=o,this._nodes.updateBefore(d),this._geometries.updateForRender(d),this._nodes.updateForRender(d),this._bindings.updateForRender(d),this._pipelines.getForRender(d,this._compilationPromises),this._nodes.updateAfter(d)}get compile(){return this.compileAsync}}class k_{constructor(e=""){this.name=e,this.visibility=0}setVisibility(e){this.visibility|=e}clone(){return Object.assign(new this.constructor,this)}}function QG(r){return r+(bo-r%bo)%bo}class G_ extends k_{constructor(e,t=null){super(e),this.isBuffer=!0,this.bytesPerElement=Float32Array.BYTES_PER_ELEMENT,this._buffer=t}get byteLength(){return QG(this._buffer.byteLength)}get buffer(){return this._buffer}update(){return!0}}class V_ extends G_{constructor(e,t=null){super(e,t),this.isUniformBuffer=!0}}let XG=0;class z_ extends V_{constructor(e,t){super("UniformBuffer_"+XG++,e?e.value:null),this.nodeUniform=e,this.groupNode=t}get buffer(){return this.nodeUniform.value}}class YG extends V_{constructor(e){super(e),this.isUniformsGroup=!0,this._values=null,this.uniforms=[]}addUniform(e){return this.uniforms.push(e),this}removeUniform(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}get values(){return this._values===null&&(this._values=Array.from(this.buffer)),this._values}get buffer(){let e=this._buffer;if(e===null){const t=this.byteLength;e=new Float32Array(new ArrayBuffer(t)),this._buffer=e}return e}get byteLength(){const e=this.bytesPerElement;let t=0;for(let n=0,i=this.uniforms.length;n<i;n++){const s=this.uniforms[n],o=s.boundary,u=s.itemSize*e,h=t%bo,d=h%o,m=h+d;t+=d,m!==0&&bo-m<u&&(t+=bo-m),s.offset=t/e,t+=u}return Math.ceil(t/bo)*bo}update(){let e=!1;for(const t of this.uniforms)this.updateByType(t)===!0&&(e=!0);return e}updateByType(e){if(e.isNumberUniform)return this.updateNumber(e);if(e.isVector2Uniform)return this.updateVector2(e);if(e.isVector3Uniform)return this.updateVector3(e);if(e.isVector4Uniform)return this.updateVector4(e);if(e.isColorUniform)return this.updateColor(e);if(e.isMatrix3Uniform)return this.updateMatrix3(e);if(e.isMatrix4Uniform)return this.updateMatrix4(e);console.error("THREE.WebGPUUniformsGroup: Unsupported uniform type.",e)}updateNumber(e){let t=!1;const n=this.values,i=e.getValue(),s=e.offset,o=e.getType();if(n[s]!==i){const u=this._getBufferForType(o);u[s]=n[s]=i,t=!0}return t}updateVector2(e){let t=!1;const n=this.values,i=e.getValue(),s=e.offset,o=e.getType();if(n[s+0]!==i.x||n[s+1]!==i.y){const u=this._getBufferForType(o);u[s+0]=n[s+0]=i.x,u[s+1]=n[s+1]=i.y,t=!0}return t}updateVector3(e){let t=!1;const n=this.values,i=e.getValue(),s=e.offset,o=e.getType();if(n[s+0]!==i.x||n[s+1]!==i.y||n[s+2]!==i.z){const u=this._getBufferForType(o);u[s+0]=n[s+0]=i.x,u[s+1]=n[s+1]=i.y,u[s+2]=n[s+2]=i.z,t=!0}return t}updateVector4(e){let t=!1;const n=this.values,i=e.getValue(),s=e.offset,o=e.getType();if(n[s+0]!==i.x||n[s+1]!==i.y||n[s+2]!==i.z||n[s+4]!==i.w){const u=this._getBufferForType(o);u[s+0]=n[s+0]=i.x,u[s+1]=n[s+1]=i.y,u[s+2]=n[s+2]=i.z,u[s+3]=n[s+3]=i.w,t=!0}return t}updateColor(e){let t=!1;const n=this.values,i=e.getValue(),s=e.offset;if(n[s+0]!==i.r||n[s+1]!==i.g||n[s+2]!==i.b){const o=this.buffer;o[s+0]=n[s+0]=i.r,o[s+1]=n[s+1]=i.g,o[s+2]=n[s+2]=i.b,t=!0}return t}updateMatrix3(e){let t=!1;const n=this.values,i=e.getValue().elements,s=e.offset;if(n[s+0]!==i[0]||n[s+1]!==i[1]||n[s+2]!==i[2]||n[s+4]!==i[3]||n[s+5]!==i[4]||n[s+6]!==i[5]||n[s+8]!==i[6]||n[s+9]!==i[7]||n[s+10]!==i[8]){const o=this.buffer;o[s+0]=n[s+0]=i[0],o[s+1]=n[s+1]=i[1],o[s+2]=n[s+2]=i[2],o[s+4]=n[s+4]=i[3],o[s+5]=n[s+5]=i[4],o[s+6]=n[s+6]=i[5],o[s+8]=n[s+8]=i[6],o[s+9]=n[s+9]=i[7],o[s+10]=n[s+10]=i[8],t=!0}return t}updateMatrix4(e){let t=!1;const n=this.values,i=e.getValue().elements,s=e.offset;return ZG(n,i,s)===!1&&(this.buffer.set(i,s),KG(n,i,s),t=!0),t}_getBufferForType(e){return e==="int"||e==="ivec2"||e==="ivec3"||e==="ivec4"?new Int32Array(this.buffer.buffer):e==="uint"||e==="uvec2"||e==="uvec3"||e==="uvec4"?new Uint32Array(this.buffer.buffer):this.buffer}}function KG(r,e,t){for(let n=0,i=e.length;n<i;n++)r[t+n]=e[n]}function ZG(r,e,t){for(let n=0,i=e.length;n<i;n++)if(r[t+n]!==e[n])return!1;return!0}let JG=0;class $_ extends YG{constructor(e,t){super(e),this.id=JG++,this.groupNode=t,this.isNodeUniformsGroup=!0}}class H_ extends k_{constructor(e,t){super(e),this.texture=t,this.version=t?t.version:0,this.generation=null,this.isSampler=!0}set texture(e){if(this._texture===e)return;const t=()=>{this._texture=null,this.generation=null,this.version=0};this._texture&&this._texture.removeEventListener("dispose",t),this._texture=e,this.generation=null,this.version=0,this._texture&&this._texture.addEventListener("dispose",t)}get texture(){return this._texture}update(){const{texture:e,version:t}=this;return t!==e.version?(this.version=e.version,!0):!1}clone(){const e=super.clone();return e._texture=null,e.texture=this.texture,e}}let eV=0;class tV extends H_{constructor(e,t){super(e,t),this.id=eV++,this.store=!1,this.isSampledTexture=!0}}class n2 extends tV{constructor(e,t,n,i=null){super(e,t?t.value:null),this.textureNode=t,this.groupNode=n,this.access=i}update(){const{textureNode:e}=this;return this.texture!==e.value?(this.texture=e.value,!0):super.update()}}class j_ extends n2{constructor(e,t,n,i=null){super(e,t,n,i),this.isSampledCubeTexture=!0}}class gd extends n2{constructor(e,t,n,i=null){super(e,t,n,i),this.isSampledTexture3D=!0}}const ug={textureDimensions:"textureSize",equals:"equal",bitcast_float_int:"floatBitsToInt",bitcast_int_float:"intBitsToFloat",bitcast_uint_float:"uintBitsToFloat",bitcast_float_uint:"floatBitsToUint"},nV={low:"lowp",medium:"mediump",high:"highp"},cg={swizzleAssign:!0,storageBuffer:!1},hg={perspective:"smooth",linear:"noperspective"},fg={centroid:"centroid"},dg=`
precision highp float;
precision highp int;
precision highp sampler2D;
precision highp sampler3D;
precision highp samplerCube;
precision highp sampler2DArray;

precision highp usampler2D;
precision highp usampler3D;
precision highp usamplerCube;
precision highp usampler2DArray;

precision highp isampler2D;
precision highp isampler3D;
precision highp isamplerCube;
precision highp isampler2DArray;

precision lowp sampler2DShadow;
precision lowp sampler2DArrayShadow;
precision lowp samplerCubeShadow;
`;class rV extends q_{constructor(e,t){super(e,t,new DG),this.uniformGroups={},this.transforms=[],this.extensions={},this.builtins={vertex:[],fragment:[],compute:[]}}needsToWorkingColorSpace(e){return e.isVideoTexture===!0&&e.colorSpace!==RA}getMethod(e){return ug[e]||e}getBitcastMethod(e,t){return ug[`bitcast_${t}_${e}`]}getTernary(e,t,n){return`${e} ? ${t} : ${n}`}getOutputStructName(){return""}buildFunctionCode(e){const t=e.layout,n=this.flowShaderNode(e),i=[];for(const o of t.inputs)i.push(this.getType(o.type)+" "+o.name);return`${this.getType(t.type)} ${t.name}( ${i.join(", ")} ) {

	${n.vars}

${n.code}
	return ${n.result};

}`}setupPBO(e){const t=e.value;if(t.pbo===void 0){const n=t.array,i=t.count*t.itemSize,{itemSize:s}=t,o=t.array.constructor.name.toLowerCase().includes("int");let u=o?qd:Id;s===2?u=o?Od:la:s===3?u=o?Sw:Ld:s===4&&(u=o?Ud:Ii);const h={Float32Array:ci,Uint8Array:Xr,Uint16Array:dA,Uint32Array:In,Int8Array:Gl,Int16Array:Vl,Int32Array:vr,Uint8ClampedArray:Xr},d=Math.pow(2,Math.ceil(Math.log2(Math.sqrt(i/s))));let m=Math.ceil(i/s/d);d*m*s<i&&m++;const y=d*m*s,x=new n.constructor(y);x.set(n,0),t.array=x;const b=new $T(t.array,d,m,u,h[t.array.constructor.name]||ci);b.needsUpdate=!0,b.isPBOTexture=!0;const T=new gs(b,null,null);T.setPrecision("high"),t.pboNode=T,t.pbo=T.value,this.getUniformFromNode(t.pboNode,"texture",this.shaderStage,this.context.nodeName)}}getPropertyName(e,t=this.shaderStage){return e.isNodeUniform&&e.node.isTextureNode!==!0&&e.node.isBufferNode!==!0?t.charAt(0)+"_"+e.name:super.getPropertyName(e,t)}generatePBO(e){const{node:t,indexNode:n}=e,i=t.value;if(this.renderer.backend.has(i)){const m=this.renderer.backend.get(i);m.pbo=i.pbo}const s=this.getUniformFromNode(i.pboNode,"texture",this.shaderStage,this.context.nodeName),o=this.getPropertyName(s);this.increaseUsage(n);const u=n.build(this,"uint"),h=this.getDataFromNode(e);let d=h.propertyName;if(d===void 0){const m=this.getVarFromNode(e);d=this.getPropertyName(m);const y=this.getDataFromNode(t);let x=y.propertySizeName;x===void 0&&(x=d+"Size",this.getVarFromNode(t,x,"uint"),this.addLineFlowCode(`${x} = uint( textureSize( ${o}, 0 ).x )`,e),y.propertySizeName=x);const{itemSize:b}=i,T="."+Na.join("").slice(0,b),M=`ivec2(${u} % ${x}, ${u} / ${x})`,N=this.generateTextureLoad(null,o,M,null,null,"0");let C="vec4";i.pbo.type===In?C="uvec4":i.pbo.type===vr&&(C="ivec4"),this.addLineFlowCode(`${d} = ${C}(${N})${T}`,e),h.propertyName=d}return d}generateTextureLoad(e,t,n,i,s,o="0"){let u;return i?s?u=`texelFetchOffset( ${t}, ivec3( ${n}, ${i} ), ${o}, ${s} )`:u=`texelFetch( ${t}, ivec3( ${n}, ${i} ), ${o} )`:s?u=`texelFetchOffset( ${t}, ${n}, ${o}, ${s} )`:u=`texelFetch( ${t}, ${n}, ${o} )`,e!==null&&e.isDepthTexture&&(u+=".x"),u}generateTexture(e,t,n,i,s){return i&&(n=`vec3( ${n}, ${i} )`),e.isDepthTexture?s?`textureOffset( ${t}, ${n}, ${s} ).x`:`texture( ${t}, ${n} ).x`:s?`textureOffset( ${t}, ${n}, ${s} )`:`texture( ${t}, ${n} )`}generateTextureLevel(e,t,n,i,s){return s?`textureLodOffset( ${t}, ${n}, ${i}, ${s} )`:`textureLod( ${t}, ${n}, ${i} )`}generateTextureBias(e,t,n,i,s){return s?`textureOffset( ${t}, ${n}, ${s}, ${i} )`:`texture( ${t}, ${n}, ${i} )`}generateTextureGrad(e,t,n,i,s){return s?`textureGradOffset( ${t}, ${n}, ${i[0]}, ${i[1]}, ${s} )`:`textureGrad( ${t}, ${n}, ${i[0]}, ${i[1]} )`}generateTextureCompare(e,t,n,i,s,o,u=this.shaderStage){if(u==="fragment")return s?o?`textureOffset( ${t}, vec4( ${n}, ${s}, ${i} ), ${o} )`:`texture( ${t}, vec4( ${n}, ${s}, ${i} ) )`:o?`textureOffset( ${t}, vec3( ${n}, ${i} ), ${o} )`:`texture( ${t}, vec3( ${n}, ${i} ) )`;console.error(`WebGPURenderer: THREE.DepthTexture.compareFunction() does not support ${u} shader.`)}getVars(e){const t=[],n=this.vars[e];if(n!==void 0)for(const i of n)t.push(`${this.getVar(i.type,i.name,i.count)};`);return t.join(`
	`)}getUniforms(e){const t=this.uniforms[e],n=[],i={};for(const o of t){let u=null,h=!1;if(o.type==="texture"||o.type==="texture3D"){const m=o.node.value;let y="";(m.isDataTexture===!0||m.isData3DTexture===!0)&&(m.type===In?y="u":m.type===vr&&(y="i")),o.type==="texture3D"&&m.isArrayTexture===!1?u=`${y}sampler3D ${o.name};`:m.compareFunction?m.isArrayTexture===!0?u=`sampler2DArrayShadow ${o.name};`:u=`sampler2DShadow ${o.name};`:m.isArrayTexture===!0||m.isDataArrayTexture===!0||m.isCompressedArrayTexture===!0?u=`${y}sampler2DArray ${o.name};`:u=`${y}sampler2D ${o.name};`}else if(o.type==="cubeTexture")u=`samplerCube ${o.name};`;else if(o.type==="buffer"){const m=o.node,y=this.getType(m.bufferType),x=m.bufferCount,b=x>0?x:"";u=`${m.name} {
	${y} ${o.name}[${b}];
};
`}else u=`${this.getVectorType(o.type)} ${this.getPropertyName(o,e)};`,h=!0;const d=o.node.precision;if(d!==null&&(u=nV[d]+" "+u),h){u="	"+u;const m=o.groupNode.name;(i[m]||(i[m]=[])).push(u)}else u="uniform "+u,n.push(u)}let s="";for(const o in i){const u=i[o];s+=this._getGLSLUniformStruct(e+"_"+o,u.join(`
`))+`
`}return s+=n.join(`
`),s}getTypeFromAttribute(e){let t=super.getTypeFromAttribute(e);if(/^[iu]/.test(t)&&e.gpuType!==vr){let n=e;e.isInterleavedBufferAttribute&&(n=e.data);const i=n.array;i instanceof Uint32Array||i instanceof Int32Array||(t=t.slice(1))}return t}getAttributes(e){let t="";if(e==="vertex"||e==="compute"){const n=this.getAttributesArray();let i=0;for(const s of n)t+=`layout( location = ${i++} ) in ${s.type} ${s.name};
`}return t}getStructMembers(e){const t=[];for(const n of e.members)t.push(`	${n.type} ${n.name};`);return t.join(`
`)}getStructs(e){const t=[],n=this.structs[e],i=[];for(const s of n)if(s.output)for(const o of s.members)i.push(`layout( location = ${o.index} ) out ${o.type} ${o.name};`);else{let o="struct "+s.name+` {
`;o+=this.getStructMembers(s),o+=`
};
`,t.push(o)}return i.length===0&&i.push("layout( location = 0 ) out vec4 fragColor;"),`
`+i.join(`
`)+`

`+t.join(`
`)}getVaryings(e){let t="";const n=this.varyings;if(e==="vertex"||e==="compute")for(const i of n){e==="compute"&&(i.needsInterpolation=!0);const s=this.getType(i.type);if(i.needsInterpolation)if(i.interpolationType){const o=hg[i.interpolationType]||i.interpolationType,u=fg[i.interpolationSampling]||"";t+=`${o} ${u} out ${s} ${i.name};
`}else{const o=s.includes("int")||s.includes("uv")||s.includes("iv")?"flat ":"";t+=`${o}out ${s} ${i.name};
`}else t+=`${s} ${i.name};
`}else if(e==="fragment"){for(const i of n)if(i.needsInterpolation){const s=this.getType(i.type);if(i.interpolationType){const o=hg[i.interpolationType]||i.interpolationType,u=fg[i.interpolationSampling]||"";t+=`${o} ${u} in ${s} ${i.name};
`}else{const o=s.includes("int")||s.includes("uv")||s.includes("iv")?"flat ":"";t+=`${o}in ${s} ${i.name};
`}}}for(const i of this.builtins[e])t+=`${i};
`;return t}getVertexIndex(){return"uint( gl_VertexID )"}getInstanceIndex(){return"uint( gl_InstanceID )"}getInvocationLocalIndex(){return`uint( gl_InstanceID ) % ${this.object.workgroupSize.reduce((n,i)=>n*i,1)}u`}getDrawIndex(){return this.renderer.backend.extensions.has("WEBGL_multi_draw")?"uint( gl_DrawID )":null}getFrontFacing(){return"gl_FrontFacing"}getFragCoord(){return"gl_FragCoord.xy"}getFragDepth(){return"gl_FragDepth"}enableExtension(e,t,n=this.shaderStage){const i=this.extensions[n]||(this.extensions[n]=new Map);i.has(e)===!1&&i.set(e,{name:e,behavior:t})}getExtensions(e){const t=[];if(e==="vertex"){const i=this.renderer.backend.extensions;this.object.isBatchedMesh&&i.has("WEBGL_multi_draw")&&this.enableExtension("GL_ANGLE_multi_draw","require",e)}const n=this.extensions[e];if(n!==void 0)for(const{name:i,behavior:s}of n.values())t.push(`#extension ${i} : ${s}`);return t.join(`
`)}getClipDistance(){return"gl_ClipDistance"}isAvailable(e){let t=cg[e];if(t===void 0){let n;switch(t=!1,e){case"float32Filterable":n="OES_texture_float_linear";break;case"clipDistance":n="WEBGL_clip_cull_distance";break}if(n!==void 0){const i=this.renderer.backend.extensions;i.has(n)&&(i.get(n),t=!0)}cg[e]=t}return t}isFlipY(){return!0}enableHardwareClipping(e){this.enableExtension("GL_ANGLE_clip_cull_distance","require"),this.builtins.vertex.push(`out float gl_ClipDistance[ ${e} ]`)}enableMultiview(){this.enableExtension("GL_OVR_multiview2","require","fragment"),this.enableExtension("GL_OVR_multiview2","require","vertex"),this.builtins.vertex.push("layout(num_views = 2) in")}registerTransform(e,t){this.transforms.push({varyingName:e,attributeNode:t})}getTransforms(){const e=this.transforms;let t="";for(let n=0;n<e.length;n++){const i=e[n],s=this.getPropertyName(i.attributeNode);s&&(t+=`${i.varyingName} = ${s};
	`)}return t}_getGLSLUniformStruct(e,t){return`
layout( std140 ) uniform ${e} {
${t}
};`}_getGLSLVertexCode(e){return`#version 300 es

${this.getSignature()}

// extensions
${e.extensions}

// precision
${dg}

// uniforms
${e.uniforms}

// varyings
${e.varyings}

// attributes
${e.attributes}

// codes
${e.codes}

void main() {

	// vars
	${e.vars}

	// transforms
	${e.transforms}

	// flow
	${e.flow}

	gl_PointSize = 1.0;

}
`}_getGLSLFragmentCode(e){return`#version 300 es

${this.getSignature()}

// extensions
${e.extensions}

// precision
${dg}

// uniforms
${e.uniforms}

// varyings
${e.varyings}

// codes
${e.codes}

// structs
${e.structs}

void main() {

	// vars
	${e.vars}

	// flow
	${e.flow}

}
`}buildCode(){const e=this.material!==null?{fragment:{},vertex:{}}:{compute:{}};this.sortBindingGroups();for(const t in e){let n=`// code

`;n+=this.flowCode[t];const i=this.flowNodes[t],s=i[i.length-1];for(const u of i){const h=this.getFlowData(u),d=u.name;d&&(n.length>0&&(n+=`
`),n+=`	// flow -> ${d}
	`),n+=`${h.code}
	`,u===s&&t!=="compute"&&(n+=`// result
	`,t==="vertex"?(n+="gl_Position = ",n+=`${h.result};`):t==="fragment"&&(u.outputNode.isOutputStructNode||(n+="fragColor = ",n+=`${h.result};`)))}const o=e[t];o.extensions=this.getExtensions(t),o.uniforms=this.getUniforms(t),o.attributes=this.getAttributes(t),o.varyings=this.getVaryings(t),o.vars=this.getVars(t),o.structs=this.getStructs(t),o.codes=this.getCodes(t),o.transforms=this.getTransforms(t),o.flow=n}this.material!==null?(this.vertexShader=this._getGLSLVertexCode(e.vertex),this.fragmentShader=this._getGLSLFragmentCode(e.fragment)):this.computeShader=this._getGLSLVertexCode(e.compute)}getUniformFromNode(e,t,n,i=null){const s=super.getUniformFromNode(e,t,n,i),o=this.getDataFromNode(e,n,this.globalCache);let u=o.uniformGPU;if(u===void 0){const h=e.groupNode,d=h.name,m=this.getBindGroupArray(d,n);if(t==="texture")u=new n2(s.name,s.node,h),m.push(u);else if(t==="cubeTexture")u=new j_(s.name,s.node,h),m.push(u);else if(t==="texture3D")u=new gd(s.name,s.node,h),m.push(u);else if(t==="buffer"){e.name=`NodeBuffer_${e.id}`,s.name=`buffer${e.id}`;const y=new z_(e,h);y.name=e.name,m.push(y),u=y}else{const y=this.uniformGroups[n]||(this.uniformGroups[n]={});let x=y[d];x===void 0&&(x=new $_(n+"_"+d,h),y[d]=x,m.push(x)),u=this.getNodeUniform(s,t),x.addUniform(u)}o.uniformGPU=u}return s}}let Mh=null,sA=null;class W_{constructor(e={}){this.parameters=Object.assign({},e),this.data=new WeakMap,this.renderer=null,this.domElement=null,this.timestampQueryPool={render:null,compute:null},this.trackTimestamp=e.trackTimestamp===!0}async init(e){this.renderer=e}get coordinateSystem(){}beginRender(){}finishRender(){}beginCompute(){}finishCompute(){}draw(){}compute(){}createProgram(){}destroyProgram(){}createBindings(){}updateBindings(){}updateBinding(){}createRenderPipeline(){}createComputePipeline(){}needsRenderUpdate(){}getRenderCacheKey(){}createNodeBuilder(){}createSampler(){}destroySampler(){}createDefaultTexture(){}createTexture(){}updateTexture(){}generateMipmaps(){}destroyTexture(){}async copyTextureToBuffer(){}copyTextureToTexture(){}copyFramebufferToTexture(){}createAttribute(){}createIndexAttribute(){}createStorageAttribute(){}updateAttribute(){}destroyAttribute(){}getContext(){}updateSize(){}updateViewport(){}getTimestampUID(e){const t=this.get(e);let n=e.isComputeNode===!0?"c":"r";return n+=":"+t.frameCalls+":"+e.id,n}isOccluded(){}async resolveTimestampsAsync(e="render"){if(!this.trackTimestamp){ki("WebGPURenderer: Timestamp tracking is disabled.");return}const t=this.timestampQueryPool[e];if(!t){ki(`WebGPURenderer: No timestamp query pool for type '${e}' found.`);return}const n=await t.resolveQueriesAsync();return this.renderer.info[e].timestamp=n,n}async waitForGPU(){}async getArrayBufferAsync(){}async hasFeatureAsync(){}hasFeature(){}getMaxAnisotropy(){}getDrawingBufferSize(){return Mh=Mh||new Ot,this.renderer.getDrawingBufferSize(Mh)}setScissorTest(){}getClearColor(){const e=this.renderer;return sA=sA||new d3,e.getClearColor(sA),sA.getRGB(sA),sA}getDomElement(){let e=this.domElement;return e===null&&(e=this.parameters.canvas!==void 0?this.parameters.canvas:IT(),"setAttribute"in e&&e.setAttribute("data-engine",`three.js r${e6} webgpu`),this.domElement=e),e}set(e,t){this.data.set(e,t)}get(e){let t=this.data.get(e);return t===void 0&&(t={},this.data.set(e,t)),t}has(e){return this.data.has(e)}delete(e){this.data.delete(e)}dispose(){}}let iV=0;class sV{constructor(e,t){this.buffers=[e.bufferGPU,t],this.type=e.type,this.bufferType=e.bufferType,this.pbo=e.pbo,this.byteLength=e.byteLength,this.bytesPerElement=e.BYTES_PER_ELEMENT,this.version=e.version,this.isInteger=e.isInteger,this.activeBufferIndex=0,this.baseId=e.id}get id(){return`${this.baseId}|${this.activeBufferIndex}`}get bufferGPU(){return this.buffers[this.activeBufferIndex]}get transformBuffer(){return this.buffers[this.activeBufferIndex^1]}switchBuffers(){this.activeBufferIndex^=1}}class oV{constructor(e){this.backend=e}createAttribute(e,t){const n=this.backend,{gl:i}=n,s=e.array,o=e.usage||i.STATIC_DRAW,u=e.isInterleavedBufferAttribute?e.data:e,h=n.get(u);let d=h.bufferGPU;d===void 0&&(d=this._createBuffer(i,t,s,o),h.bufferGPU=d,h.bufferType=t,h.version=u.version);let m;if(s instanceof Float32Array)m=i.FLOAT;else if(typeof Float16Array<"u"&&s instanceof Float16Array)m=i.HALF_FLOAT;else if(s instanceof Uint16Array)e.isFloat16BufferAttribute?m=i.HALF_FLOAT:m=i.UNSIGNED_SHORT;else if(s instanceof Int16Array)m=i.SHORT;else if(s instanceof Uint32Array)m=i.UNSIGNED_INT;else if(s instanceof Int32Array)m=i.INT;else if(s instanceof Int8Array)m=i.BYTE;else if(s instanceof Uint8Array)m=i.UNSIGNED_BYTE;else if(s instanceof Uint8ClampedArray)m=i.UNSIGNED_BYTE;else throw new Error("THREE.WebGLBackend: Unsupported buffer data format: "+s);let y={bufferGPU:d,bufferType:t,type:m,byteLength:s.byteLength,bytesPerElement:s.BYTES_PER_ELEMENT,version:e.version,pbo:e.pbo,isInteger:m===i.INT||m===i.UNSIGNED_INT||e.gpuType===vr,id:iV++};if(e.isStorageBufferAttribute||e.isStorageInstancedBufferAttribute){const x=this._createBuffer(i,t,s,o);y=new sV(y,x)}n.set(e,y)}updateAttribute(e){const t=this.backend,{gl:n}=t,i=e.array,s=e.isInterleavedBufferAttribute?e.data:e,o=t.get(s),u=o.bufferType,h=e.isInterleavedBufferAttribute?e.data.updateRanges:e.updateRanges;if(n.bindBuffer(u,o.bufferGPU),h.length===0)n.bufferSubData(u,0,i);else{for(let d=0,m=h.length;d<m;d++){const y=h[d];n.bufferSubData(u,y.start*i.BYTES_PER_ELEMENT,i,y.start,y.count)}s.clearUpdateRanges()}n.bindBuffer(u,null),o.version=s.version}destroyAttribute(e){const t=this.backend,{gl:n}=t;e.isInterleavedBufferAttribute&&t.delete(e.data);const i=t.get(e);n.deleteBuffer(i.bufferGPU),t.delete(e)}async getArrayBufferAsync(e){const t=this.backend,{gl:n}=t,i=e.isInterleavedBufferAttribute?e.data:e,{bufferGPU:s}=t.get(i),o=e.array,u=o.byteLength;n.bindBuffer(n.COPY_READ_BUFFER,s);const h=n.createBuffer();n.bindBuffer(n.COPY_WRITE_BUFFER,h),n.bufferData(n.COPY_WRITE_BUFFER,u,n.STREAM_READ),n.copyBufferSubData(n.COPY_READ_BUFFER,n.COPY_WRITE_BUFFER,0,0,u),await t.utils._clientWaitAsync();const d=new e.array.constructor(o.length);return n.bindBuffer(n.COPY_WRITE_BUFFER,h),n.getBufferSubData(n.COPY_WRITE_BUFFER,0,d),n.deleteBuffer(h),n.bindBuffer(n.COPY_READ_BUFFER,null),n.bindBuffer(n.COPY_WRITE_BUFFER,null),d.buffer}_createBuffer(e,t,n,i){const s=e.createBuffer();return e.bindBuffer(t,s),e.bufferData(t,n,i),e.bindBuffer(t,null),s}}let Eh,Sl;class aV{constructor(e){this.backend=e,this.gl=this.backend.gl,this.enabled={},this.currentFlipSided=null,this.currentCullFace=null,this.currentProgram=null,this.currentBlendingEnabled=!1,this.currentBlending=null,this.currentBlendSrc=null,this.currentBlendDst=null,this.currentBlendSrcAlpha=null,this.currentBlendDstAlpha=null,this.currentPremultipledAlpha=null,this.currentPolygonOffsetFactor=null,this.currentPolygonOffsetUnits=null,this.currentColorMask=null,this.currentDepthFunc=null,this.currentDepthMask=null,this.currentStencilFunc=null,this.currentStencilRef=null,this.currentStencilFuncMask=null,this.currentStencilFail=null,this.currentStencilZFail=null,this.currentStencilZPass=null,this.currentStencilMask=null,this.currentLineWidth=null,this.currentClippingPlanes=0,this.currentVAO=null,this.currentIndex=null,this.currentBoundFramebuffers={},this.currentDrawbuffers=new WeakMap,this.maxTextures=this.gl.getParameter(this.gl.MAX_TEXTURE_IMAGE_UNITS),this.currentTextureSlot=null,this.currentBoundTextures={},this.currentBoundBufferBases={},this._init()}_init(){const e=this.gl;Eh={[Ls]:e.FUNC_ADD,[u6]:e.FUNC_SUBTRACT,[l6]:e.FUNC_REVERSE_SUBTRACT},Sl={[mo]:e.ZERO,[_6]:e.ONE,[v6]:e.SRC_COLOR,[y6]:e.SRC_ALPHA,[g6]:e.SRC_ALPHA_SATURATE,[m6]:e.DST_COLOR,[p6]:e.DST_ALPHA,[d6]:e.ONE_MINUS_SRC_COLOR,[f6]:e.ONE_MINUS_SRC_ALPHA,[h6]:e.ONE_MINUS_DST_COLOR,[c6]:e.ONE_MINUS_DST_ALPHA};const t=e.getParameter(e.SCISSOR_BOX),n=e.getParameter(e.VIEWPORT);this.currentScissor=new Ut().fromArray(t),this.currentViewport=new Ut().fromArray(n),this._tempVec4=new Ut}enable(e){const{enabled:t}=this;t[e]!==!0&&(this.gl.enable(e),t[e]=!0)}disable(e){const{enabled:t}=this;t[e]!==!1&&(this.gl.disable(e),t[e]=!1)}setFlipSided(e){if(this.currentFlipSided!==e){const{gl:t}=this;e?t.frontFace(t.CW):t.frontFace(t.CCW),this.currentFlipSided=e}}setCullFace(e){const{gl:t}=this;e!==OT?(this.enable(t.CULL_FACE),e!==this.currentCullFace&&(e===UT?t.cullFace(t.BACK):e===kT?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):this.disable(t.CULL_FACE),this.currentCullFace=e}setLineWidth(e){const{currentLineWidth:t,gl:n}=this;e!==t&&(n.lineWidth(e),this.currentLineWidth=e)}setBlending(e,t,n,i,s,o,u,h){const{gl:d}=this;if(e===tu){this.currentBlendingEnabled===!0&&(this.disable(d.BLEND),this.currentBlendingEnabled=!1);return}if(this.currentBlendingEnabled===!1&&(this.enable(d.BLEND),this.currentBlendingEnabled=!0),e!==kl){if(e!==this.currentBlending||h!==this.currentPremultipledAlpha){if((this.currentBlendEquation!==Ls||this.currentBlendEquationAlpha!==Ls)&&(d.blendEquation(d.FUNC_ADD),this.currentBlendEquation=Ls,this.currentBlendEquationAlpha=Ls),h)switch(e){case Os:d.blendFuncSeparate(d.ONE,d.ONE_MINUS_SRC_ALPHA,d.ONE,d.ONE_MINUS_SRC_ALPHA);break;case gc:d.blendFunc(d.ONE,d.ONE);break;case mc:d.blendFuncSeparate(d.ZERO,d.ONE_MINUS_SRC_COLOR,d.ZERO,d.ONE);break;case pc:d.blendFuncSeparate(d.DST_COLOR,d.ONE_MINUS_SRC_ALPHA,d.ZERO,d.ONE);break;default:console.error("THREE.WebGLState: Invalid blending: ",e);break}else switch(e){case Os:d.blendFuncSeparate(d.SRC_ALPHA,d.ONE_MINUS_SRC_ALPHA,d.ONE,d.ONE_MINUS_SRC_ALPHA);break;case gc:d.blendFuncSeparate(d.SRC_ALPHA,d.ONE,d.ONE,d.ONE);break;case mc:console.error("THREE.WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case pc:console.error("THREE.WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:console.error("THREE.WebGLState: Invalid blending: ",e);break}this.currentBlendSrc=null,this.currentBlendDst=null,this.currentBlendSrcAlpha=null,this.currentBlendDstAlpha=null,this.currentBlending=e,this.currentPremultipledAlpha=h}return}s=s||t,o=o||n,u=u||i,(t!==this.currentBlendEquation||s!==this.currentBlendEquationAlpha)&&(d.blendEquationSeparate(Eh[t],Eh[s]),this.currentBlendEquation=t,this.currentBlendEquationAlpha=s),(n!==this.currentBlendSrc||i!==this.currentBlendDst||o!==this.currentBlendSrcAlpha||u!==this.currentBlendDstAlpha)&&(d.blendFuncSeparate(Sl[n],Sl[i],Sl[o],Sl[u]),this.currentBlendSrc=n,this.currentBlendDst=i,this.currentBlendSrcAlpha=o,this.currentBlendDstAlpha=u),this.currentBlending=e,this.currentPremultipledAlpha=!1}setColorMask(e){this.currentColorMask!==e&&(this.gl.colorMask(e,e,e,e),this.currentColorMask=e)}setDepthTest(e){const{gl:t}=this;e?this.enable(t.DEPTH_TEST):this.disable(t.DEPTH_TEST)}setDepthMask(e){this.currentDepthMask!==e&&(this.gl.depthMask(e),this.currentDepthMask=e)}setDepthFunc(e){if(this.currentDepthFunc!==e){const{gl:t}=this;switch(e){case N6:t.depthFunc(t.NEVER);break;case E6:t.depthFunc(t.ALWAYS);break;case M6:t.depthFunc(t.LESS);break;case S6:t.depthFunc(t.LEQUAL);break;case w6:t.depthFunc(t.EQUAL);break;case T6:t.depthFunc(t.GEQUAL);break;case b6:t.depthFunc(t.GREATER);break;case x6:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}this.currentDepthFunc=e}}scissor(e,t,n,i){const s=this._tempVec4.set(e,t,n,i);if(this.currentScissor.equals(s)===!1){const{gl:o}=this;o.scissor(s.x,s.y,s.z,s.w),this.currentScissor.copy(s)}}viewport(e,t,n,i){const s=this._tempVec4.set(e,t,n,i);if(this.currentViewport.equals(s)===!1){const{gl:o}=this;o.viewport(s.x,s.y,s.z,s.w),this.currentViewport.copy(s)}}setScissorTest(e){const t=this.gl;e?t.enable(t.SCISSOR_TEST):t.disable(t.SCISSOR_TEST)}setStencilTest(e){const{gl:t}=this;e?this.enable(t.STENCIL_TEST):this.disable(t.STENCIL_TEST)}setStencilMask(e){this.currentStencilMask!==e&&(this.gl.stencilMask(e),this.currentStencilMask=e)}setStencilFunc(e,t,n){(this.currentStencilFunc!==e||this.currentStencilRef!==t||this.currentStencilFuncMask!==n)&&(this.gl.stencilFunc(e,t,n),this.currentStencilFunc=e,this.currentStencilRef=t,this.currentStencilFuncMask=n)}setStencilOp(e,t,n){(this.currentStencilFail!==e||this.currentStencilZFail!==t||this.currentStencilZPass!==n)&&(this.gl.stencilOp(e,t,n),this.currentStencilFail=e,this.currentStencilZFail=t,this.currentStencilZPass=n)}setMaterial(e,t,n){const{gl:i}=this;e.side===pi?this.disable(i.CULL_FACE):this.enable(i.CULL_FACE);let s=e.side===Tr;t&&(s=!s),this.setFlipSided(s),e.blending===Os&&e.transparent===!1?this.setBlending(tu):this.setBlending(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),this.setDepthFunc(e.depthFunc),this.setDepthTest(e.depthTest),this.setDepthMask(e.depthWrite),this.setColorMask(e.colorWrite);const o=e.stencilWrite;if(this.setStencilTest(o),o&&(this.setStencilMask(e.stencilWriteMask),this.setStencilFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),this.setStencilOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),this.setPolygonOffset(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),e.alphaToCoverage===!0&&this.backend.renderer.samples>1?this.enable(i.SAMPLE_ALPHA_TO_COVERAGE):this.disable(i.SAMPLE_ALPHA_TO_COVERAGE),n>0&&this.currentClippingPlanes!==n)for(let h=0;h<8;h++)h<n?this.enable(12288+h):this.disable(12288+h)}setPolygonOffset(e,t,n){const{gl:i}=this;e?(this.enable(i.POLYGON_OFFSET_FILL),(this.currentPolygonOffsetFactor!==t||this.currentPolygonOffsetUnits!==n)&&(i.polygonOffset(t,n),this.currentPolygonOffsetFactor=t,this.currentPolygonOffsetUnits=n)):this.disable(i.POLYGON_OFFSET_FILL)}useProgram(e){return this.currentProgram!==e?(this.gl.useProgram(e),this.currentProgram=e,!0):!1}setVertexState(e,t=null){const n=this.gl;return this.currentVAO!==e||this.currentIndex!==t?(n.bindVertexArray(e),t!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t),this.currentVAO=e,this.currentIndex=t,!0):!1}resetVertexState(){const e=this.gl;e.bindVertexArray(null),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null),this.currentVAO=null,this.currentIndex=null}bindFramebuffer(e,t){const{gl:n,currentBoundFramebuffers:i}=this;return i[e]!==t?(n.bindFramebuffer(e,t),i[e]=t,e===n.DRAW_FRAMEBUFFER&&(i[n.FRAMEBUFFER]=t),e===n.FRAMEBUFFER&&(i[n.DRAW_FRAMEBUFFER]=t),!0):!1}drawBuffers(e,t){const{gl:n}=this;let i=[],s=!1;if(e.textures!==null){i=this.currentDrawbuffers.get(t),i===void 0&&(i=[],this.currentDrawbuffers.set(t,i));const o=e.textures;if(i.length!==o.length||i[0]!==n.COLOR_ATTACHMENT0){for(let u=0,h=o.length;u<h;u++)i[u]=n.COLOR_ATTACHMENT0+u;i.length=o.length,s=!0}}else i[0]!==n.BACK&&(i[0]=n.BACK,s=!0);s&&n.drawBuffers(i)}activeTexture(e){const{gl:t,currentTextureSlot:n,maxTextures:i}=this;e===void 0&&(e=t.TEXTURE0+i-1),n!==e&&(t.activeTexture(e),this.currentTextureSlot=e)}bindTexture(e,t,n){const{gl:i,currentTextureSlot:s,currentBoundTextures:o,maxTextures:u}=this;n===void 0&&(s===null?n=i.TEXTURE0+u-1:n=s);let h=o[n];h===void 0&&(h={type:void 0,texture:void 0},o[n]=h),(h.type!==e||h.texture!==t)&&(s!==n&&(i.activeTexture(n),this.currentTextureSlot=n),i.bindTexture(e,t),h.type=e,h.texture=t)}bindBufferBase(e,t,n){const{gl:i}=this,s=`${e}-${t}`;return this.currentBoundBufferBases[s]!==n?(i.bindBufferBase(e,t,n),this.currentBoundBufferBases[s]=n,!0):!1}unbindTexture(){const{gl:e,currentTextureSlot:t,currentBoundTextures:n}=this,i=n[t];i!==void 0&&i.type!==void 0&&(e.bindTexture(i.type,null),i.type=void 0,i.texture=void 0)}}class AV{constructor(e){this.backend=e,this.gl=this.backend.gl,this.extensions=e.extensions}convert(e,t=RA){const{gl:n,extensions:i}=this;let s;const o=bn.getTransfer(t);if(e===Xr)return n.UNSIGNED_BYTE;if(e===GT)return n.UNSIGNED_SHORT_4_4_4_4;if(e===VT)return n.UNSIGNED_SHORT_5_5_5_1;if(e===R6)return n.UNSIGNED_INT_5_9_9_9_REV;if(e===C6)return n.UNSIGNED_INT_10F_11F_11F_REV;if(e===Gl)return n.BYTE;if(e===Vl)return n.SHORT;if(e===dA)return n.UNSIGNED_SHORT;if(e===vr)return n.INT;if(e===In)return n.UNSIGNED_INT;if(e===ci)return n.FLOAT;if(e===Rr)return n.HALF_FLOAT;if(e===zT)return n.ALPHA;if(e===Ld)return n.RGB;if(e===Ii)return n.RGBA;if(e===Ro)return n.DEPTH_COMPONENT;if(e===No)return n.DEPTH_STENCIL;if(e===Id)return n.RED;if(e===qd)return n.RED_INTEGER;if(e===la)return n.RG;if(e===Od)return n.RG_INTEGER;if(e===Ud)return n.RGBA_INTEGER;if(e===j0||e===W0||e===Q0||e===X0)if(o===dt)if(s=i.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(e===j0)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(e===W0)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(e===Q0)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(e===X0)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=i.get("WEBGL_compressed_texture_s3tc"),s!==null){if(e===j0)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===W0)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===Q0)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===X0)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(e===D4||e===F4||e===L4||e===I4)if(s=i.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(e===D4)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===F4)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===L4)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===I4)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(e===Vh||e===zh||e===$h)if(s=i.get("WEBGL_compressed_texture_etc"),s!==null){if(e===Vh||e===zh)return o===dt?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(e===$h)return o===dt?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(e===Hh||e===jh||e===Wh||e===Qh||e===Xh||e===Yh||e===Kh||e===Zh||e===Jh||e===ef||e===tf||e===nf||e===rf||e===sf)if(s=i.get("WEBGL_compressed_texture_astc"),s!==null){if(e===Hh)return o===dt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(e===jh)return o===dt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(e===Wh)return o===dt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(e===Qh)return o===dt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(e===Xh)return o===dt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(e===Yh)return o===dt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(e===Kh)return o===dt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(e===Zh)return o===dt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(e===Jh)return o===dt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(e===ef)return o===dt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(e===tf)return o===dt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(e===nf)return o===dt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(e===rf)return o===dt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(e===sf)return o===dt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(e===of)if(s=i.get("EXT_texture_compression_bptc"),s!==null){if(e===of)return o===dt?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(e===af||e===Af||e===lf||e===uf)if(s=i.get("EXT_texture_compression_rgtc"),s!==null){if(e===af)return s.COMPRESSED_RED_RGTC1_EXT;if(e===Af)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(e===lf)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(e===uf)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return e===Eo?n.UNSIGNED_INT_24_8:n[e]!==void 0?n[e]:null}_clientWaitAsync(){const{gl:e}=this,t=e.fenceSync(e.SYNC_GPU_COMMANDS_COMPLETE,0);return e.flush(),new Promise((n,i)=>{function s(){const o=e.clientWaitSync(t,e.SYNC_FLUSH_COMMANDS_BIT,0);if(o===e.WAIT_FAILED){e.deleteSync(t),i();return}if(o===e.TIMEOUT_EXPIRED){requestAnimationFrame(s);return}e.deleteSync(t),n()}s()})}}let pg=!1,P0,Nh,mg;class lV{constructor(e){this.backend=e,this.gl=e.gl,this.extensions=e.extensions,this.defaultTextures={},pg===!1&&(this._init(),pg=!0)}_init(){const e=this.gl;P0={[v1]:e.REPEAT,[Dd]:e.CLAMP_TO_EDGE,[y1]:e.MIRRORED_REPEAT},Nh={[Fi]:e.NEAREST,[t6]:e.NEAREST_MIPMAP_NEAREST,[eu]:e.NEAREST_MIPMAP_LINEAR,[zs]:e.LINEAR,[Gh]:e.LINEAR_MIPMAP_NEAREST,[pa]:e.LINEAR_MIPMAP_LINEAR},mg={[A6]:e.NEVER,[a6]:e.ALWAYS,[Fd]:e.LESS,[o6]:e.LEQUAL,[s6]:e.EQUAL,[i6]:e.GEQUAL,[r6]:e.GREATER,[n6]:e.NOTEQUAL}}getGLTextureType(e){const{gl:t}=this;let n;return e.isCubeTexture===!0?n=t.TEXTURE_CUBE_MAP:e.isArrayTexture===!0||e.isDataArrayTexture===!0||e.isCompressedArrayTexture===!0?n=t.TEXTURE_2D_ARRAY:e.isData3DTexture===!0?n=t.TEXTURE_3D:n=t.TEXTURE_2D,n}getInternalFormat(e,t,n,i,s=!1){const{gl:o,extensions:u}=this;if(e!==null){if(o[e]!==void 0)return o[e];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+e+"'")}let h=t;if(t===o.RED&&(n===o.FLOAT&&(h=o.R32F),n===o.HALF_FLOAT&&(h=o.R16F),n===o.UNSIGNED_BYTE&&(h=o.R8),n===o.UNSIGNED_SHORT&&(h=o.R16),n===o.UNSIGNED_INT&&(h=o.R32UI),n===o.BYTE&&(h=o.R8I),n===o.SHORT&&(h=o.R16I),n===o.INT&&(h=o.R32I)),t===o.RED_INTEGER&&(n===o.UNSIGNED_BYTE&&(h=o.R8UI),n===o.UNSIGNED_SHORT&&(h=o.R16UI),n===o.UNSIGNED_INT&&(h=o.R32UI),n===o.BYTE&&(h=o.R8I),n===o.SHORT&&(h=o.R16I),n===o.INT&&(h=o.R32I)),t===o.RG&&(n===o.FLOAT&&(h=o.RG32F),n===o.HALF_FLOAT&&(h=o.RG16F),n===o.UNSIGNED_BYTE&&(h=o.RG8),n===o.UNSIGNED_SHORT&&(h=o.RG16),n===o.UNSIGNED_INT&&(h=o.RG32UI),n===o.BYTE&&(h=o.RG8I),n===o.SHORT&&(h=o.RG16I),n===o.INT&&(h=o.RG32I)),t===o.RG_INTEGER&&(n===o.UNSIGNED_BYTE&&(h=o.RG8UI),n===o.UNSIGNED_SHORT&&(h=o.RG16UI),n===o.UNSIGNED_INT&&(h=o.RG32UI),n===o.BYTE&&(h=o.RG8I),n===o.SHORT&&(h=o.RG16I),n===o.INT&&(h=o.RG32I)),t===o.RGB){const d=s?B4:bn.getTransfer(i);n===o.FLOAT&&(h=o.RGB32F),n===o.HALF_FLOAT&&(h=o.RGB16F),n===o.UNSIGNED_BYTE&&(h=o.RGB8),n===o.UNSIGNED_SHORT&&(h=o.RGB16),n===o.UNSIGNED_INT&&(h=o.RGB32UI),n===o.BYTE&&(h=o.RGB8I),n===o.SHORT&&(h=o.RGB16I),n===o.INT&&(h=o.RGB32I),n===o.UNSIGNED_BYTE&&(h=d===dt?o.SRGB8:o.RGB8),n===o.UNSIGNED_SHORT_5_6_5&&(h=o.RGB565),n===o.UNSIGNED_SHORT_5_5_5_1&&(h=o.RGB5_A1),n===o.UNSIGNED_SHORT_4_4_4_4&&(h=o.RGB4),n===o.UNSIGNED_INT_5_9_9_9_REV&&(h=o.RGB9_E5),n===o.UNSIGNED_INT_10F_11F_11F_REV&&(h=o.R11F_G11F_B10F)}if(t===o.RGB_INTEGER&&(n===o.UNSIGNED_BYTE&&(h=o.RGB8UI),n===o.UNSIGNED_SHORT&&(h=o.RGB16UI),n===o.UNSIGNED_INT&&(h=o.RGB32UI),n===o.BYTE&&(h=o.RGB8I),n===o.SHORT&&(h=o.RGB16I),n===o.INT&&(h=o.RGB32I)),t===o.RGBA){const d=s?B4:bn.getTransfer(i);n===o.FLOAT&&(h=o.RGBA32F),n===o.HALF_FLOAT&&(h=o.RGBA16F),n===o.UNSIGNED_BYTE&&(h=o.RGBA8),n===o.UNSIGNED_SHORT&&(h=o.RGBA16),n===o.UNSIGNED_INT&&(h=o.RGBA32UI),n===o.BYTE&&(h=o.RGBA8I),n===o.SHORT&&(h=o.RGBA16I),n===o.INT&&(h=o.RGBA32I),n===o.UNSIGNED_BYTE&&(h=d===dt?o.SRGB8_ALPHA8:o.RGBA8),n===o.UNSIGNED_SHORT_4_4_4_4&&(h=o.RGBA4),n===o.UNSIGNED_SHORT_5_5_5_1&&(h=o.RGB5_A1)}return t===o.RGBA_INTEGER&&(n===o.UNSIGNED_BYTE&&(h=o.RGBA8UI),n===o.UNSIGNED_SHORT&&(h=o.RGBA16UI),n===o.UNSIGNED_INT&&(h=o.RGBA32UI),n===o.BYTE&&(h=o.RGBA8I),n===o.SHORT&&(h=o.RGBA16I),n===o.INT&&(h=o.RGBA32I)),t===o.DEPTH_COMPONENT&&(n===o.UNSIGNED_SHORT&&(h=o.DEPTH_COMPONENT16),n===o.UNSIGNED_INT&&(h=o.DEPTH_COMPONENT24),n===o.FLOAT&&(h=o.DEPTH_COMPONENT32F)),t===o.DEPTH_STENCIL&&n===o.UNSIGNED_INT_24_8&&(h=o.DEPTH24_STENCIL8),(h===o.R16F||h===o.R32F||h===o.RG16F||h===o.RG32F||h===o.RGBA16F||h===o.RGBA32F)&&u.get("EXT_color_buffer_float"),h}setTextureParameters(e,t){const{gl:n,extensions:i,backend:s}=this,o=bn.getPrimaries(bn.workingColorSpace),u=t.colorSpace===RA?null:bn.getPrimaries(t.colorSpace),h=t.colorSpace===RA||o===u?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,t.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,t.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,h),n.texParameteri(e,n.TEXTURE_WRAP_S,P0[t.wrapS]),n.texParameteri(e,n.TEXTURE_WRAP_T,P0[t.wrapT]),(e===n.TEXTURE_3D||e===n.TEXTURE_2D_ARRAY)&&(t.isArrayTexture||n.texParameteri(e,n.TEXTURE_WRAP_R,P0[t.wrapR])),n.texParameteri(e,n.TEXTURE_MAG_FILTER,Nh[t.magFilter]);const d=t.mipmaps!==void 0&&t.mipmaps.length>0,m=t.minFilter===zs&&d?pa:t.minFilter;if(n.texParameteri(e,n.TEXTURE_MIN_FILTER,Nh[m]),t.compareFunction&&(n.texParameteri(e,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(e,n.TEXTURE_COMPARE_FUNC,mg[t.compareFunction])),i.has("EXT_texture_filter_anisotropic")===!0){if(t.magFilter===Fi||t.minFilter!==eu&&t.minFilter!==pa||t.type===ci&&i.has("OES_texture_float_linear")===!1)return;if(t.anisotropy>1){const y=i.get("EXT_texture_filter_anisotropic");n.texParameterf(e,y.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(t.anisotropy,s.getMaxAnisotropy()))}}}createDefaultTexture(e){const{gl:t,backend:n,defaultTextures:i}=this,s=this.getGLTextureType(e);let o=i[s];o===void 0&&(o=t.createTexture(),n.state.bindTexture(s,o),t.texParameteri(s,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(s,t.TEXTURE_MAG_FILTER,t.NEAREST),i[s]=o),n.set(e,{textureGPU:o,glTextureType:s,isDefault:!0})}createTexture(e,t){const{gl:n,backend:i}=this,{levels:s,width:o,height:u,depth:h}=t,d=i.utils.convert(e.format,e.colorSpace),m=i.utils.convert(e.type),y=this.getInternalFormat(e.internalFormat,d,m,e.colorSpace,e.isVideoTexture),x=n.createTexture(),b=this.getGLTextureType(e);i.state.bindTexture(b,x),this.setTextureParameters(b,e),e.isArrayTexture||e.isDataArrayTexture||e.isCompressedArrayTexture?n.texStorage3D(n.TEXTURE_2D_ARRAY,s,y,o,u,h):e.isData3DTexture?n.texStorage3D(n.TEXTURE_3D,s,y,o,u,h):e.isVideoTexture||n.texStorage2D(b,s,y,o,u),i.set(e,{textureGPU:x,glTextureType:b,glFormat:d,glType:m,glInternalFormat:y})}copyBufferToTexture(e,t){const{gl:n,backend:i}=this,{textureGPU:s,glTextureType:o,glFormat:u,glType:h}=i.get(t),{width:d,height:m}=t.source.data;n.bindBuffer(n.PIXEL_UNPACK_BUFFER,e),i.state.bindTexture(o,s),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!1),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),n.texSubImage2D(o,0,0,0,d,m,u,h,0),n.bindBuffer(n.PIXEL_UNPACK_BUFFER,null),i.state.unbindTexture()}updateTexture(e,t){const{gl:n}=this,{width:i,height:s}=t,{textureGPU:o,glTextureType:u,glFormat:h,glType:d,glInternalFormat:m}=this.backend.get(e);if(!(e.isRenderTargetTexture||o===void 0))if(this.backend.state.bindTexture(u,o),this.setTextureParameters(u,e),e.isCompressedTexture){const y=e.mipmaps,x=t.image;for(let b=0;b<y.length;b++){const T=y[b];e.isCompressedArrayTexture?e.format!==n.RGBA?h!==null?n.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,b,0,0,0,T.width,T.height,x.depth,h,T.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texSubImage3D(n.TEXTURE_2D_ARRAY,b,0,0,0,T.width,T.height,x.depth,h,d,T.data):h!==null?n.compressedTexSubImage2D(n.TEXTURE_2D,b,0,0,T.width,T.height,h,T.data):console.warn("Unsupported compressed texture format")}}else if(e.isCubeTexture){const y=t.images,x=e.mipmaps;for(let b=0;b<6;b++){const T=B0(y[b]);n.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+b,0,0,0,i,s,h,d,T);for(let M=0;M<x.length;M++){const N=x[M],C=B0(N.images[b]);n.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+b,M+1,0,0,C.width,C.height,h,d,C)}}}else if(e.isDataArrayTexture||e.isArrayTexture){const y=t.image;if(e.layerUpdates.size>0){const x=qT(y.width,y.height,e.format,e.type);for(const b of e.layerUpdates){const T=y.data.subarray(b*x/y.data.BYTES_PER_ELEMENT,(b+1)*x/y.data.BYTES_PER_ELEMENT);n.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,b,y.width,y.height,1,h,d,T)}e.clearLayerUpdates()}else n.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,y.width,y.height,y.depth,h,d,y.data)}else if(e.isData3DTexture){const y=t.image;n.texSubImage3D(n.TEXTURE_3D,0,0,0,0,y.width,y.height,y.depth,h,d,y.data)}else if(e.isVideoTexture)e.update(),n.texImage2D(u,0,m,h,d,t.image);else{const y=e.mipmaps;if(y.length>0)for(let x=0,b=y.length;x<b;x++){const T=y[x],M=B0(T);n.texSubImage2D(u,x,0,0,T.width,T.height,h,d,M)}else{const x=B0(t.image);n.texSubImage2D(u,0,0,0,i,s,h,d,x)}}}generateMipmaps(e){const{gl:t,backend:n}=this,{textureGPU:i,glTextureType:s}=n.get(e);n.state.bindTexture(s,i),t.generateMipmap(s)}deallocateRenderBuffers(e){const{gl:t,backend:n}=this;if(e){const i=n.get(e);if(i.renderBufferStorageSetup=void 0,i.framebuffers){for(const s in i.framebuffers)t.deleteFramebuffer(i.framebuffers[s]);delete i.framebuffers}if(i.depthRenderbuffer&&(t.deleteRenderbuffer(i.depthRenderbuffer),delete i.depthRenderbuffer),i.stencilRenderbuffer&&(t.deleteRenderbuffer(i.stencilRenderbuffer),delete i.stencilRenderbuffer),i.msaaFrameBuffer&&(t.deleteFramebuffer(i.msaaFrameBuffer),delete i.msaaFrameBuffer),i.msaaRenderbuffers){for(let s=0;s<i.msaaRenderbuffers.length;s++)t.deleteRenderbuffer(i.msaaRenderbuffers[s]);delete i.msaaRenderbuffers}}}destroyTexture(e){const{gl:t,backend:n}=this,{textureGPU:i,renderTarget:s}=n.get(e);this.deallocateRenderBuffers(s),t.deleteTexture(i),n.delete(e)}copyTextureToTexture(e,t,n=null,i=null,s=0,o=0){const{gl:u,backend:h}=this,{state:d}=this.backend,{textureGPU:m,glTextureType:y,glType:x,glFormat:b}=h.get(t);d.bindTexture(y,m);let T,M,N,C,B,P,I,D,q;const O=e.isCompressedTexture?e.mipmaps[o]:e.image;if(n!==null)T=n.max.x-n.min.x,M=n.max.y-n.min.y,N=n.isBox3?n.max.z-n.min.z:1,C=n.min.x,B=n.min.y,P=n.isBox3?n.min.z:0;else{const se=Math.pow(2,-s);T=Math.floor(O.width*se),M=Math.floor(O.height*se),e.isDataArrayTexture||e.isArrayTexture?N=O.depth:e.isData3DTexture?N=Math.floor(O.depth*se):N=1,C=0,B=0,P=0}i!==null?(I=i.x,D=i.y,q=i.z):(I=0,D=0,q=0),u.pixelStorei(u.UNPACK_FLIP_Y_WEBGL,t.flipY),u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),u.pixelStorei(u.UNPACK_ALIGNMENT,t.unpackAlignment);const k=u.getParameter(u.UNPACK_ROW_LENGTH),z=u.getParameter(u.UNPACK_IMAGE_HEIGHT),X=u.getParameter(u.UNPACK_SKIP_PIXELS),W=u.getParameter(u.UNPACK_SKIP_ROWS),K=u.getParameter(u.UNPACK_SKIP_IMAGES);u.pixelStorei(u.UNPACK_ROW_LENGTH,O.width),u.pixelStorei(u.UNPACK_IMAGE_HEIGHT,O.height),u.pixelStorei(u.UNPACK_SKIP_PIXELS,C),u.pixelStorei(u.UNPACK_SKIP_ROWS,B),u.pixelStorei(u.UNPACK_SKIP_IMAGES,P);const Z=t.isDataArrayTexture||t.isData3DTexture||t.isArrayTexture;if(e.isRenderTargetTexture||e.isDepthTexture){const se=h.get(e),Y=h.get(t),oe=h.get(se.renderTarget),he=h.get(Y.renderTarget),_e=oe.framebuffers[se.cacheKey],ye=he.framebuffers[Y.cacheKey];d.bindFramebuffer(u.READ_FRAMEBUFFER,_e),d.bindFramebuffer(u.DRAW_FRAMEBUFFER,ye);let Pe=u.COLOR_BUFFER_BIT;e.isDepthTexture&&(Pe=u.DEPTH_BUFFER_BIT),u.blitFramebuffer(C,B,T,M,I,D,T,M,Pe,u.NEAREST),d.bindFramebuffer(u.READ_FRAMEBUFFER,null),d.bindFramebuffer(u.DRAW_FRAMEBUFFER,null)}else Z?e.isDataTexture||e.isData3DTexture?u.texSubImage3D(y,o,I,D,q,T,M,N,b,x,O.data):t.isCompressedArrayTexture?u.compressedTexSubImage3D(y,o,I,D,q,T,M,N,b,O.data):u.texSubImage3D(y,o,I,D,q,T,M,N,b,x,O):e.isDataTexture?u.texSubImage2D(y,o,I,D,T,M,b,x,O.data):e.isCompressedTexture?u.compressedTexSubImage2D(y,o,I,D,O.width,O.height,b,O.data):u.texSubImage2D(y,o,I,D,T,M,b,x,O);u.pixelStorei(u.UNPACK_ROW_LENGTH,k),u.pixelStorei(u.UNPACK_IMAGE_HEIGHT,z),u.pixelStorei(u.UNPACK_SKIP_PIXELS,X),u.pixelStorei(u.UNPACK_SKIP_ROWS,W),u.pixelStorei(u.UNPACK_SKIP_IMAGES,K),o===0&&t.generateMipmaps&&u.generateMipmap(y),d.unbindTexture()}copyFramebufferToTexture(e,t,n){const{gl:i}=this,{state:s}=this.backend,{textureGPU:o}=this.backend.get(e),{x:u,y:h,z:d,w:m}=n,y=e.isDepthTexture===!0||t.renderTarget&&t.renderTarget.samples>0,x=t.renderTarget?t.renderTarget.height:this.backend.getDrawingBufferSize().y;if(y){const b=u!==0||h!==0;let T,M;if(e.isDepthTexture===!0?(T=i.DEPTH_BUFFER_BIT,M=i.DEPTH_ATTACHMENT,t.stencil&&(T|=i.STENCIL_BUFFER_BIT)):(T=i.COLOR_BUFFER_BIT,M=i.COLOR_ATTACHMENT0),b){const N=this.backend.get(t.renderTarget),C=N.framebuffers[t.getCacheKey()],B=N.msaaFrameBuffer;s.bindFramebuffer(i.DRAW_FRAMEBUFFER,C),s.bindFramebuffer(i.READ_FRAMEBUFFER,B);const P=x-h-m;i.blitFramebuffer(u,P,u+d,P+m,u,P,u+d,P+m,T,i.NEAREST),s.bindFramebuffer(i.READ_FRAMEBUFFER,C),s.bindTexture(i.TEXTURE_2D,o),i.copyTexSubImage2D(i.TEXTURE_2D,0,0,0,u,P,d,m),s.unbindTexture()}else{const N=i.createFramebuffer();s.bindFramebuffer(i.DRAW_FRAMEBUFFER,N),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,M,i.TEXTURE_2D,o,0),i.blitFramebuffer(0,0,d,m,0,0,d,m,T,i.NEAREST),i.deleteFramebuffer(N)}}else s.bindTexture(i.TEXTURE_2D,o),i.copyTexSubImage2D(i.TEXTURE_2D,0,0,0,u,x-m-h,d,m),s.unbindTexture();e.generateMipmaps&&this.generateMipmaps(e),this.backend._setFramebuffer(t)}setupRenderBufferStorage(e,t,n,i=!1){const{gl:s}=this,o=t.renderTarget,{depthTexture:u,depthBuffer:h,stencilBuffer:d,width:m,height:y}=o;if(s.bindRenderbuffer(s.RENDERBUFFER,e),h&&!d){let x=s.DEPTH_COMPONENT24;i===!0?this.extensions.get("WEBGL_multisampled_render_to_texture").renderbufferStorageMultisampleEXT(s.RENDERBUFFER,o.samples,x,m,y):n>0?(u&&u.isDepthTexture&&u.type===s.FLOAT&&(x=s.DEPTH_COMPONENT32F),s.renderbufferStorageMultisample(s.RENDERBUFFER,n,x,m,y)):s.renderbufferStorage(s.RENDERBUFFER,x,m,y),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_ATTACHMENT,s.RENDERBUFFER,e)}else h&&d&&(n>0?s.renderbufferStorageMultisample(s.RENDERBUFFER,n,s.DEPTH24_STENCIL8,m,y):s.renderbufferStorage(s.RENDERBUFFER,s.DEPTH_STENCIL,m,y),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.RENDERBUFFER,e));s.bindRenderbuffer(s.RENDERBUFFER,null)}async copyTextureToBuffer(e,t,n,i,s,o){const{backend:u,gl:h}=this,{textureGPU:d,glFormat:m,glType:y}=this.backend.get(e),x=h.createFramebuffer();h.bindFramebuffer(h.READ_FRAMEBUFFER,x);const b=e.isCubeTexture?h.TEXTURE_CUBE_MAP_POSITIVE_X+o:h.TEXTURE_2D;h.framebufferTexture2D(h.READ_FRAMEBUFFER,h.COLOR_ATTACHMENT0,b,d,0);const T=this._getTypedArrayType(y),M=this._getBytesPerTexel(y,m),C=i*s*M,B=h.createBuffer();h.bindBuffer(h.PIXEL_PACK_BUFFER,B),h.bufferData(h.PIXEL_PACK_BUFFER,C,h.STREAM_READ),h.readPixels(t,n,i,s,m,y,0),h.bindBuffer(h.PIXEL_PACK_BUFFER,null),await u.utils._clientWaitAsync();const P=new T(C/T.BYTES_PER_ELEMENT);return h.bindBuffer(h.PIXEL_PACK_BUFFER,B),h.getBufferSubData(h.PIXEL_PACK_BUFFER,0,P),h.bindBuffer(h.PIXEL_PACK_BUFFER,null),h.deleteFramebuffer(x),P}_getTypedArrayType(e){const{gl:t}=this;if(e===t.UNSIGNED_BYTE)return Uint8Array;if(e===t.UNSIGNED_SHORT_4_4_4_4||e===t.UNSIGNED_SHORT_5_5_5_1||e===t.UNSIGNED_SHORT_5_6_5||e===t.UNSIGNED_SHORT)return Uint16Array;if(e===t.UNSIGNED_INT)return Uint32Array;if(e===t.HALF_FLOAT)return Uint16Array;if(e===t.FLOAT)return Float32Array;throw new Error(`Unsupported WebGL type: ${e}`)}_getBytesPerTexel(e,t){const{gl:n}=this;let i=0;if(e===n.UNSIGNED_BYTE&&(i=1),(e===n.UNSIGNED_SHORT_4_4_4_4||e===n.UNSIGNED_SHORT_5_5_5_1||e===n.UNSIGNED_SHORT_5_6_5||e===n.UNSIGNED_SHORT||e===n.HALF_FLOAT)&&(i=2),(e===n.UNSIGNED_INT||e===n.FLOAT)&&(i=4),t===n.RGBA)return i*4;if(t===n.RGB)return i*3;if(t===n.ALPHA)return i}}function B0(r){return r.isDataTexture?r.image.data:typeof HTMLImageElement<"u"&&r instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&r instanceof ImageBitmap||typeof OffscreenCanvas<"u"&&r instanceof OffscreenCanvas?r:r.data}class uV{constructor(e){this.backend=e,this.gl=this.backend.gl,this.availableExtensions=this.gl.getSupportedExtensions(),this.extensions={}}get(e){let t=this.extensions[e];return t===void 0&&(t=this.gl.getExtension(e),this.extensions[e]=t),t}has(e){return this.availableExtensions.includes(e)}}class cV{constructor(e){this.backend=e,this.maxAnisotropy=null}getMaxAnisotropy(){if(this.maxAnisotropy!==null)return this.maxAnisotropy;const e=this.backend.gl,t=this.backend.extensions;if(t.has("EXT_texture_filter_anisotropic")===!0){const n=t.get("EXT_texture_filter_anisotropic");this.maxAnisotropy=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else this.maxAnisotropy=0;return this.maxAnisotropy}}const gg={WEBGL_multi_draw:"WEBGL_multi_draw",WEBGL_compressed_texture_astc:"texture-compression-astc",WEBGL_compressed_texture_etc:"texture-compression-etc2",WEBGL_compressed_texture_etc1:"texture-compression-etc1",WEBGL_compressed_texture_pvrtc:"texture-compression-pvrtc",WEBKIT_WEBGL_compressed_texture_pvrtc:"texture-compression-pvrtc",WEBGL_compressed_texture_s3tc:"texture-compression-bc",EXT_texture_compression_bptc:"texture-compression-bptc",EXT_disjoint_timer_query_webgl2:"timestamp-query",OVR_multiview2:"OVR_multiview2"};class hV{constructor(e){this.gl=e.gl,this.extensions=e.extensions,this.info=e.renderer.info,this.mode=null,this.index=0,this.type=null,this.object=null}render(e,t){const{gl:n,mode:i,object:s,type:o,info:u,index:h}=this;h!==0?n.drawElements(i,t,o,e):n.drawArrays(i,e,t),u.update(s,t,1)}renderInstances(e,t,n){const{gl:i,mode:s,type:o,index:u,object:h,info:d}=this;n!==0&&(u!==0?i.drawElementsInstanced(s,t,o,e,n):i.drawArraysInstanced(s,e,t,n),d.update(h,t,n))}renderMultiDraw(e,t,n){const{extensions:i,mode:s,object:o,info:u}=this;if(n===0)return;const h=i.get("WEBGL_multi_draw");if(h===null)for(let d=0;d<n;d++)this.render(e[d],t[d]);else{this.index!==0?h.multiDrawElementsWEBGL(s,t,0,this.type,e,0,n):h.multiDrawArraysWEBGL(s,e,0,t,0,n);let d=0;for(let m=0;m<n;m++)d+=t[m];u.update(o,d,1)}}renderMultiDrawInstances(e,t,n,i){const{extensions:s,mode:o,object:u,info:h}=this;if(n===0)return;const d=s.get("WEBGL_multi_draw");if(d===null)for(let m=0;m<n;m++)this.renderInstances(e[m],t[m],i[m]);else{this.index!==0?d.multiDrawElementsInstancedWEBGL(o,t,0,this.type,e,0,i,0,n):d.multiDrawArraysInstancedWEBGL(o,e,0,t,0,i,0,n);let m=0;for(let y=0;y<n;y++)m+=t[y]*i[y];h.update(u,m,1)}}}class Q_{constructor(e=256){this.trackTimestamp=!0,this.maxQueries=e,this.currentQueryIndex=0,this.queryOffsets=new Map,this.isDisposed=!1,this.lastValue=0,this.pendingResolve=!1}allocateQueriesForContext(){}async resolveQueriesAsync(){}dispose(){}}class fV extends Q_{constructor(e,t,n=2048){if(super(n),this.gl=e,this.type=t,this.ext=e.getExtension("EXT_disjoint_timer_query_webgl2")||e.getExtension("EXT_disjoint_timer_query"),!this.ext){console.warn("EXT_disjoint_timer_query not supported; timestamps will be disabled."),this.trackTimestamp=!1;return}this.queries=[];for(let i=0;i<this.maxQueries;i++)this.queries.push(e.createQuery());this.activeQuery=null,this.queryStates=new Map}allocateQueriesForContext(e){if(!this.trackTimestamp)return null;if(this.currentQueryIndex+2>this.maxQueries)return ki(`WebGPUTimestampQueryPool [${this.type}]: Maximum number of queries exceeded, when using trackTimestamp it is necessary to resolves the queries via renderer.resolveTimestampsAsync( THREE.TimestampQuery.${this.type.toUpperCase()} ).`),null;const t=this.currentQueryIndex;return this.currentQueryIndex+=2,this.queryStates.set(t,"inactive"),this.queryOffsets.set(e,t),t}beginQuery(e){if(!this.trackTimestamp||this.isDisposed)return;const t=this.queryOffsets.get(e);if(t==null||this.activeQuery!==null)return;const n=this.queries[t];if(n)try{this.queryStates.get(t)==="inactive"&&(this.gl.beginQuery(this.ext.TIME_ELAPSED_EXT,n),this.activeQuery=t,this.queryStates.set(t,"started"))}catch(i){console.error("Error in beginQuery:",i),this.activeQuery=null,this.queryStates.set(t,"inactive")}}endQuery(e){if(!this.trackTimestamp||this.isDisposed)return;const t=this.queryOffsets.get(e);if(t!=null&&this.activeQuery===t)try{this.gl.endQuery(this.ext.TIME_ELAPSED_EXT),this.queryStates.set(t,"ended"),this.activeQuery=null}catch(n){console.error("Error in endQuery:",n),this.queryStates.set(t,"inactive"),this.activeQuery=null}}async resolveQueriesAsync(){if(!this.trackTimestamp||this.pendingResolve)return this.lastValue;this.pendingResolve=!0;try{const e=[];for(const[i,s]of this.queryStates)if(s==="ended"){const o=this.queries[i];e.push(this.resolveQuery(o))}if(e.length===0)return this.lastValue;const n=(await Promise.all(e)).reduce((i,s)=>i+s,0);return this.lastValue=n,this.currentQueryIndex=0,this.queryOffsets.clear(),this.queryStates.clear(),this.activeQuery=null,n}catch(e){return console.error("Error resolving queries:",e),this.lastValue}finally{this.pendingResolve=!1}}async resolveQuery(e){return new Promise(t=>{if(this.isDisposed){t(this.lastValue);return}let n,i=!1;const s=()=>{n&&(clearTimeout(n),n=null)},o=h=>{i||(i=!0,s(),t(h))},u=()=>{if(this.isDisposed){o(this.lastValue);return}try{if(this.gl.getParameter(this.ext.GPU_DISJOINT_EXT)){o(this.lastValue);return}if(!this.gl.getQueryParameter(e,this.gl.QUERY_RESULT_AVAILABLE)){n=setTimeout(u,1);return}const m=this.gl.getQueryParameter(e,this.gl.QUERY_RESULT);t(Number(m)/1e6)}catch(h){console.error("Error checking query:",h),t(this.lastValue)}};u()})}dispose(){if(!this.isDisposed&&(this.isDisposed=!0,!!this.trackTimestamp)){for(const e of this.queries)this.gl.deleteQuery(e);this.queries=[],this.queryStates.clear(),this.queryOffsets.clear(),this.lastValue=0,this.activeQuery=null}}}class yg extends W_{constructor(e={}){super(e),this.isWebGLBackend=!0,this.attributeUtils=null,this.extensions=null,this.capabilities=null,this.textureUtils=null,this.bufferRenderer=null,this.gl=null,this.state=null,this.utils=null,this.vaoCache={},this.transformFeedbackCache={},this.discard=!1,this.disjoint=null,this.parallel=null,this._currentContext=null,this._knownBindings=new WeakSet,this._supportsInvalidateFramebuffer=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),this._xrFramebuffer=null}init(e){super.init(e);const t=this.parameters,n={antialias:e.samples>0,alpha:!0,depth:e.depth,stencil:e.stencil},i=t.context!==void 0?t.context:e.domElement.getContext("webgl2",n);function s(o){o.preventDefault();const u={api:"WebGL",message:o.statusMessage||"Unknown reason",reason:null,originalEvent:o};e.onDeviceLost(u)}this._onContextLost=s,e.domElement.addEventListener("webglcontextlost",s,!1),this.gl=i,this.extensions=new uV(this),this.capabilities=new cV(this),this.attributeUtils=new oV(this),this.textureUtils=new lV(this),this.bufferRenderer=new hV(this),this.state=new aV(this),this.utils=new AV(this),this.extensions.get("EXT_color_buffer_float"),this.extensions.get("WEBGL_clip_cull_distance"),this.extensions.get("OES_texture_float_linear"),this.extensions.get("EXT_color_buffer_half_float"),this.extensions.get("WEBGL_multisampled_render_to_texture"),this.extensions.get("WEBGL_render_shared_exponent"),this.extensions.get("WEBGL_multi_draw"),this.extensions.get("OVR_multiview2"),this.disjoint=this.extensions.get("EXT_disjoint_timer_query_webgl2"),this.parallel=this.extensions.get("KHR_parallel_shader_compile")}get coordinateSystem(){return dc}async getArrayBufferAsync(e){return await this.attributeUtils.getArrayBufferAsync(e)}async waitForGPU(){await this.utils._clientWaitAsync()}async makeXRCompatible(){this.gl.getContextAttributes().xrCompatible!==!0&&await this.gl.makeXRCompatible()}setXRTarget(e){this._xrFramebuffer=e}setXRRenderTargetTextures(e,t,n=null){const i=this.gl;if(this.set(e.texture,{textureGPU:t,glInternalFormat:i.RGBA8}),n!==null){const s=e.stencilBuffer?i.DEPTH24_STENCIL8:i.DEPTH_COMPONENT24;this.set(e.depthTexture,{textureGPU:n,glInternalFormat:s}),this.extensions.has("WEBGL_multisampled_render_to_texture")===!0&&e._autoAllocateDepthBuffer===!0&&e.multiview===!1&&console.warn("THREE.WebGLBackend: Render-to-texture extension was disabled because an external texture was provided"),e._autoAllocateDepthBuffer=!1}}initTimestampQuery(e,t){if(!this.disjoint||!this.trackTimestamp)return;this.timestampQueryPool[e]||(this.timestampQueryPool[e]=new fV(this.gl,e,2048));const n=this.timestampQueryPool[e];n.allocateQueriesForContext(t)!==null&&n.beginQuery(t)}prepareTimestampBuffer(e,t){if(!this.disjoint||!this.trackTimestamp)return;this.timestampQueryPool[e].endQuery(t)}getContext(){return this.gl}beginRender(e){const{state:t}=this,n=this.get(e);if(n.frameCalls=this.renderer.info.render.frameCalls,e.viewport)this.updateViewport(e);else{const{width:s,height:o}=this.getDrawingBufferSize();t.viewport(0,0,s,o)}if(e.scissor){const{x:s,y:o,width:u,height:h}=e.scissorValue;t.scissor(s,e.height-h-o,u,h)}this.initTimestampQuery(hA.RENDER,this.getTimestampUID(e)),n.previousContext=this._currentContext,this._currentContext=e,this._setFramebuffer(e),this.clear(e.clearColor,e.clearDepth,e.clearStencil,e,!1);const i=e.occlusionQueryCount;i>0&&(n.currentOcclusionQueries=n.occlusionQueries,n.currentOcclusionQueryObjects=n.occlusionQueryObjects,n.lastOcclusionObject=null,n.occlusionQueries=new Array(i),n.occlusionQueryObjects=new Array(i),n.occlusionQueryIndex=0)}finishRender(e){const{gl:t,state:n}=this,i=this.get(e),s=i.previousContext;n.resetVertexState();const o=e.occlusionQueryCount;o>0&&(o>i.occlusionQueryIndex&&t.endQuery(t.ANY_SAMPLES_PASSED),this.resolveOccludedAsync(e));const u=e.textures;if(u!==null)for(let h=0;h<u.length;h++){const d=u[h];d.generateMipmaps&&this.generateMipmaps(d)}if(this._currentContext=s,this._resolveRenderTarget(e),s!==null)if(this._setFramebuffer(s),s.viewport)this.updateViewport(s);else{const{width:h,height:d}=this.getDrawingBufferSize();n.viewport(0,0,h,d)}this.prepareTimestampBuffer(hA.RENDER,this.getTimestampUID(e))}resolveOccludedAsync(e){const t=this.get(e),{currentOcclusionQueries:n,currentOcclusionQueryObjects:i}=t;if(n&&i){const s=new WeakSet,{gl:o}=this;t.currentOcclusionQueryObjects=null,t.currentOcclusionQueries=null;const u=()=>{let h=0;for(let d=0;d<n.length;d++){const m=n[d];m!==null&&o.getQueryParameter(m,o.QUERY_RESULT_AVAILABLE)&&(o.getQueryParameter(m,o.QUERY_RESULT)===0&&s.add(i[d]),n[d]=null,o.deleteQuery(m),h++)}h<n.length?requestAnimationFrame(u):t.occluded=s};u()}}isOccluded(e,t){const n=this.get(e);return n.occluded&&n.occluded.has(t)}updateViewport(e){const{state:t}=this,{x:n,y:i,width:s,height:o}=e.viewportValue;t.viewport(n,e.height-o-i,s,o)}setScissorTest(e){this.state.setScissorTest(e)}getClearColor(){const e=super.getClearColor();return e.r*=e.a,e.g*=e.a,e.b*=e.a,e}clear(e,t,n,i=null,s=!0,o=!0){const{gl:u,renderer:h}=this;i===null&&(i={textures:null,clearColorValue:this.getClearColor()});let d=0;if(e&&(d|=u.COLOR_BUFFER_BIT),t&&(d|=u.DEPTH_BUFFER_BIT),n&&(d|=u.STENCIL_BUFFER_BIT),d!==0){let m;i.clearColorValue?m=i.clearColorValue:m=this.getClearColor();const y=h.getClearDepth(),x=h.getClearStencil();if(t&&this.state.setDepthMask(!0),i.textures===null)u.clearColor(m.r,m.g,m.b,m.a),u.clear(d);else{if(s&&this._setFramebuffer(i),e)for(let b=0;b<i.textures.length;b++)b===0?u.clearBufferfv(u.COLOR,b,[m.r,m.g,m.b,m.a]):u.clearBufferfv(u.COLOR,b,[0,0,0,1]);t&&n?u.clearBufferfi(u.DEPTH_STENCIL,0,y,x):t?u.clearBufferfv(u.DEPTH,0,[y]):n&&u.clearBufferiv(u.STENCIL,0,[x]),s&&o&&this._resolveRenderTarget(i)}}}beginCompute(e){const{state:t,gl:n}=this,i=this.get(e);i.frameCalls=this.renderer.info.compute.frameCalls,t.bindFramebuffer(n.FRAMEBUFFER,null),this.initTimestampQuery(hA.COMPUTE,this.getTimestampUID(e))}compute(e,t,n,i,s=null){const{state:o,gl:u}=this;this.discard===!1&&(u.enable(u.RASTERIZER_DISCARD),this.discard=!0);const{programGPU:h,transformBuffers:d,attributes:m}=this.get(i),y=this._getVaoKey(m),x=this.vaoCache[y];x===void 0?this.vaoCache[y]=this._createVao(m):o.setVertexState(x),o.useProgram(h),this._bindUniforms(n);const b=this._getTransformFeedback(d);u.bindTransformFeedback(u.TRANSFORM_FEEDBACK,b),u.beginTransformFeedback(u.POINTS),s=s!==null?s:t.count,Array.isArray(s)&&(ki("WebGLBackend.compute(): The count parameter must be a single number, not an array."),s=s[0]),m[0].isStorageInstancedBufferAttribute?u.drawArraysInstanced(u.POINTS,0,1,s):u.drawArrays(u.POINTS,0,s),u.endTransformFeedback(),u.bindTransformFeedback(u.TRANSFORM_FEEDBACK,null);for(let T=0;T<d.length;T++){const M=d[T];M.pbo&&this.has(M.pbo)&&this.textureUtils.copyBufferToTexture(M.transformBuffer,M.pbo),M.switchBuffers()}}finishCompute(e){const t=this.gl;this.discard=!1,t.disable(t.RASTERIZER_DISCARD),this.prepareTimestampBuffer(hA.COMPUTE,this.getTimestampUID(e)),this._currentContext&&this._setFramebuffer(this._currentContext)}_isRenderCameraDepthArray(e){return e.depthTexture&&e.depthTexture.isArrayTexture&&e.camera.isArrayCamera}draw(e){const{object:t,pipeline:n,material:i,context:s,hardwareClippingPlanes:o}=e,{programGPU:u}=this.get(n),{gl:h,state:d}=this,m=this.get(s),y=e.getDrawParameters();if(y===null)return;this._bindUniforms(e.getBindings());const x=t.isMesh&&t.matrixWorld.determinant()<0;d.setMaterial(i,x,o),d.useProgram(u);const b=e.getAttributes(),T=this.get(b);let M=T.vaoGPU;if(M===void 0){const k=this._getVaoKey(b);M=this.vaoCache[k],M===void 0&&(M=this._createVao(b),this.vaoCache[k]=M,T.vaoGPU=M)}const N=e.getIndex(),C=N!==null?this.get(N).bufferGPU:null;d.setVertexState(M,C);const B=m.lastOcclusionObject;if(B!==t&&B!==void 0){if(B!==null&&B.occlusionTest===!0&&(h.endQuery(h.ANY_SAMPLES_PASSED),m.occlusionQueryIndex++),t.occlusionTest===!0){const k=h.createQuery();h.beginQuery(h.ANY_SAMPLES_PASSED,k),m.occlusionQueries[m.occlusionQueryIndex]=k,m.occlusionQueryObjects[m.occlusionQueryIndex]=t}m.lastOcclusionObject=t}const P=this.bufferRenderer;t.isPoints?P.mode=h.POINTS:t.isLineSegments?P.mode=h.LINES:t.isLine?P.mode=h.LINE_STRIP:t.isLineLoop?P.mode=h.LINE_LOOP:i.wireframe===!0?(d.setLineWidth(i.wireframeLinewidth*this.renderer.getPixelRatio()),P.mode=h.LINES):P.mode=h.TRIANGLES;const{vertexCount:I,instanceCount:D}=y;let{firstVertex:q}=y;if(P.object=t,N!==null){q*=N.array.BYTES_PER_ELEMENT;const k=this.get(N);P.index=N.count,P.type=k.type}else P.index=0;const O=()=>{t.isBatchedMesh?t._multiDrawInstances!==null?(ki("THREE.WebGLBackend: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),P.renderMultiDrawInstances(t._multiDrawStarts,t._multiDrawCounts,t._multiDrawCount,t._multiDrawInstances)):this.hasFeature("WEBGL_multi_draw")?P.renderMultiDraw(t._multiDrawStarts,t._multiDrawCounts,t._multiDrawCount):ki("THREE.WebGLRenderer: WEBGL_multi_draw not supported."):D>1?P.renderInstances(q,I,D):P.render(q,I)};if(e.camera.isArrayCamera===!0&&e.camera.cameras.length>0&&e.camera.isMultiViewCamera===!1){const k=this.get(e.camera),z=e.camera.cameras,X=e.getBindingGroup("cameraIndex").bindings[0];if(k.indexesGPU===void 0||k.indexesGPU.length!==z.length){const oe=new Uint32Array([0,0,0,0]),he=[];for(let _e=0,ye=z.length;_e<ye;_e++){const Pe=h.createBuffer();oe[0]=_e,h.bindBuffer(h.UNIFORM_BUFFER,Pe),h.bufferData(h.UNIFORM_BUFFER,oe,h.STATIC_DRAW),he.push(Pe)}k.indexesGPU=he}const W=this.get(X),K=this.renderer.getPixelRatio(),Z=this._currentContext.renderTarget,se=this._isRenderCameraDepthArray(this._currentContext),Y=this._currentContext.activeCubeFace;if(se){const oe=this.get(Z.depthTexture);if(oe.clearedRenderId!==this.renderer._nodes.nodeFrame.renderId){oe.clearedRenderId=this.renderer._nodes.nodeFrame.renderId;const{stencilBuffer:he}=Z;for(let _e=0,ye=z.length;_e<ye;_e++)this.renderer._activeCubeFace=_e,this._currentContext.activeCubeFace=_e,this._setFramebuffer(this._currentContext),this.clear(!1,!0,he,this._currentContext,!1,!1);this.renderer._activeCubeFace=Y,this._currentContext.activeCubeFace=Y}}for(let oe=0,he=z.length;oe<he;oe++){const _e=z[oe];if(t.layers.test(_e.layers)){se&&(this.renderer._activeCubeFace=oe,this._currentContext.activeCubeFace=oe,this._setFramebuffer(this._currentContext));const ye=_e.viewport;if(ye!==void 0){const Pe=ye.x*K,qe=ye.y*K,Ye=ye.width*K,He=ye.height*K;d.viewport(Math.floor(Pe),Math.floor(e.context.height-He-qe),Math.floor(Ye),Math.floor(He))}d.bindBufferBase(h.UNIFORM_BUFFER,W.index,k.indexesGPU[oe]),O()}this._currentContext.activeCubeFace=Y,this.renderer._activeCubeFace=Y}}else O()}needsRenderUpdate(){return!1}getRenderCacheKey(){return""}createDefaultTexture(e){this.textureUtils.createDefaultTexture(e)}createTexture(e,t){this.textureUtils.createTexture(e,t)}updateTexture(e,t){this.textureUtils.updateTexture(e,t)}generateMipmaps(e){this.textureUtils.generateMipmaps(e)}destroyTexture(e){this.textureUtils.destroyTexture(e)}async copyTextureToBuffer(e,t,n,i,s,o){return this.textureUtils.copyTextureToBuffer(e,t,n,i,s,o)}createSampler(){}destroySampler(){}createNodeBuilder(e,t){return new rV(e,t)}createProgram(e){const t=this.gl,{stage:n,code:i}=e,s=n==="fragment"?t.createShader(t.FRAGMENT_SHADER):t.createShader(t.VERTEX_SHADER);t.shaderSource(s,i),t.compileShader(s),this.set(e,{shaderGPU:s})}destroyProgram(e){this.delete(e)}createRenderPipeline(e,t){const n=this.gl,i=e.pipeline,{fragmentProgram:s,vertexProgram:o}=i,u=n.createProgram(),h=this.get(s).shaderGPU,d=this.get(o).shaderGPU;if(n.attachShader(u,h),n.attachShader(u,d),n.linkProgram(u),this.set(i,{programGPU:u,fragmentShader:h,vertexShader:d}),t!==null&&this.parallel){const m=new Promise(y=>{const x=this.parallel,b=()=>{n.getProgramParameter(u,x.COMPLETION_STATUS_KHR)?(this._completeCompile(e,i),y()):requestAnimationFrame(b)};b()});t.push(m);return}this._completeCompile(e,i)}_handleSource(e,t){const n=e.split(`
`),i=[],s=Math.max(t-6,0),o=Math.min(t+6,n.length);for(let u=s;u<o;u++){const h=u+1;i.push(`${h===t?">":" "} ${h}: ${n[u]}`)}return i.join(`
`)}_getShaderErrors(e,t,n){const i=e.getShaderParameter(t,e.COMPILE_STATUS),o=(e.getShaderInfoLog(t)||"").trim();if(i&&o==="")return"";const u=/ERROR: 0:(\d+)/.exec(o);if(u){const h=parseInt(u[1]);return n.toUpperCase()+`

`+o+`

`+this._handleSource(e.getShaderSource(t),h)}else return o}_logProgramError(e,t,n){if(this.renderer.debug.checkShaderErrors){const i=this.gl,o=(i.getProgramInfoLog(e)||"").trim();if(i.getProgramParameter(e,i.LINK_STATUS)===!1)if(typeof this.renderer.debug.onShaderError=="function")this.renderer.debug.onShaderError(i,e,n,t);else{const u=this._getShaderErrors(i,n,"vertex"),h=this._getShaderErrors(i,t,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(e,i.VALIDATE_STATUS)+`

Program Info Log: `+o+`
`+u+`
`+h)}else o!==""&&console.warn("THREE.WebGLProgram: Program Info Log:",o)}}_completeCompile(e,t){const{state:n,gl:i}=this,s=this.get(t),{programGPU:o,fragmentShader:u,vertexShader:h}=s;i.getProgramParameter(o,i.LINK_STATUS)===!1&&this._logProgramError(o,u,h),n.useProgram(o);const d=e.getBindings();this._setupBindings(d,o),this.set(t,{programGPU:o})}createComputePipeline(e,t){const{state:n,gl:i}=this,s={stage:"fragment",code:`#version 300 es
precision highp float;
void main() {}`};this.createProgram(s);const{computeProgram:o}=e,u=i.createProgram(),h=this.get(s).shaderGPU,d=this.get(o).shaderGPU,m=o.transforms,y=[],x=[];for(let N=0;N<m.length;N++){const C=m[N];y.push(C.varyingName),x.push(C.attributeNode)}i.attachShader(u,h),i.attachShader(u,d),i.transformFeedbackVaryings(u,y,i.SEPARATE_ATTRIBS),i.linkProgram(u),i.getProgramParameter(u,i.LINK_STATUS)===!1&&this._logProgramError(u,h,d),n.useProgram(u),this._setupBindings(t,u);const b=o.attributes,T=[],M=[];for(let N=0;N<b.length;N++){const C=b[N].node.attribute;T.push(C),this.has(C)||this.attributeUtils.createAttribute(C,i.ARRAY_BUFFER)}for(let N=0;N<x.length;N++){const C=x[N].attribute;this.has(C)||this.attributeUtils.createAttribute(C,i.ARRAY_BUFFER);const B=this.get(C);M.push(B)}this.set(e,{programGPU:u,transformBuffers:M,attributes:T})}createBindings(e,t){if(this._knownBindings.has(t)===!1){this._knownBindings.add(t);let n=0,i=0;for(const s of t){this.set(s,{textures:i,uniformBuffers:n});for(const o of s.bindings)o.isUniformBuffer&&n++,o.isSampledTexture&&i++}}this.updateBindings(e,t)}updateBindings(e){const{gl:t}=this,n=this.get(e);let i=n.uniformBuffers,s=n.textures;for(const o of e.bindings){const u=this.get(o);if(o.isUniformsGroup||o.isUniformBuffer){const h=o.buffer;let{bufferGPU:d}=this.get(h);d===void 0?(d=t.createBuffer(),t.bindBuffer(t.UNIFORM_BUFFER,d),t.bufferData(t.UNIFORM_BUFFER,h,t.DYNAMIC_DRAW),this.set(h,{bufferGPU:d})):(t.bindBuffer(t.UNIFORM_BUFFER,d),t.bufferSubData(t.UNIFORM_BUFFER,0,h)),u.index=i++,u.bufferGPU=d,this.set(o,u)}else if(o.isSampledTexture){const{textureGPU:h,glTextureType:d}=this.get(o.texture);u.index=s++,u.textureGPU=h,u.glTextureType=d,this.set(o,u)}}}updateBinding(e){const t=this.gl;if(e.isUniformsGroup||e.isUniformBuffer){const i=this.get(e).bufferGPU,s=e.buffer;t.bindBuffer(t.UNIFORM_BUFFER,i),t.bufferData(t.UNIFORM_BUFFER,s,t.DYNAMIC_DRAW)}}createIndexAttribute(e){const t=this.gl;this.attributeUtils.createAttribute(e,t.ELEMENT_ARRAY_BUFFER)}createAttribute(e){if(this.has(e))return;const t=this.gl;this.attributeUtils.createAttribute(e,t.ARRAY_BUFFER)}createStorageAttribute(e){if(this.has(e))return;const t=this.gl;this.attributeUtils.createAttribute(e,t.ARRAY_BUFFER)}updateAttribute(e){this.attributeUtils.updateAttribute(e)}destroyAttribute(e){this.attributeUtils.destroyAttribute(e)}hasFeature(e){const t=Object.keys(gg).filter(i=>gg[i]===e),n=this.extensions;for(let i=0;i<t.length;i++)if(n.has(t[i]))return!0;return!1}getMaxAnisotropy(){return this.capabilities.getMaxAnisotropy()}copyTextureToTexture(e,t,n=null,i=null,s=0,o=0){this.textureUtils.copyTextureToTexture(e,t,n,i,s,o)}copyFramebufferToTexture(e,t,n){this.textureUtils.copyFramebufferToTexture(e,t,n)}_setFramebuffer(e){const{gl:t,state:n}=this;let i=null;if(e.textures!==null){const s=e.renderTarget,o=this.get(s),{samples:u,depthBuffer:h,stencilBuffer:d}=s,m=s.isWebGLCubeRenderTarget===!0,y=s.isRenderTarget3D===!0,x=s.depth>1,b=s.isXRRenderTarget===!0,T=b===!0&&s._hasExternalTextures===!0;let M=o.msaaFrameBuffer,N=o.depthRenderbuffer;const C=this.extensions.get("WEBGL_multisampled_render_to_texture"),B=this.extensions.get("OVR_multiview2"),P=this._useMultisampledExtension(s),I=Vv(e);let D;if(m?(o.cubeFramebuffers||(o.cubeFramebuffers={}),D=o.cubeFramebuffers[I]):b&&T===!1?D=this._xrFramebuffer:(o.framebuffers||(o.framebuffers={}),D=o.framebuffers[I]),D===void 0){D=t.createFramebuffer(),n.bindFramebuffer(t.FRAMEBUFFER,D);const q=e.textures,O=[];if(m){o.cubeFramebuffers[I]=D;const{textureGPU:z}=this.get(q[0]),X=this.renderer._activeCubeFace,W=this.renderer._activeMipmapLevel;t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+X,z,W)}else{o.framebuffers[I]=D;for(let z=0;z<q.length;z++){const X=q[z],W=this.get(X);W.renderTarget=e.renderTarget,W.cacheKey=I;const K=t.COLOR_ATTACHMENT0+z;if(s.multiview)B.framebufferTextureMultisampleMultiviewOVR(t.FRAMEBUFFER,K,W.textureGPU,0,u,0,2);else if(y||x){const Z=this.renderer._activeCubeFace,se=this.renderer._activeMipmapLevel;t.framebufferTextureLayer(t.FRAMEBUFFER,K,W.textureGPU,se,Z)}else if(P)C.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,K,t.TEXTURE_2D,W.textureGPU,0,u);else{const Z=this.renderer._activeMipmapLevel;t.framebufferTexture2D(t.FRAMEBUFFER,K,t.TEXTURE_2D,W.textureGPU,Z)}}}const k=d?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;if(s._autoAllocateDepthBuffer===!0){const z=t.createRenderbuffer();this.textureUtils.setupRenderBufferStorage(z,e,0,P),o.xrDepthRenderbuffer=z,O.push(d?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT),t.bindRenderbuffer(t.RENDERBUFFER,z),t.framebufferRenderbuffer(t.FRAMEBUFFER,k,t.RENDERBUFFER,z)}else if(e.depthTexture!==null){O.push(d?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT);const z=this.get(e.depthTexture);if(z.renderTarget=e.renderTarget,z.cacheKey=I,s.multiview)B.framebufferTextureMultisampleMultiviewOVR(t.FRAMEBUFFER,k,z.textureGPU,0,u,0,2);else if(T&&P)C.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,k,t.TEXTURE_2D,z.textureGPU,0,u);else if(e.depthTexture.isArrayTexture){const X=this.renderer._activeCubeFace;t.framebufferTextureLayer(t.FRAMEBUFFER,k,z.textureGPU,0,X)}else t.framebufferTexture2D(t.FRAMEBUFFER,k,t.TEXTURE_2D,z.textureGPU,0)}o.depthInvalidationArray=O}else{if(this._isRenderCameraDepthArray(e)){n.bindFramebuffer(t.FRAMEBUFFER,D);const O=this.renderer._activeCubeFace,k=this.get(e.depthTexture),z=d?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;t.framebufferTextureLayer(t.FRAMEBUFFER,z,k.textureGPU,0,O)}if((b||P||s.multiview)&&s._isOpaqueFramebuffer!==!0){n.bindFramebuffer(t.FRAMEBUFFER,D);const O=this.get(e.textures[0]);s.multiview?B.framebufferTextureMultisampleMultiviewOVR(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,O.textureGPU,0,u,0,2):P?C.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,O.textureGPU,0,u):t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,O.textureGPU,0);const k=d?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;if(s._autoAllocateDepthBuffer===!0){const z=o.xrDepthRenderbuffer;t.bindRenderbuffer(t.RENDERBUFFER,z),t.framebufferRenderbuffer(t.FRAMEBUFFER,k,t.RENDERBUFFER,z)}else{const z=this.get(e.depthTexture);s.multiview?B.framebufferTextureMultisampleMultiviewOVR(t.FRAMEBUFFER,k,z.textureGPU,0,u,0,2):P?C.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,k,t.TEXTURE_2D,z.textureGPU,0,u):t.framebufferTexture2D(t.FRAMEBUFFER,k,t.TEXTURE_2D,z.textureGPU,0)}}}if(u>0&&P===!1&&!s.multiview){if(M===void 0){const q=[];M=t.createFramebuffer(),n.bindFramebuffer(t.FRAMEBUFFER,M);const O=[],k=e.textures;for(let z=0;z<k.length;z++){O[z]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,O[z]),q.push(t.COLOR_ATTACHMENT0+z);const X=e.textures[z],W=this.get(X);t.renderbufferStorageMultisample(t.RENDERBUFFER,u,W.glInternalFormat,e.width,e.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+z,t.RENDERBUFFER,O[z])}if(t.bindRenderbuffer(t.RENDERBUFFER,null),o.msaaFrameBuffer=M,o.msaaRenderbuffers=O,h&&N===void 0){N=t.createRenderbuffer(),this.textureUtils.setupRenderBufferStorage(N,e,u),o.depthRenderbuffer=N;const z=d?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;q.push(z)}o.invalidationArray=q}i=o.msaaFrameBuffer}else i=D;n.drawBuffers(e,D)}n.bindFramebuffer(t.FRAMEBUFFER,i)}_getVaoKey(e){let t="";for(let n=0;n<e.length;n++){const i=this.get(e[n]);t+=":"+i.id}return t}_createVao(e){const{gl:t}=this,n=t.createVertexArray();t.bindVertexArray(n);for(let i=0;i<e.length;i++){const s=e[i],o=this.get(s);t.bindBuffer(t.ARRAY_BUFFER,o.bufferGPU),t.enableVertexAttribArray(i);let u,h;s.isInterleavedBufferAttribute===!0?(u=s.data.stride*o.bytesPerElement,h=s.offset*o.bytesPerElement):(u=0,h=0),o.isInteger?t.vertexAttribIPointer(i,s.itemSize,o.type,u,h):t.vertexAttribPointer(i,s.itemSize,o.type,s.normalized,u,h),s.isInstancedBufferAttribute&&!s.isInterleavedBufferAttribute?t.vertexAttribDivisor(i,s.meshPerAttribute):s.isInterleavedBufferAttribute&&s.data.isInstancedInterleavedBuffer&&t.vertexAttribDivisor(i,s.data.meshPerAttribute)}return t.bindBuffer(t.ARRAY_BUFFER,null),n}_getTransformFeedback(e){let t="";for(let s=0;s<e.length;s++)t+=":"+e[s].id;let n=this.transformFeedbackCache[t];if(n!==void 0)return n;const{gl:i}=this;n=i.createTransformFeedback(),i.bindTransformFeedback(i.TRANSFORM_FEEDBACK,n);for(let s=0;s<e.length;s++){const o=e[s];i.bindBufferBase(i.TRANSFORM_FEEDBACK_BUFFER,s,o.transformBuffer)}return i.bindTransformFeedback(i.TRANSFORM_FEEDBACK,null),this.transformFeedbackCache[t]=n,n}_setupBindings(e,t){const n=this.gl;for(const i of e)for(const s of i.bindings){const u=this.get(s).index;if(s.isUniformsGroup||s.isUniformBuffer){const h=n.getUniformBlockIndex(t,s.name);n.uniformBlockBinding(t,h,u)}else if(s.isSampledTexture){const h=n.getUniformLocation(t,s.name);n.uniform1i(h,u)}}}_bindUniforms(e){const{gl:t,state:n}=this;for(const i of e)for(const s of i.bindings){const o=this.get(s),u=o.index;s.isUniformsGroup||s.isUniformBuffer?n.bindBufferBase(t.UNIFORM_BUFFER,u,o.bufferGPU):s.isSampledTexture&&n.bindTexture(o.glTextureType,o.textureGPU,t.TEXTURE0+u)}}_resolveRenderTarget(e){const{gl:t,state:n}=this,i=e.renderTarget;if(e.textures!==null&&i){const s=this.get(i);if(i.samples>0&&this._useMultisampledExtension(i)===!1){const o=s.framebuffers[e.getCacheKey()];let u=t.COLOR_BUFFER_BIT;i.resolveDepthBuffer&&(i.depthBuffer&&(u|=t.DEPTH_BUFFER_BIT),i.stencilBuffer&&i.resolveStencilBuffer&&(u|=t.STENCIL_BUFFER_BIT));const h=s.msaaFrameBuffer,d=s.msaaRenderbuffers,m=e.textures,y=m.length>1;if(n.bindFramebuffer(t.READ_FRAMEBUFFER,h),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,o),y)for(let x=0;x<m.length;x++)t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0+x,t.RENDERBUFFER,null),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+x,t.TEXTURE_2D,null,0);for(let x=0;x<m.length;x++){if(y){const{textureGPU:b}=this.get(m[x]);t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,d[x]),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,b,0)}if(e.scissor){const{x:b,y:T,width:M,height:N}=e.scissorValue,C=e.height-N-T;t.blitFramebuffer(b,C,b+M,C+N,b,C,b+M,C+N,u,t.NEAREST)}else t.blitFramebuffer(0,0,e.width,e.height,0,0,e.width,e.height,u,t.NEAREST)}if(y)for(let x=0;x<m.length;x++){const{textureGPU:b}=this.get(m[x]);t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0+x,t.RENDERBUFFER,d[x]),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+x,t.TEXTURE_2D,b,0)}this._supportsInvalidateFramebuffer===!0&&t.invalidateFramebuffer(t.READ_FRAMEBUFFER,s.invalidationArray)}else if(i.resolveDepthBuffer===!1&&s.framebuffers){const o=s.framebuffers[e.getCacheKey()];n.bindFramebuffer(t.DRAW_FRAMEBUFFER,o),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,s.depthInvalidationArray)}}}_useMultisampledExtension(e){return e.multiview===!0?!0:e.samples>0&&this.extensions.has("WEBGL_multisampled_render_to_texture")===!0&&e._autoAllocateDepthBuffer!==!1}dispose(){const e=this.extensions.get("WEBGL_lose_context");e&&e.loseContext(),this.renderer.domElement.removeEventListener("webglcontextlost",this._onContextLost)}}const xA={PointList:"point-list",LineList:"line-list",LineStrip:"line-strip",TriangleList:"triangle-list",TriangleStrip:"triangle-strip"},Xn={Never:"never",Less:"less",Equal:"equal",LessEqual:"less-equal",Greater:"greater",NotEqual:"not-equal",GreaterEqual:"greater-equal",Always:"always"},yr={Store:"store"},qt={Load:"load",Clear:"clear"},vg={CCW:"ccw",CW:"cw"},_g={None:"none",Back:"back"},GA={Uint16:"uint16",Uint32:"uint32"},J={R8Unorm:"r8unorm",R8Snorm:"r8snorm",R8Uint:"r8uint",R8Sint:"r8sint",R16Uint:"r16uint",R16Sint:"r16sint",R16Float:"r16float",RG8Unorm:"rg8unorm",RG8Snorm:"rg8snorm",RG8Uint:"rg8uint",RG8Sint:"rg8sint",R32Uint:"r32uint",R32Sint:"r32sint",R32Float:"r32float",RG16Uint:"rg16uint",RG16Sint:"rg16sint",RG16Float:"rg16float",RGBA8Unorm:"rgba8unorm",RGBA8UnormSRGB:"rgba8unorm-srgb",RGBA8Snorm:"rgba8snorm",RGBA8Uint:"rgba8uint",RGBA8Sint:"rgba8sint",BGRA8Unorm:"bgra8unorm",BGRA8UnormSRGB:"bgra8unorm-srgb",RGB9E5UFloat:"rgb9e5ufloat",RGB10A2Unorm:"rgb10a2unorm",RG11B10UFloat:"rg11b10ufloat",RG32Uint:"rg32uint",RG32Sint:"rg32sint",RG32Float:"rg32float",RGBA16Uint:"rgba16uint",RGBA16Sint:"rgba16sint",RGBA16Float:"rgba16float",RGBA32Uint:"rgba32uint",RGBA32Sint:"rgba32sint",RGBA32Float:"rgba32float",Depth16Unorm:"depth16unorm",Depth24Plus:"depth24plus",Depth24PlusStencil8:"depth24plus-stencil8",Depth32Float:"depth32float",Depth32FloatStencil8:"depth32float-stencil8",BC1RGBAUnorm:"bc1-rgba-unorm",BC1RGBAUnormSRGB:"bc1-rgba-unorm-srgb",BC2RGBAUnorm:"bc2-rgba-unorm",BC2RGBAUnormSRGB:"bc2-rgba-unorm-srgb",BC3RGBAUnorm:"bc3-rgba-unorm",BC3RGBAUnormSRGB:"bc3-rgba-unorm-srgb",BC4RUnorm:"bc4-r-unorm",BC4RSnorm:"bc4-r-snorm",BC5RGUnorm:"bc5-rg-unorm",BC5RGSnorm:"bc5-rg-snorm",BC6HRGBUFloat:"bc6h-rgb-ufloat",BC6HRGBFloat:"bc6h-rgb-float",BC7RGBAUnorm:"bc7-rgba-unorm",BC7RGBAUnormSRGB:"bc7-rgba-unorm-srgb",ETC2RGB8Unorm:"etc2-rgb8unorm",ETC2RGB8UnormSRGB:"etc2-rgb8unorm-srgb",ETC2RGB8A1Unorm:"etc2-rgb8a1unorm",ETC2RGB8A1UnormSRGB:"etc2-rgb8a1unorm-srgb",ETC2RGBA8Unorm:"etc2-rgba8unorm",ETC2RGBA8UnormSRGB:"etc2-rgba8unorm-srgb",EACR11Unorm:"eac-r11unorm",EACR11Snorm:"eac-r11snorm",EACRG11Unorm:"eac-rg11unorm",EACRG11Snorm:"eac-rg11snorm",ASTC4x4Unorm:"astc-4x4-unorm",ASTC4x4UnormSRGB:"astc-4x4-unorm-srgb",ASTC5x4Unorm:"astc-5x4-unorm",ASTC5x4UnormSRGB:"astc-5x4-unorm-srgb",ASTC5x5Unorm:"astc-5x5-unorm",ASTC5x5UnormSRGB:"astc-5x5-unorm-srgb",ASTC6x5Unorm:"astc-6x5-unorm",ASTC6x5UnormSRGB:"astc-6x5-unorm-srgb",ASTC6x6Unorm:"astc-6x6-unorm",ASTC6x6UnormSRGB:"astc-6x6-unorm-srgb",ASTC8x5Unorm:"astc-8x5-unorm",ASTC8x5UnormSRGB:"astc-8x5-unorm-srgb",ASTC8x6Unorm:"astc-8x6-unorm",ASTC8x6UnormSRGB:"astc-8x6-unorm-srgb",ASTC8x8Unorm:"astc-8x8-unorm",ASTC8x8UnormSRGB:"astc-8x8-unorm-srgb",ASTC10x5Unorm:"astc-10x5-unorm",ASTC10x5UnormSRGB:"astc-10x5-unorm-srgb",ASTC10x6Unorm:"astc-10x6-unorm",ASTC10x6UnormSRGB:"astc-10x6-unorm-srgb",ASTC10x8Unorm:"astc-10x8-unorm",ASTC10x8UnormSRGB:"astc-10x8-unorm-srgb",ASTC10x10Unorm:"astc-10x10-unorm",ASTC10x10UnormSRGB:"astc-10x10-unorm-srgb",ASTC12x10Unorm:"astc-12x10-unorm",ASTC12x10UnormSRGB:"astc-12x10-unorm-srgb",ASTC12x12Unorm:"astc-12x12-unorm",ASTC12x12UnormSRGB:"astc-12x12-unorm-srgb"},Rh={ClampToEdge:"clamp-to-edge",Repeat:"repeat",MirrorRepeat:"mirror-repeat"},aa={Linear:"linear",Nearest:"nearest"},Mt={Zero:"zero",One:"one",Src:"src",OneMinusSrc:"one-minus-src",SrcAlpha:"src-alpha",OneMinusSrcAlpha:"one-minus-src-alpha",Dst:"dst",OneMinusDst:"one-minus-dst",DstAlpha:"dst-alpha",OneMinusDstAlpha:"one-minus-dst-alpha",SrcAlphaSaturated:"src-alpha-saturated",Constant:"constant",OneMinusConstant:"one-minus-constant"},ta={Add:"add",Subtract:"subtract",ReverseSubtract:"reverse-subtract",Min:"min",Max:"max"},xg={None:0,All:15},ho={Keep:"keep",Zero:"zero",Replace:"replace",Invert:"invert",IncrementClamp:"increment-clamp",DecrementClamp:"decrement-clamp",IncrementWrap:"increment-wrap",DecrementWrap:"decrement-wrap"},Ch={Storage:"storage",ReadOnlyStorage:"read-only-storage"},Ph={WriteOnly:"write-only",ReadOnly:"read-only",ReadWrite:"read-write"},bg={NonFiltering:"non-filtering",Comparison:"comparison"},na={Float:"float",UnfilterableFloat:"unfilterable-float",Depth:"depth",SInt:"sint",UInt:"uint"},Tg={TwoD:"2d",ThreeD:"3d"},Ln={TwoD:"2d",TwoDArray:"2d-array",Cube:"cube",ThreeD:"3d"},dV={All:"all"},D0={Vertex:"vertex",Instance:"instance"},yd={CoreFeaturesAndLimits:"core-features-and-limits",DepthClipControl:"depth-clip-control",Depth32FloatStencil8:"depth32float-stencil8",TextureCompressionBC:"texture-compression-bc",TextureCompressionBCSliced3D:"texture-compression-bc-sliced-3d",TextureCompressionETC2:"texture-compression-etc2",TextureCompressionASTC:"texture-compression-astc",TextureCompressionASTCSliced3D:"texture-compression-astc-sliced-3d",TimestampQuery:"timestamp-query",IndirectFirstInstance:"indirect-first-instance",ShaderF16:"shader-f16",RG11B10UFloat:"rg11b10ufloat-renderable",BGRA8UNormStorage:"bgra8unorm-storage",Float32Filterable:"float32-filterable",Float32Blendable:"float32-blendable",ClipDistances:"clip-distances",DualSourceBlending:"dual-source-blending",Subgroups:"subgroups",TextureFormatsTier1:"texture-formats-tier1",TextureFormatsTier2:"texture-formats-tier2"};class pV extends H_{constructor(e,t,n){super(e,t?t.value:null),this.textureNode=t,this.groupNode=n}update(){this.texture=this.textureNode.value}}class mV extends G_{constructor(e,t){super(e,t?t.array:null),this.attribute=t,this.isStorageBuffer=!0}}let gV=0;class yV extends mV{constructor(e,t){super("StorageBuffer_"+gV++,e?e.value:null),this.nodeUniform=e,this.access=e?e.access:Jn.READ_WRITE,this.groupNode=t}get buffer(){return this.nodeUniform.value}}class vV extends Go{constructor(e){super(),this.device=e;const t=`
struct VarysStruct {
	@builtin( position ) Position: vec4<f32>,
	@location( 0 ) vTex : vec2<f32>
};

@vertex
fn main( @builtin( vertex_index ) vertexIndex : u32 ) -> VarysStruct {

	var Varys : VarysStruct;

	var pos = array< vec2<f32>, 4 >(
		vec2<f32>( -1.0,  1.0 ),
		vec2<f32>(  1.0,  1.0 ),
		vec2<f32>( -1.0, -1.0 ),
		vec2<f32>(  1.0, -1.0 )
	);

	var tex = array< vec2<f32>, 4 >(
		vec2<f32>( 0.0, 0.0 ),
		vec2<f32>( 1.0, 0.0 ),
		vec2<f32>( 0.0, 1.0 ),
		vec2<f32>( 1.0, 1.0 )
	);

	Varys.vTex = tex[ vertexIndex ];
	Varys.Position = vec4<f32>( pos[ vertexIndex ], 0.0, 1.0 );

	return Varys;

}
`,n=`
@group( 0 ) @binding( 0 )
var imgSampler : sampler;

@group( 0 ) @binding( 1 )
var img : texture_2d<f32>;

@fragment
fn main( @location( 0 ) vTex : vec2<f32> ) -> @location( 0 ) vec4<f32> {

	return textureSample( img, imgSampler, vTex );

}
`,i=`
@group( 0 ) @binding( 0 )
var imgSampler : sampler;

@group( 0 ) @binding( 1 )
var img : texture_2d<f32>;

@fragment
fn main( @location( 0 ) vTex : vec2<f32> ) -> @location( 0 ) vec4<f32> {

	return textureSample( img, imgSampler, vec2( vTex.x, 1.0 - vTex.y ) );

}
`;this.mipmapSampler=e.createSampler({minFilter:aa.Linear}),this.flipYSampler=e.createSampler({minFilter:aa.Nearest}),this.transferPipelines={},this.flipYPipelines={},this.mipmapVertexShaderModule=e.createShaderModule({label:"mipmapVertex",code:t}),this.mipmapFragmentShaderModule=e.createShaderModule({label:"mipmapFragment",code:n}),this.flipYFragmentShaderModule=e.createShaderModule({label:"flipYFragment",code:i})}getTransferPipeline(e){let t=this.transferPipelines[e];return t===void 0&&(t=this.device.createRenderPipeline({label:`mipmap-${e}`,vertex:{module:this.mipmapVertexShaderModule,entryPoint:"main"},fragment:{module:this.mipmapFragmentShaderModule,entryPoint:"main",targets:[{format:e}]},primitive:{topology:xA.TriangleStrip,stripIndexFormat:GA.Uint32},layout:"auto"}),this.transferPipelines[e]=t),t}getFlipYPipeline(e){let t=this.flipYPipelines[e];return t===void 0&&(t=this.device.createRenderPipeline({label:`flipY-${e}`,vertex:{module:this.mipmapVertexShaderModule,entryPoint:"main"},fragment:{module:this.flipYFragmentShaderModule,entryPoint:"main",targets:[{format:e}]},primitive:{topology:xA.TriangleStrip,stripIndexFormat:GA.Uint32},layout:"auto"}),this.flipYPipelines[e]=t),t}flipY(e,t,n=0){const i=t.format,{width:s,height:o}=t.size,u=this.getTransferPipeline(i),h=this.getFlipYPipeline(i),d=this.device.createTexture({size:{width:s,height:o,depthOrArrayLayers:1},format:i,usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING}),m=e.createView({baseMipLevel:0,mipLevelCount:1,dimension:Ln.TwoD,baseArrayLayer:n}),y=d.createView({baseMipLevel:0,mipLevelCount:1,dimension:Ln.TwoD,baseArrayLayer:0}),x=this.device.createCommandEncoder({}),b=(T,M,N)=>{const C=T.getBindGroupLayout(0),B=this.device.createBindGroup({layout:C,entries:[{binding:0,resource:this.flipYSampler},{binding:1,resource:M}]}),P=x.beginRenderPass({colorAttachments:[{view:N,loadOp:qt.Clear,storeOp:yr.Store,clearValue:[0,0,0,0]}]});P.setPipeline(T),P.setBindGroup(0,B),P.draw(4,1,0,0),P.end()};b(u,m,y),b(h,y,m),this.device.queue.submit([x.finish()]),d.destroy()}generateMipmaps(e,t,n=0){const i=this.get(e);i.useCount===void 0&&(i.useCount=0,i.layers=[]);const s=i.layers[n]||this._mipmapCreateBundles(e,t,n),o=this.device.createCommandEncoder({});this._mipmapRunBundles(o,s),this.device.queue.submit([o.finish()]),i.useCount!==0&&(i.layers[n]=s),i.useCount++}_mipmapCreateBundles(e,t,n){const i=this.getTransferPipeline(t.format),s=i.getBindGroupLayout(0);let o=e.createView({baseMipLevel:0,mipLevelCount:1,dimension:Ln.TwoD,baseArrayLayer:n});const u=[];for(let h=1;h<t.mipLevelCount;h++){const d=this.device.createBindGroup({layout:s,entries:[{binding:0,resource:this.mipmapSampler},{binding:1,resource:o}]}),m=e.createView({baseMipLevel:h,mipLevelCount:1,dimension:Ln.TwoD,baseArrayLayer:n}),y={colorAttachments:[{view:m,loadOp:qt.Clear,storeOp:yr.Store,clearValue:[0,0,0,0]}]},x=this.device.createRenderBundleEncoder({colorFormats:[t.format]});x.setPipeline(i),x.setBindGroup(0,d),x.draw(4,1,0,0),u.push({renderBundles:[x.finish()],passDescriptor:y}),o=m}return u}_mipmapRunBundles(e,t){const n=t.length;for(let i=0;i<n;i++){const s=t[i],o=e.beginRenderPass(s.passDescriptor);o.executeBundles(s.renderBundles),o.end()}}}const _V={[A6]:"never",[Fd]:"less",[s6]:"equal",[o6]:"less-equal",[r6]:"greater",[i6]:"greater-equal",[a6]:"always",[n6]:"not-equal"},xV=[0,1,3,2,4,5];class bV{constructor(e){this.backend=e,this._passUtils=null,this.defaultTexture={},this.defaultCubeTexture={},this.defaultVideoFrame=null,this.colorBuffer=null,this.depthTexture=new Gi,this.depthTexture.name="depthBuffer"}createSampler(e){const t=this.backend,n=t.device,i=t.get(e),s={addressModeU:this._convertAddressMode(e.wrapS),addressModeV:this._convertAddressMode(e.wrapT),addressModeW:this._convertAddressMode(e.wrapR),magFilter:this._convertFilterMode(e.magFilter),minFilter:this._convertFilterMode(e.minFilter),mipmapFilter:this._convertFilterMode(e.minFilter),maxAnisotropy:1};s.magFilter===aa.Linear&&s.minFilter===aa.Linear&&s.mipmapFilter===aa.Linear&&(s.maxAnisotropy=e.anisotropy),e.isDepthTexture&&e.compareFunction!==null&&(s.compare=_V[e.compareFunction]),i.sampler=n.createSampler(s)}createDefaultTexture(e){let t;const n=vd(e);e.isCubeTexture?t=this._getDefaultCubeTextureGPU(n):t=this._getDefaultTextureGPU(n),this.backend.get(e).texture=t}createTexture(e,t={}){const n=this.backend,i=n.get(e);if(i.initialized)throw new Error("WebGPUTextureUtils: Texture already initialized.");if(e.isExternalTexture){i.texture=e.sourceTexture,i.initialized=!0;return}t.needsMipmaps===void 0&&(t.needsMipmaps=!1),t.levels===void 0&&(t.levels=1),t.depth===void 0&&(t.depth=1);const{width:s,height:o,depth:u,levels:h}=t;e.isFramebufferTexture&&(t.renderTarget?t.format=this.backend.utils.getCurrentColorFormat(t.renderTarget):t.format=this.backend.utils.getPreferredCanvasFormat());const d=this._getDimension(e),m=e.internalFormat||t.format||vd(e,n.device);i.format=m;const{samples:y,primarySamples:x,isMSAA:b}=n.utils.getTextureSampleData(e);let T=GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.COPY_SRC;e.isStorageTexture===!0&&(T|=GPUTextureUsage.STORAGE_BINDING),e.isCompressedTexture!==!0&&e.isCompressedArrayTexture!==!0&&m!==J.RGB9E5UFloat&&(T|=GPUTextureUsage.RENDER_ATTACHMENT);const M={label:e.name,size:{width:s,height:o,depthOrArrayLayers:u},mipLevelCount:h,sampleCount:x,dimension:d,format:m,usage:T};if(m===void 0){console.warn("WebGPURenderer: Texture format not supported."),this.createDefaultTexture(e);return}if(e.isCubeTexture&&(M.textureBindingViewDimension=Ln.Cube),i.texture=n.device.createTexture(M),b){const N=Object.assign({},M);N.label=N.label+"-msaa",N.sampleCount=y,N.mipLevelCount=1,i.msaaTexture=n.device.createTexture(N)}i.initialized=!0,i.textureDescriptorGPU=M}destroyTexture(e){const t=this.backend,n=t.get(e);n.texture!==void 0&&n.texture.destroy(),n.msaaTexture!==void 0&&n.msaaTexture.destroy(),t.delete(e)}destroySampler(e){const n=this.backend.get(e);delete n.sampler}generateMipmaps(e){const t=this.backend.get(e);if(e.isCubeTexture)for(let n=0;n<6;n++)this._generateMipmaps(t.texture,t.textureDescriptorGPU,n);else{const n=e.image.depth||1;for(let i=0;i<n;i++)this._generateMipmaps(t.texture,t.textureDescriptorGPU,i)}}getColorBuffer(){this.colorBuffer&&this.colorBuffer.destroy();const e=this.backend,{width:t,height:n}=e.getDrawingBufferSize();return this.colorBuffer=e.device.createTexture({label:"colorBuffer",size:{width:t,height:n,depthOrArrayLayers:1},sampleCount:e.utils.getSampleCount(e.renderer.samples),format:e.utils.getPreferredCanvasFormat(),usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_SRC}),this.colorBuffer}getDepthBuffer(e=!0,t=!1){const n=this.backend,{width:i,height:s}=n.getDrawingBufferSize(),o=this.depthTexture,u=n.get(o).texture;let h,d;if(t?(h=No,d=Eo):e&&(h=Ro,d=In),u!==void 0){if(o.image.width===i&&o.image.height===s&&o.format===h&&o.type===d)return u;this.destroyTexture(o)}return o.name="depthBuffer",o.format=h,o.type=d,o.image.width=i,o.image.height=s,this.createTexture(o,{width:i,height:s}),n.get(o).texture}updateTexture(e,t){const n=this.backend.get(e),i=e.mipmaps,{textureDescriptorGPU:s}=n;if(!(e.isRenderTargetTexture||s===void 0)){if(e.isDataTexture)if(i.length>0)for(let o=0,u=i.length;o<u;o++){const h=i[o];this._copyBufferToTexture(h,n.texture,s,0,e.flipY,0,o)}else this._copyBufferToTexture(t.image,n.texture,s,0,e.flipY);else if(e.isArrayTexture||e.isDataArrayTexture||e.isData3DTexture)for(let o=0;o<t.image.depth;o++)this._copyBufferToTexture(t.image,n.texture,s,o,e.flipY,o);else if(e.isCompressedTexture||e.isCompressedArrayTexture)this._copyCompressedBufferToTexture(e.mipmaps,n.texture,s);else if(e.isCubeTexture)this._copyCubeMapToTexture(e,n.texture,s);else if(i.length>0)for(let o=0,u=i.length;o<u;o++){const h=i[o];this._copyImageToTexture(h,n.texture,s,0,e.flipY,e.premultiplyAlpha,o)}else this._copyImageToTexture(t.image,n.texture,s,0,e.flipY,e.premultiplyAlpha);n.version=e.version}}async copyTextureToBuffer(e,t,n,i,s,o){const u=this.backend.device,h=this.backend.get(e),d=h.texture,m=h.textureDescriptorGPU.format,y=this._getBytesPerTexel(m);let x=i*y;x=Math.ceil(x/256)*256;const b=u.createBuffer({size:(s-1)*x+i*y,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),T=u.createCommandEncoder();T.copyTextureToBuffer({texture:d,origin:{x:t,y:n,z:o}},{buffer:b,bytesPerRow:x},{width:i,height:s});const M=this._getTypedArrayType(m);u.queue.submit([T.finish()]),await b.mapAsync(GPUMapMode.READ);const N=b.getMappedRange();return new M(N)}_getDefaultTextureGPU(e){let t=this.defaultTexture[e];if(t===void 0){const n=new Md;n.minFilter=Fi,n.magFilter=Fi,this.createTexture(n,{width:1,height:1,format:e}),this.defaultTexture[e]=t=n}return this.backend.get(t).texture}_getDefaultCubeTextureGPU(e){let t=this.defaultTexture[e];if(t===void 0){const n=new Ed;n.minFilter=Fi,n.magFilter=Fi,this.createTexture(n,{width:1,height:1,depth:6}),this.defaultCubeTexture[e]=t=n}return this.backend.get(t).texture}_copyCubeMapToTexture(e,t,n){const i=e.images,s=e.mipmaps;for(let o=0;o<6;o++){const u=i[o],h=e.flipY===!0?xV[o]:o;u.isDataTexture?this._copyBufferToTexture(u.image,t,n,h,e.flipY):this._copyImageToTexture(u,t,n,h,e.flipY,e.premultiplyAlpha);for(let d=0;d<s.length;d++){const y=s[d].images[o];y.isDataTexture?this._copyBufferToTexture(y.image,t,n,h,e.flipY,0,d+1):this._copyImageToTexture(y,t,n,h,e.flipY,e.premultiplyAlpha,d+1)}}}_copyImageToTexture(e,t,n,i,s,o,u=0){const h=this.backend.device,d=u>0?e.width:n.size.width,m=u>0?e.height:n.size.height;h.queue.copyExternalImageToTexture({source:e,flipY:s},{texture:t,mipLevel:u,origin:{x:0,y:0,z:i},premultipliedAlpha:o},{width:d,height:m,depthOrArrayLayers:1})}_getPassUtils(){let e=this._passUtils;return e===null&&(this._passUtils=e=new vV(this.backend.device)),e}_generateMipmaps(e,t,n=0){this._getPassUtils().generateMipmaps(e,t,n)}_flipY(e,t,n=0){this._getPassUtils().flipY(e,t,n)}_copyBufferToTexture(e,t,n,i,s,o=0,u=0){const h=this.backend.device,d=e.data,m=this._getBytesPerTexel(n.format),y=e.width*m;h.queue.writeTexture({texture:t,mipLevel:u,origin:{x:0,y:0,z:i}},d,{offset:e.width*e.height*m*o,bytesPerRow:y},{width:e.width,height:e.height,depthOrArrayLayers:1}),s===!0&&this._flipY(t,n,i)}_copyCompressedBufferToTexture(e,t,n){const i=this.backend.device,s=this._getBlockData(n.format),o=n.size.depthOrArrayLayers>1;for(let u=0;u<e.length;u++){const h=e[u],d=h.width,m=h.height,y=o?n.size.depthOrArrayLayers:1,x=Math.ceil(d/s.width)*s.byteLength,b=x*Math.ceil(m/s.height);for(let T=0;T<y;T++)i.queue.writeTexture({texture:t,mipLevel:u,origin:{x:0,y:0,z:T}},h.data,{offset:T*b,bytesPerRow:x,rowsPerImage:Math.ceil(m/s.height)},{width:Math.ceil(d/s.width)*s.width,height:Math.ceil(m/s.height)*s.height,depthOrArrayLayers:1})}}_getBlockData(e){if(e===J.BC1RGBAUnorm||e===J.BC1RGBAUnormSRGB)return{byteLength:8,width:4,height:4};if(e===J.BC2RGBAUnorm||e===J.BC2RGBAUnormSRGB)return{byteLength:16,width:4,height:4};if(e===J.BC3RGBAUnorm||e===J.BC3RGBAUnormSRGB)return{byteLength:16,width:4,height:4};if(e===J.BC4RUnorm||e===J.BC4RSnorm)return{byteLength:8,width:4,height:4};if(e===J.BC5RGUnorm||e===J.BC5RGSnorm)return{byteLength:16,width:4,height:4};if(e===J.BC6HRGBUFloat||e===J.BC6HRGBFloat)return{byteLength:16,width:4,height:4};if(e===J.BC7RGBAUnorm||e===J.BC7RGBAUnormSRGB)return{byteLength:16,width:4,height:4};if(e===J.ETC2RGB8Unorm||e===J.ETC2RGB8UnormSRGB)return{byteLength:8,width:4,height:4};if(e===J.ETC2RGB8A1Unorm||e===J.ETC2RGB8A1UnormSRGB)return{byteLength:8,width:4,height:4};if(e===J.ETC2RGBA8Unorm||e===J.ETC2RGBA8UnormSRGB)return{byteLength:16,width:4,height:4};if(e===J.EACR11Unorm)return{byteLength:8,width:4,height:4};if(e===J.EACR11Snorm)return{byteLength:8,width:4,height:4};if(e===J.EACRG11Unorm)return{byteLength:16,width:4,height:4};if(e===J.EACRG11Snorm)return{byteLength:16,width:4,height:4};if(e===J.ASTC4x4Unorm||e===J.ASTC4x4UnormSRGB)return{byteLength:16,width:4,height:4};if(e===J.ASTC5x4Unorm||e===J.ASTC5x4UnormSRGB)return{byteLength:16,width:5,height:4};if(e===J.ASTC5x5Unorm||e===J.ASTC5x5UnormSRGB)return{byteLength:16,width:5,height:5};if(e===J.ASTC6x5Unorm||e===J.ASTC6x5UnormSRGB)return{byteLength:16,width:6,height:5};if(e===J.ASTC6x6Unorm||e===J.ASTC6x6UnormSRGB)return{byteLength:16,width:6,height:6};if(e===J.ASTC8x5Unorm||e===J.ASTC8x5UnormSRGB)return{byteLength:16,width:8,height:5};if(e===J.ASTC8x6Unorm||e===J.ASTC8x6UnormSRGB)return{byteLength:16,width:8,height:6};if(e===J.ASTC8x8Unorm||e===J.ASTC8x8UnormSRGB)return{byteLength:16,width:8,height:8};if(e===J.ASTC10x5Unorm||e===J.ASTC10x5UnormSRGB)return{byteLength:16,width:10,height:5};if(e===J.ASTC10x6Unorm||e===J.ASTC10x6UnormSRGB)return{byteLength:16,width:10,height:6};if(e===J.ASTC10x8Unorm||e===J.ASTC10x8UnormSRGB)return{byteLength:16,width:10,height:8};if(e===J.ASTC10x10Unorm||e===J.ASTC10x10UnormSRGB)return{byteLength:16,width:10,height:10};if(e===J.ASTC12x10Unorm||e===J.ASTC12x10UnormSRGB)return{byteLength:16,width:12,height:10};if(e===J.ASTC12x12Unorm||e===J.ASTC12x12UnormSRGB)return{byteLength:16,width:12,height:12}}_convertAddressMode(e){let t=Rh.ClampToEdge;return e===v1?t=Rh.Repeat:e===y1&&(t=Rh.MirrorRepeat),t}_convertFilterMode(e){let t=aa.Linear;return(e===Fi||e===t6||e===eu)&&(t=aa.Nearest),t}_getBytesPerTexel(e){if(e===J.R8Unorm||e===J.R8Snorm||e===J.R8Uint||e===J.R8Sint)return 1;if(e===J.R16Uint||e===J.R16Sint||e===J.R16Float||e===J.RG8Unorm||e===J.RG8Snorm||e===J.RG8Uint||e===J.RG8Sint)return 2;if(e===J.R32Uint||e===J.R32Sint||e===J.R32Float||e===J.RG16Uint||e===J.RG16Sint||e===J.RG16Float||e===J.RGBA8Unorm||e===J.RGBA8UnormSRGB||e===J.RGBA8Snorm||e===J.RGBA8Uint||e===J.RGBA8Sint||e===J.BGRA8Unorm||e===J.BGRA8UnormSRGB||e===J.RGB9E5UFloat||e===J.RGB10A2Unorm||e===J.RG11B10UFloat||e===J.Depth32Float||e===J.Depth24Plus||e===J.Depth24PlusStencil8||e===J.Depth32FloatStencil8)return 4;if(e===J.RG32Uint||e===J.RG32Sint||e===J.RG32Float||e===J.RGBA16Uint||e===J.RGBA16Sint||e===J.RGBA16Float)return 8;if(e===J.RGBA32Uint||e===J.RGBA32Sint||e===J.RGBA32Float)return 16}_getTypedArrayType(e){if(e===J.R8Uint)return Uint8Array;if(e===J.R8Sint)return Int8Array;if(e===J.R8Unorm)return Uint8Array;if(e===J.R8Snorm)return Int8Array;if(e===J.RG8Uint)return Uint8Array;if(e===J.RG8Sint)return Int8Array;if(e===J.RG8Unorm)return Uint8Array;if(e===J.RG8Snorm)return Int8Array;if(e===J.RGBA8Uint)return Uint8Array;if(e===J.RGBA8Sint)return Int8Array;if(e===J.RGBA8Unorm||e===J.RGBA8UnormSRGB)return Uint8Array;if(e===J.RGBA8Snorm)return Int8Array;if(e===J.R16Uint)return Uint16Array;if(e===J.R16Sint)return Int16Array;if(e===J.RG16Uint)return Uint16Array;if(e===J.RG16Sint)return Int16Array;if(e===J.RGBA16Uint)return Uint16Array;if(e===J.RGBA16Sint)return Int16Array;if(e===J.R16Float||e===J.RG16Float||e===J.RGBA16Float)return Uint16Array;if(e===J.R32Uint)return Uint32Array;if(e===J.R32Sint)return Int32Array;if(e===J.R32Float)return Float32Array;if(e===J.RG32Uint)return Uint32Array;if(e===J.RG32Sint)return Int32Array;if(e===J.RG32Float)return Float32Array;if(e===J.RGBA32Uint)return Uint32Array;if(e===J.RGBA32Sint)return Int32Array;if(e===J.RGBA32Float)return Float32Array;if(e===J.BGRA8Unorm||e===J.BGRA8UnormSRGB)return Uint8Array;if(e===J.RGB10A2Unorm||e===J.RGB9E5UFloat||e===J.RG11B10UFloat)return Uint32Array;if(e===J.Depth32Float)return Float32Array;if(e===J.Depth24Plus||e===J.Depth24PlusStencil8)return Uint32Array;if(e===J.Depth32FloatStencil8)return Float32Array}_getDimension(e){let t;return e.is3DTexture||e.isData3DTexture?t=Tg.ThreeD:t=Tg.TwoD,t}}function vd(r,e=null){const t=r.format,n=r.type,i=r.colorSpace,s=bn.getTransfer(i);let o;if(r.isCompressedTexture===!0||r.isCompressedArrayTexture===!0)switch(t){case j0:case W0:o=s===dt?J.BC1RGBAUnormSRGB:J.BC1RGBAUnorm;break;case Q0:o=s===dt?J.BC2RGBAUnormSRGB:J.BC2RGBAUnorm;break;case X0:o=s===dt?J.BC3RGBAUnormSRGB:J.BC3RGBAUnorm;break;case af:o=J.BC4RUnorm;break;case Af:o=J.BC4RSnorm;break;case lf:o=J.BC5RGUnorm;break;case uf:o=J.BC5RGSnorm;break;case of:o=s===dt?J.BC7RGBAUnormSRGB:J.BC7RGBAUnorm;break;case zh:case Vh:o=s===dt?J.ETC2RGB8UnormSRGB:J.ETC2RGB8Unorm;break;case $h:o=s===dt?J.ETC2RGBA8UnormSRGB:J.ETC2RGBA8Unorm;break;case Hh:o=s===dt?J.ASTC4x4UnormSRGB:J.ASTC4x4Unorm;break;case jh:o=s===dt?J.ASTC5x4UnormSRGB:J.ASTC5x4Unorm;break;case Wh:o=s===dt?J.ASTC5x5UnormSRGB:J.ASTC5x5Unorm;break;case Qh:o=s===dt?J.ASTC6x5UnormSRGB:J.ASTC6x5Unorm;break;case Xh:o=s===dt?J.ASTC6x6UnormSRGB:J.ASTC6x6Unorm;break;case Yh:o=s===dt?J.ASTC8x5UnormSRGB:J.ASTC8x5Unorm;break;case Kh:o=s===dt?J.ASTC8x6UnormSRGB:J.ASTC8x6Unorm;break;case Zh:o=s===dt?J.ASTC8x8UnormSRGB:J.ASTC8x8Unorm;break;case Jh:o=s===dt?J.ASTC10x5UnormSRGB:J.ASTC10x5Unorm;break;case ef:o=s===dt?J.ASTC10x6UnormSRGB:J.ASTC10x6Unorm;break;case tf:o=s===dt?J.ASTC10x8UnormSRGB:J.ASTC10x8Unorm;break;case nf:o=s===dt?J.ASTC10x10UnormSRGB:J.ASTC10x10Unorm;break;case rf:o=s===dt?J.ASTC12x10UnormSRGB:J.ASTC12x10Unorm;break;case sf:o=s===dt?J.ASTC12x12UnormSRGB:J.ASTC12x12Unorm;break;case Ii:o=s===dt?J.RGBA8UnormSRGB:J.RGBA8Unorm;break;default:console.error("WebGPURenderer: Unsupported texture format.",t)}else switch(t){case Ii:switch(n){case Gl:o=J.RGBA8Snorm;break;case Vl:o=J.RGBA16Sint;break;case dA:o=J.RGBA16Uint;break;case In:o=J.RGBA32Uint;break;case vr:o=J.RGBA32Sint;break;case Xr:o=s===dt?J.RGBA8UnormSRGB:J.RGBA8Unorm;break;case Rr:o=J.RGBA16Float;break;case ci:o=J.RGBA32Float;break;default:console.error("WebGPURenderer: Unsupported texture type with RGBAFormat.",n)}break;case Ld:switch(n){case R6:o=J.RGB9E5UFloat;break;case C6:o=J.RG11B10UFloat;break;default:console.error("WebGPURenderer: Unsupported texture type with RGBFormat.",n)}break;case Id:switch(n){case Gl:o=J.R8Snorm;break;case Vl:o=J.R16Sint;break;case dA:o=J.R16Uint;break;case In:o=J.R32Uint;break;case vr:o=J.R32Sint;break;case Xr:o=J.R8Unorm;break;case Rr:o=J.R16Float;break;case ci:o=J.R32Float;break;default:console.error("WebGPURenderer: Unsupported texture type with RedFormat.",n)}break;case la:switch(n){case Gl:o=J.RG8Snorm;break;case Vl:o=J.RG16Sint;break;case dA:o=J.RG16Uint;break;case In:o=J.RG32Uint;break;case vr:o=J.RG32Sint;break;case Xr:o=J.RG8Unorm;break;case Rr:o=J.RG16Float;break;case ci:o=J.RG32Float;break;default:console.error("WebGPURenderer: Unsupported texture type with RGFormat.",n)}break;case Ro:switch(n){case dA:o=J.Depth16Unorm;break;case In:o=J.Depth24Plus;break;case ci:o=J.Depth32Float;break;default:console.error("WebGPURenderer: Unsupported texture type with DepthFormat.",n)}break;case No:switch(n){case Eo:o=J.Depth24PlusStencil8;break;case ci:e&&e.features.has(yd.Depth32FloatStencil8)===!1&&console.error('WebGPURenderer: Depth textures with DepthStencilFormat + FloatType can only be used with the "depth32float-stencil8" GPU feature.'),o=J.Depth32FloatStencil8;break;default:console.error("WebGPURenderer: Unsupported texture type with DepthStencilFormat.",n)}break;case qd:switch(n){case vr:o=J.R32Sint;break;case In:o=J.R32Uint;break;default:console.error("WebGPURenderer: Unsupported texture type with RedIntegerFormat.",n)}break;case Od:switch(n){case vr:o=J.RG32Sint;break;case In:o=J.RG32Uint;break;default:console.error("WebGPURenderer: Unsupported texture type with RGIntegerFormat.",n)}break;case Ud:switch(n){case vr:o=J.RGBA32Sint;break;case In:o=J.RGBA32Uint;break;default:console.error("WebGPURenderer: Unsupported texture type with RGBAIntegerFormat.",n)}break;default:console.error("WebGPURenderer: Unsupported texture format.",t)}return o}const TV=/^[fn]*\s*([a-z_0-9]+)?\s*\(([\s\S]*?)\)\s*[\-\>]*\s*([a-z_0-9]+(?:<[\s\S]+?>)?)/i,wV=/([a-z_0-9]+)\s*:\s*([a-z_0-9]+(?:<[\s\S]+?>)?)/ig,wg={f32:"float",i32:"int",u32:"uint",bool:"bool","vec2<f32>":"vec2","vec2<i32>":"ivec2","vec2<u32>":"uvec2","vec2<bool>":"bvec2",vec2f:"vec2",vec2i:"ivec2",vec2u:"uvec2",vec2b:"bvec2","vec3<f32>":"vec3","vec3<i32>":"ivec3","vec3<u32>":"uvec3","vec3<bool>":"bvec3",vec3f:"vec3",vec3i:"ivec3",vec3u:"uvec3",vec3b:"bvec3","vec4<f32>":"vec4","vec4<i32>":"ivec4","vec4<u32>":"uvec4","vec4<bool>":"bvec4",vec4f:"vec4",vec4i:"ivec4",vec4u:"uvec4",vec4b:"bvec4","mat2x2<f32>":"mat2",mat2x2f:"mat2","mat3x3<f32>":"mat3",mat3x3f:"mat3","mat4x4<f32>":"mat4",mat4x4f:"mat4",sampler:"sampler",texture_1d:"texture",texture_2d:"texture",texture_2d_array:"texture",texture_multisampled_2d:"cubeTexture",texture_depth_2d:"depthTexture",texture_depth_2d_array:"depthTexture",texture_depth_multisampled_2d:"depthTexture",texture_depth_cube:"depthTexture",texture_depth_cube_array:"depthTexture",texture_3d:"texture3D",texture_cube:"cubeTexture",texture_cube_array:"cubeTexture",texture_storage_1d:"storageTexture",texture_storage_2d:"storageTexture",texture_storage_2d_array:"storageTexture",texture_storage_3d:"storageTexture"},SV=r=>{r=r.trim();const e=r.match(TV);if(e!==null&&e.length===4){const t=e[2],n=[];let i=null;for(;(i=wV.exec(t))!==null;)n.push({name:i[1],type:i[2]});const s=[];for(let m=0;m<n.length;m++){const{name:y,type:x}=n[m];let b=x;b.startsWith("ptr")?b="pointer":(b.startsWith("texture")&&(b=x.split("<")[0]),b=wg[b]),s.push(new N3(b,y))}const o=r.substring(e[0].length),u=e[3]||"void",h=e[1]!==void 0?e[1]:"";return{type:wg[u]||u,inputs:s,name:h,inputsCode:t,blockCode:o,outputType:u}}else throw new Error("FunctionNode: Function is not a WGSL code.")};class MV extends C3{constructor(e){const{type:t,inputs:n,name:i,inputsCode:s,blockCode:o,outputType:u}=SV(e);super(t,n,i),this.inputsCode=s,this.blockCode=o,this.outputType=u}getCode(e=this.name){const t=this.outputType!=="void"?"-> "+this.outputType:"";return`fn ${e} ( ${this.inputsCode.trim()} ) ${t}`+this.blockCode}}class EV extends O_{parseFunction(e){return new MV(e)}}const oA=typeof self<"u"?self.GPUShaderStage:{VERTEX:1,FRAGMENT:2,COMPUTE:4},NV={[Jn.READ_ONLY]:"read",[Jn.WRITE_ONLY]:"write",[Jn.READ_WRITE]:"read_write"},Sg={[v1]:"repeat",[Dd]:"clamp",[y1]:"mirror"},F0={vertex:oA?oA.VERTEX:1,fragment:oA?oA.FRAGMENT:2,compute:oA?oA.COMPUTE:4},Mg={instance:!0,swizzleAssign:!1,storageBuffer:!0},RV={"^^":"tsl_xor"},CV={float:"f32",int:"i32",uint:"u32",bool:"bool",color:"vec3<f32>",vec2:"vec2<f32>",ivec2:"vec2<i32>",uvec2:"vec2<u32>",bvec2:"vec2<bool>",vec3:"vec3<f32>",ivec3:"vec3<i32>",uvec3:"vec3<u32>",bvec3:"vec3<bool>",vec4:"vec4<f32>",ivec4:"vec4<i32>",uvec4:"vec4<u32>",bvec4:"vec4<bool>",mat2:"mat2x2<f32>",mat3:"mat3x3<f32>",mat4:"mat4x4<f32>"},Eg={},Ml={tsl_xor:new lr("fn tsl_xor( a : bool, b : bool ) -> bool { return ( a || b ) && !( a && b ); }"),mod_float:new lr("fn tsl_mod_float( x : f32, y : f32 ) -> f32 { return x - y * floor( x / y ); }"),mod_vec2:new lr("fn tsl_mod_vec2( x : vec2f, y : vec2f ) -> vec2f { return x - y * floor( x / y ); }"),mod_vec3:new lr("fn tsl_mod_vec3( x : vec3f, y : vec3f ) -> vec3f { return x - y * floor( x / y ); }"),mod_vec4:new lr("fn tsl_mod_vec4( x : vec4f, y : vec4f ) -> vec4f { return x - y * floor( x / y ); }"),equals_bool:new lr("fn tsl_equals_bool( a : bool, b : bool ) -> bool { return a == b; }"),equals_bvec2:new lr("fn tsl_equals_bvec2( a : vec2f, b : vec2f ) -> vec2<bool> { return vec2<bool>( a.x == b.x, a.y == b.y ); }"),equals_bvec3:new lr("fn tsl_equals_bvec3( a : vec3f, b : vec3f ) -> vec3<bool> { return vec3<bool>( a.x == b.x, a.y == b.y, a.z == b.z ); }"),equals_bvec4:new lr("fn tsl_equals_bvec4( a : vec4f, b : vec4f ) -> vec4<bool> { return vec4<bool>( a.x == b.x, a.y == b.y, a.z == b.z, a.w == b.w ); }"),repeatWrapping_float:new lr("fn tsl_repeatWrapping_float( coord: f32 ) -> f32 { return fract( coord ); }"),mirrorWrapping_float:new lr("fn tsl_mirrorWrapping_float( coord: f32 ) -> f32 { let mirrored = fract( coord * 0.5 ) * 2.0; return 1.0 - abs( 1.0 - mirrored ); }"),clampWrapping_float:new lr("fn tsl_clampWrapping_float( coord: f32 ) -> f32 { return clamp( coord, 0.0, 1.0 ); }"),biquadraticTexture:new lr(`
fn tsl_biquadraticTexture( map : texture_2d<f32>, coord : vec2f, iRes : vec2u, level : u32 ) -> vec4f {

	let res = vec2f( iRes );

	let uvScaled = coord * res;
	let uvWrapping = ( ( uvScaled % res ) + res ) % res;

	// https://www.shadertoy.com/view/WtyXRy

	let uv = uvWrapping - 0.5;
	let iuv = floor( uv );
	let f = fract( uv );

	let rg1 = textureLoad( map, vec2u( iuv + vec2( 0.5, 0.5 ) ) % iRes, level );
	let rg2 = textureLoad( map, vec2u( iuv + vec2( 1.5, 0.5 ) ) % iRes, level );
	let rg3 = textureLoad( map, vec2u( iuv + vec2( 0.5, 1.5 ) ) % iRes, level );
	let rg4 = textureLoad( map, vec2u( iuv + vec2( 1.5, 1.5 ) ) % iRes, level );

	return mix( mix( rg1, rg2, f.x ), mix( rg3, rg4, f.x ), f.y );

}
`)},PV={dFdx:"dpdx",dFdy:"- dpdy",mod_float:"tsl_mod_float",mod_vec2:"tsl_mod_vec2",mod_vec3:"tsl_mod_vec3",mod_vec4:"tsl_mod_vec4",equals_bool:"tsl_equals_bool",equals_bvec2:"tsl_equals_bvec2",equals_bvec3:"tsl_equals_bvec3",equals_bvec4:"tsl_equals_bvec4",inversesqrt:"inverseSqrt",bitcast:"bitcast<f32>"};let X_="";(typeof navigator<"u"&&/Firefox|Deno/g.test(navigator.userAgent))!==!0&&(X_+=`diagnostic( off, derivative_uniformity );
`);class BV extends q_{constructor(e,t){super(e,t,new EV),this.uniformGroups={},this.builtins={},this.directives={},this.scopedArrays=new Map}_generateTextureSample(e,t,n,i,s,o=this.shaderStage){return o==="fragment"?i?s?`textureSample( ${t}, ${t}_sampler, ${n}, ${i}, ${s} )`:`textureSample( ${t}, ${t}_sampler, ${n}, ${i} )`:s?`textureSample( ${t}, ${t}_sampler, ${n}, ${s} )`:`textureSample( ${t}, ${t}_sampler, ${n} )`:this.generateTextureSampleLevel(e,t,n,"0",i)}generateTextureSampleLevel(e,t,n,i,s,o){return this.isUnfilterable(e)===!1?o?`textureSampleLevel( ${t}, ${t}_sampler, ${n}, ${i}, ${o} )`:`textureSampleLevel( ${t}, ${t}_sampler, ${n}, ${i} )`:this.isFilteredTexture(e)?this.generateFilteredTexture(e,t,n,o,i):this.generateTextureLod(e,t,n,s,o,i)}generateWrapFunction(e){const t=`tsl_coord_${Sg[e.wrapS]}S_${Sg[e.wrapT]}_${e.isData3DTexture?"3d":"2d"}T`;let n=Eg[t];if(n===void 0){const i=[],s=e.isData3DTexture?"vec3f":"vec2f";let o=`fn ${t}( coord : ${s} ) -> ${s} {

	return ${s}(
`;const u=(h,d)=>{h===v1?(i.push(Ml.repeatWrapping_float),o+=`		tsl_repeatWrapping_float( coord.${d} )`):h===Dd?(i.push(Ml.clampWrapping_float),o+=`		tsl_clampWrapping_float( coord.${d} )`):h===y1?(i.push(Ml.mirrorWrapping_float),o+=`		tsl_mirrorWrapping_float( coord.${d} )`):(o+=`		coord.${d}`,console.warn(`WebGPURenderer: Unsupported texture wrap type "${h}" for vertex shader.`))};u(e.wrapS,"x"),o+=`,
`,u(e.wrapT,"y"),e.isData3DTexture&&(o+=`,
`,u(e.wrapR,"z")),o+=`
	);

}
`,Eg[t]=n=new lr(o,i)}return n.build(this),t}generateArrayDeclaration(e,t){return`array< ${this.getType(e)}, ${t} >`}generateTextureDimension(e,t,n){const i=this.getDataFromNode(e,this.shaderStage,this.globalCache);i.dimensionsSnippet===void 0&&(i.dimensionsSnippet={});let s=i.dimensionsSnippet[n];if(i.dimensionsSnippet[n]===void 0){let o,u;const{primarySamples:h}=this.renderer.backend.utils.getTextureSampleData(e),d=h>1;e.isData3DTexture?u="vec3<u32>":u="vec2<u32>",d||e.isStorageTexture?o=t:o=`${t}${n?`, u32( ${n} )`:""}`,s=new oc(new ac(`textureDimensions( ${o} )`,u)),i.dimensionsSnippet[n]=s,(e.isArrayTexture||e.isDataArrayTexture||e.isData3DTexture)&&(i.arrayLayerCount=new oc(new ac(`textureNumLayers(${t})`,"u32"))),e.isTextureCube&&(i.cubeFaceCount=new oc(new ac("6u","u32")))}return s.build(this)}generateFilteredTexture(e,t,n,i,s="0u"){this._include("biquadraticTexture");const o=this.generateWrapFunction(e),u=this.generateTextureDimension(e,t,s);return i&&(n=`${n} + vec2<f32>(${i}) / ${u}`),`tsl_biquadraticTexture( ${t}, ${o}( ${n} ), ${u}, u32( ${s} ) )`}generateTextureLod(e,t,n,i,s,o="0u"){const u=this.generateWrapFunction(e),h=this.generateTextureDimension(e,t,o),d=e.isData3DTexture?"vec3":"vec2";s&&(n=`${n} + ${d}<f32>(${s}) / ${d}<f32>( ${h} )`);const m=`${d}<u32>( ${u}( ${n} ) * ${d}<f32>( ${h} ) )`;return this.generateTextureLoad(e,t,m,i,null,o)}generateTextureLoad(e,t,n,i,s,o="0u"){let u;return s&&(n=`${n} + ${s}`),i?u=`textureLoad( ${t}, ${n}, ${i}, u32( ${o} ) )`:(u=`textureLoad( ${t}, ${n}, u32( ${o} ) )`,this.renderer.backend.compatibilityMode&&e.isDepthTexture&&(u+=".x")),u}generateTextureStore(e,t,n,i,s){let o;return i?o=`textureStore( ${t}, ${n}, ${i}, ${s} )`:o=`textureStore( ${t}, ${n}, ${s} )`,o}isSampleCompare(e){return e.isDepthTexture===!0&&e.compareFunction!==null}isUnfilterable(e){return this.getComponentTypeFromTexture(e)!=="float"||!this.isAvailable("float32Filterable")&&e.isDataTexture===!0&&e.type===ci||this.isSampleCompare(e)===!1&&e.minFilter===Fi&&e.magFilter===Fi||this.renderer.backend.utils.getTextureSampleData(e).primarySamples>1}generateTexture(e,t,n,i,s,o=this.shaderStage){let u=null;return this.isUnfilterable(e)?u=this.generateTextureLod(e,t,n,i,s,"0",o):u=this._generateTextureSample(e,t,n,i,s,o),u}generateTextureGrad(e,t,n,i,s,o,u=this.shaderStage){if(u==="fragment")return o?`textureSampleGrad( ${t}, ${t}_sampler, ${n},  ${i[0]}, ${i[1]}, ${o} )`:`textureSampleGrad( ${t}, ${t}_sampler, ${n},  ${i[0]}, ${i[1]} )`;console.error(`WebGPURenderer: THREE.TextureNode.gradient() does not support ${u} shader.`)}generateTextureCompare(e,t,n,i,s,o,u=this.shaderStage){if(u==="fragment")return e.isDepthTexture===!0&&e.isArrayTexture===!0?o?`textureSampleCompare( ${t}, ${t}_sampler, ${n}, ${s}, ${i}, ${o} )`:`textureSampleCompare( ${t}, ${t}_sampler, ${n}, ${s}, ${i} )`:o?`textureSampleCompare( ${t}, ${t}_sampler, ${n}, ${i}, ${o} )`:`textureSampleCompare( ${t}, ${t}_sampler, ${n}, ${i} )`;console.error(`WebGPURenderer: THREE.DepthTexture.compareFunction() does not support ${u} shader.`)}generateTextureLevel(e,t,n,i,s,o){return this.isUnfilterable(e)===!1?o?`textureSampleLevel( ${t}, ${t}_sampler, ${n}, ${i}, ${o} )`:`textureSampleLevel( ${t}, ${t}_sampler, ${n}, ${i} )`:this.isFilteredTexture(e)?this.generateFilteredTexture(e,t,n,o,i):this.generateTextureLod(e,t,n,s,o,i)}generateTextureBias(e,t,n,i,s,o,u=this.shaderStage){if(u==="fragment")return o?`textureSampleBias( ${t}, ${t}_sampler, ${n}, ${i}, ${o} )`:`textureSampleBias( ${t}, ${t}_sampler, ${n}, ${i} )`;console.error(`WebGPURenderer: THREE.TextureNode.biasNode does not support ${u} shader.`)}getPropertyName(e,t=this.shaderStage){if(e.isNodeVarying===!0&&e.needsInterpolation===!0){if(t==="vertex")return`varyings.${e.name}`}else if(e.isNodeUniform===!0){const n=e.name,i=e.type;return i==="texture"||i==="cubeTexture"||i==="storageTexture"||i==="texture3D"?n:i==="buffer"||i==="storageBuffer"||i==="indirectStorageBuffer"?this.isCustomStruct(e)?n:n+".value":e.groupNode.name+"."+n}return super.getPropertyName(e)}getOutputStructName(){return"output"}getFunctionOperator(e){const t=RV[e];return t!==void 0?(this._include(t),t):null}getNodeAccess(e,t){return t!=="compute"?e.isAtomic===!0?(console.warn("WebGPURenderer: Atomic operations are only supported in compute shaders."),Jn.READ_WRITE):Jn.READ_ONLY:e.access}getStorageAccess(e,t){return NV[this.getNodeAccess(e,t)]}getUniformFromNode(e,t,n,i=null){const s=super.getUniformFromNode(e,t,n,i),o=this.getDataFromNode(e,n,this.globalCache);if(o.uniformGPU===void 0){let u;const h=e.groupNode,d=h.name,m=this.getBindGroupArray(d,n);if(t==="texture"||t==="cubeTexture"||t==="storageTexture"||t==="texture3D"){let y=null;const x=this.getNodeAccess(e,n);if(t==="texture"||t==="storageTexture"?e.value.is3DTexture===!0?y=new gd(s.name,s.node,h,x):y=new n2(s.name,s.node,h,x):t==="cubeTexture"?y=new j_(s.name,s.node,h,x):t==="texture3D"&&(y=new gd(s.name,s.node,h,x)),y.store=e.isStorageTextureNode===!0,y.setVisibility(F0[n]),this.isUnfilterable(e.value)===!1&&y.store===!1){const b=new pV(`${s.name}_sampler`,s.node,h);b.setVisibility(F0[n]),m.push(b,y),u=[b,y]}else m.push(y),u=[y]}else if(t==="buffer"||t==="storageBuffer"||t==="indirectStorageBuffer"){const y=t==="buffer"?z_:yV,x=new y(e,h);x.setVisibility(F0[n]),m.push(x),u=x,s.name=i||"NodeBuffer_"+s.id}else{const y=this.uniformGroups[n]||(this.uniformGroups[n]={});let x=y[d];x===void 0&&(x=new $_(d,h),x.setVisibility(F0[n]),y[d]=x,m.push(x)),u=this.getNodeUniform(s,t),x.addUniform(u)}o.uniformGPU=u}return s}getBuiltin(e,t,n,i=this.shaderStage){const s=this.builtins[i]||(this.builtins[i]=new Map);return s.has(e)===!1&&s.set(e,{name:e,property:t,type:n}),t}hasBuiltin(e,t=this.shaderStage){return this.builtins[t]!==void 0&&this.builtins[t].has(e)}getVertexIndex(){return this.shaderStage==="vertex"?this.getBuiltin("vertex_index","vertexIndex","u32","attribute"):"vertexIndex"}buildFunctionCode(e){const t=e.layout,n=this.flowShaderNode(e),i=[];for(const o of t.inputs)i.push(o.name+" : "+this.getType(o.type));let s=`fn ${t.name}( ${i.join(", ")} ) -> ${this.getType(t.type)} {
${n.vars}
${n.code}
`;return n.result&&(s+=`	return ${n.result};
`),s+=`
}
`,s}getInstanceIndex(){return this.shaderStage==="vertex"?this.getBuiltin("instance_index","instanceIndex","u32","attribute"):"instanceIndex"}getInvocationLocalIndex(){return this.getBuiltin("local_invocation_index","invocationLocalIndex","u32","attribute")}getSubgroupSize(){return this.enableSubGroups(),this.getBuiltin("subgroup_size","subgroupSize","u32","attribute")}getInvocationSubgroupIndex(){return this.enableSubGroups(),this.getBuiltin("subgroup_invocation_id","invocationSubgroupIndex","u32","attribute")}getSubgroupIndex(){return this.enableSubGroups(),this.getBuiltin("subgroup_id","subgroupIndex","u32","attribute")}getDrawIndex(){return null}getFrontFacing(){return this.getBuiltin("front_facing","isFront","bool")}getFragCoord(){return this.getBuiltin("position","fragCoord","vec4<f32>")+".xy"}getFragDepth(){return"output."+this.getBuiltin("frag_depth","depth","f32","output")}getClipDistance(){return"varyings.hw_clip_distances"}isFlipY(){return!1}enableDirective(e,t=this.shaderStage){(this.directives[t]||(this.directives[t]=new Set)).add(e)}getDirectives(e){const t=[],n=this.directives[e];if(n!==void 0)for(const i of n)t.push(`enable ${i};`);return t.join(`
`)}enableSubGroups(){this.enableDirective("subgroups")}enableSubgroupsF16(){this.enableDirective("subgroups-f16")}enableClipDistances(){this.enableDirective("clip_distances")}enableShaderF16(){this.enableDirective("f16")}enableDualSourceBlending(){this.enableDirective("dual_source_blending")}enableHardwareClipping(e){this.enableClipDistances(),this.getBuiltin("clip_distances","hw_clip_distances",`array<f32, ${e} >`,"vertex")}getBuiltins(e){const t=[],n=this.builtins[e];if(n!==void 0)for(const{name:i,property:s,type:o}of n.values())t.push(`@builtin( ${i} ) ${s} : ${o}`);return t.join(`,
	`)}getScopedArray(e,t,n,i){return this.scopedArrays.has(e)===!1&&this.scopedArrays.set(e,{name:e,scope:t,bufferType:n,bufferCount:i}),e}getScopedArrays(e){if(e!=="compute")return;const t=[];for(const{name:n,scope:i,bufferType:s,bufferCount:o}of this.scopedArrays.values()){const u=this.getType(s);t.push(`var<${i}> ${n}: array< ${u}, ${o} >;`)}return t.join(`
`)}getAttributes(e){const t=[];if(e==="compute"&&(this.getBuiltin("global_invocation_id","globalId","vec3<u32>","attribute"),this.getBuiltin("workgroup_id","workgroupId","vec3<u32>","attribute"),this.getBuiltin("local_invocation_id","localId","vec3<u32>","attribute"),this.getBuiltin("num_workgroups","numWorkgroups","vec3<u32>","attribute"),this.renderer.hasFeature("subgroups")&&(this.enableDirective("subgroups",e),this.getBuiltin("subgroup_size","subgroupSize","u32","attribute"))),e==="vertex"||e==="compute"){const n=this.getBuiltins("attribute");n&&t.push(n);const i=this.getAttributesArray();for(let s=0,o=i.length;s<o;s++){const u=i[s],h=u.name,d=this.getType(u.type);t.push(`@location( ${s} ) ${h} : ${d}`)}}return t.join(`,
	`)}getStructMembers(e){const t=[];for(const n of e.members){const i=e.output?"@location( "+n.index+" ) ":"";let s=this.getType(n.type);n.atomic&&(s="atomic< "+s+" >"),t.push(`	${i+n.name} : ${s}`)}return e.output&&t.push(`	${this.getBuiltins("output")}`),t.join(`,
`)}getStructs(e){let t="";const n=this.structs[e];if(n.length>0){const i=[];for(const s of n){let o=`struct ${s.name} {
`;o+=this.getStructMembers(s),o+=`
};`,i.push(o)}t=`
`+i.join(`

`)+`
`}return t}getVar(e,t,n=null){let i=`var ${t} : `;return n!==null?i+=this.generateArrayDeclaration(e,n):i+=this.getType(e),i}getVars(e){const t=[],n=this.vars[e];if(n!==void 0)for(const i of n)t.push(`	${this.getVar(i.type,i.name,i.count)};`);return`
${t.join(`
`)}
`}getVaryings(e){const t=[];if(e==="vertex"&&this.getBuiltin("position","Vertex","vec4<f32>","vertex"),e==="vertex"||e==="fragment"){const s=this.varyings,o=this.vars[e];for(let u=0;u<s.length;u++){const h=s[u];if(h.needsInterpolation){let d=`@location( ${u} )`;if(h.interpolationType){const m=h.interpolationSampling!==null?`, ${h.interpolationSampling} )`:" )";d+=` @interpolate( ${h.interpolationType}${m}`}else/^(int|uint|ivec|uvec)/.test(h.type)&&(d+=` @interpolate( ${this.renderer.backend.compatibilityMode?"flat, either":"flat"} )`);t.push(`${d} ${h.name} : ${this.getType(h.type)}`)}else e==="vertex"&&o.includes(h)===!1&&o.push(h)}}const n=this.getBuiltins(e);n&&t.push(n);const i=t.join(`,
	`);return e==="vertex"?this._getWGSLStruct("VaryingsStruct","	"+i):i}isCustomStruct(e){const t=e.value,n=e.node,i=(t.isBufferAttribute||t.isInstancedBufferAttribute)&&n.structTypeNode!==null,s=n.value&&n.value.array&&typeof n.value.itemSize=="number"&&n.value.array.length>n.value.itemSize;return i&&!s}getUniforms(e){const t=this.uniforms[e],n=[],i=[],s=[],o={};for(const h of t){const d=h.groupNode.name,m=this.bindingsIndexes[d];if(h.type==="texture"||h.type==="cubeTexture"||h.type==="storageTexture"||h.type==="texture3D"){const y=h.node.value;this.isUnfilterable(y)===!1&&h.node.isStorageTextureNode!==!0&&(this.isSampleCompare(y)?n.push(`@binding( ${m.binding++} ) @group( ${m.group} ) var ${h.name}_sampler : sampler_comparison;`):n.push(`@binding( ${m.binding++} ) @group( ${m.group} ) var ${h.name}_sampler : sampler;`));let x,b="";const{primarySamples:T}=this.renderer.backend.utils.getTextureSampleData(y);if(T>1&&(b="_multisampled"),y.isCubeTexture===!0)x="texture_cube<f32>";else if(y.isDepthTexture===!0)this.renderer.backend.compatibilityMode&&y.compareFunction===null?x=`texture${b}_2d<f32>`:x=`texture_depth${b}_2d${y.isArrayTexture===!0?"_array":""}`;else if(h.node.isStorageTextureNode===!0){const M=vd(y),N=this.getStorageAccess(h.node,e),C=h.node.value.is3DTexture,B=h.node.value.isArrayTexture;x=`texture_storage_${C?"3d":`2d${B?"_array":""}`}<${M}, ${N}>`}else if(y.isArrayTexture===!0||y.isDataArrayTexture===!0||y.isCompressedArrayTexture===!0)x="texture_2d_array<f32>";else if(y.is3DTexture===!0||y.isData3DTexture===!0)x="texture_3d<f32>";else{const M=this.getComponentTypeFromTexture(y).charAt(0);x=`texture${b}_2d<${M}32>`}n.push(`@binding( ${m.binding++} ) @group( ${m.group} ) var ${h.name} : ${x};`)}else if(h.type==="buffer"||h.type==="storageBuffer"||h.type==="indirectStorageBuffer"){const y=h.node,x=this.getType(y.getNodeType(this)),b=y.bufferCount,T=b>0&&h.type==="buffer"?", "+b:"",M=y.isStorageBufferNode?`storage, ${this.getStorageAccess(y,e)}`:"uniform";if(this.isCustomStruct(h))i.push(`@binding( ${m.binding++} ) @group( ${m.group} ) var<${M}> ${h.name} : ${x};`);else{const C=`	value : array< ${y.isAtomic?`atomic<${x}>`:`${x}`}${T} >`;i.push(this._getWGSLStructBinding(h.name,C,M,m.binding++,m.group))}}else{const y=this.getType(this.getVectorType(h.type)),x=h.groupNode.name;(o[x]||(o[x]={index:m.binding++,id:m.group,snippets:[]})).snippets.push(`	${h.name} : ${y}`)}}for(const h in o){const d=o[h];s.push(this._getWGSLStructBinding(h,d.snippets.join(`,
`),"uniform",d.index,d.id))}let u=n.join(`
`);return u+=i.join(`
`),u+=s.join(`
`),u}buildCode(){const e=this.material!==null?{fragment:{},vertex:{}}:{compute:{}};this.sortBindingGroups();for(const t in e){this.shaderStage=t;const n=e[t];n.uniforms=this.getUniforms(t),n.attributes=this.getAttributes(t),n.varyings=this.getVaryings(t),n.structs=this.getStructs(t),n.vars=this.getVars(t),n.codes=this.getCodes(t),n.directives=this.getDirectives(t),n.scopedArrays=this.getScopedArrays(t);let i=`// code

`;i+=this.flowCode[t];const s=this.flowNodes[t],o=s[s.length-1],u=o.outputNode,h=u!==void 0&&u.isOutputStructNode===!0;for(const d of s){const m=this.getFlowData(d),y=d.name;if(y&&(i.length>0&&(i+=`
`),i+=`	// flow -> ${y}
`),i+=`${m.code}
	`,d===o&&t!=="compute"){if(i+=`// result

	`,t==="vertex")i+=`varyings.Vertex = ${m.result};`;else if(t==="fragment")if(h)n.returnType=u.getNodeType(this),n.structs+="var<private> output : "+n.returnType+";",i+=`return ${m.result};`;else{let x="	@location(0) color: vec4<f32>";const b=this.getBuiltins("output");b&&(x+=`,
	`+b),n.returnType="OutputStruct",n.structs+=this._getWGSLStruct("OutputStruct",x),n.structs+=`
var<private> output : OutputStruct;`,i+=`output.color = ${m.result};

	return output;`}}}n.flow=i}if(this.shaderStage=null,this.material!==null)this.vertexShader=this._getWGSLVertexCode(e.vertex),this.fragmentShader=this._getWGSLFragmentCode(e.fragment);else{const t=this.object.workgroupSize;this.computeShader=this._getWGSLComputeCode(e.compute,t)}}getMethod(e,t=null){let n;return t!==null&&(n=this._getWGSLMethod(e+"_"+t)),n===void 0&&(n=this._getWGSLMethod(e)),n||e}getBitcastMethod(e){return`bitcast<${this.getType(e)}>`}getTernary(e,t,n){return`select( ${n}, ${t}, ${e} )`}getType(e){return CV[e]||e}isAvailable(e){let t=Mg[e];return t===void 0&&(e==="float32Filterable"?t=this.renderer.hasFeature("float32-filterable"):e==="clipDistance"&&(t=this.renderer.hasFeature("clip-distances")),Mg[e]=t),t}_getWGSLMethod(e){return Ml[e]!==void 0&&this._include(e),PV[e]}_include(e){const t=Ml[e];return t.build(this),this.currentFunctionNode!==null&&this.currentFunctionNode.includes.push(t),t}_getWGSLVertexCode(e){return`${this.getSignature()}
// directives
${e.directives}

// structs
${e.structs}

// uniforms
${e.uniforms}

// varyings
${e.varyings}
var<private> varyings : VaryingsStruct;

// codes
${e.codes}

@vertex
fn main( ${e.attributes} ) -> VaryingsStruct {

	// vars
	${e.vars}

	// flow
	${e.flow}

	return varyings;

}
`}_getWGSLFragmentCode(e){return`${this.getSignature()}
// global
${X_}

// structs
${e.structs}

// uniforms
${e.uniforms}

// codes
${e.codes}

@fragment
fn main( ${e.varyings} ) -> ${e.returnType} {

	// vars
	${e.vars}

	// flow
	${e.flow}

}
`}_getWGSLComputeCode(e,t){const[n,i,s]=t;return`${this.getSignature()}
// directives
${e.directives}

// system
var<private> instanceIndex : u32;

// locals
${e.scopedArrays}

// structs
${e.structs}

// uniforms
${e.uniforms}

// codes
${e.codes}

@compute @workgroup_size( ${n}, ${i}, ${s} )
fn main( ${e.attributes} ) {

	// system
	instanceIndex = globalId.x
		+ globalId.y * ( ${n} * numWorkgroups.x )
		+ globalId.z * ( ${n} * numWorkgroups.x ) * ( ${i} * numWorkgroups.y );

	// vars
	${e.vars}

	// flow
	${e.flow}

}
`}_getWGSLStruct(e,t){return`
struct ${e} {
${t}
};`}_getWGSLStructBinding(e,t,n,i=0,s=0){const o=e+"Struct";return`${this._getWGSLStruct(o,t)}
@binding( ${i} ) @group( ${s} )
var<${n}> ${e} : ${o};`}}class DV{constructor(e){this.backend=e}getCurrentDepthStencilFormat(e){let t;return e.depthTexture!==null?t=this.getTextureFormatGPU(e.depthTexture):e.depth&&e.stencil?t=J.Depth24PlusStencil8:e.depth&&(t=J.Depth24Plus),t}getTextureFormatGPU(e){return this.backend.get(e).format}getTextureSampleData(e){let t;if(e.isFramebufferTexture)t=1;else if(e.isDepthTexture&&!e.renderTarget){const s=this.backend.renderer,o=s.getRenderTarget();t=o?o.samples:s.samples}else e.renderTarget&&(t=e.renderTarget.samples);t=t||1;const n=t>1&&e.renderTarget!==null&&e.isDepthTexture!==!0&&e.isFramebufferTexture!==!0;return{samples:t,primarySamples:n?1:t,isMSAA:n}}getCurrentColorFormat(e){let t;return e.textures!==null?t=this.getTextureFormatGPU(e.textures[0]):t=this.getPreferredCanvasFormat(),t}getCurrentColorSpace(e){return e.textures!==null?e.textures[0].colorSpace:this.backend.renderer.outputColorSpace}getPrimitiveTopology(e,t){if(e.isPoints)return xA.PointList;if(e.isLineSegments||e.isMesh&&t.wireframe===!0)return xA.LineList;if(e.isLine)return xA.LineStrip;if(e.isMesh)return xA.TriangleList}getSampleCount(e){return e>=4?4:1}getSampleCountRenderContext(e){return e.textures!==null?this.getSampleCount(e.sampleCount):this.getSampleCount(this.backend.renderer.samples)}getPreferredCanvasFormat(){const e=this.backend.parameters.outputType;if(e===void 0)return navigator.gpu.getPreferredCanvasFormat();if(e===Xr)return J.BGRA8Unorm;if(e===Rr)return J.RGBA16Float;throw new Error("Unsupported outputType")}}const Y_=new Map([[Int8Array,["sint8","snorm8"]],[Uint8Array,["uint8","unorm8"]],[Int16Array,["sint16","snorm16"]],[Uint16Array,["uint16","unorm16"]],[Int32Array,["sint32","snorm32"]],[Uint32Array,["uint32","unorm32"]],[Float32Array,["float32"]]]);typeof Float16Array<"u"&&Y_.set(Float16Array,["float16"]);const FV=new Map([[L6,["float16"]]]),LV=new Map([[Int32Array,"sint32"],[Int16Array,"sint32"],[Uint32Array,"uint32"],[Uint16Array,"uint32"],[Float32Array,"float32"]]);class IV{constructor(e){this.backend=e}createAttribute(e,t){const n=this._getBufferAttribute(e),i=this.backend,s=i.get(n);let o=s.buffer;if(o===void 0){const u=i.device;let h=n.array;if(e.normalized===!1){if(h.constructor===Int16Array||h.constructor===Int8Array)h=new Int32Array(h);else if((h.constructor===Uint16Array||h.constructor===Uint8Array)&&(h=new Uint32Array(h),t&GPUBufferUsage.INDEX))for(let y=0;y<h.length;y++)h[y]===65535&&(h[y]=4294967295)}if(n.array=h,(n.isStorageBufferAttribute||n.isStorageInstancedBufferAttribute)&&n.itemSize===3){h=new h.constructor(n.count*4);for(let y=0;y<n.count;y++)h.set(n.array.subarray(y*3,y*3+3),y*4);n.itemSize=4,n.array=h,s._force3to4BytesAlignment=!0}const d=h.byteLength,m=d+(4-d%4)%4;o=u.createBuffer({label:n.name,size:m,usage:t,mappedAtCreation:!0}),new h.constructor(o.getMappedRange()).set(h),o.unmap(),s.buffer=o}}updateAttribute(e){const t=this._getBufferAttribute(e),n=this.backend,i=n.device,s=n.get(t),o=n.get(t).buffer;let u=t.array;if(s._force3to4BytesAlignment===!0){u=new u.constructor(t.count*4);for(let m=0;m<t.count;m++)u.set(t.array.subarray(m*3,m*3+3),m*4);t.array=u}const h=this._isTypedArray(u),d=t.updateRanges;if(d.length===0)i.queue.writeBuffer(o,0,u,0);else{const m=h?1:u.BYTES_PER_ELEMENT;for(let y=0,x=d.length;y<x;y++){const b=d[y];let T,M;if(s._force3to4BytesAlignment===!0){const C=Math.floor(b.start/3),B=Math.ceil(b.count/3);T=C*4*m,M=B*4*m}else T=b.start*m,M=b.count*m;const N=T*(h?u.BYTES_PER_ELEMENT:1);i.queue.writeBuffer(o,N,u,T,M)}t.clearUpdateRanges()}}createShaderVertexBuffers(e){const t=e.getAttributes(),n=new Map;for(let i=0;i<t.length;i++){const s=t[i],o=s.array.BYTES_PER_ELEMENT,u=this._getBufferAttribute(s);let h=n.get(u);if(h===void 0){let y,x;s.isInterleavedBufferAttribute===!0?(y=s.data.stride*o,x=s.data.isInstancedInterleavedBuffer?D0.Instance:D0.Vertex):(y=s.itemSize*o,x=s.isInstancedBufferAttribute?D0.Instance:D0.Vertex),s.normalized===!1&&(s.array.constructor===Int16Array||s.array.constructor===Uint16Array)&&(y=4),h={arrayStride:y,attributes:[],stepMode:x},n.set(u,h)}const d=this._getVertexFormat(s),m=s.isInterleavedBufferAttribute===!0?s.offset*o:0;h.attributes.push({shaderLocation:i,offset:m,format:d})}return Array.from(n.values())}destroyAttribute(e){const t=this.backend;t.get(this._getBufferAttribute(e)).buffer.destroy(),t.delete(e)}async getArrayBufferAsync(e){const t=this.backend,n=t.device,s=t.get(this._getBufferAttribute(e)).buffer,o=s.size,u=n.createBuffer({label:`${e.name}_readback`,size:o,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),h=n.createCommandEncoder({label:`readback_encoder_${e.name}`});h.copyBufferToBuffer(s,0,u,0,o);const d=h.finish();n.queue.submit([d]),await u.mapAsync(GPUMapMode.READ);const m=u.getMappedRange(),y=new e.array.constructor(m.slice(0));return u.unmap(),y.buffer}_getVertexFormat(e){const{itemSize:t,normalized:n}=e,i=e.array.constructor,s=e.constructor;let o;if(t===1)o=LV.get(i);else{const h=(FV.get(s)||Y_.get(i))[n?1:0];if(h){const d=i.BYTES_PER_ELEMENT*t,y=Math.floor((d+3)/4)*4/i.BYTES_PER_ELEMENT;if(y%1)throw new Error("THREE.WebGPUAttributeUtils: Bad vertex format item size.");o=`${h}x${y}`}}return o||console.error("THREE.WebGPUAttributeUtils: Vertex format not supported yet."),o}_isTypedArray(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}_getBufferAttribute(e){return e.isInterleavedBufferAttribute&&(e=e.data),e}}class qV{constructor(e){this.backend=e,this.bindGroupLayoutCache=new WeakMap}createBindingsLayout(e){const t=this.backend,n=t.device,i=[];let s=0;for(const o of e.bindings){const u={binding:s++,visibility:o.visibility};if(o.isUniformBuffer||o.isStorageBuffer){const h={};o.isStorageBuffer&&(o.visibility&4&&(o.access===Jn.READ_WRITE||o.access===Jn.WRITE_ONLY)?h.type=Ch.Storage:h.type=Ch.ReadOnlyStorage),u.buffer=h}else if(o.isSampledTexture&&o.store){const h={};h.format=this.backend.get(o.texture).texture.format;const d=o.access;d===Jn.READ_WRITE?h.access=Ph.ReadWrite:d===Jn.WRITE_ONLY?h.access=Ph.WriteOnly:h.access=Ph.ReadOnly,o.texture.isArrayTexture?h.viewDimension=Ln.TwoDArray:o.texture.is3DTexture&&(h.viewDimension=Ln.ThreeD),u.storageTexture=h}else if(o.isSampledTexture){const h={},{primarySamples:d}=t.utils.getTextureSampleData(o.texture);if(d>1&&(h.multisampled=!0,o.texture.isDepthTexture||(h.sampleType=na.UnfilterableFloat)),o.texture.isDepthTexture)t.compatibilityMode&&o.texture.compareFunction===null?h.sampleType=na.UnfilterableFloat:h.sampleType=na.Depth;else if(o.texture.isDataTexture||o.texture.isDataArrayTexture||o.texture.isData3DTexture){const m=o.texture.type;m===vr?h.sampleType=na.SInt:m===In?h.sampleType=na.UInt:m===ci&&(this.backend.hasFeature("float32-filterable")?h.sampleType=na.Float:h.sampleType=na.UnfilterableFloat)}o.isSampledCubeTexture?h.viewDimension=Ln.Cube:o.texture.isArrayTexture||o.texture.isDataArrayTexture||o.texture.isCompressedArrayTexture?h.viewDimension=Ln.TwoDArray:o.isSampledTexture3D&&(h.viewDimension=Ln.ThreeD),u.texture=h}else if(o.isSampler){const h={};o.texture.isDepthTexture&&(o.texture.compareFunction!==null?h.type=bg.Comparison:t.compatibilityMode&&(h.type=bg.NonFiltering)),u.sampler=h}else console.error(`WebGPUBindingUtils: Unsupported binding "${o}".`);i.push(u)}return n.createBindGroupLayout({entries:i})}createBindings(e,t,n,i=0){const{backend:s,bindGroupLayoutCache:o}=this,u=s.get(e);let h=o.get(e.bindingsReference);h===void 0&&(h=this.createBindingsLayout(e),o.set(e.bindingsReference,h));let d;n>0&&(u.groups===void 0&&(u.groups=[],u.versions=[]),u.versions[n]===i&&(d=u.groups[n])),d===void 0&&(d=this.createBindGroup(e,h),n>0&&(u.groups[n]=d,u.versions[n]=i)),u.group=d,u.layout=h}updateBinding(e){const t=this.backend,n=t.device,i=e.buffer,s=t.get(e).buffer;n.queue.writeBuffer(s,0,i,0)}createBindGroupIndex(e,t){const i=this.backend.device,s=GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST,o=e[0],u=i.createBuffer({label:"bindingCameraIndex_"+o,size:16,usage:s});i.queue.writeBuffer(u,0,e,0);const h=[{binding:0,resource:{buffer:u}}];return i.createBindGroup({label:"bindGroupCameraIndex_"+o,layout:t,entries:h})}createBindGroup(e,t){const n=this.backend,i=n.device;let s=0;const o=[];for(const u of e.bindings){if(u.isUniformBuffer){const h=n.get(u);if(h.buffer===void 0){const d=u.byteLength,m=GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST,y=i.createBuffer({label:"bindingBuffer_"+u.name,size:d,usage:m});h.buffer=y}o.push({binding:s,resource:{buffer:h.buffer}})}else if(u.isStorageBuffer){const h=n.get(u);if(h.buffer===void 0){const d=u.attribute;h.buffer=n.get(d).buffer}o.push({binding:s,resource:{buffer:h.buffer}})}else if(u.isSampledTexture){const h=n.get(u.texture);let d;if(h.externalTexture!==void 0)d=i.importExternalTexture({source:h.externalTexture});else{const m=u.store?1:h.texture.mipLevelCount;let y=`view-${h.texture.width}-${h.texture.height}`;if(h.texture.depthOrArrayLayers>1&&(y+=`-${h.texture.depthOrArrayLayers}`),y+=`-${m}`,d=h[y],d===void 0){const x=dV.All;let b;u.isSampledCubeTexture?b=Ln.Cube:u.isSampledTexture3D?b=Ln.ThreeD:u.texture.isArrayTexture||u.texture.isDataArrayTexture||u.texture.isCompressedArrayTexture?b=Ln.TwoDArray:b=Ln.TwoD,d=h[y]=h.texture.createView({aspect:x,dimension:b,mipLevelCount:m})}}o.push({binding:s,resource:d})}else if(u.isSampler){const h=n.get(u.texture);o.push({binding:s,resource:h.sampler})}s++}return i.createBindGroup({label:"bindGroup_"+e.name,layout:t,entries:o})}}class OV{constructor(e){this.backend=e,this._activePipelines=new WeakMap}setPipeline(e,t){this._activePipelines.get(e)!==t&&(e.setPipeline(t),this._activePipelines.set(e,t))}_getSampleCount(e){return this.backend.utils.getSampleCountRenderContext(e)}createRenderPipeline(e,t){const{object:n,material:i,geometry:s,pipeline:o}=e,{vertexProgram:u,fragmentProgram:h}=o,d=this.backend,m=d.device,y=d.utils,x=d.get(o),b=[];for(const Z of e.getBindings()){const se=d.get(Z);b.push(se.layout)}const T=d.attributeUtils.createShaderVertexBuffers(e);let M;i.blending!==tu&&(i.blending!==Os||i.transparent!==!1)&&(M=this._getBlending(i));let N={};i.stencilWrite===!0&&(N={compare:this._getStencilCompare(i),failOp:this._getStencilOperation(i.stencilFail),depthFailOp:this._getStencilOperation(i.stencilZFail),passOp:this._getStencilOperation(i.stencilZPass)});const C=this._getColorWriteMask(i),B=[];if(e.context.textures!==null){const Z=e.context.textures;for(let se=0;se<Z.length;se++){const Y=y.getTextureFormatGPU(Z[se]);B.push({format:Y,blend:M,writeMask:C})}}else{const Z=y.getCurrentColorFormat(e.context);B.push({format:Z,blend:M,writeMask:C})}const P=d.get(u).module,I=d.get(h).module,D=this._getPrimitiveState(n,s,i),q=this._getDepthCompare(i),O=y.getCurrentDepthStencilFormat(e.context),k=this._getSampleCount(e.context),z={label:`renderPipeline_${i.name||i.type}_${i.id}`,vertex:Object.assign({},P,{buffers:T}),fragment:Object.assign({},I,{targets:B}),primitive:D,multisample:{count:k,alphaToCoverageEnabled:i.alphaToCoverage&&k>1},layout:m.createPipelineLayout({bindGroupLayouts:b})},X={},W=e.context.depth,K=e.context.stencil;if((W===!0||K===!0)&&(W===!0&&(X.format=O,X.depthWriteEnabled=i.depthWrite,X.depthCompare=q),K===!0&&(X.stencilFront=N,X.stencilBack={},X.stencilReadMask=i.stencilFuncMask,X.stencilWriteMask=i.stencilWriteMask),i.polygonOffset===!0&&(X.depthBias=i.polygonOffsetUnits,X.depthBiasSlopeScale=i.polygonOffsetFactor,X.depthBiasClamp=0),z.depthStencil=X),t===null)x.pipeline=m.createRenderPipeline(z);else{const Z=new Promise(se=>{m.createRenderPipelineAsync(z).then(Y=>{x.pipeline=Y,se()})});t.push(Z)}}createBundleEncoder(e,t="renderBundleEncoder"){const n=this.backend,{utils:i,device:s}=n,o=i.getCurrentDepthStencilFormat(e),u=i.getCurrentColorFormat(e),h=this._getSampleCount(e),d={label:t,colorFormats:[u],depthStencilFormat:o,sampleCount:h};return s.createRenderBundleEncoder(d)}createComputePipeline(e,t){const n=this.backend,i=n.device,s=n.get(e.computeProgram).module,o=n.get(e),u=[];for(const h of t){const d=n.get(h);u.push(d.layout)}o.pipeline=i.createComputePipeline({compute:s,layout:i.createPipelineLayout({bindGroupLayouts:u})})}_getBlending(e){let t,n;const i=e.blending,s=e.blendSrc,o=e.blendDst,u=e.blendEquation;if(i===kl){const h=e.blendSrcAlpha!==null?e.blendSrcAlpha:s,d=e.blendDstAlpha!==null?e.blendDstAlpha:o,m=e.blendEquationAlpha!==null?e.blendEquationAlpha:u;t={srcFactor:this._getBlendFactor(s),dstFactor:this._getBlendFactor(o),operation:this._getBlendOperation(u)},n={srcFactor:this._getBlendFactor(h),dstFactor:this._getBlendFactor(d),operation:this._getBlendOperation(m)}}else{const h=e.premultipliedAlpha,d=(m,y,x,b)=>{t={srcFactor:m,dstFactor:y,operation:ta.Add},n={srcFactor:x,dstFactor:b,operation:ta.Add}};if(h)switch(i){case Os:d(Mt.One,Mt.OneMinusSrcAlpha,Mt.One,Mt.OneMinusSrcAlpha);break;case gc:d(Mt.One,Mt.One,Mt.One,Mt.One);break;case mc:d(Mt.Zero,Mt.OneMinusSrc,Mt.Zero,Mt.One);break;case pc:d(Mt.Dst,Mt.OneMinusSrcAlpha,Mt.Zero,Mt.One);break}else switch(i){case Os:d(Mt.SrcAlpha,Mt.OneMinusSrcAlpha,Mt.One,Mt.OneMinusSrcAlpha);break;case gc:d(Mt.SrcAlpha,Mt.One,Mt.One,Mt.One);break;case mc:console.error("THREE.WebGPURenderer: SubtractiveBlending requires material.premultipliedAlpha = true");break;case pc:console.error("THREE.WebGPURenderer: MultiplyBlending requires material.premultipliedAlpha = true");break}}if(t!==void 0&&n!==void 0)return{color:t,alpha:n};console.error("THREE.WebGPURenderer: Invalid blending: ",i)}_getBlendFactor(e){let t;switch(e){case mo:t=Mt.Zero;break;case _6:t=Mt.One;break;case v6:t=Mt.Src;break;case d6:t=Mt.OneMinusSrc;break;case y6:t=Mt.SrcAlpha;break;case f6:t=Mt.OneMinusSrcAlpha;break;case m6:t=Mt.Dst;break;case h6:t=Mt.OneMinusDst;break;case p6:t=Mt.DstAlpha;break;case c6:t=Mt.OneMinusDstAlpha;break;case g6:t=Mt.SrcAlphaSaturated;break;case KL:t=Mt.Constant;break;case ZL:t=Mt.OneMinusConstant;break;default:console.error("THREE.WebGPURenderer: Blend factor not supported.",e)}return t}_getStencilCompare(e){let t;const n=e.stencilFunc;switch(n){case dw:t=Xn.Never;break;case fw:t=Xn.Always;break;case hw:t=Xn.Less;break;case cw:t=Xn.LessEqual;break;case uw:t=Xn.Equal;break;case lw:t=Xn.GreaterEqual;break;case Aw:t=Xn.Greater;break;case aw:t=Xn.NotEqual;break;default:console.error("THREE.WebGPURenderer: Invalid stencil function.",n)}return t}_getStencilOperation(e){let t;switch(e){case bw:t=ho.Keep;break;case xw:t=ho.Zero;break;case _w:t=ho.Replace;break;case vw:t=ho.Invert;break;case yw:t=ho.IncrementClamp;break;case gw:t=ho.DecrementClamp;break;case mw:t=ho.IncrementWrap;break;case pw:t=ho.DecrementWrap;break;default:console.error("THREE.WebGPURenderer: Invalid stencil operation.",t)}return t}_getBlendOperation(e){let t;switch(e){case Ls:t=ta.Add;break;case u6:t=ta.Subtract;break;case l6:t=ta.ReverseSubtract;break;case ww:t=ta.Min;break;case Tw:t=ta.Max;break;default:console.error("THREE.WebGPUPipelineUtils: Blend equation not supported.",e)}return t}_getPrimitiveState(e,t,n){const i={},s=this.backend.utils;i.topology=s.getPrimitiveTopology(e,n),t.index!==null&&e.isLine===!0&&e.isLineSegments!==!0&&(i.stripIndexFormat=t.index.array instanceof Uint16Array?GA.Uint16:GA.Uint32);let o=n.side===Tr;return e.isMesh&&e.matrixWorld.determinant()<0&&(o=!o),i.frontFace=o===!0?vg.CW:vg.CCW,i.cullMode=n.side===pi?_g.None:_g.Back,i}_getColorWriteMask(e){return e.colorWrite===!0?xg.All:xg.None}_getDepthCompare(e){let t;if(e.depthTest===!1)t=Xn.Always;else{const n=e.depthFunc;switch(n){case N6:t=Xn.Never;break;case E6:t=Xn.Always;break;case M6:t=Xn.Less;break;case S6:t=Xn.LessEqual;break;case w6:t=Xn.Equal;break;case T6:t=Xn.GreaterEqual;break;case b6:t=Xn.Greater;break;case x6:t=Xn.NotEqual;break;default:console.error("THREE.WebGPUPipelineUtils: Invalid depth function.",n)}}return t}}class UV extends Q_{constructor(e,t,n=2048){super(n),this.device=e,this.type=t,this.querySet=this.device.createQuerySet({type:"timestamp",count:this.maxQueries,label:`queryset_global_timestamp_${t}`});const i=this.maxQueries*8;this.resolveBuffer=this.device.createBuffer({label:`buffer_timestamp_resolve_${t}`,size:i,usage:GPUBufferUsage.QUERY_RESOLVE|GPUBufferUsage.COPY_SRC}),this.resultBuffer=this.device.createBuffer({label:`buffer_timestamp_result_${t}`,size:i,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ})}allocateQueriesForContext(e){if(!this.trackTimestamp||this.isDisposed)return null;if(this.currentQueryIndex+2>this.maxQueries)return ki(`WebGPUTimestampQueryPool [${this.type}]: Maximum number of queries exceeded, when using trackTimestamp it is necessary to resolves the queries via renderer.resolveTimestampsAsync( THREE.TimestampQuery.${this.type.toUpperCase()} ).`),null;const t=this.currentQueryIndex;return this.currentQueryIndex+=2,this.queryOffsets.set(e,t),t}async resolveQueriesAsync(){if(!this.trackTimestamp||this.currentQueryIndex===0||this.isDisposed)return this.lastValue;if(this.pendingResolve)return this.pendingResolve;this.pendingResolve=this._resolveQueries();try{return await this.pendingResolve}finally{this.pendingResolve=null}}async _resolveQueries(){if(this.isDisposed)return this.lastValue;try{if(this.resultBuffer.mapState!=="unmapped")return this.lastValue;const e=new Map(this.queryOffsets),t=this.currentQueryIndex,n=t*8;this.currentQueryIndex=0,this.queryOffsets.clear();const i=this.device.createCommandEncoder();i.resolveQuerySet(this.querySet,0,t,this.resolveBuffer,0),i.copyBufferToBuffer(this.resolveBuffer,0,this.resultBuffer,0,n);const s=i.finish();if(this.device.queue.submit([s]),this.resultBuffer.mapState!=="unmapped")return this.lastValue;if(await this.resultBuffer.mapAsync(GPUMapMode.READ,0,n),this.isDisposed)return this.resultBuffer.mapState==="mapped"&&this.resultBuffer.unmap(),this.lastValue;const o=new BigUint64Array(this.resultBuffer.getMappedRange(0,n));let u=0;for(const[,h]of e){const d=o[h],m=o[h+1],y=Number(m-d)/1e6;u+=y}return this.resultBuffer.unmap(),this.lastValue=u,u}catch(e){return console.error("Error resolving queries:",e),this.resultBuffer.mapState==="mapped"&&this.resultBuffer.unmap(),this.lastValue}}async dispose(){if(!this.isDisposed){if(this.isDisposed=!0,this.pendingResolve)try{await this.pendingResolve}catch(e){console.error("Error waiting for pending resolve:",e)}if(this.resultBuffer&&this.resultBuffer.mapState==="mapped")try{this.resultBuffer.unmap()}catch(e){console.error("Error unmapping buffer:",e)}this.querySet&&(this.querySet.destroy(),this.querySet=null),this.resolveBuffer&&(this.resolveBuffer.destroy(),this.resolveBuffer=null),this.resultBuffer&&(this.resultBuffer.destroy(),this.resultBuffer=null),this.queryOffsets.clear(),this.pendingResolve=null}}}class kV extends W_{constructor(e={}){super(e),this.isWebGPUBackend=!0,this.parameters.alpha=e.alpha===void 0?!0:e.alpha,this.parameters.compatibilityMode=e.compatibilityMode===void 0?!1:e.compatibilityMode,this.parameters.requiredLimits=e.requiredLimits===void 0?{}:e.requiredLimits,this.compatibilityMode=this.parameters.compatibilityMode,this.device=null,this.context=null,this.colorBuffer=null,this.defaultRenderPassdescriptor=null,this.utils=new DV(this),this.attributeUtils=new IV(this),this.bindingUtils=new qV(this),this.pipelineUtils=new OV(this),this.textureUtils=new bV(this),this.occludedResolveCache=new Map}async init(e){await super.init(e);const t=this.parameters;let n;if(t.device===void 0){const u={powerPreference:t.powerPreference,featureLevel:t.compatibilityMode?"compatibility":void 0},h=typeof navigator<"u"?await navigator.gpu.requestAdapter(u):null;if(h===null)throw new Error("WebGPUBackend: Unable to create WebGPU adapter.");const d=Object.values(yd),m=[];for(const x of d)h.features.has(x)&&m.push(x);const y={requiredFeatures:m,requiredLimits:t.requiredLimits};n=await h.requestDevice(y)}else n=t.device;n.lost.then(u=>{const h={api:"WebGPU",message:u.message||"Unknown reason",reason:u.reason||null,originalEvent:u};e.onDeviceLost(h)});const i=t.context!==void 0?t.context:e.domElement.getContext("webgpu");this.device=n,this.context=i;const s=t.alpha?"premultiplied":"opaque",o=bn.getToneMappingMode(this.renderer.outputColorSpace);this.context.configure({device:this.device,format:this.utils.getPreferredCanvasFormat(),usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_SRC,alphaMode:s,toneMapping:{mode:o}}),this.trackTimestamp=this.trackTimestamp&&this.hasFeature(yd.TimestampQuery),this.updateSize()}get coordinateSystem(){return zA}async getArrayBufferAsync(e){return await this.attributeUtils.getArrayBufferAsync(e)}getContext(){return this.context}_getDefaultRenderPassDescriptor(){let e=this.defaultRenderPassdescriptor;if(e===null){const n=this.renderer;e={colorAttachments:[{view:null}]},(this.renderer.depth===!0||this.renderer.stencil===!0)&&(e.depthStencilAttachment={view:this.textureUtils.getDepthBuffer(n.depth,n.stencil).createView()});const i=e.colorAttachments[0];this.renderer.samples>0?i.view=this.colorBuffer.createView():i.resolveTarget=void 0,this.defaultRenderPassdescriptor=e}const t=e.colorAttachments[0];return this.renderer.samples>0?t.resolveTarget=this.context.getCurrentTexture().createView():t.view=this.context.getCurrentTexture().createView(),e}_isRenderCameraDepthArray(e){return e.depthTexture&&e.depthTexture.image.depth>1&&e.camera.isArrayCamera}_getRenderPassDescriptor(e,t={}){const n=e.renderTarget,i=this.get(n);let s=i.descriptors;(s===void 0||i.width!==n.width||i.height!==n.height||i.samples!==n.samples)&&(s={},i.descriptors=s);const o=e.getCacheKey();let u=s[o];if(u===void 0){const d=e.textures,m=[];let y;const x=this._isRenderCameraDepthArray(e);for(let b=0;b<d.length;b++){const T=this.get(d[b]),M={label:`colorAttachment_${b}`,baseMipLevel:e.activeMipmapLevel,mipLevelCount:1,baseArrayLayer:e.activeCubeFace,arrayLayerCount:1,dimension:Ln.TwoD};if(n.isRenderTarget3D)y=e.activeCubeFace,M.baseArrayLayer=0,M.dimension=Ln.ThreeD,M.depthOrArrayLayers=d[b].image.depth;else if(n.isRenderTarget&&d[b].image.depth>1)if(x===!0){const N=e.camera.cameras;for(let C=0;C<N.length;C++){const B={...M,baseArrayLayer:C,arrayLayerCount:1,dimension:Ln.TwoD},P=T.texture.createView(B);m.push({view:P,resolveTarget:void 0,depthSlice:void 0})}}else M.dimension=Ln.TwoDArray,M.depthOrArrayLayers=d[b].image.depth;if(x!==!0){const N=T.texture.createView(M);let C,B;T.msaaTexture!==void 0?(C=T.msaaTexture.createView(),B=N):(C=N,B=void 0),m.push({view:C,resolveTarget:B,depthSlice:y})}}if(u={textureViews:m},e.depth){const b=this.get(e.depthTexture),T={};e.depthTexture.isArrayTexture&&(T.dimension=Ln.TwoD,T.arrayLayerCount=1,T.baseArrayLayer=e.activeCubeFace),u.depthStencilView=b.texture.createView(T)}s[o]=u,i.width=n.width,i.height=n.height,i.samples=n.samples,i.activeMipmapLevel=e.activeMipmapLevel,i.activeCubeFace=e.activeCubeFace}const h={colorAttachments:[]};for(let d=0;d<u.textureViews.length;d++){const m=u.textureViews[d];let y={r:0,g:0,b:0,a:1};d===0&&t.clearValue&&(y=t.clearValue),h.colorAttachments.push({view:m.view,depthSlice:m.depthSlice,resolveTarget:m.resolveTarget,loadOp:t.loadOp||qt.Load,storeOp:t.storeOp||yr.Store,clearValue:y})}return u.depthStencilView&&(h.depthStencilAttachment={view:u.depthStencilView}),h}beginRender(e){const t=this.get(e);t.frameCalls=this.renderer.info.render.frameCalls;const n=this.device,i=e.occlusionQueryCount;let s;i>0&&(t.currentOcclusionQuerySet&&t.currentOcclusionQuerySet.destroy(),t.currentOcclusionQueryBuffer&&t.currentOcclusionQueryBuffer.destroy(),t.currentOcclusionQuerySet=t.occlusionQuerySet,t.currentOcclusionQueryBuffer=t.occlusionQueryBuffer,t.currentOcclusionQueryObjects=t.occlusionQueryObjects,s=n.createQuerySet({type:"occlusion",count:i,label:`occlusionQuerySet_${e.id}`}),t.occlusionQuerySet=s,t.occlusionQueryIndex=0,t.occlusionQueryObjects=new Array(i),t.lastOcclusionObject=null);let o;e.textures===null?o=this._getDefaultRenderPassDescriptor():o=this._getRenderPassDescriptor(e,{loadOp:qt.Load}),this.initTimestampQuery(hA.RENDER,this.getTimestampUID(e),o),o.occlusionQuerySet=s;const u=o.depthStencilAttachment;if(e.textures!==null){const d=o.colorAttachments;for(let m=0;m<d.length;m++){const y=d[m];e.clearColor?(y.clearValue=m===0?e.clearColorValue:{r:0,g:0,b:0,a:1},y.loadOp=qt.Clear):y.loadOp=qt.Load,y.storeOp=yr.Store}}else{const d=o.colorAttachments[0];e.clearColor?(d.clearValue=e.clearColorValue,d.loadOp=qt.Clear):d.loadOp=qt.Load,d.storeOp=yr.Store}e.depth&&(e.clearDepth?(u.depthClearValue=e.clearDepthValue,u.depthLoadOp=qt.Clear):u.depthLoadOp=qt.Load,u.depthStoreOp=yr.Store),e.stencil&&(e.clearStencil?(u.stencilClearValue=e.clearStencilValue,u.stencilLoadOp=qt.Clear):u.stencilLoadOp=qt.Load,u.stencilStoreOp=yr.Store);const h=n.createCommandEncoder({label:"renderContext_"+e.id});if(this._isRenderCameraDepthArray(e)===!0){const d=e.camera.cameras;!t.layerDescriptors||t.layerDescriptors.length!==d.length?this._createDepthLayerDescriptors(e,t,o,d):this._updateDepthLayerDescriptors(e,t,d),t.bundleEncoders=[],t.bundleSets=[];for(let m=0;m<d.length;m++){const y=this.pipelineUtils.createBundleEncoder(e,"renderBundleArrayCamera_"+m),x={attributes:{},bindingGroups:[],pipeline:null,index:null};t.bundleEncoders.push(y),t.bundleSets.push(x)}t.currentPass=null}else{const d=h.beginRenderPass(o);if(t.currentPass=d,e.viewport&&this.updateViewport(e),e.scissor){const{x:m,y,width:x,height:b}=e.scissorValue;d.setScissorRect(m,y,x,b)}}t.descriptor=o,t.encoder=h,t.currentSets={attributes:{},bindingGroups:[],pipeline:null,index:null},t.renderBundles=[]}_createDepthLayerDescriptors(e,t,n,i){const s=n.depthStencilAttachment;t.layerDescriptors=[];const o=this.get(e.depthTexture);o.viewCache||(o.viewCache=[]);for(let u=0;u<i.length;u++){const h={...n,colorAttachments:[{...n.colorAttachments[0],view:n.colorAttachments[u].view}]};if(n.depthStencilAttachment){const d=u;o.viewCache[d]||(o.viewCache[d]=o.texture.createView({dimension:Ln.TwoD,baseArrayLayer:u,arrayLayerCount:1})),h.depthStencilAttachment={view:o.viewCache[d],depthLoadOp:s.depthLoadOp||qt.Clear,depthStoreOp:s.depthStoreOp||yr.Store,depthClearValue:s.depthClearValue||1},e.stencil&&(h.depthStencilAttachment.stencilLoadOp=s.stencilLoadOp,h.depthStencilAttachment.stencilStoreOp=s.stencilStoreOp,h.depthStencilAttachment.stencilClearValue=s.stencilClearValue)}else h.depthStencilAttachment={...s};t.layerDescriptors.push(h)}}_updateDepthLayerDescriptors(e,t,n){for(let i=0;i<n.length;i++){const s=t.layerDescriptors[i];if(s.depthStencilAttachment){const o=s.depthStencilAttachment;e.depth&&(e.clearDepth?(o.depthClearValue=e.clearDepthValue,o.depthLoadOp=qt.Clear):o.depthLoadOp=qt.Load),e.stencil&&(e.clearStencil?(o.stencilClearValue=e.clearStencilValue,o.stencilLoadOp=qt.Clear):o.stencilLoadOp=qt.Load)}}}finishRender(e){const t=this.get(e),n=e.occlusionQueryCount;t.renderBundles.length>0&&t.currentPass.executeBundles(t.renderBundles),n>t.occlusionQueryIndex&&t.currentPass.endOcclusionQuery();const i=t.encoder;if(this._isRenderCameraDepthArray(e)===!0){const s=[];for(let o=0;o<t.bundleEncoders.length;o++){const u=t.bundleEncoders[o];s.push(u.finish())}for(let o=0;o<t.layerDescriptors.length;o++)if(o<s.length){const u=t.layerDescriptors[o],h=i.beginRenderPass(u);if(e.viewport){const{x:d,y:m,width:y,height:x,minDepth:b,maxDepth:T}=e.viewportValue;h.setViewport(d,m,y,x,b,T)}if(e.scissor){const{x:d,y:m,width:y,height:x}=e.scissorValue;h.setScissorRect(d,m,y,x)}h.executeBundles([s[o]]),h.end()}}else t.currentPass&&t.currentPass.end();if(n>0){const s=n*8;let o=this.occludedResolveCache.get(s);o===void 0&&(o=this.device.createBuffer({size:s,usage:GPUBufferUsage.QUERY_RESOLVE|GPUBufferUsage.COPY_SRC}),this.occludedResolveCache.set(s,o));const u=this.device.createBuffer({size:s,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ});t.encoder.resolveQuerySet(t.occlusionQuerySet,0,n,o,0),t.encoder.copyBufferToBuffer(o,0,u,0,s),t.occlusionQueryBuffer=u,this.resolveOccludedAsync(e)}if(this.device.queue.submit([t.encoder.finish()]),e.textures!==null){const s=e.textures;for(let o=0;o<s.length;o++){const u=s[o];u.generateMipmaps===!0&&this.textureUtils.generateMipmaps(u)}}}isOccluded(e,t){const n=this.get(e);return n.occluded&&n.occluded.has(t)}async resolveOccludedAsync(e){const t=this.get(e),{currentOcclusionQueryBuffer:n,currentOcclusionQueryObjects:i}=t;if(n&&i){const s=new WeakSet;t.currentOcclusionQueryObjects=null,t.currentOcclusionQueryBuffer=null,await n.mapAsync(GPUMapMode.READ);const o=n.getMappedRange(),u=new BigUint64Array(o);for(let h=0;h<i.length;h++)u[h]===BigInt(0)&&s.add(i[h]);n.destroy(),t.occluded=s}}updateViewport(e){const{currentPass:t}=this.get(e),{x:n,y:i,width:s,height:o,minDepth:u,maxDepth:h}=e.viewportValue;t.setViewport(n,i,s,o,u,h)}getClearColor(){const e=super.getClearColor();return this.renderer.alpha===!0&&(e.r*=e.a,e.g*=e.a,e.b*=e.a),e}clear(e,t,n,i=null){const s=this.device,o=this.renderer;let u=[],h,d,m,y;if(e){const T=this.getClearColor();d={r:T.r,g:T.g,b:T.b,a:T.a}}if(i===null){m=o.depth,y=o.stencil;const T=this._getDefaultRenderPassDescriptor();if(e){u=T.colorAttachments;const M=u[0];M.clearValue=d,M.loadOp=qt.Clear,M.storeOp=yr.Store}(m||y)&&(h=T.depthStencilAttachment)}else{m=i.depth,y=i.stencil;const T={loadOp:e?qt.Clear:qt.Load,clearValue:e?d:void 0};m&&(T.depthLoadOp=t?qt.Clear:qt.Load,T.depthClearValue=t?o.getClearDepth():void 0,T.depthStoreOp=yr.Store),y&&(T.stencilLoadOp=n?qt.Clear:qt.Load,T.stencilClearValue=n?o.getClearStencil():void 0,T.stencilStoreOp=yr.Store);const M=this._getRenderPassDescriptor(i,T);u=M.colorAttachments,h=M.depthStencilAttachment}m&&h&&(t?(h.depthLoadOp=qt.Clear,h.depthClearValue=o.getClearDepth(),h.depthStoreOp=yr.Store):(h.depthLoadOp=qt.Load,h.depthStoreOp=yr.Store)),y&&h&&(n?(h.stencilLoadOp=qt.Clear,h.stencilClearValue=o.getClearStencil(),h.stencilStoreOp=yr.Store):(h.stencilLoadOp=qt.Load,h.stencilStoreOp=yr.Store));const x=s.createCommandEncoder({label:"clear"});x.beginRenderPass({colorAttachments:u,depthStencilAttachment:h}).end(),s.queue.submit([x.finish()])}beginCompute(e){const t=this.get(e);t.frameCalls=this.renderer.info.compute.frameCalls;const n={label:"computeGroup_"+e.id};this.initTimestampQuery(hA.COMPUTE,this.getTimestampUID(e),n),t.cmdEncoderGPU=this.device.createCommandEncoder({label:"computeGroup_"+e.id}),t.passEncoderGPU=t.cmdEncoderGPU.beginComputePass(n)}compute(e,t,n,i,s=null){const o=this.get(t),{passEncoderGPU:u}=this.get(e),h=this.get(i).pipeline;this.pipelineUtils.setPipeline(u,h);for(let m=0,y=n.length;m<y;m++){const x=n[m],b=this.get(x);u.setBindGroup(m,b.group)}let d;if(s===null&&(s=t.count),typeof s=="number"){const m=s;if(o.dispatchSize===void 0||o.count!==m){o.dispatchSize=[0,1,1],o.count=m;const y=t.workgroupSize;let x=y[0];for(let M=1;M<y.length;M++)x*=y[M];const b=Math.ceil(m/x),T=this.device.limits.maxComputeWorkgroupsPerDimension;d=[b,1,1],b>T&&(d[0]=Math.min(b,T),d[1]=Math.ceil(b/T)),o.dispatchSize=d}d=o.dispatchSize}else d=s;u.dispatchWorkgroups(d[0],d[1]||1,d[2]||1)}finishCompute(e){const t=this.get(e);t.passEncoderGPU.end(),this.device.queue.submit([t.cmdEncoderGPU.finish()])}async waitForGPU(){await this.device.queue.onSubmittedWorkDone()}draw(e,t){const{object:n,material:i,context:s,pipeline:o}=e,u=e.getBindings(),h=this.get(s),d=this.get(o).pipeline,m=e.getIndex(),y=m!==null,x=e.getDrawParameters();if(x===null)return;const b=(M,N)=>{this.pipelineUtils.setPipeline(M,d),N.pipeline=d;const C=N.bindingGroups;for(let P=0,I=u.length;P<I;P++){const D=u[P],q=this.get(D);C[D.index]!==D.id&&(M.setBindGroup(D.index,q.group),C[D.index]=D.id)}if(y===!0&&N.index!==m){const P=this.get(m).buffer,I=m.array instanceof Uint16Array?GA.Uint16:GA.Uint32;M.setIndexBuffer(P,I),N.index=m}const B=e.getVertexBuffers();for(let P=0,I=B.length;P<I;P++){const D=B[P];if(N.attributes[P]!==D){const q=this.get(D).buffer;M.setVertexBuffer(P,q),N.attributes[P]=D}}s.stencil===!0&&i.stencilWrite===!0&&h.currentStencilRef!==i.stencilRef&&(M.setStencilReference(i.stencilRef),h.currentStencilRef=i.stencilRef)},T=(M,N)=>{if(b(M,N),n.isBatchedMesh===!0){const C=n._multiDrawStarts,B=n._multiDrawCounts,P=n._multiDrawCount,I=n._multiDrawInstances;I!==null&&ki("THREE.WebGPUBackend: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection.");for(let D=0;D<P;D++){const q=I?I[D]:1,O=q>1?0:D;y===!0?M.drawIndexed(B[D],q,C[D]/m.array.BYTES_PER_ELEMENT,0,O):M.draw(B[D],q,C[D],O),t.update(n,B[D],q)}}else if(y===!0){const{vertexCount:C,instanceCount:B,firstVertex:P}=x,I=e.getIndirect();if(I!==null){const D=this.get(I).buffer;M.drawIndexedIndirect(D,0)}else M.drawIndexed(C,B,P,0,0);t.update(n,C,B)}else{const{vertexCount:C,instanceCount:B,firstVertex:P}=x,I=e.getIndirect();if(I!==null){const D=this.get(I).buffer;M.drawIndirect(D,0)}else M.draw(C,B,P,0);t.update(n,C,B)}};if(e.camera.isArrayCamera&&e.camera.cameras.length>0){const M=this.get(e.camera),N=e.camera.cameras,C=e.getBindingGroup("cameraIndex");if(M.indexesGPU===void 0||M.indexesGPU.length!==N.length){const P=this.get(C),I=[],D=new Uint32Array([0,0,0,0]);for(let q=0,O=N.length;q<O;q++){D[0]=q;const k=this.bindingUtils.createBindGroupIndex(D,P.layout);I.push(k)}M.indexesGPU=I}const B=this.renderer.getPixelRatio();for(let P=0,I=N.length;P<I;P++){const D=N[P];if(n.layers.test(D.layers)){const q=D.viewport;let O=h.currentPass,k=h.currentSets;if(h.bundleEncoders){const z=h.bundleEncoders[P],X=h.bundleSets[P];O=z,k=X}q&&O.setViewport(Math.floor(q.x*B),Math.floor(q.y*B),Math.floor(q.width*B),Math.floor(q.height*B),s.viewportValue.minDepth,s.viewportValue.maxDepth),C&&M.indexesGPU&&(O.setBindGroup(C.index,M.indexesGPU[P]),k.bindingGroups[C.index]=C.id),T(O,k)}}}else if(h.currentPass){if(h.occlusionQuerySet!==void 0){const M=h.lastOcclusionObject;M!==n&&(M!==null&&M.occlusionTest===!0&&(h.currentPass.endOcclusionQuery(),h.occlusionQueryIndex++),n.occlusionTest===!0&&(h.currentPass.beginOcclusionQuery(h.occlusionQueryIndex),h.occlusionQueryObjects[h.occlusionQueryIndex]=n),h.lastOcclusionObject=n)}T(h.currentPass,h.currentSets)}}needsRenderUpdate(e){const t=this.get(e),{object:n,material:i}=e,s=this.utils,o=s.getSampleCountRenderContext(e.context),u=s.getCurrentColorSpace(e.context),h=s.getCurrentColorFormat(e.context),d=s.getCurrentDepthStencilFormat(e.context),m=s.getPrimitiveTopology(n,i);let y=!1;return(t.material!==i||t.materialVersion!==i.version||t.transparent!==i.transparent||t.blending!==i.blending||t.premultipliedAlpha!==i.premultipliedAlpha||t.blendSrc!==i.blendSrc||t.blendDst!==i.blendDst||t.blendEquation!==i.blendEquation||t.blendSrcAlpha!==i.blendSrcAlpha||t.blendDstAlpha!==i.blendDstAlpha||t.blendEquationAlpha!==i.blendEquationAlpha||t.colorWrite!==i.colorWrite||t.depthWrite!==i.depthWrite||t.depthTest!==i.depthTest||t.depthFunc!==i.depthFunc||t.stencilWrite!==i.stencilWrite||t.stencilFunc!==i.stencilFunc||t.stencilFail!==i.stencilFail||t.stencilZFail!==i.stencilZFail||t.stencilZPass!==i.stencilZPass||t.stencilFuncMask!==i.stencilFuncMask||t.stencilWriteMask!==i.stencilWriteMask||t.side!==i.side||t.alphaToCoverage!==i.alphaToCoverage||t.sampleCount!==o||t.colorSpace!==u||t.colorFormat!==h||t.depthStencilFormat!==d||t.primitiveTopology!==m||t.clippingContextCacheKey!==e.clippingContextCacheKey)&&(t.material=i,t.materialVersion=i.version,t.transparent=i.transparent,t.blending=i.blending,t.premultipliedAlpha=i.premultipliedAlpha,t.blendSrc=i.blendSrc,t.blendDst=i.blendDst,t.blendEquation=i.blendEquation,t.blendSrcAlpha=i.blendSrcAlpha,t.blendDstAlpha=i.blendDstAlpha,t.blendEquationAlpha=i.blendEquationAlpha,t.colorWrite=i.colorWrite,t.depthWrite=i.depthWrite,t.depthTest=i.depthTest,t.depthFunc=i.depthFunc,t.stencilWrite=i.stencilWrite,t.stencilFunc=i.stencilFunc,t.stencilFail=i.stencilFail,t.stencilZFail=i.stencilZFail,t.stencilZPass=i.stencilZPass,t.stencilFuncMask=i.stencilFuncMask,t.stencilWriteMask=i.stencilWriteMask,t.side=i.side,t.alphaToCoverage=i.alphaToCoverage,t.sampleCount=o,t.colorSpace=u,t.colorFormat=h,t.depthStencilFormat=d,t.primitiveTopology=m,t.clippingContextCacheKey=e.clippingContextCacheKey,y=!0),y}getRenderCacheKey(e){const{object:t,material:n}=e,i=this.utils,s=e.context,o=t.isMesh&&t.matrixWorld.determinant()<0;return[n.transparent,n.blending,n.premultipliedAlpha,n.blendSrc,n.blendDst,n.blendEquation,n.blendSrcAlpha,n.blendDstAlpha,n.blendEquationAlpha,n.colorWrite,n.depthWrite,n.depthTest,n.depthFunc,n.stencilWrite,n.stencilFunc,n.stencilFail,n.stencilZFail,n.stencilZPass,n.stencilFuncMask,n.stencilWriteMask,n.side,o,i.getSampleCountRenderContext(s),i.getCurrentColorSpace(s),i.getCurrentColorFormat(s),i.getCurrentDepthStencilFormat(s),i.getPrimitiveTopology(t,n),e.getGeometryCacheKey(),e.clippingContextCacheKey].join()}createSampler(e){this.textureUtils.createSampler(e)}destroySampler(e){this.textureUtils.destroySampler(e)}createDefaultTexture(e){this.textureUtils.createDefaultTexture(e)}createTexture(e,t){this.textureUtils.createTexture(e,t)}updateTexture(e,t){this.textureUtils.updateTexture(e,t)}generateMipmaps(e){this.textureUtils.generateMipmaps(e)}destroyTexture(e){this.textureUtils.destroyTexture(e)}async copyTextureToBuffer(e,t,n,i,s,o){return this.textureUtils.copyTextureToBuffer(e,t,n,i,s,o)}initTimestampQuery(e,t,n){if(!this.trackTimestamp)return;this.timestampQueryPool[e]||(this.timestampQueryPool[e]=new UV(this.device,e,2048));const i=this.timestampQueryPool[e],s=i.allocateQueriesForContext(t);n.timestampWrites={querySet:i.querySet,beginningOfPassWriteIndex:s,endOfPassWriteIndex:s+1}}createNodeBuilder(e,t){return new BV(e,t)}createProgram(e){const t=this.get(e);t.module={module:this.device.createShaderModule({code:e.code,label:e.stage+(e.name!==""?`_${e.name}`:"")}),entryPoint:"main"}}destroyProgram(e){this.delete(e)}createRenderPipeline(e,t){this.pipelineUtils.createRenderPipeline(e,t)}createComputePipeline(e,t){this.pipelineUtils.createComputePipeline(e,t)}beginBundle(e){const t=this.get(e);t._currentPass=t.currentPass,t._currentSets=t.currentSets,t.currentSets={attributes:{},bindingGroups:[],pipeline:null,index:null},t.currentPass=this.pipelineUtils.createBundleEncoder(e)}finishBundle(e,t){const n=this.get(e),s=n.currentPass.finish();this.get(t).bundleGPU=s,n.currentSets=n._currentSets,n.currentPass=n._currentPass}addBundle(e,t){this.get(e).renderBundles.push(this.get(t).bundleGPU)}createBindings(e,t,n,i){this.bindingUtils.createBindings(e,t,n,i)}updateBindings(e,t,n,i){this.bindingUtils.createBindings(e,t,n,i)}updateBinding(e){this.bindingUtils.updateBinding(e)}createIndexAttribute(e){let t=GPUBufferUsage.INDEX|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST;(e.isStorageBufferAttribute||e.isStorageInstancedBufferAttribute)&&(t|=GPUBufferUsage.STORAGE),this.attributeUtils.createAttribute(e,t)}createAttribute(e){this.attributeUtils.createAttribute(e,GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST)}createStorageAttribute(e){this.attributeUtils.createAttribute(e,GPUBufferUsage.STORAGE|GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST)}createIndirectStorageAttribute(e){this.attributeUtils.createAttribute(e,GPUBufferUsage.STORAGE|GPUBufferUsage.INDIRECT|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST)}updateAttribute(e){this.attributeUtils.updateAttribute(e)}destroyAttribute(e){this.attributeUtils.destroyAttribute(e)}updateSize(){this.colorBuffer=this.textureUtils.getColorBuffer(),this.defaultRenderPassdescriptor=null}getMaxAnisotropy(){return 16}hasFeature(e){return this.device.features.has(e)}copyTextureToTexture(e,t,n=null,i=null,s=0,o=0){let u=0,h=0,d=0,m=0,y=0,x=0,b=e.image.width,T=e.image.height,M=1;n!==null&&(n.isBox3===!0?(m=n.min.x,y=n.min.y,x=n.min.z,b=n.max.x-n.min.x,T=n.max.y-n.min.y,M=n.max.z-n.min.z):(m=n.min.x,y=n.min.y,b=n.max.x-n.min.x,T=n.max.y-n.min.y,M=1)),i!==null&&(u=i.x,h=i.y,d=i.z||0);const N=this.device.createCommandEncoder({label:"copyTextureToTexture_"+e.id+"_"+t.id}),C=this.get(e).texture,B=this.get(t).texture;N.copyTextureToTexture({texture:C,mipLevel:s,origin:{x:m,y,z:x}},{texture:B,mipLevel:o,origin:{x:u,y:h,z:d}},[b,T,M]),this.device.queue.submit([N.finish()]),o===0&&t.generateMipmaps&&this.textureUtils.generateMipmaps(t)}copyFramebufferToTexture(e,t,n){const i=this.get(t);let s=null;t.renderTarget?e.isDepthTexture?s=this.get(t.depthTexture).texture:s=this.get(t.textures[0]).texture:e.isDepthTexture?s=this.textureUtils.getDepthBuffer(t.depth,t.stencil):s=this.context.getCurrentTexture();const o=this.get(e).texture;if(s.format!==o.format){console.error("WebGPUBackend: copyFramebufferToTexture: Source and destination formats do not match.",s.format,o.format);return}let u;if(i.currentPass?(i.currentPass.end(),u=i.encoder):u=this.device.createCommandEncoder({label:"copyFramebufferToTexture_"+e.id}),u.copyTextureToTexture({texture:s,origin:[n.x,n.y,0]},{texture:o},[n.z,n.w]),i.currentPass){const{descriptor:h}=i;for(let d=0;d<h.colorAttachments.length;d++)h.colorAttachments[d].loadOp=qt.Load;if(t.depth&&(h.depthStencilAttachment.depthLoadOp=qt.Load),t.stencil&&(h.depthStencilAttachment.stencilLoadOp=qt.Load),i.currentPass=u.beginRenderPass(h),i.currentSets={attributes:{},bindingGroups:[],pipeline:null,index:null},t.viewport&&this.updateViewport(t),t.scissor){const{x:d,y:m,width:y,height:x}=t.scissorValue;i.currentPass.setScissorRect(d,m,y,x)}}else this.device.queue.submit([u.finish()]);e.generateMipmaps&&this.textureUtils.generateMipmaps(e)}}class GV extends Nd{constructor(e,t,n,i,s,o){super(e,t,n,i,s,o),this.iesMap=null}copy(e,t){return super.copy(e,t),this.iesMap=e.iesMap,this}}class VV extends Nd{constructor(e,t,n,i,s,o){super(e,t,n,i,s,o),this.aspect=null}copy(e,t){return super.copy(e,t),this.aspect=e.aspect,this}}class zV extends U_{constructor(){super(),this.addMaterial($F,"MeshPhongMaterial"),this.addMaterial(qv,"MeshStandardMaterial"),this.addMaterial(CL,"MeshPhysicalMaterial"),this.addMaterial(FL,"MeshToonMaterial"),this.addMaterial(qF,"MeshBasicMaterial"),this.addMaterial(VF,"MeshLambertMaterial"),this.addMaterial(BF,"MeshNormalMaterial"),this.addMaterial(IL,"MeshMatcapMaterial"),this.addMaterial(SF,"LineBasicMaterial"),this.addMaterial(EF,"LineDashedMaterial"),this.addMaterial(GL,"PointsMaterial"),this.addMaterial(Uv,"SpriteMaterial"),this.addMaterial(HL,"ShadowMaterial"),this.addLight(hU,xT),this.addLight(xG,bT),this.addLight(bG,TT),this.addLight(R3,Nd),this.addLight(MG,wT),this.addLight(EG,ST),this.addLight(NG,MT),this.addLight(TG,GV),this.addLight(SG,VV),this.addToneMapping(r_,ET),this.addToneMapping(i_,NT),this.addToneMapping(s_,RT),this.addToneMapping(o_,CT),this.addToneMapping(a_,PT),this.addToneMapping(A_,BT)}}class $V extends WG{constructor(e={}){let t;e.forceWebGL?t=yg:(t=kV,e.getFallback=()=>(console.warn("THREE.WebGPURenderer: WebGPU is not available, running under WebGL2 backend."),new yg(e)));const n=new t(e);super(n,e),this.library=new zV,this.isWebGPURenderer=!0,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}}/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */E.BRDF_GGX;E.BRDF_Lambert;E.BasicPointShadowFilter;E.BasicShadowFilter;E.Break;E.Const;E.Continue;E.DFGApprox;E.D_GGX;E.Discard;E.EPSILON;E.F_Schlick;const HV=E.Fn;E.INFINITY;const jV=E.If,WV=E.Loop;E.NodeAccess;E.NodeShaderStage;E.NodeType;E.NodeUpdateType;E.PCFShadowFilter;E.PCFSoftShadowFilter;E.PI;E.PI2;E.PointShadowFilter;E.Return;E.Schlick_to_F0;E.ScriptableNodeResources;E.ShaderNode;E.Stack;E.Switch;E.TBNViewMatrix;E.VSMShadowFilter;E.V_GGX_SmithCorrelated;E.Var;E.VarIntent;E.abs;E.acesFilmicToneMapping;E.acos;E.add;E.addMethodChaining;E.addNodeElement;E.agxToneMapping;E.all;E.alphaT;E.and;E.anisotropy;E.anisotropyB;E.anisotropyT;E.any;E.append;E.array;E.arrayBuffer;const QV=E.asin;E.assign;E.atan;E.atan2;E.atomicAdd;E.atomicAnd;E.atomicFunc;E.atomicLoad;E.atomicMax;E.atomicMin;E.atomicOr;E.atomicStore;E.atomicSub;E.atomicXor;E.attenuationColor;E.attenuationDistance;E.attribute;E.attributeArray;E.backgroundBlurriness;E.backgroundIntensity;E.backgroundRotation;E.batch;E.bentNormalView;E.billboarding;E.bitAnd;E.bitNot;E.bitOr;E.bitXor;E.bitangentGeometry;E.bitangentLocal;E.bitangentView;E.bitangentWorld;E.bitcast;E.blendBurn;E.blendColor;E.blendDodge;E.blendOverlay;E.blendScreen;E.blur;E.bool;E.buffer;E.bufferAttribute;E.bumpMap;E.burn;E.builtin;E.bvec2;E.bvec3;E.bvec4;E.bypass;E.cache;E.call;E.cameraFar;E.cameraIndex;E.cameraNear;E.cameraNormalMatrix;E.cameraPosition;E.cameraProjectionMatrix;E.cameraProjectionMatrixInverse;E.cameraViewMatrix;E.cameraViewport;E.cameraWorldMatrix;E.cbrt;E.cdl;E.ceil;E.checker;E.cineonToneMapping;E.clamp;E.clearcoat;E.clearcoatNormalView;E.clearcoatRoughness;E.code;E.color;E.colorSpaceToWorking;E.colorToDirection;E.compute;E.computeKernel;E.computeSkinning;E.context;E.convert;E.convertColorSpace;E.convertToTexture;const XV=E.cos;E.cross;E.cubeTexture;E.cubeTextureBase;E.cubeToUV;E.dFdx;E.dFdy;E.dashSize;E.debug;E.decrement;E.decrementBefore;E.defaultBuildStages;E.defaultShaderStages;E.defined;E.degrees;E.deltaTime;E.densityFog;E.densityFogFactor;E.depth;E.depthPass;E.determinant;E.difference;E.diffuseColor;E.directPointLight;E.directionToColor;E.directionToFaceDirection;E.dispersion;E.distance;E.div;E.dodge;E.dot;E.drawIndex;E.dynamicBufferAttribute;E.element;E.emissive;E.equal;E.equals;E.equirectUV;const YV=E.exp;E.exp2;E.expression;E.faceDirection;E.faceForward;E.faceforward;const KV=E.float;E.floatBitsToInt;E.floatBitsToUint;E.floor;E.fog;E.fract;E.frameGroup;E.frameId;E.frontFacing;E.fwidth;E.gain;E.gapSize;E.getConstNodeType;E.getCurrentStack;E.getDirection;E.getDistanceAttenuation;E.getGeometryRoughness;E.getNormalFromDepth;E.getParallaxCorrectNormal;E.getRoughness;E.getScreenPosition;E.getShIrradianceAt;E.getShadowMaterial;E.getShadowRenderObjectFunction;E.getTextureIndex;E.getViewPosition;E.globalId;E.glsl;E.glslFn;E.grayscale;E.greaterThan;E.greaterThanEqual;E.hash;E.highpModelNormalViewMatrix;E.highpModelViewMatrix;E.hue;E.increment;E.incrementBefore;E.instance;const ZV=E.instanceIndex;E.instancedArray;E.instancedBufferAttribute;E.instancedDynamicBufferAttribute;E.instancedMesh;E.int;E.intBitsToFloat;E.inverse;E.inverseSqrt;E.inversesqrt;E.invocationLocalIndex;E.invocationSubgroupIndex;E.ior;E.iridescence;E.iridescenceIOR;E.iridescenceThickness;E.ivec2;E.ivec3;E.ivec4;E.js;E.label;E.length;E.lengthSq;E.lessThan;E.lessThanEqual;E.lightPosition;E.lightProjectionUV;E.lightShadowMatrix;E.lightTargetDirection;E.lightTargetPosition;E.lightViewPosition;E.lightingContext;E.lights;E.linearDepth;E.linearToneMapping;E.localId;E.log;E.log2;E.logarithmicDepthToViewZ;E.luminance;E.mat2;E.mat3;E.mat4;E.matcapUV;E.materialAO;E.materialAlphaTest;E.materialAnisotropy;E.materialAnisotropyVector;E.materialAttenuationColor;E.materialAttenuationDistance;E.materialClearcoat;E.materialClearcoatNormal;E.materialClearcoatRoughness;E.materialColor;E.materialDispersion;E.materialEmissive;E.materialEnvIntensity;E.materialEnvRotation;E.materialIOR;E.materialIridescence;E.materialIridescenceIOR;E.materialIridescenceThickness;E.materialLightMap;E.materialLineDashOffset;E.materialLineDashSize;E.materialLineGapSize;E.materialLineScale;E.materialLineWidth;E.materialMetalness;E.materialNormal;E.materialOpacity;E.materialPointSize;E.materialReference;E.materialReflectivity;E.materialRefractionRatio;E.materialRotation;E.materialRoughness;E.materialSheen;E.materialSheenRoughness;E.materialShininess;E.materialSpecular;E.materialSpecularColor;E.materialSpecularIntensity;E.materialSpecularStrength;E.materialThickness;E.materialTransmission;E.max;E.maxMipLevel;E.mediumpModelViewMatrix;E.metalness;E.min;E.mix;E.mixElement;E.mod;E.modInt;E.modelDirection;E.modelNormalMatrix;E.modelPosition;E.modelRadius;E.modelScale;E.modelViewMatrix;E.modelViewPosition;E.modelViewProjection;E.modelWorldMatrix;E.modelWorldMatrixInverse;E.morphReference;E.mrt;E.mul;E.mx_aastep;E.mx_add;E.mx_atan2;E.mx_cell_noise_float;E.mx_contrast;E.mx_divide;E.mx_fractal_noise_float;E.mx_fractal_noise_vec2;E.mx_fractal_noise_vec3;E.mx_fractal_noise_vec4;E.mx_frame;E.mx_heighttonormal;E.mx_hsvtorgb;E.mx_ifequal;E.mx_ifgreater;E.mx_ifgreatereq;E.mx_invert;E.mx_modulo;E.mx_multiply;E.mx_noise_float;E.mx_noise_vec3;E.mx_noise_vec4;E.mx_place2d;E.mx_power;E.mx_ramp4;E.mx_ramplr;E.mx_ramptb;E.mx_rgbtohsv;E.mx_rotate2d;E.mx_rotate3d;E.mx_safepower;E.mx_separate;E.mx_splitlr;E.mx_splittb;E.mx_srgb_texture_to_lin_rec709;E.mx_subtract;E.mx_timer;E.mx_transform_uv;E.mx_unifiednoise2d;E.mx_unifiednoise3d;E.mx_worley_noise_float;E.mx_worley_noise_vec2;E.mx_worley_noise_vec3;const JV=E.negate;E.neutralToneMapping;E.nodeArray;E.nodeImmutable;E.nodeObject;E.nodeObjectIntent;E.nodeObjects;E.nodeProxy;E.nodeProxyIntent;E.normalFlat;E.normalGeometry;E.normalLocal;E.normalMap;E.normalView;E.normalViewGeometry;E.normalWorld;E.normalWorldGeometry;E.normalize;E.not;E.notEqual;E.numWorkgroups;E.objectDirection;E.objectGroup;E.objectPosition;E.objectRadius;E.objectScale;E.objectViewPosition;E.objectWorldMatrix;E.OnObjectUpdate;E.OnMaterialUpdate;E.oneMinus;E.or;E.orthographicDepthToViewZ;E.oscSawtooth;E.oscSine;E.oscSquare;E.oscTriangle;E.output;E.outputStruct;E.overlay;E.overloadingFn;E.parabola;E.parallaxDirection;E.parallaxUV;E.parameter;E.pass;E.passTexture;E.pcurve;E.perspectiveDepthToViewZ;E.pmremTexture;E.pointShadow;E.pointUV;E.pointWidth;E.positionGeometry;E.positionLocal;E.positionPrevious;E.positionView;E.positionViewDirection;E.positionWorld;E.positionWorldDirection;E.posterize;E.pow;E.pow2;E.pow3;E.pow4;E.premultiplyAlpha;E.property;E.radians;E.rand;E.range;E.rangeFog;E.rangeFogFactor;E.reciprocal;E.reference;E.referenceBuffer;E.reflect;E.reflectVector;E.reflectView;E.reflector;E.refract;E.refractVector;E.refractView;E.reinhardToneMapping;E.remap;E.remapClamp;E.renderGroup;E.renderOutput;E.rendererReference;E.rotate;E.rotateUV;E.roughness;E.round;E.rtt;E.sRGBTransferEOTF;E.sRGBTransferOETF;E.sample;E.sampler;E.samplerComparison;E.saturate;E.saturation;E.screen;E.screenCoordinate;E.screenDPR;E.screenSize;E.screenUV;E.scriptable;E.scriptableValue;E.select;E.setCurrentStack;E.setName;E.shaderStages;E.shadow;E.shadowPositionWorld;E.shapeCircle;E.sharedUniformGroup;E.sheen;E.sheenRoughness;E.shiftLeft;E.shiftRight;E.shininess;E.sign;const ez=E.sin;E.sinc;E.skinning;E.smoothstep;E.smoothstepElement;E.specularColor;E.specularF90;E.spherizeUV;E.split;E.spritesheetUV;const tz=E.sqrt;E.stack;E.step;E.stepElement;const nz=E.storage;E.storageBarrier;E.storageObject;E.storageTexture;E.string;E.struct;E.sub;E.subgroupAdd;E.subgroupAll;E.subgroupAnd;E.subgroupAny;E.subgroupBallot;E.subgroupBroadcast;E.subgroupBroadcastFirst;E.subBuild;E.subgroupElect;E.subgroupExclusiveAdd;E.subgroupExclusiveMul;E.subgroupInclusiveAdd;E.subgroupInclusiveMul;E.subgroupIndex;E.subgroupMax;E.subgroupMin;E.subgroupMul;E.subgroupOr;E.subgroupShuffle;E.subgroupShuffleDown;E.subgroupShuffleUp;E.subgroupShuffleXor;E.subgroupSize;E.subgroupXor;E.tan;E.tangentGeometry;E.tangentLocal;E.tangentView;E.tangentWorld;E.texture;E.texture3D;E.textureBarrier;E.textureBicubic;E.textureBicubicLevel;E.textureCubeUV;E.textureLoad;E.textureSize;E.textureStore;E.thickness;E.time;E.toneMapping;E.toneMappingExposure;E.toonOutlinePass;E.transformDirection;E.transformNormal;E.transformNormalToView;E.transformedClearcoatNormalView;E.transformedNormalView;E.transformedNormalWorld;E.transmission;E.transpose;E.triNoise3D;E.triplanarTexture;E.triplanarTextures;E.trunc;E.uint;E.uintBitsToFloat;const rz=E.uniform;E.uniformArray;E.uniformCubeTexture;E.uniformGroup;E.uniformFlow;E.uniformTexture;E.unpremultiplyAlpha;E.userData;E.uv;E.uvec2;E.uvec3;E.uvec4;E.varying;E.varyingProperty;E.vec2;E.vec3;E.vec4;E.vectorComponents;E.velocity;E.vertexColor;E.vertexIndex;E.vertexStage;E.vibrance;E.viewZToLogarithmicDepth;E.viewZToOrthographicDepth;E.viewZToPerspectiveDepth;E.viewport;E.viewportCoordinate;E.viewportDepthTexture;E.viewportLinearDepth;E.viewportMipTexture;E.viewportResolution;E.viewportSafeUV;E.viewportSharedTexture;E.viewportSize;E.viewportTexture;E.viewportUV;E.wgsl;E.wgslFn;E.workgroupArray;E.workgroupBarrier;E.workgroupId;E.workingToColorSpace;E.xor;const Ng=new zd,L0=new Re;class K_ extends Dw{constructor(){super(),this.isLineSegmentsGeometry=!0,this.type="LineSegmentsGeometry";const e=[-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],t=[-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],n=[0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5];this.setIndex(n),this.setAttribute("position",new Bo(e,3)),this.setAttribute("uv",new Bo(t,2))}applyMatrix4(e){const t=this.attributes.instanceStart,n=this.attributes.instanceEnd;return t!==void 0&&(t.applyMatrix4(e),n.applyMatrix4(e),t.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}setPositions(e){let t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));const n=new _c(t,6,1);return this.setAttribute("instanceStart",new To(n,3,0)),this.setAttribute("instanceEnd",new To(n,3,3)),this.instanceCount=this.attributes.instanceStart.count,this.computeBoundingBox(),this.computeBoundingSphere(),this}setColors(e){let t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));const n=new _c(t,6,1);return this.setAttribute("instanceColorStart",new To(n,3,0)),this.setAttribute("instanceColorEnd",new To(n,3,3)),this}fromWireframeGeometry(e){return this.setPositions(e.attributes.position.array),this}fromEdgesGeometry(e){return this.setPositions(e.attributes.position.array),this}fromMesh(e){return this.fromWireframeGeometry(new Fw(e.geometry)),this}fromLineSegments(e){const t=e.geometry;return this.setPositions(t.attributes.position.array),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new zd);const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;e!==void 0&&t!==void 0&&(this.boundingBox.setFromBufferAttribute(e),Ng.setFromBufferAttribute(t),this.boundingBox.union(Ng))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Gd),this.boundingBox===null&&this.computeBoundingBox();const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;if(e!==void 0&&t!==void 0){const n=this.boundingSphere.center;this.boundingBox.getCenter(n);let i=0;for(let s=0,o=e.count;s<o;s++)L0.fromBufferAttribute(e,s),i=Math.max(i,n.distanceToSquared(L0)),L0.fromBufferAttribute(t,s),i=Math.max(i,n.distanceToSquared(L0));this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}}toJSON(){}}K0.line={worldUnits:{value:1},linewidth:{value:1},resolution:{value:new Ot(1,1)},dashOffset:{value:0},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}};Y0.line={uniforms:I6.merge([K0.common,K0.fog,K0.line]),vertexShader:`
		#include <common>
		#include <color_pars_vertex>
		#include <fog_pars_vertex>
		#include <logdepthbuf_pars_vertex>
		#include <clipping_planes_pars_vertex>

		uniform float linewidth;
		uniform vec2 resolution;

		attribute vec3 instanceStart;
		attribute vec3 instanceEnd;

		attribute vec3 instanceColorStart;
		attribute vec3 instanceColorEnd;

		#ifdef WORLD_UNITS

			varying vec4 worldPos;
			varying vec3 worldStart;
			varying vec3 worldEnd;

			#ifdef USE_DASH

				varying vec2 vUv;

			#endif

		#else

			varying vec2 vUv;

		#endif

		#ifdef USE_DASH

			uniform float dashScale;
			attribute float instanceDistanceStart;
			attribute float instanceDistanceEnd;
			varying float vLineDistance;

		#endif

		void trimSegment( const in vec4 start, inout vec4 end ) {

			// trim end segment so it terminates between the camera plane and the near plane

			// conservative estimate of the near plane
			float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
			float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
			float nearEstimate = - 0.5 * b / a;

			float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

			end.xyz = mix( start.xyz, end.xyz, alpha );

		}

		void main() {

			#ifdef USE_COLOR

				vColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

			#endif

			#ifdef USE_DASH

				vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;
				vUv = uv;

			#endif

			float aspect = resolution.x / resolution.y;

			// camera space
			vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
			vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

			#ifdef WORLD_UNITS

				worldStart = start.xyz;
				worldEnd = end.xyz;

			#else

				vUv = uv;

			#endif

			// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
			// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
			// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
			// perhaps there is a more elegant solution -- WestLangley

			bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

			if ( perspective ) {

				if ( start.z < 0.0 && end.z >= 0.0 ) {

					trimSegment( start, end );

				} else if ( end.z < 0.0 && start.z >= 0.0 ) {

					trimSegment( end, start );

				}

			}

			// clip space
			vec4 clipStart = projectionMatrix * start;
			vec4 clipEnd = projectionMatrix * end;

			// ndc space
			vec3 ndcStart = clipStart.xyz / clipStart.w;
			vec3 ndcEnd = clipEnd.xyz / clipEnd.w;

			// direction
			vec2 dir = ndcEnd.xy - ndcStart.xy;

			// account for clip-space aspect ratio
			dir.x *= aspect;
			dir = normalize( dir );

			#ifdef WORLD_UNITS

				vec3 worldDir = normalize( end.xyz - start.xyz );
				vec3 tmpFwd = normalize( mix( start.xyz, end.xyz, 0.5 ) );
				vec3 worldUp = normalize( cross( worldDir, tmpFwd ) );
				vec3 worldFwd = cross( worldDir, worldUp );
				worldPos = position.y < 0.5 ? start: end;

				// height offset
				float hw = linewidth * 0.5;
				worldPos.xyz += position.x < 0.0 ? hw * worldUp : - hw * worldUp;

				// don't extend the line if we're rendering dashes because we
				// won't be rendering the endcaps
				#ifndef USE_DASH

					// cap extension
					worldPos.xyz += position.y < 0.5 ? - hw * worldDir : hw * worldDir;

					// add width to the box
					worldPos.xyz += worldFwd * hw;

					// endcaps
					if ( position.y > 1.0 || position.y < 0.0 ) {

						worldPos.xyz -= worldFwd * 2.0 * hw;

					}

				#endif

				// project the worldpos
				vec4 clip = projectionMatrix * worldPos;

				// shift the depth of the projected points so the line
				// segments overlap neatly
				vec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;
				clip.z = clipPose.z * clip.w;

			#else

				vec2 offset = vec2( dir.y, - dir.x );
				// undo aspect ratio adjustment
				dir.x /= aspect;
				offset.x /= aspect;

				// sign flip
				if ( position.x < 0.0 ) offset *= - 1.0;

				// endcaps
				if ( position.y < 0.0 ) {

					offset += - dir;

				} else if ( position.y > 1.0 ) {

					offset += dir;

				}

				// adjust for linewidth
				offset *= linewidth;

				// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
				offset /= resolution.y;

				// select end
				vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

				// back to clip space
				offset *= clip.w;

				clip.xy += offset;

			#endif

			gl_Position = clip;

			vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

			#include <logdepthbuf_vertex>
			#include <clipping_planes_vertex>
			#include <fog_vertex>

		}
		`,fragmentShader:`
		uniform vec3 diffuse;
		uniform float opacity;
		uniform float linewidth;

		#ifdef USE_DASH

			uniform float dashOffset;
			uniform float dashSize;
			uniform float gapSize;

		#endif

		varying float vLineDistance;

		#ifdef WORLD_UNITS

			varying vec4 worldPos;
			varying vec3 worldStart;
			varying vec3 worldEnd;

			#ifdef USE_DASH

				varying vec2 vUv;

			#endif

		#else

			varying vec2 vUv;

		#endif

		#include <common>
		#include <color_pars_fragment>
		#include <fog_pars_fragment>
		#include <logdepthbuf_pars_fragment>
		#include <clipping_planes_pars_fragment>

		vec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {

			float mua;
			float mub;

			vec3 p13 = p1 - p3;
			vec3 p43 = p4 - p3;

			vec3 p21 = p2 - p1;

			float d1343 = dot( p13, p43 );
			float d4321 = dot( p43, p21 );
			float d1321 = dot( p13, p21 );
			float d4343 = dot( p43, p43 );
			float d2121 = dot( p21, p21 );

			float denom = d2121 * d4343 - d4321 * d4321;

			float numer = d1343 * d4321 - d1321 * d4343;

			mua = numer / denom;
			mua = clamp( mua, 0.0, 1.0 );
			mub = ( d1343 + d4321 * ( mua ) ) / d4343;
			mub = clamp( mub, 0.0, 1.0 );

			return vec2( mua, mub );

		}

		void main() {

			float alpha = opacity;
			vec4 diffuseColor = vec4( diffuse, alpha );

			#include <clipping_planes_fragment>

			#ifdef USE_DASH

				if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

				if ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX

			#endif

			#ifdef WORLD_UNITS

				// Find the closest points on the view ray and the line segment
				vec3 rayEnd = normalize( worldPos.xyz ) * 1e5;
				vec3 lineDir = worldEnd - worldStart;
				vec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );

				vec3 p1 = worldStart + lineDir * params.x;
				vec3 p2 = rayEnd * params.y;
				vec3 delta = p1 - p2;
				float len = length( delta );
				float norm = len / linewidth;

				#ifndef USE_DASH

					#ifdef USE_ALPHA_TO_COVERAGE

						float dnorm = fwidth( norm );
						alpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );

					#else

						if ( norm > 0.5 ) {

							discard;

						}

					#endif

				#endif

			#else

				#ifdef USE_ALPHA_TO_COVERAGE

					// artifacts appear on some hardware if a derivative is taken within a conditional
					float a = vUv.x;
					float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
					float len2 = a * a + b * b;
					float dlen = fwidth( len2 );

					if ( abs( vUv.y ) > 1.0 ) {

						alpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );

					}

				#else

					if ( abs( vUv.y ) > 1.0 ) {

						float a = vUv.x;
						float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
						float len2 = a * a + b * b;

						if ( len2 > 1.0 ) discard;

					}

				#endif

			#endif

			#include <logdepthbuf_fragment>
			#include <color_fragment>

			gl_FragColor = vec4( diffuseColor.rgb, alpha );

			#include <tonemapping_fragment>
			#include <colorspace_fragment>
			#include <fog_fragment>
			#include <premultiplied_alpha_fragment>

		}
		`};class P3 extends b1{constructor(e){super({type:"LineMaterial",uniforms:I6.clone(Y0.line.uniforms),vertexShader:Y0.line.vertexShader,fragmentShader:Y0.line.fragmentShader,clipping:!0}),this.isLineMaterial=!0,this.setValues(e)}get color(){return this.uniforms.diffuse.value}set color(e){this.uniforms.diffuse.value=e}get worldUnits(){return"WORLD_UNITS"in this.defines}set worldUnits(e){e===!0?this.defines.WORLD_UNITS="":delete this.defines.WORLD_UNITS}get linewidth(){return this.uniforms.linewidth.value}set linewidth(e){this.uniforms.linewidth&&(this.uniforms.linewidth.value=e)}get dashed(){return"USE_DASH"in this.defines}set dashed(e){e===!0!==this.dashed&&(this.needsUpdate=!0),e===!0?this.defines.USE_DASH="":delete this.defines.USE_DASH}get dashScale(){return this.uniforms.dashScale.value}set dashScale(e){this.uniforms.dashScale.value=e}get dashSize(){return this.uniforms.dashSize.value}set dashSize(e){this.uniforms.dashSize.value=e}get dashOffset(){return this.uniforms.dashOffset.value}set dashOffset(e){this.uniforms.dashOffset.value=e}get gapSize(){return this.uniforms.gapSize.value}set gapSize(e){this.uniforms.gapSize.value=e}get opacity(){return this.uniforms.opacity.value}set opacity(e){this.uniforms&&(this.uniforms.opacity.value=e)}get resolution(){return this.uniforms.resolution.value}set resolution(e){this.uniforms.resolution.value.copy(e)}get alphaToCoverage(){return"USE_ALPHA_TO_COVERAGE"in this.defines}set alphaToCoverage(e){this.defines&&(e===!0!==this.alphaToCoverage&&(this.needsUpdate=!0),e===!0?this.defines.USE_ALPHA_TO_COVERAGE="":delete this.defines.USE_ALPHA_TO_COVERAGE)}}const Bh=new Ut,Rg=new Re,Cg=new Re,Yn=new Ut,Kn=new Ut,ts=new Ut,Dh=new Re,Fh=new mn,Zn=new Lw,Pg=new Re,I0=new zd,q0=new Gd,ns=new Ut;let as,xa;function Bg(r,e,t){return ns.set(0,0,-e,1).applyMatrix4(r.projectionMatrix),ns.multiplyScalar(1/ns.w),ns.x=xa/t.width,ns.y=xa/t.height,ns.applyMatrix4(r.projectionMatrixInverse),ns.multiplyScalar(1/ns.w),Math.abs(Math.max(ns.x,ns.y))}function iz(r,e){const t=r.matrixWorld,n=r.geometry,i=n.attributes.instanceStart,s=n.attributes.instanceEnd,o=Math.min(n.instanceCount,i.count);for(let u=0,h=o;u<h;u++){Zn.start.fromBufferAttribute(i,u),Zn.end.fromBufferAttribute(s,u),Zn.applyMatrix4(t);const d=new Re,m=new Re;as.distanceSqToSegment(Zn.start,Zn.end,m,d),m.distanceTo(d)<xa*.5&&e.push({point:m,pointOnLine:d,distance:as.origin.distanceTo(m),object:r,face:null,faceIndex:u,uv:null,uv1:null})}}function sz(r,e,t){const n=e.projectionMatrix,s=r.material.resolution,o=r.matrixWorld,u=r.geometry,h=u.attributes.instanceStart,d=u.attributes.instanceEnd,m=Math.min(u.instanceCount,h.count),y=-e.near;as.at(1,ts),ts.w=1,ts.applyMatrix4(e.matrixWorldInverse),ts.applyMatrix4(n),ts.multiplyScalar(1/ts.w),ts.x*=s.x/2,ts.y*=s.y/2,ts.z=0,Dh.copy(ts),Fh.multiplyMatrices(e.matrixWorldInverse,o);for(let x=0,b=m;x<b;x++){if(Yn.fromBufferAttribute(h,x),Kn.fromBufferAttribute(d,x),Yn.w=1,Kn.w=1,Yn.applyMatrix4(Fh),Kn.applyMatrix4(Fh),Yn.z>y&&Kn.z>y)continue;if(Yn.z>y){const P=Yn.z-Kn.z,I=(Yn.z-y)/P;Yn.lerp(Kn,I)}else if(Kn.z>y){const P=Kn.z-Yn.z,I=(Kn.z-y)/P;Kn.lerp(Yn,I)}Yn.applyMatrix4(n),Kn.applyMatrix4(n),Yn.multiplyScalar(1/Yn.w),Kn.multiplyScalar(1/Kn.w),Yn.x*=s.x/2,Yn.y*=s.y/2,Kn.x*=s.x/2,Kn.y*=s.y/2,Zn.start.copy(Yn),Zn.start.z=0,Zn.end.copy(Kn),Zn.end.z=0;const M=Zn.closestPointToPointParameter(Dh,!0);Zn.at(M,Pg);const N=kd.lerp(Yn.z,Kn.z,M),C=N>=-1&&N<=1,B=Dh.distanceTo(Pg)<xa*.5;if(C&&B){Zn.start.fromBufferAttribute(h,x),Zn.end.fromBufferAttribute(d,x),Zn.start.applyMatrix4(o),Zn.end.applyMatrix4(o);const P=new Re,I=new Re;as.distanceSqToSegment(Zn.start,Zn.end,I,P),t.push({point:I,pointOnLine:P,distance:as.origin.distanceTo(I),object:r,face:null,faceIndex:x,uv:null,uv1:null})}}}class oz extends Sn{constructor(e=new K_,t=new P3({color:Math.random()*16777215})){super(e,t),this.isLineSegments2=!0,this.type="LineSegments2"}computeLineDistances(){const e=this.geometry,t=e.attributes.instanceStart,n=e.attributes.instanceEnd,i=new Float32Array(2*t.count);for(let o=0,u=0,h=t.count;o<h;o++,u+=2)Rg.fromBufferAttribute(t,o),Cg.fromBufferAttribute(n,o),i[u]=u===0?0:i[u-1],i[u+1]=i[u]+Rg.distanceTo(Cg);const s=new _c(i,2,1);return e.setAttribute("instanceDistanceStart",new To(s,1,0)),e.setAttribute("instanceDistanceEnd",new To(s,1,1)),this}raycast(e,t){const n=this.material.worldUnits,i=e.camera;i===null&&!n&&console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2 while worldUnits is set to false.');const s=e.params.Line2!==void 0&&e.params.Line2.threshold||0;as=e.ray;const o=this.matrixWorld,u=this.geometry,h=this.material;xa=h.linewidth+s,u.boundingSphere===null&&u.computeBoundingSphere(),q0.copy(u.boundingSphere).applyMatrix4(o);let d;if(n)d=xa*.5;else{const y=Math.max(i.near,q0.distanceToPoint(as.origin));d=Bg(i,y,h.resolution)}if(q0.radius+=d,as.intersectsSphere(q0)===!1)return;u.boundingBox===null&&u.computeBoundingBox(),I0.copy(u.boundingBox).applyMatrix4(o);let m;if(n)m=xa*.5;else{const y=Math.max(i.near,I0.distanceToPoint(as.origin));m=Bg(i,y,h.resolution)}I0.expandByScalar(m),as.intersectsBox(I0)!==!1&&(n?iz(this,t):sz(this,i,t))}onBeforeRender(e){const t=this.material.uniforms;t&&t.resolution&&(e.getViewport(Bh),this.material.uniforms.resolution.value.set(Bh.z,Bh.w))}}class Z_ extends K_{constructor(){super(),this.isLineGeometry=!0,this.type="LineGeometry"}setPositions(e){const t=e.length-3,n=new Float32Array(2*t);for(let i=0;i<t;i+=3)n[2*i]=e[i],n[2*i+1]=e[i+1],n[2*i+2]=e[i+2],n[2*i+3]=e[i+3],n[2*i+4]=e[i+4],n[2*i+5]=e[i+5];return super.setPositions(n),this}setColors(e){const t=e.length-3,n=new Float32Array(2*t);for(let i=0;i<t;i+=3)n[2*i]=e[i],n[2*i+1]=e[i+1],n[2*i+2]=e[i+2],n[2*i+3]=e[i+3],n[2*i+4]=e[i+4],n[2*i+5]=e[i+5];return super.setColors(n),this}setFromPoints(e){const t=e.length-1,n=new Float32Array(6*t);for(let i=0;i<t;i++)n[6*i]=e[i].x,n[6*i+1]=e[i].y,n[6*i+2]=e[i].z||0,n[6*i+3]=e[i+1].x,n[6*i+4]=e[i+1].y,n[6*i+5]=e[i+1].z||0;return super.setPositions(n),this}fromLine(e){const t=e.geometry;return this.setPositions(t.attributes.position.array),this}}class az extends oz{constructor(e=new Z_,t=new P3({color:Math.random()*16777215})){super(e,t),this.isLine2=!0,this.type="Line2"}}class Dg extends Iw{constructor(e,t={}){const n=t.font;if(n===void 0)super();else{const i=n.generateShapes(e,t.size);t.depth===void 0&&(t.depth=50),t.bevelThickness===void 0&&(t.bevelThickness=10),t.bevelSize===void 0&&(t.bevelSize=8),t.bevelEnabled===void 0&&(t.bevelEnabled=!1),super(i,t)}this.type="TextGeometry"}}class Az{constructor(e){this.isFont=!0,this.type="Font",this.data=e}generateShapes(e,t=100){const n=[],i=lz(e,t,this.data);for(let s=0,o=i.length;s<o;s++)n.push(...i[s].toShapes());return n}}function lz(r,e,t){const n=Array.from(r),i=e/t.resolution,s=(t.boundingBox.yMax-t.boundingBox.yMin+t.underlineThickness)*i,o=[];let u=0,h=0;for(let d=0;d<n.length;d++){const m=n[d];if(m===`
`)u=0,h-=s;else{const y=uz(m,i,u,h,t);u+=y.offsetX,o.push(y.path)}}return o}function uz(r,e,t,n,i){const s=i.glyphs[r]||i.glyphs["?"];if(!s){console.error('THREE.Font: character "'+r+'" does not exists in font family '+i.familyName+".");return}const o=new qw;let u,h,d,m,y,x,b,T;if(s.o){const M=s._cachedOutline||(s._cachedOutline=s.o.split(" "));for(let N=0,C=M.length;N<C;)switch(M[N++]){case"m":u=M[N++]*e+t,h=M[N++]*e+n,o.moveTo(u,h);break;case"l":u=M[N++]*e+t,h=M[N++]*e+n,o.lineTo(u,h);break;case"q":d=M[N++]*e+t,m=M[N++]*e+n,y=M[N++]*e+t,x=M[N++]*e+n,o.quadraticCurveTo(y,x,d,m);break;case"b":d=M[N++]*e+t,m=M[N++]*e+n,y=M[N++]*e+t,x=M[N++]*e+n,b=M[N++]*e+t,T=M[N++]*e+n,o.bezierCurveTo(y,x,b,T,d,m);break}}return{offsetX:s.ha*e,path:o}}class cz extends x1{constructor(e=document.createElement("div")){super(),this.isCSS2DObject=!0,this.element=e,this.element.style.position="absolute",this.element.style.userSelect="none",this.element.setAttribute("draggable",!1),this.center=new Ot(.5,.5),this.addEventListener("removed",function(){this.traverse(function(t){t.element instanceof t.element.ownerDocument.defaultView.Element&&t.element.parentNode!==null&&t.element.remove()})})}copy(e,t){return super.copy(e,t),this.element=e.element.cloneNode(!0),this.center=e.center,this}}new Re;new mn;new mn;new Re;new Re;function _d(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function hz(r){if(Array.isArray(r))return r}function fz(r){if(Array.isArray(r))return _d(r)}function J_(r,e,t){if(typeof r=="function"?r===e:r.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}function dz(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function Fg(r,e,t,n,i,s,o){try{var u=r[s](o),h=u.value}catch(d){return void t(d)}u.done?e(h):Promise.resolve(h).then(n,i)}function pz(r){return function(){var e=this,t=arguments;return new Promise(function(n,i){var s=r.apply(e,t);function o(h){Fg(s,n,i,o,u,"next",h)}function u(h){Fg(s,n,i,o,u,"throw",h)}o(void 0)})}}function r2(r,e,t){return e=VA(e),wz(r,D3()?Reflect.construct(e,t||[],VA(r).constructor):e.apply(r,t))}function mz(r,e){if(e.has(r))throw new TypeError("Cannot initialize the same private elements twice on an object")}function i2(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function El(r,e){return r.get(J_(r,e))}function Lh(r,e,t){mz(r,e),e.set(r,t)}function Ih(r,e,t){return r.set(J_(r,e),t),t}function B3(r,e,t){if(D3())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,e);var i=new(r.bind.apply(r,n));return i}function gz(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,ex(n.key),n)}}function s2(r,e,t){return e&&gz(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r}function Wn(r,e,t){return(e=ex(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function xd(){return xd=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(r,e,t){var n=Sz(r,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?r:t):i.value}},xd.apply(null,arguments)}function VA(r){return VA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},VA(r)}function o2(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&Td(r,e)}function D3(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(D3=function(){return!!r})()}function yz(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function vz(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n,i,s,o,u=[],h=!0,d=!1;try{if(s=(t=t.call(r)).next,e===0){if(Object(t)!==t)return;h=!1}else for(;!(h=(n=s.call(t)).done)&&(u.push(n.value),u.length!==e);h=!0);}catch(m){d=!0,i=m}finally{try{if(!h&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(d)throw i}}return u}}function _z(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xz(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lg(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Vt(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Lg(Object(t),!0).forEach(function(n){Wn(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Lg(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function bz(r,e){if(r==null)return{};var t,n,i=Tz(r,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(n=0;n<s.length;n++)t=s[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function Tz(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}function wz(r,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dz(r)}function bd(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var r,e,t=typeof Symbol=="function"?Symbol:{},n=t.iterator||"@@iterator",i=t.toStringTag||"@@toStringTag";function s(b,T,M,N){var C=T&&T.prototype instanceof u?T:u,B=Object.create(C.prototype);return zr(B,"_invoke",(function(P,I,D){var q,O,k,z=0,X=D||[],W=!1,K={p:0,n:0,v:r,a:Z,f:Z.bind(r,4),d:function(se,Y){return q=se,O=0,k=r,K.n=Y,o}};function Z(se,Y){for(O=se,k=Y,e=0;!W&&z&&!oe&&e<X.length;e++){var oe,he=X[e],_e=K.p,ye=he[2];se>3?(oe=ye===Y)&&(k=he[(O=he[4])?5:(O=3,3)],he[4]=he[5]=r):he[0]<=_e&&((oe=se<2&&_e<he[1])?(O=0,K.v=Y,K.n=he[1]):_e<ye&&(oe=se<3||he[0]>Y||Y>ye)&&(he[4]=se,he[5]=Y,K.n=ye,O=0))}if(oe||se>1)return o;throw W=!0,Y}return function(se,Y,oe){if(z>1)throw TypeError("Generator is already running");for(W&&Y===1&&Z(Y,oe),O=Y,k=oe;(e=O<2?r:k)||!W;){q||(O?O<3?(O>1&&(K.n=-1),Z(O,k)):K.n=k:K.v=k);try{if(z=2,q){if(O||(se="next"),e=q[se]){if(!(e=e.call(q,k)))throw TypeError("iterator result is not an object");if(!e.done)return e;k=e.value,O<2&&(O=0)}else O===1&&(e=q.return)&&e.call(q),O<2&&(k=TypeError("The iterator does not provide a '"+se+"' method"),O=1);q=r}else if((e=(W=K.n<0)?k:P.call(I,K))!==o)break}catch(he){q=r,O=1,k=he}finally{z=1}}return{value:e,done:W}}})(b,M,N),!0),B}var o={};function u(){}function h(){}function d(){}e=Object.getPrototypeOf;var m=[][n]?e(e([][n]())):(zr(e={},n,function(){return this}),e),y=d.prototype=u.prototype=Object.create(m);function x(b){return Object.setPrototypeOf?Object.setPrototypeOf(b,d):(b.__proto__=d,zr(b,i,"GeneratorFunction")),b.prototype=Object.create(y),b}return h.prototype=d,zr(y,"constructor",d),zr(d,"constructor",h),h.displayName="GeneratorFunction",zr(d,i,"GeneratorFunction"),zr(y),zr(y,i,"Generator"),zr(y,n,function(){return this}),zr(y,"toString",function(){return"[object Generator]"}),(bd=function(){return{w:s,m:x}})()}function zr(r,e,t,n){var i=Object.defineProperty;try{i({},"",{})}catch{i=0}zr=function(s,o,u,h){function d(m,y){zr(s,m,function(x){return this._invoke(m,y,x)})}o?i?i(s,o,{value:u,enumerable:!h,configurable:!h,writable:!h}):s[o]=u:(d("next",0),d("throw",1),d("return",2))},zr(r,e,t,n)}function Td(r,e){return Td=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},Td(r,e)}function un(r,e){return hz(r)||vz(r,e)||tx(r,e)||_z()}function Sz(r,e){for(;!{}.hasOwnProperty.call(r,e)&&(r=VA(r))!==null;);return r}function qh(r,e,t,n){var i=xd(VA(r.prototype),e,t);return typeof i=="function"?function(s){return i.apply(t,s)}:i}function Qt(r){return fz(r)||yz(r)||tx(r)||xz()}function Mz(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function ex(r){var e=Mz(r,"string");return typeof e=="symbol"?e:e+""}function tx(r,e){if(r){if(typeof r=="string")return _d(r,e);var t={}.toString.call(r).slice(8,-1);return t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set"?Array.from(r):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_d(r,e):void 0}}var nx=function(e){e instanceof Array?e.forEach(nx):(e.map&&e.map.dispose(),e.dispose())},F3=function(e){e.geometry&&e.geometry.dispose(),e.material&&nx(e.material),e.texture&&e.texture.dispose(),e.children&&e.children.forEach(F3)},Zt=function(e){if(e&&e.children)for(;e.children.length;){var t=e.children[0];e.remove(t),F3(t)}};function wr(r,e){var t=new e;return{linkProp:function(i){return{default:t[i](),onChange:function(o,u){u[r][i](o)},triggerUpdate:!1}},linkMethod:function(i){return function(s){for(var o=s[r],u=arguments.length,h=new Array(u>1?u-1:0),d=1;d<u;d++)h[d-1]=arguments[d];var m=o[i].apply(o,h);return m===o?this:m}}}}var rn=100;function Ig(){return rn}function xi(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=(90-r)*Math.PI/180,i=(90-e)*Math.PI/180,s=rn*(1+t),o=Math.sin(n);return{x:s*o*Math.cos(i),y:s*Math.cos(n),z:s*o*Math.sin(i)}}function rx(r){var e=r.x,t=r.y,n=r.z,i=Math.sqrt(e*e+t*t+n*n),s=Math.acos(t/i),o=Math.atan2(n,e);return{lat:90-s*180/Math.PI,lng:90-o*180/Math.PI-(o<-Math.PI/2?360:0),altitude:i/rn-1}}function Aa(r){return r*Math.PI/180}var bu=window.THREE?window.THREE:{BackSide:Tr,BufferAttribute:Ui,Color:Un,Mesh:Sn,ShaderMaterial:b1},Ez=`
uniform float hollowRadius;

varying vec3 vVertexWorldPosition;
varying vec3 vVertexNormal;
varying float vCameraDistanceToObjCenter;
varying float vVertexAngularDistanceToHollowRadius;

void main() {    
  vVertexNormal	= normalize(normalMatrix * normal);
  vVertexWorldPosition = (modelMatrix * vec4(position, 1.0)).xyz;
  
  vec4 objCenterViewPosition = modelViewMatrix * vec4(0.0, 0.0, 0.0, 1.0);
  vCameraDistanceToObjCenter = length(objCenterViewPosition);
  
  float edgeAngle = atan(hollowRadius / vCameraDistanceToObjCenter);
  float vertexAngle = acos(dot(normalize(modelViewMatrix * vec4(position, 1.0)), normalize(objCenterViewPosition)));
  vVertexAngularDistanceToHollowRadius = vertexAngle - edgeAngle;

  gl_Position	= projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}`,Nz=`
uniform vec3 color;
uniform float coefficient;
uniform float power;
uniform float hollowRadius;

varying vec3 vVertexNormal;
varying vec3 vVertexWorldPosition;
varying float vCameraDistanceToObjCenter;
varying float vVertexAngularDistanceToHollowRadius;

void main() {
  if (vCameraDistanceToObjCenter < hollowRadius) discard; // inside the hollowRadius
  if (vVertexAngularDistanceToHollowRadius < 0.0) discard; // frag position is within the hollow radius

  vec3 worldCameraToVertex = vVertexWorldPosition - cameraPosition;
  vec3 viewCameraToVertex	= (viewMatrix * vec4(worldCameraToVertex, 0.0)).xyz;
  viewCameraToVertex = normalize(viewCameraToVertex);
  float intensity	= pow(
    coefficient + dot(vVertexNormal, viewCameraToVertex),
    power
  );
  gl_FragColor = vec4(color, intensity);
}`;function Rz(r,e,t,n){return new bu.ShaderMaterial({depthWrite:!1,transparent:!0,vertexShader:Ez,fragmentShader:Nz,uniforms:{coefficient:{value:r},color:{value:new bu.Color(e)},power:{value:t},hollowRadius:{value:n}}})}function Cz(r,e){for(var t=r.clone(),n=new Float32Array(r.attributes.position.count*3),i=0,s=n.length;i<s;i++){var o=r.attributes.normal.array[i],u=r.attributes.position.array[i];n[i]=u+o*e}return t.setAttribute("position",new bu.BufferAttribute(n,3)),t}var Pz=(function(r){function e(t){var n,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=i.color,o=s===void 0?"gold":s,u=i.size,h=u===void 0?2:u,d=i.coefficient,m=d===void 0?.5:d,y=i.power,x=y===void 0?1:y,b=i.hollowRadius,T=b===void 0?0:b,M=i.backside,N=M===void 0?!0:M;i2(this,e),n=r2(this,e);var C=Cz(t,h),B=Rz(m,o,x,T);return N&&(B.side=bu.BackSide),n.geometry=C,n.material=B,n}return o2(e,r),s2(e)})(bu.Mesh),rs=window.THREE?window.THREE:{Color:Un,Group:xs,LineBasicMaterial:_1,LineSegments:q6,Mesh:Sn,MeshPhongMaterial:P6,SphereGeometry:Ea,SRGBColorSpace:m1,TextureLoader:Yg},ix=dr({props:{globeImageUrl:{},bumpImageUrl:{},showGlobe:{default:!0,onChange:function(e,t){t.globeGroup.visible=!!e},triggerUpdate:!1},showGraticules:{default:!1,onChange:function(e,t){t.graticulesObj.visible=!!e},triggerUpdate:!1},showAtmosphere:{default:!0,onChange:function(e,t){t.atmosphereObj&&(t.atmosphereObj.visible=!!e)},triggerUpdate:!1},atmosphereColor:{default:"lightskyblue"},atmosphereAltitude:{default:.15},globeCurvatureResolution:{default:4},globeTileEngineUrl:{onChange:function(e,t){t.tileEngine.tileUrl=e}},globeTileEngineMaxLevel:{default:17,onChange:function(e,t){t.tileEngine.maxLevel=e},triggerUpdate:!1},updatePov:{onChange:function(e,t){t.tileEngine.updatePov(e)},triggerUpdate:!1},onReady:{default:function(){},triggerUpdate:!1}},methods:{globeMaterial:function(e,t){return t!==void 0?(e.globeObj.material=t||e.defaultGlobeMaterial,this):e.globeObj.material},_destructor:function(e){Zt(e.globeObj),Zt(e.tileEngine),Zt(e.graticulesObj)}},stateInit:function(){var e=new rs.MeshPhongMaterial({color:0}),t=new rs.Mesh(void 0,e);t.rotation.y=-Math.PI/2;var n=new hN(rn),i=new rs.Group;i.__globeObjType="globe",i.add(t),i.add(n);var s=new rs.LineSegments(new O7(CE(),rn,2),new rs.LineBasicMaterial({color:"lightgrey",transparent:!0,opacity:.1}));return{globeGroup:i,globeObj:t,graticulesObj:s,defaultGlobeMaterial:e,tileEngine:n}},init:function(e,t){Zt(e),t.scene=e,t.scene.add(t.globeGroup),t.scene.add(t.graticulesObj),t.ready=!1},update:function(e,t){var n=e.globeObj.material;if(e.tileEngine.visible=!(e.globeObj.visible=!e.globeTileEngineUrl),t.hasOwnProperty("globeCurvatureResolution")){var i;(i=e.globeObj.geometry)===null||i===void 0||i.dispose();var s=Math.max(4,Math.round(360/e.globeCurvatureResolution));e.globeObj.geometry=new rs.SphereGeometry(rn,s,s/2),e.tileEngine.curvatureResolution=e.globeCurvatureResolution}if(t.hasOwnProperty("globeImageUrl")&&(e.globeImageUrl?new rs.TextureLoader().load(e.globeImageUrl,function(u){u.colorSpace=rs.SRGBColorSpace,n.map=u,n.color=null,n.needsUpdate=!0,!e.ready&&(e.ready=!0)&&setTimeout(e.onReady)}):!n.color&&(n.color=new rs.Color(0))),t.hasOwnProperty("bumpImageUrl")&&(e.bumpImageUrl?e.bumpImageUrl&&new rs.TextureLoader().load(e.bumpImageUrl,function(u){n.bumpMap=u,n.needsUpdate=!0}):(n.bumpMap=null,n.needsUpdate=!0)),(t.hasOwnProperty("atmosphereColor")||t.hasOwnProperty("atmosphereAltitude"))&&(e.atmosphereObj&&(e.scene.remove(e.atmosphereObj),Zt(e.atmosphereObj)),e.atmosphereColor&&e.atmosphereAltitude)){var o=e.atmosphereObj=new Pz(e.globeObj.geometry,{color:e.atmosphereColor,size:rn*e.atmosphereAltitude,hollowRadius:rn,coefficient:.1,power:3.5});o.visible=!!e.showAtmosphere,o.__globeObjType="atmosphere",e.scene.add(o)}!e.ready&&(!e.globeImageUrl||e.globeTileEngineUrl)&&(e.ready=!0,e.onReady())}}),vs=function(e){return isNaN(e)?parseInt(Qe(e).toHex(),16):e},Vi=function(e){return e&&isNaN(e)?ba(e).opacity:1},Io=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i,s=1,o=/^rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.eE+-]+)\s*\)$/.exec(e.trim().toLowerCase());if(o){var u=o.slice(1),h=un(u,4),d=h[0],m=h[1],y=h[2],x=h[3];i=new Un("rgb(".concat(+d,",").concat(+m,",").concat(+y,")")),s=Math.min(+x,1)}else i=new Un(e);n&&i.convertLinearToSRGB();var b=i.toArray();return t?[].concat(Qt(b),[s]):b};function Bz(r,e,t){return r.opacity=e,r.transparent=e<1,r.depthWrite=e>=1,r}var qg=window.THREE?window.THREE:{BufferAttribute:Ui};function _s(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Float32Array;if(e===1)return new qg.BufferAttribute(new t(r),e);for(var n=new qg.BufferAttribute(new t(r.length*e),e),i=0,s=r.length;i<s;i++)n.set(r[i],i*e);return n}function Dz(r){for(var e=r.itemSize,t=[],n=0;n<r.count;n++)t.push(r.array.slice(n*e,(n+1)*e));return t}var Oh=new WeakMap,O0=new WeakMap,U0=new WeakMap,qr=(function(r){function e(t){var n,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=i.dataBindAttr,o=s===void 0?"__data":s,u=i.objBindAttr,h=u===void 0?"__threeObj":u,d=i.removeDelay,m=d===void 0?0:d;return i2(this,e),n=r2(this,e),Wn(n,"scene",void 0),Lh(n,Oh,void 0),Lh(n,O0,void 0),Lh(n,U0,void 0),n.scene=t,Ih(Oh,n,o),Ih(O0,n,h),Ih(U0,n,m),n.onRemoveObj(function(){}),n}return o2(e,r),s2(e,[{key:"onCreateObj",value:function(n){var i=this;return qh(e,"onCreateObj",this)([function(s){var o=n(s);return s[El(O0,i)]=o,o[El(Oh,i)]=s,i.scene.add(o),o}]),this}},{key:"onRemoveObj",value:function(n){var i=this;return qh(e,"onRemoveObj",this)([function(s,o){var u=qh(e,"getData",i)([s]);n(s,o);var h=function(){i.scene.remove(s),Zt(s),delete u[El(O0,i)]};El(U0,i)?setTimeout(h,El(U0,i)):h()}]),this}}])})(GR),Ni=window.THREE?window.THREE:{BufferGeometry:bi,CylinderGeometry:Jg,Matrix4:mn,Mesh:Sn,MeshLambertMaterial:Zs,Object3D:x1,Vector3:Re},Og=Object.assign({},rp),Ug=Og.BufferGeometryUtils||Og,sx=dr({props:{pointsData:{default:[]},pointLat:{default:"lat"},pointLng:{default:"lng"},pointColor:{default:function(){return"#ffffaa"}},pointAltitude:{default:.1},pointRadius:{default:.25},pointResolution:{default:12,triggerUpdate:!1},pointsMerge:{default:!1},pointsTransitionDuration:{default:1e3,triggerUpdate:!1}},init:function(e,t,n){var i=n.tweenGroup;Zt(e),t.scene=e,t.tweenGroup=i,t.dataMapper=new qr(e,{objBindAttr:"__threeObjPoint"})},update:function(e,t){var n=Te(e.pointLat),i=Te(e.pointLng),s=Te(e.pointAltitude),o=Te(e.pointRadius),u=Te(e.pointColor),h=new Ni.CylinderGeometry(1,1,1,e.pointResolution);h.applyMatrix4(new Ni.Matrix4().makeRotationX(Math.PI/2)),h.applyMatrix4(new Ni.Matrix4().makeTranslation(0,0,-.5));var d=2*Math.PI*rn/360,m={};if(!e.pointsMerge&&t.hasOwnProperty("pointsMerge")&&Zt(e.scene),e.dataMapper.scene=e.pointsMerge?new Ni.Object3D:e.scene,e.dataMapper.onCreateObj(b).onUpdateObj(T).digest(e.pointsData),e.pointsMerge){var y=e.pointsData.length?(Ug.mergeGeometries||Ug.mergeBufferGeometries)(e.pointsData.map(function(M){var N=e.dataMapper.getObj(M),C=N.geometry.clone();N.updateMatrix(),C.applyMatrix4(N.matrix);var B=Io(u(M));return C.setAttribute("color",_s(Array(C.getAttribute("position").count).fill(B),4)),C})):new Ni.BufferGeometry,x=new Ni.Mesh(y,new Ni.MeshLambertMaterial({color:16777215,transparent:!0,vertexColors:!0}));x.__globeObjType="points",x.__data=e.pointsData,e.dataMapper.clear(),Zt(e.scene),e.scene.add(x)}function b(){var M=new Ni.Mesh(h);return M.__globeObjType="point",M}function T(M,N){var C=function(k){var z=M.__currentTargetD=k,X=z.r,W=z.alt,K=z.lat,Z=z.lng;Object.assign(M.position,xi(K,Z));var se=e.pointsMerge?new Ni.Vector3(0,0,0):e.scene.localToWorld(new Ni.Vector3(0,0,0));M.lookAt(se),M.scale.x=M.scale.y=Math.min(30,X)*d,M.scale.z=Math.max(W*rn,.1)},B={alt:+s(N),r:+o(N),lat:+n(N),lng:+i(N)},P=M.__currentTargetD||Object.assign({},B,{alt:-.001});if(Object.keys(B).some(function(O){return P[O]!==B[O]})&&(e.pointsMerge||!e.pointsTransitionDuration||e.pointsTransitionDuration<0?C(B):e.tweenGroup.add(new Yr(P).to(B,e.pointsTransitionDuration).easing(er.Quadratic.InOut).onUpdate(C).start())),!e.pointsMerge){var I=u(N),D=I?Vi(I):0,q=!!D;M.visible=q,q&&(m.hasOwnProperty(I)||(m[I]=new Ni.MeshLambertMaterial({color:vs(I),transparent:D<1,opacity:D})),M.material=m[I])}}}}),ox=function(){return{uniforms:{dashOffset:{value:0},dashSize:{value:1},gapSize:{value:0},dashTranslate:{value:0}},vertexShader:`
    `.concat(sl.common,`
    `).concat(sl.logdepthbuf_pars_vertex,`
  
    uniform float dashTranslate; 

    attribute vec4 color;
    varying vec4 vColor;
    
    attribute float relDistance;
    varying float vRelDistance;

    void main() {
      // pass through colors and distances
      vColor = color;
      vRelDistance = relDistance + dashTranslate;
      gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
  
      `).concat(sl.logdepthbuf_vertex,`
    }
  `),fragmentShader:`
    `.concat(sl.logdepthbuf_pars_fragment,`

    uniform float dashOffset; 
    uniform float dashSize;
    uniform float gapSize; 
    
    varying vec4 vColor;
    varying float vRelDistance;
    
    void main() {
      // ignore pixels in the gap
      if (vRelDistance < dashOffset) discard;
      if (mod(vRelDistance - dashOffset, dashSize + gapSize) > dashSize) discard;
    
      // set px color: [r, g, b, a], interpolated between vertices 
      gl_FragColor = vColor; 
  
      `).concat(sl.logdepthbuf_fragment,`
    }
  `)}},wd=function(e){return e.uniforms.surfaceRadius={type:"float",value:0},e.vertexShader=(`attribute float surfaceRadius;
varying float vSurfaceRadius;
varying vec3 vPos;
`+e.vertexShader).replace("void main() {",["void main() {","vSurfaceRadius = surfaceRadius;","vPos = position;"].join(`
`)),e.fragmentShader=(`uniform float surfaceRadius;
varying float vSurfaceRadius;
varying vec3 vPos;
`+e.fragmentShader).replace("void main() {",["void main() {","if (length(vPos) < max(surfaceRadius, vSurfaceRadius)) discard;"].join(`
`)),e},Fz=function(e){return e.vertexShader=`
    attribute float r;
    
    const float PI = 3.1415926535897932384626433832795;
    float toRad(in float a) {
      return a * PI / 180.0;
    }
    
    vec3 Polar2Cartesian(in vec3 c) { // [lat, lng, r]
      float phi = toRad(90.0 - c.x);
      float theta = toRad(90.0 - c.y);
      float r = c.z;
      return vec3( // x,y,z
        r * sin(phi) * cos(theta),
        r * cos(phi),
        r * sin(phi) * sin(theta)
      );
    }
    
    vec2 Cartesian2Polar(in vec3 p) {
      float r = sqrt(p.x * p.x + p.y * p.y + p.z * p.z);
      float phi = acos(p.y / r);
      float theta = atan(p.z, p.x);
      return vec2( // lat,lng
        90.0 - phi * 180.0 / PI,
        90.0 - theta * 180.0 / PI - (theta < -PI / 2.0 ? 360.0 : 0.0)
      );
    }
    `.concat(e.vertexShader.replace("}",`                  
        vec3 pos = Polar2Cartesian(vec3(Cartesian2Polar(position), r));
        gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);
      }
    `),`
  `),e},L3=function(e,t){return e.onBeforeCompile=function(n){e.userData.shader=t(n)},e},Lz=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(i){return i};if(e.userData.shader)t(e.userData.shader.uniforms);else{var n=e.onBeforeCompile;e.onBeforeCompile=function(i){n(i),t(i.uniforms)}}},Iz=["stroke"],Ri=window.THREE?window.THREE:{BufferGeometry:bi,CubicBezierCurve3:Uw,Curve:kw,Group:xs,Line:$d,Mesh:Sn,NormalBlending:Os,ShaderMaterial:b1,TubeGeometry:Ow,Vector3:Re},qz=LA.default||LA,ax=dr({props:{arcsData:{default:[]},arcStartLat:{default:"startLat"},arcStartLng:{default:"startLng"},arcStartAltitude:{default:0},arcEndLat:{default:"endLat"},arcEndLng:{default:"endLng"},arcEndAltitude:{default:0},arcColor:{default:function(){return"#ffffaa"}},arcAltitude:{},arcAltitudeAutoScale:{default:.5},arcStroke:{},arcCurveResolution:{default:64,triggerUpdate:!1},arcCircularResolution:{default:6,triggerUpdate:!1},arcDashLength:{default:1},arcDashGap:{default:0},arcDashInitialGap:{default:0},arcDashAnimateTime:{default:0},arcsTransitionDuration:{default:1e3,triggerUpdate:!1}},methods:{pauseAnimation:function(e){var t;(t=e.ticker)===null||t===void 0||t.pause()},resumeAnimation:function(e){var t;(t=e.ticker)===null||t===void 0||t.resume()},_destructor:function(e){var t;e.sharedMaterial.dispose(),(t=e.ticker)===null||t===void 0||t.dispose()}},stateInit:function(e){var t=e.tweenGroup;return{tweenGroup:t,ticker:new qz,sharedMaterial:new Ri.ShaderMaterial(Vt(Vt({},ox()),{},{transparent:!0,blending:Ri.NormalBlending}))}},init:function(e,t){Zt(e),t.scene=e,t.dataMapper=new qr(e,{objBindAttr:"__threeObjArc"}).onCreateObj(function(){var n=new Ri.Group;return n.__globeObjType="arc",n}),t.ticker.onTick.add(function(n,i){t.dataMapper.entries().map(function(s){var o=un(s,2),u=o[1];return u}).filter(function(s){return s.children.length&&s.children[0].material&&s.children[0].__dashAnimateStep}).forEach(function(s){var o=s.children[0],u=o.__dashAnimateStep*i,h=o.material.uniforms.dashTranslate.value%1e9;o.material.uniforms.dashTranslate.value=h+u})})},update:function(e){var t=Te(e.arcStartLat),n=Te(e.arcStartLng),i=Te(e.arcStartAltitude),s=Te(e.arcEndLat),o=Te(e.arcEndLng),u=Te(e.arcEndAltitude),h=Te(e.arcAltitude),d=Te(e.arcAltitudeAutoScale),m=Te(e.arcStroke),y=Te(e.arcColor),x=Te(e.arcDashLength),b=Te(e.arcDashGap),T=Te(e.arcDashInitialGap),M=Te(e.arcDashAnimateTime);e.dataMapper.onUpdateObj(function(P,I){var D=m(I),q=D!=null;if(!P.children.length||q!==(P.children[0].type==="Mesh")){Zt(P);var O=q?new Ri.Mesh:new Ri.Line(new Ri.BufferGeometry);O.material=e.sharedMaterial.clone(),P.add(O)}var k=P.children[0];Object.assign(k.material.uniforms,{dashSize:{value:x(I)},gapSize:{value:b(I)},dashOffset:{value:T(I)}});var z=M(I);k.__dashAnimateStep=z>0?1e3/z:0;var X=C(y(I),e.arcCurveResolution,q?e.arcCircularResolution+1:1),W=B(e.arcCurveResolution,q?e.arcCircularResolution+1:1,!0);k.geometry.setAttribute("color",X),k.geometry.setAttribute("relDistance",W);var K=function(oe){var he=P.__currentTargetD=oe,_e=he.stroke,ye=bz(he,Iz),Pe=N(ye);q?(k.geometry&&k.geometry.dispose(),k.geometry=new Ri.TubeGeometry(Pe,e.arcCurveResolution,_e/2,e.arcCircularResolution),k.geometry.setAttribute("color",X),k.geometry.setAttribute("relDistance",W)):k.geometry.setFromPoints(Pe.getPoints(e.arcCurveResolution))},Z={stroke:D,alt:h(I),altAutoScale:+d(I),startLat:+t(I),startLng:+n(I),startAlt:+i(I),endLat:+s(I),endLng:+o(I),endAlt:+u(I)},se=P.__currentTargetD||Object.assign({},Z,{altAutoScale:-.001});Object.keys(Z).some(function(Y){return se[Y]!==Z[Y]})&&(!e.arcsTransitionDuration||e.arcsTransitionDuration<0?K(Z):e.tweenGroup.add(new Yr(se).to(Z,e.arcsTransitionDuration).easing(er.Quadratic.InOut).onUpdate(K).start()))}).digest(e.arcsData);function N(P){var I=P.alt,D=P.altAutoScale,q=P.startLat,O=P.startLng,k=P.startAlt,z=P.endLat,X=P.endLng,W=P.endAlt,K=function(Nt){var It=un(Nt,3),dn=It[0],Nn=It[1],sn=It[2],Bn=xi(Nn,dn,sn),ir=Bn.x,on=Bn.y,Rn=Bn.z;return new Ri.Vector3(ir,on,Rn)},Z=[O,q],se=[X,z],Y=I;if(Y==null&&(Y=Do(Z,se)/2*D+Math.max(k,W)),Y||k||W){var oe=Zd(Z,se),he=function(Nt,It){return It+(It-Nt)*(Nt<It?.5:.25)},_e=[.25,.75].map(function(pt){return[].concat(Qt(oe(pt)),[he(pt<.5?k:W,Y)])}),ye=un(_e,2),Pe=ye[0],qe=ye[1],Ye=B3(Ri.CubicBezierCurve3,Qt([[].concat(Z,[k]),Pe,qe,[].concat(se,[W])].map(K)));return Ye}else{var He=.001;return Rt.apply(void 0,Qt([[].concat(Z,[He]),[].concat(se,[He])].map(K)))}function Rt(pt,Nt){var It=pt.angleTo(Nt),dn=It===0?function(){return pt.clone()}:function(sn){return new Ri.Vector3().addVectors(pt.clone().multiplyScalar(Math.sin((1-sn)*It)),Nt.clone().multiplyScalar(Math.sin(sn*It))).divideScalar(Math.sin(It))},Nn=new Ri.Curve;return Nn.getPoint=dn,Nn}}function C(P,I){var D=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,q=I+1,O;if(P instanceof Array||P instanceof Function){var k=P instanceof Array?$s().domain(P.map(function(Y,oe){return oe/(P.length-1)})).range(P):P;O=function(oe){return Io(k(oe),!0,!0)}}else{var z=Io(P,!0,!0);O=function(){return z}}for(var X=[],W=0,K=q;W<K;W++)for(var Z=O(W/(K-1)),se=0;se<D;se++)X.push(Z);return _s(X,4)}function B(P){for(var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,D=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,q=P+1,O=[],k=0,z=q;k<z;k++)for(var X=k/(z-1),W=0;W<I;W++)O.push(X);return D&&O.reverse(),_s(O,1)}}}),fo=window.THREE?window.THREE:{BufferGeometry:bi,DoubleSide:pi,Mesh:Sn,MeshLambertMaterial:Zs,Object3D:x1},kg=Object.assign({},rp),Gg=kg.BufferGeometryUtils||kg,Ax=dr({props:{hexBinPointsData:{default:[]},hexBinPointLat:{default:"lat"},hexBinPointLng:{default:"lng"},hexBinPointWeight:{default:1},hexBinResolution:{default:4},hexMargin:{default:.2},hexTopCurvatureResolution:{default:5},hexTopColor:{default:function(){return"#ffffaa"}},hexSideColor:{default:function(){return"#ffffaa"}},hexAltitude:{default:function(e){var t=e.sumWeight;return t*.01}},hexBinMerge:{default:!1},hexTransitionDuration:{default:1e3,triggerUpdate:!1}},init:function(e,t,n){var i=n.tweenGroup;Zt(e),t.scene=e,t.tweenGroup=i,t.dataMapper=new qr(e,{objBindAttr:"__threeObjHexbin"})},update:function(e,t){var n=Te(e.hexBinPointLat),i=Te(e.hexBinPointLng),s=Te(e.hexBinPointWeight),o=Te(e.hexAltitude),u=Te(e.hexTopColor),h=Te(e.hexSideColor),d=Te(e.hexMargin),m=lP(e.hexBinPointsData.map(function(B){return Vt(Vt({},B),{},{h3Idx:$P(n(B),i(B),e.hexBinResolution)})}),"h3Idx"),y=Object.entries(m).map(function(B){var P=un(B,2),I=P[0],D=P[1];return{h3Idx:I,points:D,sumWeight:D.reduce(function(q,O){return q+ +s(O)},0)}}),x={};if(!e.hexBinMerge&&t.hasOwnProperty("hexBinMerge")&&Zt(e.scene),e.dataMapper.scene=e.hexBinMerge?new fo.Object3D:e.scene,e.dataMapper.id(function(B){return B.h3Idx}).onCreateObj(N).onUpdateObj(C).digest(y),e.hexBinMerge){var b=y.length?(Gg.mergeGeometries||Gg.mergeBufferGeometries)(y.map(function(B){var P=e.dataMapper.getObj(B),I=P.geometry.toNonIndexed();P.updateMatrix(),I.applyMatrix4(P.matrix);var D=Io(u(B)),q=Io(h(B)),O=I.getAttribute("position").count,k=I.groups[0].count;return I.setAttribute("color",_s(Qt(new Array(O)).map(function(z,X){return X>=k?D:q}),4)),I})):new fo.BufferGeometry,T=new fo.MeshLambertMaterial({color:16777215,transparent:!0,vertexColors:!0,side:fo.DoubleSide});T.onBeforeCompile=function(B){T.userData.shader=wd(B)};var M=new fo.Mesh(b,T);M.__globeObjType="hexBinPoints",M.__data=y,e.dataMapper.clear(),Zt(e.scene),e.scene.add(M)}function N(B){var P=new fo.Mesh;P.__hexCenter=r8(B.h3Idx),P.__hexGeoJson=i8(B.h3Idx,!0).reverse();var I=P.__hexCenter[1];return P.__hexGeoJson.forEach(function(D){var q=D[0];Math.abs(I-q)>170&&(D[0]+=I>q?360:-360)}),P.__globeObjType="hexbin",P}function C(B,P){var I=function(he,_e,ye){return he-(he-_e)*ye},D=Math.max(0,Math.min(1,+d(P))),q=un(B.__hexCenter,2),O=q[0],k=q[1],z=D===0?B.__hexGeoJson:B.__hexGeoJson.map(function(oe){var he=un(oe,2),_e=he[0],ye=he[1];return[[_e,k],[ye,O]].map(function(Pe){var qe=un(Pe,2),Ye=qe[0],He=qe[1];return I(Ye,He,D)})}),X=e.hexTopCurvatureResolution;B.geometry&&B.geometry.dispose(),B.geometry=new Ap([z],0,rn,!1,!0,!0,X);var W={alt:+o(P)},K=function(he){var _e=B.__currentTargetD=he,ye=_e.alt;B.scale.x=B.scale.y=B.scale.z=1+ye;var Pe=rn/(ye+1);B.geometry.setAttribute("surfaceRadius",_s(Array(B.geometry.getAttribute("position").count).fill(Pe),1))},Z=B.__currentTargetD||Object.assign({},W,{alt:-.001});if(Object.keys(W).some(function(oe){return Z[oe]!==W[oe]})&&(e.hexBinMerge||!e.hexTransitionDuration||e.hexTransitionDuration<0?K(W):e.tweenGroup.add(new Yr(Z).to(W,e.hexTransitionDuration).easing(er.Quadratic.InOut).onUpdate(K).start())),!e.hexBinMerge){var se=h(P),Y=u(P);[se,Y].forEach(function(oe){if(!x.hasOwnProperty(oe)){var he=Vi(oe);x[oe]=L3(new fo.MeshLambertMaterial({color:vs(oe),transparent:he<1,opacity:he,side:fo.DoubleSide}),wd)}}),B.material=[se,Y].map(function(oe){return x[oe]})}}}}),lx=function(e){return e*e},qs=function(e){return e*Math.PI/180};function Oz(r,e){var t=Math.sqrt,n=Math.cos,i=function(m){return lx(Math.sin(m/2))},s=qs(r[1]),o=qs(e[1]),u=qs(r[0]),h=qs(e[0]);return 2*Math.asin(t(i(o-s)+n(s)*n(o)*i(h-u)))}var Uz=Math.sqrt(2*Math.PI);function kz(r,e){return Math.exp(-lx(r/e)/2)/(e*Uz)}var Gz=function(e){var t=un(e,2),n=t[0],i=t[1],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},u=o.lngAccessor,h=u===void 0?function(N){return N[0]}:u,d=o.latAccessor,m=d===void 0?function(N){return N[1]}:d,y=o.weightAccessor,x=y===void 0?function(){return 1}:y,b=o.bandwidth,T=[n,i],M=b*Math.PI/180;return oM(s.map(function(N){var C=x(N);if(!C)return 0;var B=Oz(T,[h(N),m(N)]);return kz(B,M)*C}))},Vz=(function(){var r=pz(bd().m(function e(t){var n,i,s,o,u,h,d,m,y,x,b,T,M,N,C,B,P,I,D,q,O,k,z,X,W,K,Z,se,Y,oe,he,_e,ye,Pe,qe,Ye,He,Rt,pt,Nt,It=arguments,dn,Nn,sn,Bn;return bd().w(function(ir){for(;;)switch(ir.n){case 0:if(i=It.length>1&&It[1]!==void 0?It[1]:[],s=It.length>2&&It[2]!==void 0?It[2]:{},o=s.lngAccessor,u=o===void 0?function(on){return on[0]}:o,h=s.latAccessor,d=h===void 0?function(on){return on[1]}:h,m=s.weightAccessor,y=m===void 0?function(){return 1}:m,x=s.bandwidth,(n=navigator)!==null&&n!==void 0&&n.gpu){ir.n=1;break}return console.warn("WebGPU not enabled in browser. Please consider enabling it to improve performance."),ir.a(2,t.map(function(on){return Gz(on,i,{lngAccessor:u,latAccessor:d,weightAccessor:y,bandwidth:x})}));case 1:return b=4,T=HV,M=jV,N=rz,C=nz,B=KV,P=ZV,I=WV,D=tz,q=ez,O=XV,k=QV,z=YV,X=JV,W=C(new cc(new Float32Array(t.flat().map(qs)),2),"vec2",t.length),K=C(new cc(new Float32Array(i.map(function(on){return[qs(u(on)),qs(d(on)),y(on)]}).flat()),3),"vec3",i.length),Z=new cc(t.length,1),se=C(Z,"float",t.length),Y=B(Math.PI),oe=D(Y.mul(2)),he=function(Rn){return Rn.mul(Rn)},_e=function(Rn){return he(q(Rn.div(2)))},ye=function(Rn,Or){var to=B(Rn[1]),sr=B(Or[1]),Ur=B(Rn[0]),$i=B(Or[0]);return B(2).mul(k(D(_e(sr.sub(to)).add(O(to).mul(O(sr)).mul(_e($i.sub(Ur)))))))},Pe=function(Rn,Or){return z(X(he(Rn.div(Or)).div(2))).div(Or.mul(oe))},qe=N(qs(x)),Ye=N(qs(x*b)),He=N(i.length),Rt=T(function(){var on=W.element(P),Rn=se.element(P);Rn.assign(0),I(He,function(Or){var to=Or.i,sr=K.element(to),Ur=sr.z;M(Ur,function(){var $i=ye(sr.xy,on.xy);M($i&&$i.lessThan(Ye),function(){Rn.addAssign(Pe($i,qe).mul(Ur))})})})}),pt=Rt().compute(t.length),Nt=new $V,ir.n=2,Nt.computeAsync(pt);case 2:return dn=Array,Nn=Float32Array,ir.n=3,Nt.getArrayBufferAsync(Z);case 3:return sn=ir.v,Bn=new Nn(sn),ir.a(2,dn.from.call(dn,Bn))}},e)}));return function(t){return r.apply(this,arguments)}})(),k0=window.THREE?window.THREE:{Mesh:Sn,MeshLambertMaterial:Zs,SphereGeometry:Ea},zz=3.5,$z=.1,Vg=100,Hz=function(e){var t=ba(jP(e));return t.opacity=Math.cbrt(e),t.formatRgb()},ux=dr({props:{heatmapsData:{default:[]},heatmapPoints:{default:function(e){return e}},heatmapPointLat:{default:function(e){return e[0]}},heatmapPointLng:{default:function(e){return e[1]}},heatmapPointWeight:{default:1},heatmapBandwidth:{default:2.5},heatmapColorFn:{default:function(){return Hz}},heatmapColorSaturation:{default:1.5},heatmapBaseAltitude:{default:.01},heatmapTopAltitude:{},heatmapsTransitionDuration:{default:0,triggerUpdate:!1}},init:function(e,t,n){var i=n.tweenGroup;Zt(e),t.scene=e,t.tweenGroup=i,t.dataMapper=new qr(e,{objBindAttr:"__threeObjHeatmap"}).onCreateObj(function(){var s=new k0.Mesh(new k0.SphereGeometry(rn),L3(new k0.MeshLambertMaterial({vertexColors:!0,transparent:!0}),Fz));return s.__globeObjType="heatmap",s})},update:function(e){var t=Te(e.heatmapPoints),n=Te(e.heatmapPointLat),i=Te(e.heatmapPointLng),s=Te(e.heatmapPointWeight),o=Te(e.heatmapBandwidth),u=Te(e.heatmapColorFn),h=Te(e.heatmapColorSaturation),d=Te(e.heatmapBaseAltitude),m=Te(e.heatmapTopAltitude);e.dataMapper.onUpdateObj(function(y,x){var b=o(x),T=u(x),M=h(x),N=d(x),C=m(x),B=t(x).map(function(O){var k=n(O),z=i(O),X=xi(k,z),W=X.x,K=X.y,Z=X.z;return{x:W,y:K,z:Z,lat:k,lng:z,weight:s(O)}}),P=Math.max($z,b/zz),I=Math.ceil(360/(P||-1));y.geometry.parameters.widthSegments!==I&&(y.geometry.dispose(),y.geometry=new k0.SphereGeometry(rn,I,I/2));var D=Dz(y.geometry.getAttribute("position")),q=D.map(function(O){var k=un(O,3),z=k[0],X=k[1],W=k[2],K=rx({x:z,y:X,z:W}),Z=K.lng,se=K.lat;return[Z,se]});Vz(q,B,{latAccessor:function(k){return k.lat},lngAccessor:function(k){return k.lng},weightAccessor:function(k){return k.weight},bandwidth:b}).then(function(O){var k=Qt(new Array(Vg)).map(function(K,Z){return Io(T(Z/(Vg-1)))}),z=function(Z){var se=y.__currentTargetD=Z,Y=se.kdeVals,oe=se.topAlt,he=se.saturation,_e=rM(Y.map(Math.abs))||1e-15,ye=i7([0,_e/he],k);y.geometry.setAttribute("color",_s(Y.map(function(qe){return ye(Math.abs(qe))}),4));var Pe=$s([0,_e],[rn*(1+N),rn*(1+(oe||N))]);y.geometry.setAttribute("r",_s(Y.map(Pe)))},X={kdeVals:O,topAlt:C,saturation:M},W=y.__currentTargetD||Object.assign({},X,{kdeVals:O.map(function(){return 0}),topAlt:C&&N,saturation:.5});W.kdeVals.length!==O.length&&(W.kdeVals=O.slice()),Object.keys(X).some(function(K){return W[K]!==X[K]})&&(!e.heatmapsTransitionDuration||e.heatmapsTransitionDuration<0?z(X):e.tweenGroup.add(new Yr(W).to(X,e.heatmapsTransitionDuration).easing(er.Quadratic.InOut).onUpdate(z).start()))})}).digest(e.heatmapsData)}}),po=window.THREE?window.THREE:{DoubleSide:pi,Group:xs,LineBasicMaterial:_1,LineSegments:q6,Mesh:Sn,MeshBasicMaterial:Fs},cx=dr({props:{polygonsData:{default:[]},polygonGeoJsonGeometry:{default:"geometry"},polygonSideColor:{default:function(){return"#ffffaa"}},polygonSideMaterial:{},polygonCapColor:{default:function(){return"#ffffaa"}},polygonCapMaterial:{},polygonStrokeColor:{},polygonAltitude:{default:.01},polygonCapCurvatureResolution:{default:5},polygonsTransitionDuration:{default:1e3,triggerUpdate:!1}},init:function(e,t,n){var i=n.tweenGroup;Zt(e),t.scene=e,t.tweenGroup=i,t.dataMapper=new qr(e,{objBindAttr:"__threeObjPolygon"}).id(function(s){return s.id}).onCreateObj(function(){var s=new po.Group;return s.__defaultSideMaterial=L3(new po.MeshBasicMaterial({side:po.DoubleSide,depthWrite:!0}),wd),s.__defaultCapMaterial=new po.MeshBasicMaterial({side:po.DoubleSide,depthWrite:!0}),s.add(new po.Mesh(void 0,[s.__defaultSideMaterial,s.__defaultCapMaterial])),s.add(new po.LineSegments(void 0,new po.LineBasicMaterial)),s.__globeObjType="polygon",s})},update:function(e){var t=Te(e.polygonGeoJsonGeometry),n=Te(e.polygonAltitude),i=Te(e.polygonCapCurvatureResolution),s=Te(e.polygonCapColor),o=Te(e.polygonCapMaterial),u=Te(e.polygonSideColor),h=Te(e.polygonSideMaterial),d=Te(e.polygonStrokeColor),m=[];e.polygonsData.forEach(function(y){var x={data:y,capColor:s(y),capMaterial:o(y),sideColor:u(y),sideMaterial:h(y),strokeColor:d(y),altitude:+n(y),capCurvatureResolution:+i(y)},b=t(y),T=y.__id||"".concat(Math.round(Math.random()*1e9));y.__id=T,b.type==="Polygon"?m.push(Vt({id:"".concat(T,"_0"),coords:b.coordinates},x)):b.type==="MultiPolygon"?m.push.apply(m,Qt(b.coordinates.map(function(M,N){return Vt({id:"".concat(T,"_").concat(N),coords:M},x)}))):console.warn("Unsupported GeoJson geometry type: ".concat(b.type,". Skipping geometry..."))}),e.dataMapper.onUpdateObj(function(y,x){var b=x.coords,T=x.capColor,M=x.capMaterial,N=x.sideColor,C=x.sideMaterial,B=x.strokeColor,P=x.altitude,I=x.capCurvatureResolution,D=un(y.children,2),q=D[0],O=D[1],k=!!B;O.visible=k;var z=!!(T||M),X=!!(N||C);jz(q.geometry.parameters||{},{polygonGeoJson:b,curvatureResolution:I,closedTop:z,includeSides:X})||(q.geometry&&q.geometry.dispose(),q.geometry=new Ap(b,0,rn,!1,z,X,I)),k&&(!O.geometry.parameters||O.geometry.parameters.geoJson.coordinates!==b||O.geometry.parameters.resolution!==I)&&(O.geometry&&O.geometry.dispose(),O.geometry=new O7({type:"Polygon",coordinates:b},rn,I));var W=X?0:-1,K=z?X?1:0:-1;if(W>=0&&(q.material[W]=C||y.__defaultSideMaterial),K>=0&&(q.material[K]=M||y.__defaultCapMaterial),[[!C&&N,W],[!M&&T,K]].forEach(function(_e){var ye=un(_e,2),Pe=ye[0],qe=ye[1];if(!(!Pe||qe<0)){var Ye=q.material[qe],He=Vi(Pe);Ye.color.set(vs(Pe)),Ye.transparent=He<1,Ye.opacity=He}}),k){var Z=O.material,se=Vi(B);Z.color.set(vs(B)),Z.transparent=se<1,Z.opacity=se}var Y={alt:P},oe=function(ye){var Pe=y.__currentTargetD=ye,qe=Pe.alt;q.scale.x=q.scale.y=q.scale.z=1+qe,k&&(O.scale.x=O.scale.y=O.scale.z=1+qe+1e-4),Lz(y.__defaultSideMaterial,function(Ye){return Ye.surfaceRadius.value=rn/(qe+1)})},he=y.__currentTargetD||Object.assign({},Y,{alt:-.001});Object.keys(Y).some(function(_e){return he[_e]!==Y[_e]})&&(!e.polygonsTransitionDuration||e.polygonsTransitionDuration<0||he.alt===Y.alt?oe(Y):e.tweenGroup.add(new Yr(he).to(Y,e.polygonsTransitionDuration).easing(er.Quadratic.InOut).onUpdate(oe).start()))}).digest(m)}});function jz(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){return function(n,i){return n===i}};return Object.entries(e).every(function(n){var i=un(n,2),s=i[0],o=i[1];return r.hasOwnProperty(s)&&t(s)(r[s],o)})}var aA=window.THREE?window.THREE:{BufferGeometry:bi,DoubleSide:pi,Mesh:Sn,MeshLambertMaterial:Zs,Vector3:Re},zg=Object.assign({},rp),$g=zg.BufferGeometryUtils||zg,hx=dr({props:{hexPolygonsData:{default:[]},hexPolygonGeoJsonGeometry:{default:"geometry"},hexPolygonColor:{default:function(){return"#ffffaa"}},hexPolygonAltitude:{default:.001},hexPolygonResolution:{default:3},hexPolygonMargin:{default:.2},hexPolygonUseDots:{default:!1},hexPolygonCurvatureResolution:{default:5},hexPolygonDotResolution:{default:12},hexPolygonsTransitionDuration:{default:0,triggerUpdate:!1}},init:function(e,t,n){var i=n.tweenGroup;Zt(e),t.scene=e,t.tweenGroup=i,t.dataMapper=new qr(e,{objBindAttr:"__threeObjHexPolygon"}).onCreateObj(function(){var s=new aA.Mesh(void 0,new aA.MeshLambertMaterial({side:aA.DoubleSide}));return s.__globeObjType="hexPolygon",s})},update:function(e){var t=Te(e.hexPolygonGeoJsonGeometry),n=Te(e.hexPolygonColor),i=Te(e.hexPolygonAltitude),s=Te(e.hexPolygonResolution),o=Te(e.hexPolygonMargin),u=Te(e.hexPolygonUseDots),h=Te(e.hexPolygonCurvatureResolution),d=Te(e.hexPolygonDotResolution);e.dataMapper.onUpdateObj(function(m,y){var x=t(y),b=s(y),T=i(y),M=Math.max(0,Math.min(1,+o(y))),N=u(y),C=h(y),B=d(y),P=n(y),I=Vi(P);m.material.color.set(vs(P)),m.material.transparent=I<1,m.material.opacity=I;var D={alt:T,margin:M,curvatureResolution:C},q={geoJson:x,h3Res:b},O=m.__currentTargetD||Object.assign({},D,{alt:-.001}),k=m.__currentMemD||q;if(Object.keys(D).some(function(K){return O[K]!==D[K]})||Object.keys(q).some(function(K){return k[K]!==q[K]})){m.__currentMemD=q;var z=[];x.type==="Polygon"?A5(x.coordinates,b,!0).forEach(function(K){return z.push(K)}):x.type==="MultiPolygon"?x.coordinates.forEach(function(K){return A5(K,b,!0).forEach(function(Z){return z.push(Z)})}):console.warn("Unsupported GeoJson geometry type: ".concat(x.type,". Skipping geometry..."));var X=z.map(function(K){var Z=r8(K),se=i8(K,!0).reverse(),Y=Z[1];return se.forEach(function(oe){var he=oe[0];Math.abs(Y-he)>170&&(oe[0]+=Y>he?360:-360)}),{h3Idx:K,hexCenter:Z,hexGeoJson:se}}),W=function(Z){var se=m.__currentTargetD=Z,Y=se.alt,oe=se.margin,he=se.curvatureResolution;m.geometry&&m.geometry.dispose(),m.geometry=X.length?($g.mergeGeometries||$g.mergeBufferGeometries)(X.map(function(_e){var ye=un(_e.hexCenter,2),Pe=ye[0],qe=ye[1];if(N){var Ye=xi(Pe,qe,Y),He=xi(_e.hexGeoJson[0][1],_e.hexGeoJson[0][0],Y),Rt=.85*(1-oe)*new aA.Vector3(Ye.x,Ye.y,Ye.z).distanceTo(new aA.Vector3(He.x,He.y,He.z)),pt=new O6(Rt,B);return pt.rotateX(Aa(-Pe)),pt.rotateY(Aa(qe)),pt.translate(Ye.x,Ye.y,Ye.z),pt}else{var Nt=function(Nn,sn,Bn){return Nn-(Nn-sn)*Bn},It=oe===0?_e.hexGeoJson:_e.hexGeoJson.map(function(dn){var Nn=un(dn,2),sn=Nn[0],Bn=Nn[1];return[[sn,qe],[Bn,Pe]].map(function(ir){var on=un(ir,2),Rn=on[0],Or=on[1];return Nt(Rn,Or,oe)})});return new Ap([It],rn,rn*(1+Y),!1,!0,!1,he)}})):new aA.BufferGeometry};!e.hexPolygonsTransitionDuration||e.hexPolygonsTransitionDuration<0?W(D):e.tweenGroup.add(new Yr(O).to(D,e.hexPolygonsTransitionDuration).easing(er.Quadratic.InOut).onUpdate(W).start())}}).digest(e.hexPolygonsData)}}),Wz=window.THREE?window.THREE:{Vector3:Re};function Qz(r,e){var t=function(o,u){var h=o[o.length-1];return[].concat(Qt(o),Qt(Array(u-o.length).fill(h)))},n=Math.max(r.length,e.length),i=bM.apply(void 0,Qt([r,e].map(function(s){return s.map(function(o){var u=o.x,h=o.y,d=o.z;return[u,h,d]})}).map(function(s){return t(s,n)})));return function(s){return s===0?r:s===1?e:i(s).map(function(o){var u=un(o,3),h=u[0],d=u[1],m=u[2];return new Wz.Vector3(h,d,m)})}}var ra=window.THREE?window.THREE:{BufferGeometry:bi,Color:Un,Group:xs,Line:$d,NormalBlending:Os,ShaderMaterial:b1,Vector3:Re},Xz=LA.default||LA,fx=dr({props:{pathsData:{default:[]},pathPoints:{default:function(e){return e}},pathPointLat:{default:function(e){return e[0]}},pathPointLng:{default:function(e){return e[1]}},pathPointAlt:{default:.001},pathResolution:{default:2},pathColor:{default:function(){return"#ffffaa"}},pathStroke:{},pathDashLength:{default:1},pathDashGap:{default:0},pathDashInitialGap:{default:0},pathDashAnimateTime:{default:0},pathTransitionDuration:{default:1e3,triggerUpdate:!1},rendererSize:{}},methods:{pauseAnimation:function(e){var t;(t=e.ticker)===null||t===void 0||t.pause()},resumeAnimation:function(e){var t;(t=e.ticker)===null||t===void 0||t.resume()},_destructor:function(e){var t;(t=e.ticker)===null||t===void 0||t.dispose()}},stateInit:function(e){var t=e.tweenGroup;return{tweenGroup:t,ticker:new Xz,sharedMaterial:new ra.ShaderMaterial(Vt(Vt({},ox()),{},{transparent:!0,blending:ra.NormalBlending}))}},init:function(e,t){Zt(e),t.scene=e,t.dataMapper=new qr(e,{objBindAttr:"__threeObjPath"}).onCreateObj(function(){var n=new ra.Group;return n.__globeObjType="path",n}),t.ticker.onTick.add(function(n,i){t.dataMapper.entries().map(function(s){var o=un(s,2),u=o[1];return u}).filter(function(s){return s.children.length&&s.children[0].material&&s.children[0].__dashAnimateStep}).forEach(function(s){var o=s.children[0],u=o.__dashAnimateStep*i;if(o.type==="Line"){var h=o.material.uniforms.dashTranslate.value%1e9;o.material.uniforms.dashTranslate.value=h+u}else if(o.type==="Line2"){for(var d=o.material.dashOffset-u,m=o.material.dashSize+o.material.gapSize;d<=-m;)d+=m;o.material.dashOffset=d}})})},update:function(e){var t=Te(e.pathPoints),n=Te(e.pathPointLat),i=Te(e.pathPointLng),s=Te(e.pathPointAlt),o=Te(e.pathStroke),u=Te(e.pathColor),h=Te(e.pathDashLength),d=Te(e.pathDashGap),m=Te(e.pathDashInitialGap),y=Te(e.pathDashAnimateTime);e.dataMapper.onUpdateObj(function(N,C){var B=o(C),P=B!=null;if(!N.children.length||P===(N.children[0].type==="Line")){Zt(N);var I=P?new az(new Z_,new P3):new ra.Line(new ra.BufferGeometry,e.sharedMaterial.clone());N.add(I)}var D=N.children[0],q=b(t(C),n,i,s,e.pathResolution),O=y(C);if(D.__dashAnimateStep=O>0?1e3/O:0,P){D.material.resolution=e.rendererSize;{var X=h(C),W=d(C),K=m(C);D.material.dashed=W>0,D.material.dashed?D.material.defines.USE_DASH="":delete D.material.defines.USE_DASH,D.material.dashed&&(D.material.dashScale=1/x(q),D.material.dashSize=X,D.material.gapSize=W,D.material.dashOffset=-K)}{var Z=u(C);if(Z instanceof Array){var se=T(u(C),q.length-1,1,!1);D.geometry.setColors(se.array),D.material.vertexColors=!0}else{var Y=Z,oe=Vi(Y);D.material.color=new ra.Color(vs(Y)),D.material.transparent=oe<1,D.material.opacity=oe,D.material.vertexColors=!1}}D.material.needsUpdate=!0}else{Object.assign(D.material.uniforms,{dashSize:{value:h(C)},gapSize:{value:d(C)},dashOffset:{value:m(C)}});var k=T(u(C),q.length),z=M(q.length,1,!0);D.geometry.setAttribute("color",k),D.geometry.setAttribute("relDistance",z)}var he=Qz(N.__currentTargetD&&N.__currentTargetD.points||[q[0]],q),_e=function(Ye){var He=N.__currentTargetD=Ye,Rt=He.stroke,pt=He.interpolK,Nt=N.__currentTargetD.points=he(pt);if(P){var It;D.geometry.setPositions((It=[]).concat.apply(It,Qt(Nt.map(function(dn){var Nn=dn.x,sn=dn.y,Bn=dn.z;return[Nn,sn,Bn]})))),D.material.linewidth=Rt,D.material.dashed&&D.computeLineDistances()}else D.geometry.setFromPoints(Nt),D.geometry.computeBoundingSphere()},ye={stroke:B,interpolK:1},Pe=Object.assign({},N.__currentTargetD||ye,{interpolK:0});Object.keys(ye).some(function(qe){return Pe[qe]!==ye[qe]})&&(!e.pathTransitionDuration||e.pathTransitionDuration<0?_e(ye):e.tweenGroup.add(new Yr(Pe).to(ye,e.pathTransitionDuration).easing(er.Quadratic.InOut).onUpdate(_e).start()))}).digest(e.pathsData);function x(N){var C=0,B;return N.forEach(function(P){B&&(C+=B.distanceTo(P)),B=P}),C}function b(N,C,B,P,I){var D=function(z,X,W){for(var K=[],Z=1;Z<=W;Z++)K.push(z+(X-z)*Z/(W+1));return K},q=function(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,W=[],K=null;return z.forEach(function(Z){if(K){for(;Math.abs(K[1]-Z[1])>180;)K[1]+=360*(K[1]<Z[1]?1:-1);var se=Math.sqrt(Math.pow(Z[0]-K[0],2)+Math.pow(Z[1]-K[1],2));if(se>X)for(var Y=Math.floor(se/X),oe=D(K[0],Z[0],Y),he=D(K[1],Z[1],Y),_e=D(K[2],Z[2],Y),ye=0,Pe=oe.length;ye<Pe;ye++)W.push([oe[ye],he[ye],_e[ye]])}W.push(K=Z)}),W},O=function(z){var X=un(z,3),W=X[0],K=X[1],Z=X[2],se=xi(W,K,Z),Y=se.x,oe=se.y,he=se.z;return new ra.Vector3(Y,oe,he)};return q(N.map(function(k){return[C(k),B(k),P(k)]}),I).map(O)}function T(N,C){var B=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,P=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,I=C+1,D;if(N instanceof Array||N instanceof Function){var q=N instanceof Array?$s().domain(N.map(function(Z,se){return se/(N.length-1)})).range(N):N;D=function(se){return Io(q(se),P,!0)}}else{var O=Io(N,P,!0);D=function(){return O}}for(var k=[],z=0,X=I;z<X;z++)for(var W=D(z/(X-1)),K=0;K<B;K++)k.push(W);return _s(k,P?4:3)}function M(N){for(var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,B=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,P=N+1,I=[],D=0,q=P;D<q;D++)for(var O=D/(q-1),k=0;k<C;k++)I.push(O);return B&&I.reverse(),_s(I,1)}}}),G0=window.THREE?window.THREE:{Euler:Jl,Mesh:Sn,MeshLambertMaterial:Zs,SphereGeometry:Ea},dx=dr({props:{tilesData:{default:[]},tileLat:{default:"lat"},tileLng:{default:"lng"},tileAltitude:{default:.01},tileWidth:{default:1},tileHeight:{default:1},tileUseGlobeProjection:{default:!0},tileMaterial:{default:function(){return new G0.MeshLambertMaterial({color:"#ffbb88",opacity:.4,transparent:!0})}},tileCurvatureResolution:{default:5},tilesTransitionDuration:{default:1e3,triggerUpdate:!1}},init:function(e,t,n){var i=n.tweenGroup;Zt(e),t.scene=e,t.tweenGroup=i,t.dataMapper=new qr(e,{objBindAttr:"__threeObjTile"}).onCreateObj(function(){var s=new G0.Mesh;return s.__globeObjType="tile",s})},update:function(e){var t=Te(e.tileLat),n=Te(e.tileLng),i=Te(e.tileAltitude),s=Te(e.tileWidth),o=Te(e.tileHeight),u=Te(e.tileUseGlobeProjection),h=Te(e.tileMaterial),d=Te(e.tileCurvatureResolution);e.dataMapper.onUpdateObj(function(m,y){m.material=h(y);var x=u(y),b=d(y),T=function(B){var P=m.__currentTargetD=B,I=P.lat,D=P.lng,q=P.alt,O=P.width,k=P.height,z=AA(D),X=AA(-I);m.geometry&&m.geometry.dispose(),m.geometry=new G0.SphereGeometry(rn*(1+q),Math.ceil(O/(b||-1)),Math.ceil(k/(b||-1)),AA(90-O/2)+(x?z:0),AA(O),AA(90-k/2)+(x?X:0),AA(k)),x||m.setRotationFromEuler(new G0.Euler(X,z,0,"YXZ"))},M={lat:+t(y),lng:+n(y),alt:+i(y),width:+s(y),height:+o(y)},N=m.__currentTargetD||Object.assign({},M,{width:0,height:0});Object.keys(M).some(function(C){return N[C]!==M[C]})&&(!e.tilesTransitionDuration||e.tilesTransitionDuration<0?T(M):e.tweenGroup.add(new Yr(N).to(M,e.tilesTransitionDuration).easing(er.Quadratic.InOut).onUpdate(T).start()))}).digest(e.tilesData)}}),AA=function(e){return e*Math.PI/180},Nl=window.THREE?window.THREE:{BufferGeometry:bi,Color:Un,Points:Gw,PointsMaterial:B6},px=dr({props:{particlesData:{default:[]},particlesList:{default:function(e){return e}},particleLat:{default:"lat"},particleLng:{default:"lng"},particleAltitude:{default:.01},particlesSize:{default:.5},particlesSizeAttenuation:{default:!0},particlesColor:{default:function(){return"white"}},particlesTexture:{}},init:function(e,t){Zt(e),t.scene=e,t.dataMapper=new qr(e,{objBindAttr:"__threeObjParticles"}).onCreateObj(function(){var n=new Nl.Points(new Nl.BufferGeometry,new Nl.PointsMaterial);return n.__globeObjType="particles",n}).onUpdateObj(function(n,i){var s=Te(t.particlesList),o=Te(t.particleLat),u=Te(t.particleLng),h=Te(t.particleAltitude);n.geometry.setAttribute("position",_s(s(i).map(function(d){return Object.values(xi(o(d),u(d),h(d)))}),3))})},update:function(e,t){["particlesData","particlesList","particleLat","particleLng","particleAltitude"].some(function(u){return t.hasOwnProperty(u)})&&e.dataMapper.digest(e.particlesData);var n=Te(e.particlesColor),i=Te(e.particlesSize),s=Te(e.particlesSizeAttenuation),o=Te(e.particlesTexture);e.dataMapper.entries().forEach(function(u){var h=un(u,2),d=h[0],m=h[1];if(m.material.size=i(d),m.material.sizeAttenuation=s(d),e.particlesTexture)m.material.color=new Nl.Color(16777215),m.material.transparent=!1,m.material.alphaTest=.5,m.material.map=o(d);else{var y=n(d),x=Vi(y);m.material.color=new Nl.Color(vs(y)),m.material.transparent=x<1,m.material.opacity=x,m.material.alphaTest=0}})}}),Yz=window.THREE?window.THREE:{BufferGeometry:bi},Kz=(function(r){function e(){var t,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:32;i2(this,e),t=r2(this,e),t.type="CircleLineGeometry",t.parameters={radius:n,segmentCount:i};for(var s=[],o=0;o<=i;o++){var u=(o/i-.25)*Math.PI*2;s.push({x:Math.cos(u)*n,y:Math.sin(u)*n,z:0})}return t.setFromPoints(s),t}return o2(e,r),s2(e)})(Yz.BufferGeometry),lA=window.THREE?window.THREE:{Color:Un,Group:xs,Line:$d,LineBasicMaterial:_1,Vector3:Re},Zz=LA.default||LA,mx=dr({props:{ringsData:{default:[]},ringLat:{default:"lat"},ringLng:{default:"lng"},ringAltitude:{default:.0015},ringColor:{default:function(){return"#ffffaa"},triggerUpdate:!1},ringResolution:{default:64,triggerUpdate:!1},ringMaxRadius:{default:2,triggerUpdate:!1},ringPropagationSpeed:{default:1,triggerUpdate:!1},ringRepeatPeriod:{default:700,triggerUpdate:!1}},methods:{pauseAnimation:function(e){var t;(t=e.ticker)===null||t===void 0||t.pause()},resumeAnimation:function(e){var t;(t=e.ticker)===null||t===void 0||t.resume()},_destructor:function(e){var t;(t=e.ticker)===null||t===void 0||t.dispose()}},init:function(e,t,n){var i=n.tweenGroup;Zt(e),t.scene=e,t.tweenGroup=i,t.dataMapper=new qr(e,{objBindAttr:"__threeObjRing",removeDelay:3e4}).onCreateObj(function(){var s=new lA.Group;return s.__globeObjType="ring",s}),t.ticker=new Zz,t.ticker.onTick.add(function(s){if(t.ringsData.length){var o=Te(t.ringColor),u=Te(t.ringAltitude),h=Te(t.ringMaxRadius),d=Te(t.ringPropagationSpeed),m=Te(t.ringRepeatPeriod);t.dataMapper.entries().filter(function(y){var x=un(y,2),b=x[1];return b}).forEach(function(y){var x=un(y,2),b=x[0],T=x[1];if((T.__nextRingTime||0)<=s){var M=m(b)/1e3;T.__nextRingTime=s+(M<=0?1/0:M);var N=new lA.Line(new Kz(1,t.ringResolution),new lA.LineBasicMaterial),C=o(b),B=C instanceof Array||C instanceof Function,P;B?C instanceof Array?(P=$s().domain(C.map(function(W,K){return K/(C.length-1)})).range(C),N.material.transparent=C.some(function(W){return Vi(W)<1})):(P=C,N.material.transparent=!0):(N.material.color=new lA.Color(vs(C)),Bz(N.material,Vi(C)));var I=rn*(1+u(b)),D=h(b),q=D*Math.PI/180,O=d(b),k=O<=0,z=function(K){var Z=K.t,se=(k?1-Z:Z)*q;if(N.scale.x=N.scale.y=I*Math.sin(se),N.position.z=I*(1-Math.cos(se)),B){var Y=P(Z);N.material.color=new lA.Color(vs(Y)),N.material.transparent&&(N.material.opacity=Vi(Y))}};if(O===0)z({t:0}),T.add(N);else{var X=Math.abs(D/O)*1e3;t.tweenGroup.add(new Yr({t:0}).to({t:1},X).onUpdate(z).onStart(function(){return T.add(N)}).onComplete(function(){T.remove(N),F3(N)}).start())}}})}})},update:function(e){var t=Te(e.ringLat),n=Te(e.ringLng),i=Te(e.ringAltitude),s=e.scene.localToWorld(new lA.Vector3(0,0,0));e.dataMapper.onUpdateObj(function(o,u){var h=t(u),d=n(u),m=i(u);Object.assign(o.position,xi(h,d,m)),o.lookAt(s)}).digest(e.ringsData)}}),Jz={0:{x_min:73,x_max:715,ha:792,o:"m 394 -29 q 153 129 242 -29 q 73 479 73 272 q 152 829 73 687 q 394 989 241 989 q 634 829 545 989 q 715 479 715 684 q 635 129 715 270 q 394 -29 546 -29 m 394 89 q 546 211 489 89 q 598 479 598 322 q 548 748 598 640 q 394 871 491 871 q 241 748 298 871 q 190 479 190 637 q 239 211 190 319 q 394 89 296 89 "},1:{x_min:215.671875,x_max:574,ha:792,o:"m 574 0 l 442 0 l 442 697 l 215 697 l 215 796 q 386 833 330 796 q 475 986 447 875 l 574 986 l 574 0 "},2:{x_min:59,x_max:731,ha:792,o:"m 731 0 l 59 0 q 197 314 59 188 q 457 487 199 315 q 598 691 598 580 q 543 819 598 772 q 411 867 488 867 q 272 811 328 867 q 209 630 209 747 l 81 630 q 182 901 81 805 q 408 986 271 986 q 629 909 536 986 q 731 694 731 826 q 613 449 731 541 q 378 316 495 383 q 201 122 235 234 l 731 122 l 731 0 "},3:{x_min:54,x_max:737,ha:792,o:"m 737 284 q 635 55 737 141 q 399 -25 541 -25 q 156 52 248 -25 q 54 308 54 140 l 185 308 q 245 147 185 202 q 395 96 302 96 q 539 140 484 96 q 602 280 602 190 q 510 429 602 390 q 324 454 451 454 l 324 565 q 487 584 441 565 q 565 719 565 617 q 515 835 565 791 q 395 879 466 879 q 255 824 307 879 q 203 661 203 769 l 78 661 q 166 909 78 822 q 387 992 250 992 q 603 921 513 992 q 701 723 701 844 q 669 607 701 656 q 578 524 637 558 q 696 434 655 499 q 737 284 737 369 "},4:{x_min:48,x_max:742.453125,ha:792,o:"m 742 243 l 602 243 l 602 0 l 476 0 l 476 243 l 48 243 l 48 368 l 476 958 l 602 958 l 602 354 l 742 354 l 742 243 m 476 354 l 476 792 l 162 354 l 476 354 "},5:{x_min:54.171875,x_max:738,ha:792,o:"m 738 314 q 626 60 738 153 q 382 -23 526 -23 q 155 47 248 -23 q 54 256 54 125 l 183 256 q 259 132 204 174 q 382 91 314 91 q 533 149 471 91 q 602 314 602 213 q 538 469 602 411 q 386 528 475 528 q 284 506 332 528 q 197 439 237 484 l 81 439 l 159 958 l 684 958 l 684 840 l 254 840 l 214 579 q 306 627 258 612 q 407 643 354 643 q 636 552 540 643 q 738 314 738 457 "},6:{x_min:53,x_max:739,ha:792,o:"m 739 312 q 633 62 739 162 q 400 -31 534 -31 q 162 78 257 -31 q 53 439 53 206 q 178 859 53 712 q 441 986 284 986 q 643 912 559 986 q 732 713 732 833 l 601 713 q 544 830 594 786 q 426 875 494 875 q 268 793 331 875 q 193 517 193 697 q 301 597 240 570 q 427 624 362 624 q 643 540 552 624 q 739 312 739 451 m 603 298 q 540 461 603 400 q 404 516 484 516 q 268 461 323 516 q 207 300 207 401 q 269 137 207 198 q 405 83 325 83 q 541 137 486 83 q 603 298 603 197 "},7:{x_min:58.71875,x_max:730.953125,ha:792,o:"m 730 839 q 469 448 560 641 q 335 0 378 255 l 192 0 q 328 441 235 252 q 593 830 421 630 l 58 830 l 58 958 l 730 958 l 730 839 "},8:{x_min:55,x_max:736,ha:792,o:"m 571 527 q 694 424 652 491 q 736 280 736 358 q 648 71 736 158 q 395 -26 551 -26 q 142 69 238 -26 q 55 279 55 157 q 96 425 55 359 q 220 527 138 491 q 120 615 153 562 q 88 726 88 668 q 171 904 88 827 q 395 986 261 986 q 618 905 529 986 q 702 727 702 830 q 670 616 702 667 q 571 527 638 565 m 394 565 q 519 610 475 565 q 563 717 563 655 q 521 823 563 781 q 392 872 474 872 q 265 824 312 872 q 224 720 224 783 q 265 613 224 656 q 394 565 312 565 m 395 91 q 545 150 488 91 q 597 280 597 204 q 546 408 597 355 q 395 465 492 465 q 244 408 299 465 q 194 280 194 356 q 244 150 194 203 q 395 91 299 91 "},9:{x_min:53,x_max:739,ha:792,o:"m 739 524 q 619 94 739 241 q 362 -32 516 -32 q 150 47 242 -32 q 59 244 59 126 l 191 244 q 246 129 191 176 q 373 82 301 82 q 526 161 466 82 q 597 440 597 255 q 363 334 501 334 q 130 432 216 334 q 53 650 53 521 q 134 880 53 786 q 383 986 226 986 q 659 841 566 986 q 739 524 739 719 m 388 449 q 535 514 480 449 q 585 658 585 573 q 535 805 585 744 q 388 873 480 873 q 242 809 294 873 q 191 658 191 745 q 239 514 191 572 q 388 449 292 449 "},ο:{x_min:0,x_max:712,ha:815,o:"m 356 -25 q 96 88 192 -25 q 0 368 0 201 q 92 642 0 533 q 356 761 192 761 q 617 644 517 761 q 712 368 712 533 q 619 91 712 201 q 356 -25 520 -25 m 356 85 q 527 175 465 85 q 583 369 583 255 q 528 562 583 484 q 356 651 466 651 q 189 560 250 651 q 135 369 135 481 q 187 177 135 257 q 356 85 250 85 "},S:{x_min:0,x_max:788,ha:890,o:"m 788 291 q 662 54 788 144 q 397 -26 550 -26 q 116 68 226 -26 q 0 337 0 168 l 131 337 q 200 152 131 220 q 384 85 269 85 q 557 129 479 85 q 650 270 650 183 q 490 429 650 379 q 194 513 341 470 q 33 739 33 584 q 142 964 33 881 q 388 1041 242 1041 q 644 957 543 1041 q 756 716 756 867 l 625 716 q 561 874 625 816 q 395 933 497 933 q 243 891 309 933 q 164 759 164 841 q 325 609 164 656 q 625 526 475 568 q 788 291 788 454 "},"¦":{x_min:343,x_max:449,ha:792,o:"m 449 462 l 343 462 l 343 986 l 449 986 l 449 462 m 449 -242 l 343 -242 l 343 280 l 449 280 l 449 -242 "},"/":{x_min:183.25,x_max:608.328125,ha:792,o:"m 608 1041 l 266 -129 l 183 -129 l 520 1041 l 608 1041 "},Τ:{x_min:-.4375,x_max:777.453125,ha:839,o:"m 777 893 l 458 893 l 458 0 l 319 0 l 319 892 l 0 892 l 0 1013 l 777 1013 l 777 893 "},y:{x_min:0,x_max:684.78125,ha:771,o:"m 684 738 l 388 -83 q 311 -216 356 -167 q 173 -279 252 -279 q 97 -266 133 -279 l 97 -149 q 132 -155 109 -151 q 168 -160 155 -160 q 240 -114 213 -160 q 274 -26 248 -98 l 0 738 l 137 737 l 341 139 l 548 737 l 684 738 "},Π:{x_min:0,x_max:803,ha:917,o:"m 803 0 l 667 0 l 667 886 l 140 886 l 140 0 l 0 0 l 0 1012 l 803 1012 l 803 0 "},ΐ:{x_min:-111,x_max:339,ha:361,o:"m 339 800 l 229 800 l 229 925 l 339 925 l 339 800 m -1 800 l -111 800 l -111 925 l -1 925 l -1 800 m 284 3 q 233 -10 258 -5 q 182 -15 207 -15 q 85 26 119 -15 q 42 200 42 79 l 42 737 l 167 737 l 168 215 q 172 141 168 157 q 226 101 183 101 q 248 103 239 101 q 284 112 257 104 l 284 3 m 302 1040 l 113 819 l 30 819 l 165 1040 l 302 1040 "},g:{x_min:0,x_max:686,ha:838,o:"m 686 34 q 586 -213 686 -121 q 331 -306 487 -306 q 131 -252 216 -306 q 31 -84 31 -190 l 155 -84 q 228 -174 166 -138 q 345 -207 284 -207 q 514 -109 454 -207 q 564 89 564 -27 q 461 6 521 36 q 335 -23 401 -23 q 88 100 184 -23 q 0 370 0 215 q 87 634 0 522 q 330 758 183 758 q 457 728 398 758 q 564 644 515 699 l 564 737 l 686 737 l 686 34 m 582 367 q 529 560 582 481 q 358 652 468 652 q 189 561 250 652 q 135 369 135 482 q 189 176 135 255 q 361 85 251 85 q 529 176 468 85 q 582 367 582 255 "},"²":{x_min:0,x_max:442,ha:539,o:"m 442 383 l 0 383 q 91 566 0 492 q 260 668 176 617 q 354 798 354 727 q 315 875 354 845 q 227 905 277 905 q 136 869 173 905 q 99 761 99 833 l 14 761 q 82 922 14 864 q 232 974 141 974 q 379 926 316 974 q 442 797 442 878 q 351 635 442 704 q 183 539 321 611 q 92 455 92 491 l 442 455 l 442 383 "},"–":{x_min:0,x_max:705.5625,ha:803,o:"m 705 334 l 0 334 l 0 410 l 705 410 l 705 334 "},Κ:{x_min:0,x_max:819.5625,ha:893,o:"m 819 0 l 650 0 l 294 509 l 139 356 l 139 0 l 0 0 l 0 1013 l 139 1013 l 139 526 l 626 1013 l 809 1013 l 395 600 l 819 0 "},ƒ:{x_min:-46.265625,x_max:392,ha:513,o:"m 392 651 l 259 651 l 79 -279 l -46 -278 l 134 651 l 14 651 l 14 751 l 135 751 q 151 948 135 900 q 304 1041 185 1041 q 334 1040 319 1041 q 392 1034 348 1039 l 392 922 q 337 931 360 931 q 271 883 287 931 q 260 793 260 853 l 260 751 l 392 751 l 392 651 "},e:{x_min:0,x_max:714,ha:813,o:"m 714 326 l 140 326 q 200 157 140 227 q 359 87 260 87 q 488 130 431 87 q 561 245 545 174 l 697 245 q 577 48 670 123 q 358 -26 484 -26 q 97 85 195 -26 q 0 363 0 197 q 94 642 0 529 q 358 765 195 765 q 626 627 529 765 q 714 326 714 503 m 576 429 q 507 583 564 522 q 355 650 445 650 q 206 583 266 650 q 140 429 152 522 l 576 429 "},ό:{x_min:0,x_max:712,ha:815,o:"m 356 -25 q 94 91 194 -25 q 0 368 0 202 q 92 642 0 533 q 356 761 192 761 q 617 644 517 761 q 712 368 712 533 q 619 91 712 201 q 356 -25 520 -25 m 356 85 q 527 175 465 85 q 583 369 583 255 q 528 562 583 484 q 356 651 466 651 q 189 560 250 651 q 135 369 135 481 q 187 177 135 257 q 356 85 250 85 m 576 1040 l 387 819 l 303 819 l 438 1040 l 576 1040 "},J:{x_min:0,x_max:588,ha:699,o:"m 588 279 q 287 -26 588 -26 q 58 73 126 -26 q 0 327 0 158 l 133 327 q 160 172 133 227 q 288 96 198 96 q 426 171 391 96 q 449 336 449 219 l 449 1013 l 588 1013 l 588 279 "},"»":{x_min:-1,x_max:503,ha:601,o:"m 503 302 l 280 136 l 281 256 l 429 373 l 281 486 l 280 608 l 503 440 l 503 302 m 221 302 l 0 136 l 0 255 l 145 372 l 0 486 l -1 608 l 221 440 l 221 302 "},"©":{x_min:-3,x_max:1008,ha:1106,o:"m 502 -7 q 123 151 263 -7 q -3 501 -3 294 q 123 851 -3 706 q 502 1011 263 1011 q 881 851 739 1011 q 1008 501 1008 708 q 883 151 1008 292 q 502 -7 744 -7 m 502 60 q 830 197 709 60 q 940 501 940 322 q 831 805 940 681 q 502 944 709 944 q 174 805 296 944 q 65 501 65 680 q 173 197 65 320 q 502 60 294 60 m 741 394 q 661 246 731 302 q 496 190 591 190 q 294 285 369 190 q 228 497 228 370 q 295 714 228 625 q 499 813 370 813 q 656 762 588 813 q 733 625 724 711 l 634 625 q 589 704 629 673 q 498 735 550 735 q 377 666 421 735 q 334 504 334 597 q 374 340 334 408 q 490 272 415 272 q 589 304 549 272 q 638 394 628 337 l 741 394 "},ώ:{x_min:0,x_max:922,ha:1030,o:"m 687 1040 l 498 819 l 415 819 l 549 1040 l 687 1040 m 922 339 q 856 97 922 203 q 650 -26 780 -26 q 538 9 587 -26 q 461 103 489 44 q 387 12 436 46 q 277 -22 339 -22 q 69 97 147 -22 q 0 338 0 202 q 45 551 0 444 q 161 737 84 643 l 302 737 q 175 552 219 647 q 124 336 124 446 q 155 179 124 248 q 275 88 197 88 q 375 163 341 88 q 400 294 400 219 l 400 572 l 524 572 l 524 294 q 561 135 524 192 q 643 88 591 88 q 762 182 719 88 q 797 341 797 257 q 745 555 797 450 q 619 737 705 637 l 760 737 q 874 551 835 640 q 922 339 922 444 "},"^":{x_min:193.0625,x_max:598.609375,ha:792,o:"m 598 772 l 515 772 l 395 931 l 277 772 l 193 772 l 326 1013 l 462 1013 l 598 772 "},"«":{x_min:0,x_max:507.203125,ha:604,o:"m 506 136 l 284 302 l 284 440 l 506 608 l 507 485 l 360 371 l 506 255 l 506 136 m 222 136 l 0 302 l 0 440 l 222 608 l 221 486 l 73 373 l 222 256 l 222 136 "},D:{x_min:0,x_max:828,ha:935,o:"m 389 1013 q 714 867 593 1013 q 828 521 828 729 q 712 161 828 309 q 382 0 587 0 l 0 0 l 0 1013 l 389 1013 m 376 124 q 607 247 523 124 q 681 510 681 355 q 607 771 681 662 q 376 896 522 896 l 139 896 l 139 124 l 376 124 "},"∙":{x_min:0,x_max:142,ha:239,o:"m 142 585 l 0 585 l 0 738 l 142 738 l 142 585 "},ÿ:{x_min:0,x_max:47,ha:125,o:"m 47 3 q 37 -7 47 -7 q 28 0 30 -7 q 39 -4 32 -4 q 45 3 45 -1 l 37 0 q 28 9 28 0 q 39 19 28 19 l 47 16 l 47 19 l 47 3 m 37 1 q 44 8 44 1 q 37 16 44 16 q 30 8 30 16 q 37 1 30 1 m 26 1 l 23 22 l 14 0 l 3 22 l 3 3 l 0 25 l 13 1 l 22 25 l 26 1 "},w:{x_min:0,x_max:1009.71875,ha:1100,o:"m 1009 738 l 783 0 l 658 0 l 501 567 l 345 0 l 222 0 l 0 738 l 130 738 l 284 174 l 432 737 l 576 738 l 721 173 l 881 737 l 1009 738 "},$:{x_min:0,x_max:700,ha:793,o:"m 664 717 l 542 717 q 490 825 531 785 q 381 872 450 865 l 381 551 q 620 446 540 522 q 700 241 700 370 q 618 45 700 116 q 381 -25 536 -25 l 381 -152 l 307 -152 l 307 -25 q 81 62 162 -25 q 0 297 0 149 l 124 297 q 169 146 124 204 q 307 81 215 89 l 307 441 q 80 536 148 469 q 13 725 13 603 q 96 910 13 839 q 307 982 180 982 l 307 1077 l 381 1077 l 381 982 q 574 917 494 982 q 664 717 664 845 m 307 565 l 307 872 q 187 831 233 872 q 142 724 142 791 q 180 618 142 656 q 307 565 218 580 m 381 76 q 562 237 562 96 q 517 361 562 313 q 381 423 472 409 l 381 76 "},"\\":{x_min:-.015625,x_max:425.0625,ha:522,o:"m 425 -129 l 337 -129 l 0 1041 l 83 1041 l 425 -129 "},µ:{x_min:0,x_max:697.21875,ha:747,o:"m 697 -4 q 629 -14 658 -14 q 498 97 513 -14 q 422 9 470 41 q 313 -23 374 -23 q 207 4 258 -23 q 119 81 156 32 l 119 -278 l 0 -278 l 0 738 l 124 738 l 124 343 q 165 173 124 246 q 308 83 216 83 q 452 178 402 83 q 493 359 493 255 l 493 738 l 617 738 l 617 214 q 623 136 617 160 q 673 92 637 92 q 697 96 684 92 l 697 -4 "},Ι:{x_min:42,x_max:181,ha:297,o:"m 181 0 l 42 0 l 42 1013 l 181 1013 l 181 0 "},Ύ:{x_min:0,x_max:1144.5,ha:1214,o:"m 1144 1012 l 807 416 l 807 0 l 667 0 l 667 416 l 325 1012 l 465 1012 l 736 533 l 1004 1012 l 1144 1012 m 277 1040 l 83 799 l 0 799 l 140 1040 l 277 1040 "},"’":{x_min:0,x_max:139,ha:236,o:"m 139 851 q 102 737 139 784 q 0 669 65 690 l 0 734 q 59 787 42 741 q 72 873 72 821 l 0 873 l 0 1013 l 139 1013 l 139 851 "},Ν:{x_min:0,x_max:801,ha:915,o:"m 801 0 l 651 0 l 131 822 l 131 0 l 0 0 l 0 1013 l 151 1013 l 670 191 l 670 1013 l 801 1013 l 801 0 "},"-":{x_min:8.71875,x_max:350.390625,ha:478,o:"m 350 317 l 8 317 l 8 428 l 350 428 l 350 317 "},Q:{x_min:0,x_max:968,ha:1072,o:"m 954 5 l 887 -79 l 744 35 q 622 -11 687 2 q 483 -26 556 -26 q 127 130 262 -26 q 0 504 0 279 q 127 880 0 728 q 484 1041 262 1041 q 841 884 708 1041 q 968 507 968 735 q 933 293 968 398 q 832 104 899 188 l 954 5 m 723 191 q 802 330 777 248 q 828 499 828 412 q 744 790 828 673 q 483 922 650 922 q 228 791 322 922 q 142 505 142 673 q 227 221 142 337 q 487 91 323 91 q 632 123 566 91 l 520 215 l 587 301 l 723 191 "},ς:{x_min:1,x_max:676.28125,ha:740,o:"m 676 460 l 551 460 q 498 595 542 546 q 365 651 448 651 q 199 578 263 651 q 136 401 136 505 q 266 178 136 241 q 508 106 387 142 q 640 -50 640 62 q 625 -158 640 -105 q 583 -278 611 -211 l 465 -278 q 498 -182 490 -211 q 515 -80 515 -126 q 381 12 515 -15 q 134 91 197 51 q 1 388 1 179 q 100 651 1 542 q 354 761 199 761 q 587 680 498 761 q 676 460 676 599 "},M:{x_min:0,x_max:954,ha:1067,o:"m 954 0 l 819 0 l 819 869 l 537 0 l 405 0 l 128 866 l 128 0 l 0 0 l 0 1013 l 200 1013 l 472 160 l 757 1013 l 954 1013 l 954 0 "},Ψ:{x_min:0,x_max:1006,ha:1094,o:"m 1006 678 q 914 319 1006 429 q 571 200 814 200 l 571 0 l 433 0 l 433 200 q 92 319 194 200 q 0 678 0 429 l 0 1013 l 139 1013 l 139 679 q 191 417 139 492 q 433 326 255 326 l 433 1013 l 571 1013 l 571 326 l 580 326 q 813 423 747 326 q 868 679 868 502 l 868 1013 l 1006 1013 l 1006 678 "},C:{x_min:0,x_max:886,ha:944,o:"m 886 379 q 760 87 886 201 q 455 -26 634 -26 q 112 136 236 -26 q 0 509 0 283 q 118 882 0 737 q 469 1041 245 1041 q 748 955 630 1041 q 879 708 879 859 l 745 708 q 649 862 724 805 q 473 920 573 920 q 219 791 312 920 q 136 509 136 675 q 217 229 136 344 q 470 99 311 99 q 672 179 591 99 q 753 379 753 259 l 886 379 "},"!":{x_min:0,x_max:138,ha:236,o:"m 138 684 q 116 409 138 629 q 105 244 105 299 l 33 244 q 16 465 33 313 q 0 684 0 616 l 0 1013 l 138 1013 l 138 684 m 138 0 l 0 0 l 0 151 l 138 151 l 138 0 "},"{":{x_min:0,x_max:480.5625,ha:578,o:"m 480 -286 q 237 -213 303 -286 q 187 -45 187 -159 q 194 48 187 -15 q 201 141 201 112 q 164 264 201 225 q 0 314 118 314 l 0 417 q 164 471 119 417 q 201 605 201 514 q 199 665 201 644 q 193 772 193 769 q 241 941 193 887 q 480 1015 308 1015 l 480 915 q 336 866 375 915 q 306 742 306 828 q 310 662 306 717 q 314 577 314 606 q 288 452 314 500 q 176 365 256 391 q 289 275 257 337 q 314 143 314 226 q 313 84 314 107 q 310 -11 310 -5 q 339 -131 310 -94 q 480 -182 377 -182 l 480 -286 "},X:{x_min:-.015625,x_max:854.15625,ha:940,o:"m 854 0 l 683 0 l 423 409 l 166 0 l 0 0 l 347 519 l 18 1013 l 186 1013 l 428 637 l 675 1013 l 836 1013 l 504 520 l 854 0 "},"#":{x_min:0,x_max:963.890625,ha:1061,o:"m 963 690 l 927 590 l 719 590 l 655 410 l 876 410 l 840 310 l 618 310 l 508 -3 l 393 -2 l 506 309 l 329 310 l 215 -2 l 102 -3 l 212 310 l 0 310 l 36 410 l 248 409 l 312 590 l 86 590 l 120 690 l 347 690 l 459 1006 l 573 1006 l 462 690 l 640 690 l 751 1006 l 865 1006 l 754 690 l 963 690 m 606 590 l 425 590 l 362 410 l 543 410 l 606 590 "},ι:{x_min:42,x_max:284,ha:361,o:"m 284 3 q 233 -10 258 -5 q 182 -15 207 -15 q 85 26 119 -15 q 42 200 42 79 l 42 738 l 167 738 l 168 215 q 172 141 168 157 q 226 101 183 101 q 248 103 239 101 q 284 112 257 104 l 284 3 "},Ά:{x_min:0,x_max:906.953125,ha:982,o:"m 283 1040 l 88 799 l 5 799 l 145 1040 l 283 1040 m 906 0 l 756 0 l 650 303 l 251 303 l 143 0 l 0 0 l 376 1012 l 529 1012 l 906 0 m 609 421 l 452 866 l 293 421 l 609 421 "},")":{x_min:0,x_max:318,ha:415,o:"m 318 365 q 257 25 318 191 q 87 -290 197 -141 l 0 -290 q 140 21 93 -128 q 193 360 193 189 q 141 704 193 537 q 0 1024 97 850 l 87 1024 q 257 706 197 871 q 318 365 318 542 "},ε:{x_min:0,x_max:634.71875,ha:714,o:"m 634 234 q 527 38 634 110 q 300 -25 433 -25 q 98 29 183 -25 q 0 204 0 93 q 37 314 0 265 q 128 390 67 353 q 56 460 82 419 q 26 555 26 505 q 114 712 26 654 q 295 763 191 763 q 499 700 416 763 q 589 515 589 631 l 478 515 q 419 618 464 580 q 307 657 374 657 q 207 630 253 657 q 151 547 151 598 q 238 445 151 469 q 389 434 280 434 l 389 331 l 349 331 q 206 315 255 331 q 125 210 125 287 q 183 107 125 145 q 302 76 233 76 q 436 117 379 76 q 509 234 493 159 l 634 234 "},Δ:{x_min:0,x_max:952.78125,ha:1028,o:"m 952 0 l 0 0 l 400 1013 l 551 1013 l 952 0 m 762 124 l 476 867 l 187 124 l 762 124 "},"}":{x_min:0,x_max:481,ha:578,o:"m 481 314 q 318 262 364 314 q 282 136 282 222 q 284 65 282 97 q 293 -58 293 -48 q 241 -217 293 -166 q 0 -286 174 -286 l 0 -182 q 143 -130 105 -182 q 171 -2 171 -93 q 168 81 171 22 q 165 144 165 140 q 188 275 165 229 q 306 365 220 339 q 191 455 224 391 q 165 588 165 505 q 168 681 165 624 q 171 742 171 737 q 141 865 171 827 q 0 915 102 915 l 0 1015 q 243 942 176 1015 q 293 773 293 888 q 287 675 293 741 q 282 590 282 608 q 318 466 282 505 q 481 417 364 417 l 481 314 "},"‰":{x_min:-3,x_max:1672,ha:1821,o:"m 846 0 q 664 76 732 0 q 603 244 603 145 q 662 412 603 344 q 846 489 729 489 q 1027 412 959 489 q 1089 244 1089 343 q 1029 76 1089 144 q 846 0 962 0 m 845 103 q 945 143 910 103 q 981 243 981 184 q 947 340 981 301 q 845 385 910 385 q 745 342 782 385 q 709 243 709 300 q 742 147 709 186 q 845 103 781 103 m 888 986 l 284 -25 l 199 -25 l 803 986 l 888 986 m 241 468 q 58 545 126 468 q -3 715 -3 615 q 56 881 -3 813 q 238 958 124 958 q 421 881 353 958 q 483 712 483 813 q 423 544 483 612 q 241 468 356 468 m 241 855 q 137 811 175 855 q 100 710 100 768 q 136 612 100 653 q 240 572 172 572 q 344 614 306 572 q 382 713 382 656 q 347 810 382 771 q 241 855 308 855 m 1428 0 q 1246 76 1314 0 q 1185 244 1185 145 q 1244 412 1185 344 q 1428 489 1311 489 q 1610 412 1542 489 q 1672 244 1672 343 q 1612 76 1672 144 q 1428 0 1545 0 m 1427 103 q 1528 143 1492 103 q 1564 243 1564 184 q 1530 340 1564 301 q 1427 385 1492 385 q 1327 342 1364 385 q 1291 243 1291 300 q 1324 147 1291 186 q 1427 103 1363 103 "},a:{x_min:0,x_max:698.609375,ha:794,o:"m 698 0 q 661 -12 679 -7 q 615 -17 643 -17 q 536 12 564 -17 q 500 96 508 41 q 384 6 456 37 q 236 -25 312 -25 q 65 31 130 -25 q 0 194 0 88 q 118 390 0 334 q 328 435 180 420 q 488 483 476 451 q 495 523 495 504 q 442 619 495 584 q 325 654 389 654 q 209 617 257 654 q 152 513 161 580 l 33 513 q 123 705 33 633 q 332 772 207 772 q 528 712 448 772 q 617 531 617 645 l 617 163 q 624 108 617 126 q 664 90 632 90 l 698 94 l 698 0 m 491 262 l 491 372 q 272 329 350 347 q 128 201 128 294 q 166 113 128 144 q 264 83 205 83 q 414 130 346 83 q 491 262 491 183 "},"—":{x_min:0,x_max:941.671875,ha:1039,o:"m 941 334 l 0 334 l 0 410 l 941 410 l 941 334 "},"=":{x_min:8.71875,x_max:780.953125,ha:792,o:"m 780 510 l 8 510 l 8 606 l 780 606 l 780 510 m 780 235 l 8 235 l 8 332 l 780 332 l 780 235 "},N:{x_min:0,x_max:801,ha:914,o:"m 801 0 l 651 0 l 131 823 l 131 0 l 0 0 l 0 1013 l 151 1013 l 670 193 l 670 1013 l 801 1013 l 801 0 "},ρ:{x_min:0,x_max:712,ha:797,o:"m 712 369 q 620 94 712 207 q 362 -26 521 -26 q 230 2 292 -26 q 119 83 167 30 l 119 -278 l 0 -278 l 0 362 q 91 643 0 531 q 355 764 190 764 q 617 647 517 764 q 712 369 712 536 m 583 366 q 530 559 583 480 q 359 651 469 651 q 190 562 252 651 q 135 370 135 483 q 189 176 135 257 q 359 85 250 85 q 528 175 466 85 q 583 366 583 254 "},"¯":{x_min:0,x_max:941.671875,ha:938,o:"m 941 1033 l 0 1033 l 0 1109 l 941 1109 l 941 1033 "},Z:{x_min:0,x_max:779,ha:849,o:"m 779 0 l 0 0 l 0 113 l 621 896 l 40 896 l 40 1013 l 779 1013 l 778 887 l 171 124 l 779 124 l 779 0 "},u:{x_min:0,x_max:617,ha:729,o:"m 617 0 l 499 0 l 499 110 q 391 10 460 45 q 246 -25 322 -25 q 61 58 127 -25 q 0 258 0 136 l 0 738 l 125 738 l 125 284 q 156 148 125 202 q 273 82 197 82 q 433 165 369 82 q 493 340 493 243 l 493 738 l 617 738 l 617 0 "},k:{x_min:0,x_max:612.484375,ha:697,o:"m 612 738 l 338 465 l 608 0 l 469 0 l 251 382 l 121 251 l 121 0 l 0 0 l 0 1013 l 121 1013 l 121 402 l 456 738 l 612 738 "},Η:{x_min:0,x_max:803,ha:917,o:"m 803 0 l 667 0 l 667 475 l 140 475 l 140 0 l 0 0 l 0 1013 l 140 1013 l 140 599 l 667 599 l 667 1013 l 803 1013 l 803 0 "},Α:{x_min:0,x_max:906.953125,ha:985,o:"m 906 0 l 756 0 l 650 303 l 251 303 l 143 0 l 0 0 l 376 1013 l 529 1013 l 906 0 m 609 421 l 452 866 l 293 421 l 609 421 "},s:{x_min:0,x_max:604,ha:697,o:"m 604 217 q 501 36 604 104 q 292 -23 411 -23 q 86 43 166 -23 q 0 238 0 114 l 121 237 q 175 122 121 164 q 300 85 223 85 q 415 112 363 85 q 479 207 479 147 q 361 309 479 276 q 140 372 141 370 q 21 544 21 426 q 111 708 21 647 q 298 761 190 761 q 492 705 413 761 q 583 531 583 643 l 462 531 q 412 625 462 594 q 298 657 363 657 q 199 636 242 657 q 143 558 143 608 q 262 454 143 486 q 484 394 479 397 q 604 217 604 341 "},B:{x_min:0,x_max:778,ha:876,o:"m 580 546 q 724 469 670 535 q 778 311 778 403 q 673 83 778 171 q 432 0 575 0 l 0 0 l 0 1013 l 411 1013 q 629 957 541 1013 q 732 768 732 892 q 691 633 732 693 q 580 546 650 572 m 393 899 l 139 899 l 139 588 l 379 588 q 521 624 462 588 q 592 744 592 667 q 531 859 592 819 q 393 899 471 899 m 419 124 q 566 169 504 124 q 635 303 635 219 q 559 436 635 389 q 402 477 494 477 l 139 477 l 139 124 l 419 124 "},"…":{x_min:0,x_max:614,ha:708,o:"m 142 0 l 0 0 l 0 151 l 142 151 l 142 0 m 378 0 l 236 0 l 236 151 l 378 151 l 378 0 m 614 0 l 472 0 l 472 151 l 614 151 l 614 0 "},"?":{x_min:0,x_max:607,ha:704,o:"m 607 777 q 543 599 607 674 q 422 474 482 537 q 357 272 357 391 l 236 272 q 297 487 236 395 q 411 619 298 490 q 474 762 474 691 q 422 885 474 838 q 301 933 371 933 q 179 880 228 933 q 124 706 124 819 l 0 706 q 94 963 0 872 q 302 1044 177 1044 q 511 973 423 1044 q 607 777 607 895 m 370 0 l 230 0 l 230 151 l 370 151 l 370 0 "},H:{x_min:0,x_max:803,ha:915,o:"m 803 0 l 667 0 l 667 475 l 140 475 l 140 0 l 0 0 l 0 1013 l 140 1013 l 140 599 l 667 599 l 667 1013 l 803 1013 l 803 0 "},ν:{x_min:0,x_max:675,ha:761,o:"m 675 738 l 404 0 l 272 0 l 0 738 l 133 738 l 340 147 l 541 738 l 675 738 "},c:{x_min:1,x_max:701.390625,ha:775,o:"m 701 264 q 584 53 681 133 q 353 -26 487 -26 q 91 91 188 -26 q 1 370 1 201 q 92 645 1 537 q 353 761 190 761 q 572 688 479 761 q 690 493 666 615 l 556 493 q 487 606 545 562 q 356 650 428 650 q 186 563 246 650 q 134 372 134 487 q 188 179 134 258 q 359 88 250 88 q 492 136 437 88 q 566 264 548 185 l 701 264 "},"¶":{x_min:0,x_max:566.671875,ha:678,o:"m 21 892 l 52 892 l 98 761 l 145 892 l 176 892 l 178 741 l 157 741 l 157 867 l 108 741 l 88 741 l 40 871 l 40 741 l 21 741 l 21 892 m 308 854 l 308 731 q 252 691 308 691 q 227 691 240 691 q 207 696 213 695 l 207 712 l 253 706 q 288 733 288 706 l 288 763 q 244 741 279 741 q 193 797 193 741 q 261 860 193 860 q 287 860 273 860 q 308 854 302 855 m 288 842 l 263 843 q 213 796 213 843 q 248 756 213 756 q 288 796 288 756 l 288 842 m 566 988 l 502 988 l 502 -1 l 439 -1 l 439 988 l 317 988 l 317 -1 l 252 -1 l 252 602 q 81 653 155 602 q 0 805 0 711 q 101 989 0 918 q 309 1053 194 1053 l 566 1053 l 566 988 "},β:{x_min:0,x_max:660,ha:745,o:"m 471 550 q 610 450 561 522 q 660 280 660 378 q 578 64 660 151 q 367 -22 497 -22 q 239 5 299 -22 q 126 82 178 32 l 126 -278 l 0 -278 l 0 593 q 54 903 0 801 q 318 1042 127 1042 q 519 964 436 1042 q 603 771 603 887 q 567 644 603 701 q 471 550 532 586 m 337 79 q 476 138 418 79 q 535 279 535 198 q 427 437 535 386 q 226 477 344 477 l 226 583 q 398 620 329 583 q 486 762 486 668 q 435 884 486 833 q 312 935 384 935 q 169 861 219 935 q 126 698 126 797 l 126 362 q 170 169 126 242 q 337 79 224 79 "},Μ:{x_min:0,x_max:954,ha:1068,o:"m 954 0 l 819 0 l 819 868 l 537 0 l 405 0 l 128 865 l 128 0 l 0 0 l 0 1013 l 199 1013 l 472 158 l 758 1013 l 954 1013 l 954 0 "},Ό:{x_min:.109375,x_max:1120,ha:1217,o:"m 1120 505 q 994 132 1120 282 q 642 -29 861 -29 q 290 130 422 -29 q 167 505 167 280 q 294 883 167 730 q 650 1046 430 1046 q 999 882 868 1046 q 1120 505 1120 730 m 977 504 q 896 784 977 669 q 644 915 804 915 q 391 785 484 915 q 307 504 307 669 q 391 224 307 339 q 644 95 486 95 q 894 224 803 95 q 977 504 977 339 m 277 1040 l 83 799 l 0 799 l 140 1040 l 277 1040 "},Ή:{x_min:0,x_max:1158,ha:1275,o:"m 1158 0 l 1022 0 l 1022 475 l 496 475 l 496 0 l 356 0 l 356 1012 l 496 1012 l 496 599 l 1022 599 l 1022 1012 l 1158 1012 l 1158 0 m 277 1040 l 83 799 l 0 799 l 140 1040 l 277 1040 "},"•":{x_min:0,x_max:663.890625,ha:775,o:"m 663 529 q 566 293 663 391 q 331 196 469 196 q 97 294 194 196 q 0 529 0 393 q 96 763 0 665 q 331 861 193 861 q 566 763 469 861 q 663 529 663 665 "},"¥":{x_min:.1875,x_max:819.546875,ha:886,o:"m 563 561 l 697 561 l 696 487 l 520 487 l 482 416 l 482 380 l 697 380 l 695 308 l 482 308 l 482 0 l 342 0 l 342 308 l 125 308 l 125 380 l 342 380 l 342 417 l 303 487 l 125 487 l 125 561 l 258 561 l 0 1013 l 140 1013 l 411 533 l 679 1013 l 819 1013 l 563 561 "},"(":{x_min:0,x_max:318.0625,ha:415,o:"m 318 -290 l 230 -290 q 61 23 122 -142 q 0 365 0 190 q 62 712 0 540 q 230 1024 119 869 l 318 1024 q 175 705 219 853 q 125 360 125 542 q 176 22 125 187 q 318 -290 223 -127 "},U:{x_min:0,x_max:796,ha:904,o:"m 796 393 q 681 93 796 212 q 386 -25 566 -25 q 101 95 208 -25 q 0 393 0 211 l 0 1013 l 138 1013 l 138 391 q 204 191 138 270 q 394 107 276 107 q 586 191 512 107 q 656 391 656 270 l 656 1013 l 796 1013 l 796 393 "},γ:{x_min:.5,x_max:744.953125,ha:822,o:"m 744 737 l 463 54 l 463 -278 l 338 -278 l 338 54 l 154 495 q 104 597 124 569 q 13 651 67 651 l 0 651 l 0 751 l 39 753 q 168 711 121 753 q 242 594 207 676 l 403 208 l 617 737 l 744 737 "},α:{x_min:0,x_max:765.5625,ha:809,o:"m 765 -4 q 698 -14 726 -14 q 564 97 586 -14 q 466 7 525 40 q 337 -26 407 -26 q 88 98 186 -26 q 0 369 0 212 q 88 637 0 525 q 337 760 184 760 q 465 728 407 760 q 563 637 524 696 l 563 739 l 685 739 l 685 222 q 693 141 685 168 q 748 94 708 94 q 765 96 760 94 l 765 -4 m 584 371 q 531 562 584 485 q 360 653 470 653 q 192 566 254 653 q 135 379 135 489 q 186 181 135 261 q 358 84 247 84 q 528 176 465 84 q 584 371 584 260 "},F:{x_min:0,x_max:683.328125,ha:717,o:"m 683 888 l 140 888 l 140 583 l 613 583 l 613 458 l 140 458 l 140 0 l 0 0 l 0 1013 l 683 1013 l 683 888 "},"­":{x_min:0,x_max:705.5625,ha:803,o:"m 705 334 l 0 334 l 0 410 l 705 410 l 705 334 "},":":{x_min:0,x_max:142,ha:239,o:"m 142 585 l 0 585 l 0 738 l 142 738 l 142 585 m 142 0 l 0 0 l 0 151 l 142 151 l 142 0 "},Χ:{x_min:0,x_max:854.171875,ha:935,o:"m 854 0 l 683 0 l 423 409 l 166 0 l 0 0 l 347 519 l 18 1013 l 186 1013 l 427 637 l 675 1013 l 836 1013 l 504 521 l 854 0 "},"*":{x_min:116,x_max:674,ha:792,o:"m 674 768 l 475 713 l 610 544 l 517 477 l 394 652 l 272 478 l 178 544 l 314 713 l 116 766 l 153 876 l 341 812 l 342 1013 l 446 1013 l 446 811 l 635 874 l 674 768 "},"†":{x_min:0,x_max:777,ha:835,o:"m 458 804 l 777 804 l 777 683 l 458 683 l 458 0 l 319 0 l 319 681 l 0 683 l 0 804 l 319 804 l 319 1015 l 458 1013 l 458 804 "},"°":{x_min:0,x_max:347,ha:444,o:"m 173 802 q 43 856 91 802 q 0 977 0 905 q 45 1101 0 1049 q 173 1153 90 1153 q 303 1098 255 1153 q 347 977 347 1049 q 303 856 347 905 q 173 802 256 802 m 173 884 q 238 910 214 884 q 262 973 262 937 q 239 1038 262 1012 q 173 1064 217 1064 q 108 1037 132 1064 q 85 973 85 1010 q 108 910 85 937 q 173 884 132 884 "},V:{x_min:0,x_max:862.71875,ha:940,o:"m 862 1013 l 505 0 l 361 0 l 0 1013 l 143 1013 l 434 165 l 718 1012 l 862 1013 "},Ξ:{x_min:0,x_max:734.71875,ha:763,o:"m 723 889 l 9 889 l 9 1013 l 723 1013 l 723 889 m 673 463 l 61 463 l 61 589 l 673 589 l 673 463 m 734 0 l 0 0 l 0 124 l 734 124 l 734 0 "}," ":{x_min:0,x_max:0,ha:853},Ϋ:{x_min:.328125,x_max:819.515625,ha:889,o:"m 588 1046 l 460 1046 l 460 1189 l 588 1189 l 588 1046 m 360 1046 l 232 1046 l 232 1189 l 360 1189 l 360 1046 m 819 1012 l 482 416 l 482 0 l 342 0 l 342 416 l 0 1012 l 140 1012 l 411 533 l 679 1012 l 819 1012 "},"”":{x_min:0,x_max:347,ha:454,o:"m 139 851 q 102 737 139 784 q 0 669 65 690 l 0 734 q 59 787 42 741 q 72 873 72 821 l 0 873 l 0 1013 l 139 1013 l 139 851 m 347 851 q 310 737 347 784 q 208 669 273 690 l 208 734 q 267 787 250 741 q 280 873 280 821 l 208 873 l 208 1013 l 347 1013 l 347 851 "},"@":{x_min:0,x_max:1260,ha:1357,o:"m 1098 -45 q 877 -160 1001 -117 q 633 -203 752 -203 q 155 -29 327 -203 q 0 360 0 127 q 176 802 0 616 q 687 1008 372 1008 q 1123 854 969 1008 q 1260 517 1260 718 q 1155 216 1260 341 q 868 82 1044 82 q 772 106 801 82 q 737 202 737 135 q 647 113 700 144 q 527 82 594 82 q 367 147 420 82 q 314 312 314 212 q 401 565 314 452 q 639 690 498 690 q 810 588 760 690 l 849 668 l 938 668 q 877 441 900 532 q 833 226 833 268 q 853 182 833 198 q 902 167 873 167 q 1088 272 1012 167 q 1159 512 1159 372 q 1051 793 1159 681 q 687 925 925 925 q 248 747 415 925 q 97 361 97 586 q 226 26 97 159 q 627 -122 370 -122 q 856 -87 737 -122 q 1061 8 976 -53 l 1098 -45 m 786 488 q 738 580 777 545 q 643 615 700 615 q 483 517 548 615 q 425 322 425 430 q 457 203 425 250 q 552 156 490 156 q 722 273 665 156 q 786 488 738 309 "},Ί:{x_min:0,x_max:499,ha:613,o:"m 277 1040 l 83 799 l 0 799 l 140 1040 l 277 1040 m 499 0 l 360 0 l 360 1012 l 499 1012 l 499 0 "},i:{x_min:14,x_max:136,ha:275,o:"m 136 873 l 14 873 l 14 1013 l 136 1013 l 136 873 m 136 0 l 14 0 l 14 737 l 136 737 l 136 0 "},Β:{x_min:0,x_max:778,ha:877,o:"m 580 545 q 724 468 671 534 q 778 310 778 402 q 673 83 778 170 q 432 0 575 0 l 0 0 l 0 1013 l 411 1013 q 629 957 541 1013 q 732 768 732 891 q 691 632 732 692 q 580 545 650 571 m 393 899 l 139 899 l 139 587 l 379 587 q 521 623 462 587 q 592 744 592 666 q 531 859 592 819 q 393 899 471 899 m 419 124 q 566 169 504 124 q 635 302 635 219 q 559 435 635 388 q 402 476 494 476 l 139 476 l 139 124 l 419 124 "},υ:{x_min:0,x_max:617,ha:725,o:"m 617 352 q 540 94 617 199 q 308 -24 455 -24 q 76 94 161 -24 q 0 352 0 199 l 0 739 l 126 739 l 126 355 q 169 185 126 257 q 312 98 220 98 q 451 185 402 98 q 492 355 492 257 l 492 739 l 617 739 l 617 352 "},"]":{x_min:0,x_max:275,ha:372,o:"m 275 -281 l 0 -281 l 0 -187 l 151 -187 l 151 920 l 0 920 l 0 1013 l 275 1013 l 275 -281 "},m:{x_min:0,x_max:1019,ha:1128,o:"m 1019 0 l 897 0 l 897 454 q 860 591 897 536 q 739 660 816 660 q 613 586 659 660 q 573 436 573 522 l 573 0 l 447 0 l 447 455 q 412 591 447 535 q 294 657 372 657 q 165 586 213 657 q 122 437 122 521 l 122 0 l 0 0 l 0 738 l 117 738 l 117 640 q 202 730 150 697 q 316 763 254 763 q 437 730 381 763 q 525 642 494 697 q 621 731 559 700 q 753 763 682 763 q 943 694 867 763 q 1019 512 1019 625 l 1019 0 "},χ:{x_min:8.328125,x_max:780.5625,ha:815,o:"m 780 -278 q 715 -294 747 -294 q 616 -257 663 -294 q 548 -175 576 -227 l 379 133 l 143 -277 l 9 -277 l 313 254 l 163 522 q 127 586 131 580 q 36 640 91 640 q 8 637 27 640 l 8 752 l 52 757 q 162 719 113 757 q 236 627 200 690 l 383 372 l 594 737 l 726 737 l 448 250 l 625 -69 q 670 -153 647 -110 q 743 -188 695 -188 q 780 -184 759 -188 l 780 -278 "},ί:{x_min:42,x_max:326.71875,ha:361,o:"m 284 3 q 233 -10 258 -5 q 182 -15 207 -15 q 85 26 119 -15 q 42 200 42 79 l 42 737 l 167 737 l 168 215 q 172 141 168 157 q 226 101 183 101 q 248 102 239 101 q 284 112 257 104 l 284 3 m 326 1040 l 137 819 l 54 819 l 189 1040 l 326 1040 "},Ζ:{x_min:0,x_max:779.171875,ha:850,o:"m 779 0 l 0 0 l 0 113 l 620 896 l 40 896 l 40 1013 l 779 1013 l 779 887 l 170 124 l 779 124 l 779 0 "},R:{x_min:0,x_max:781.953125,ha:907,o:"m 781 0 l 623 0 q 587 242 590 52 q 407 433 585 433 l 138 433 l 138 0 l 0 0 l 0 1013 l 396 1013 q 636 946 539 1013 q 749 731 749 868 q 711 597 749 659 q 608 502 674 534 q 718 370 696 474 q 729 207 722 352 q 781 26 736 62 l 781 0 m 373 551 q 533 594 465 551 q 614 731 614 645 q 532 859 614 815 q 373 896 465 896 l 138 896 l 138 551 l 373 551 "},o:{x_min:0,x_max:713,ha:821,o:"m 357 -25 q 94 91 194 -25 q 0 368 0 202 q 93 642 0 533 q 357 761 193 761 q 618 644 518 761 q 713 368 713 533 q 619 91 713 201 q 357 -25 521 -25 m 357 85 q 528 175 465 85 q 584 369 584 255 q 529 562 584 484 q 357 651 467 651 q 189 560 250 651 q 135 369 135 481 q 187 177 135 257 q 357 85 250 85 "},K:{x_min:0,x_max:819.46875,ha:906,o:"m 819 0 l 649 0 l 294 509 l 139 355 l 139 0 l 0 0 l 0 1013 l 139 1013 l 139 526 l 626 1013 l 809 1013 l 395 600 l 819 0 "},",":{x_min:0,x_max:142,ha:239,o:"m 142 -12 q 105 -132 142 -82 q 0 -205 68 -182 l 0 -138 q 57 -82 40 -124 q 70 0 70 -51 l 0 0 l 0 151 l 142 151 l 142 -12 "},d:{x_min:0,x_max:683,ha:796,o:"m 683 0 l 564 0 l 564 93 q 456 6 516 38 q 327 -25 395 -25 q 87 100 181 -25 q 0 365 0 215 q 90 639 0 525 q 343 763 187 763 q 564 647 486 763 l 564 1013 l 683 1013 l 683 0 m 582 373 q 529 562 582 484 q 361 653 468 653 q 190 561 253 653 q 135 365 135 479 q 189 175 135 254 q 358 85 251 85 q 529 178 468 85 q 582 373 582 258 "},"¨":{x_min:-109,x_max:247,ha:232,o:"m 247 1046 l 119 1046 l 119 1189 l 247 1189 l 247 1046 m 19 1046 l -109 1046 l -109 1189 l 19 1189 l 19 1046 "},E:{x_min:0,x_max:736.109375,ha:789,o:"m 736 0 l 0 0 l 0 1013 l 725 1013 l 725 889 l 139 889 l 139 585 l 677 585 l 677 467 l 139 467 l 139 125 l 736 125 l 736 0 "},Y:{x_min:0,x_max:820,ha:886,o:"m 820 1013 l 482 416 l 482 0 l 342 0 l 342 416 l 0 1013 l 140 1013 l 411 534 l 679 1012 l 820 1013 "},'"':{x_min:0,x_max:299,ha:396,o:"m 299 606 l 203 606 l 203 988 l 299 988 l 299 606 m 96 606 l 0 606 l 0 988 l 96 988 l 96 606 "},"‹":{x_min:17.984375,x_max:773.609375,ha:792,o:"m 773 40 l 18 376 l 17 465 l 773 799 l 773 692 l 159 420 l 773 149 l 773 40 "},"„":{x_min:0,x_max:364,ha:467,o:"m 141 -12 q 104 -132 141 -82 q 0 -205 67 -182 l 0 -138 q 56 -82 40 -124 q 69 0 69 -51 l 0 0 l 0 151 l 141 151 l 141 -12 m 364 -12 q 327 -132 364 -82 q 222 -205 290 -182 l 222 -138 q 279 -82 262 -124 q 292 0 292 -51 l 222 0 l 222 151 l 364 151 l 364 -12 "},δ:{x_min:1,x_max:710,ha:810,o:"m 710 360 q 616 87 710 196 q 356 -28 518 -28 q 99 82 197 -28 q 1 356 1 192 q 100 606 1 509 q 355 703 199 703 q 180 829 288 754 q 70 903 124 866 l 70 1012 l 643 1012 l 643 901 l 258 901 q 462 763 422 794 q 636 592 577 677 q 710 360 710 485 m 584 365 q 552 501 584 447 q 451 602 521 555 q 372 611 411 611 q 197 541 258 611 q 136 355 136 472 q 190 171 136 245 q 358 85 252 85 q 528 173 465 85 q 584 365 584 252 "},έ:{x_min:0,x_max:634.71875,ha:714,o:"m 634 234 q 527 38 634 110 q 300 -25 433 -25 q 98 29 183 -25 q 0 204 0 93 q 37 313 0 265 q 128 390 67 352 q 56 459 82 419 q 26 555 26 505 q 114 712 26 654 q 295 763 191 763 q 499 700 416 763 q 589 515 589 631 l 478 515 q 419 618 464 580 q 307 657 374 657 q 207 630 253 657 q 151 547 151 598 q 238 445 151 469 q 389 434 280 434 l 389 331 l 349 331 q 206 315 255 331 q 125 210 125 287 q 183 107 125 145 q 302 76 233 76 q 436 117 379 76 q 509 234 493 159 l 634 234 m 520 1040 l 331 819 l 248 819 l 383 1040 l 520 1040 "},ω:{x_min:0,x_max:922,ha:1031,o:"m 922 339 q 856 97 922 203 q 650 -26 780 -26 q 538 9 587 -26 q 461 103 489 44 q 387 12 436 46 q 277 -22 339 -22 q 69 97 147 -22 q 0 339 0 203 q 45 551 0 444 q 161 738 84 643 l 302 738 q 175 553 219 647 q 124 336 124 446 q 155 179 124 249 q 275 88 197 88 q 375 163 341 88 q 400 294 400 219 l 400 572 l 524 572 l 524 294 q 561 135 524 192 q 643 88 591 88 q 762 182 719 88 q 797 342 797 257 q 745 556 797 450 q 619 738 705 638 l 760 738 q 874 551 835 640 q 922 339 922 444 "},"´":{x_min:0,x_max:96,ha:251,o:"m 96 606 l 0 606 l 0 988 l 96 988 l 96 606 "},"±":{x_min:11,x_max:781,ha:792,o:"m 781 490 l 446 490 l 446 255 l 349 255 l 349 490 l 11 490 l 11 586 l 349 586 l 349 819 l 446 819 l 446 586 l 781 586 l 781 490 m 781 21 l 11 21 l 11 115 l 781 115 l 781 21 "},"|":{x_min:343,x_max:449,ha:792,o:"m 449 462 l 343 462 l 343 986 l 449 986 l 449 462 m 449 -242 l 343 -242 l 343 280 l 449 280 l 449 -242 "},ϋ:{x_min:0,x_max:617,ha:725,o:"m 482 800 l 372 800 l 372 925 l 482 925 l 482 800 m 239 800 l 129 800 l 129 925 l 239 925 l 239 800 m 617 352 q 540 93 617 199 q 308 -24 455 -24 q 76 93 161 -24 q 0 352 0 199 l 0 738 l 126 738 l 126 354 q 169 185 126 257 q 312 98 220 98 q 451 185 402 98 q 492 354 492 257 l 492 738 l 617 738 l 617 352 "},"§":{x_min:0,x_max:593,ha:690,o:"m 593 425 q 554 312 593 369 q 467 233 516 254 q 537 83 537 172 q 459 -74 537 -12 q 288 -133 387 -133 q 115 -69 184 -133 q 47 96 47 -6 l 166 96 q 199 7 166 40 q 288 -26 232 -26 q 371 -5 332 -26 q 420 60 420 21 q 311 201 420 139 q 108 309 210 255 q 0 490 0 383 q 33 602 0 551 q 124 687 66 654 q 75 743 93 712 q 58 812 58 773 q 133 984 58 920 q 300 1043 201 1043 q 458 987 394 1043 q 529 814 529 925 l 411 814 q 370 908 404 877 q 289 939 336 939 q 213 911 246 939 q 180 841 180 883 q 286 720 180 779 q 484 612 480 615 q 593 425 593 534 m 467 409 q 355 544 467 473 q 196 630 228 612 q 146 587 162 609 q 124 525 124 558 q 239 387 124 462 q 398 298 369 315 q 448 345 429 316 q 467 409 467 375 "},b:{x_min:0,x_max:685,ha:783,o:"m 685 372 q 597 99 685 213 q 347 -25 501 -25 q 219 5 277 -25 q 121 93 161 36 l 121 0 l 0 0 l 0 1013 l 121 1013 l 121 634 q 214 723 157 692 q 341 754 272 754 q 591 637 493 754 q 685 372 685 526 m 554 356 q 499 550 554 470 q 328 644 437 644 q 162 556 223 644 q 108 369 108 478 q 160 176 108 256 q 330 83 221 83 q 498 169 435 83 q 554 356 554 245 "},q:{x_min:0,x_max:683,ha:876,o:"m 683 -278 l 564 -278 l 564 97 q 474 8 533 39 q 345 -23 415 -23 q 91 93 188 -23 q 0 364 0 203 q 87 635 0 522 q 337 760 184 760 q 466 727 408 760 q 564 637 523 695 l 564 737 l 683 737 l 683 -278 m 582 375 q 527 564 582 488 q 358 652 466 652 q 190 565 253 652 q 135 377 135 488 q 189 179 135 261 q 361 84 251 84 q 530 179 469 84 q 582 375 582 260 "},Ω:{x_min:-.171875,x_max:969.5625,ha:1068,o:"m 969 0 l 555 0 l 555 123 q 744 308 675 194 q 814 558 814 423 q 726 812 814 709 q 484 922 633 922 q 244 820 334 922 q 154 567 154 719 q 223 316 154 433 q 412 123 292 199 l 412 0 l 0 0 l 0 124 l 217 124 q 68 327 122 210 q 15 572 15 444 q 144 911 15 781 q 484 1041 274 1041 q 822 909 691 1041 q 953 569 953 777 q 899 326 953 443 q 750 124 846 210 l 969 124 l 969 0 "},ύ:{x_min:0,x_max:617,ha:725,o:"m 617 352 q 540 93 617 199 q 308 -24 455 -24 q 76 93 161 -24 q 0 352 0 199 l 0 738 l 126 738 l 126 354 q 169 185 126 257 q 312 98 220 98 q 451 185 402 98 q 492 354 492 257 l 492 738 l 617 738 l 617 352 m 535 1040 l 346 819 l 262 819 l 397 1040 l 535 1040 "},z:{x_min:-.015625,x_max:613.890625,ha:697,o:"m 613 0 l 0 0 l 0 100 l 433 630 l 20 630 l 20 738 l 594 738 l 593 636 l 163 110 l 613 110 l 613 0 "},"™":{x_min:0,x_max:894,ha:1e3,o:"m 389 951 l 229 951 l 229 503 l 160 503 l 160 951 l 0 951 l 0 1011 l 389 1011 l 389 951 m 894 503 l 827 503 l 827 939 l 685 503 l 620 503 l 481 937 l 481 503 l 417 503 l 417 1011 l 517 1011 l 653 580 l 796 1010 l 894 1011 l 894 503 "},ή:{x_min:.78125,x_max:697,ha:810,o:"m 697 -278 l 572 -278 l 572 454 q 540 587 572 536 q 425 650 501 650 q 271 579 337 650 q 206 420 206 509 l 206 0 l 81 0 l 81 489 q 73 588 81 562 q 0 644 56 644 l 0 741 q 68 755 38 755 q 158 721 124 755 q 200 630 193 687 q 297 726 234 692 q 434 761 359 761 q 620 692 544 761 q 697 516 697 624 l 697 -278 m 479 1040 l 290 819 l 207 819 l 341 1040 l 479 1040 "},Θ:{x_min:0,x_max:960,ha:1056,o:"m 960 507 q 833 129 960 280 q 476 -32 698 -32 q 123 129 255 -32 q 0 507 0 280 q 123 883 0 732 q 476 1045 255 1045 q 832 883 696 1045 q 960 507 960 732 m 817 500 q 733 789 817 669 q 476 924 639 924 q 223 792 317 924 q 142 507 142 675 q 222 222 142 339 q 476 89 315 89 q 730 218 636 89 q 817 500 817 334 m 716 449 l 243 449 l 243 571 l 716 571 l 716 449 "},"®":{x_min:-3,x_max:1008,ha:1106,o:"m 503 532 q 614 562 566 532 q 672 658 672 598 q 614 747 672 716 q 503 772 569 772 l 338 772 l 338 532 l 503 532 m 502 -7 q 123 151 263 -7 q -3 501 -3 294 q 123 851 -3 706 q 502 1011 263 1011 q 881 851 739 1011 q 1008 501 1008 708 q 883 151 1008 292 q 502 -7 744 -7 m 502 60 q 830 197 709 60 q 940 501 940 322 q 831 805 940 681 q 502 944 709 944 q 174 805 296 944 q 65 501 65 680 q 173 197 65 320 q 502 60 294 60 m 788 146 l 678 146 q 653 316 655 183 q 527 449 652 449 l 338 449 l 338 146 l 241 146 l 241 854 l 518 854 q 688 808 621 854 q 766 658 766 755 q 739 563 766 607 q 668 497 713 519 q 751 331 747 472 q 788 164 756 190 l 788 146 "},"~":{x_min:0,x_max:833,ha:931,o:"m 833 958 q 778 753 833 831 q 594 665 716 665 q 402 761 502 665 q 240 857 302 857 q 131 795 166 857 q 104 665 104 745 l 0 665 q 54 867 0 789 q 237 958 116 958 q 429 861 331 958 q 594 765 527 765 q 704 827 670 765 q 729 958 729 874 l 833 958 "},Ε:{x_min:0,x_max:736.21875,ha:778,o:"m 736 0 l 0 0 l 0 1013 l 725 1013 l 725 889 l 139 889 l 139 585 l 677 585 l 677 467 l 139 467 l 139 125 l 736 125 l 736 0 "},"³":{x_min:0,x_max:450,ha:547,o:"m 450 552 q 379 413 450 464 q 220 366 313 366 q 69 414 130 366 q 0 567 0 470 l 85 567 q 126 470 85 504 q 225 437 168 437 q 320 467 280 437 q 360 552 360 498 q 318 632 360 608 q 213 657 276 657 q 195 657 203 657 q 176 657 181 657 l 176 722 q 279 733 249 722 q 334 815 334 752 q 300 881 334 856 q 220 907 267 907 q 133 875 169 907 q 97 781 97 844 l 15 781 q 78 926 15 875 q 220 972 135 972 q 364 930 303 972 q 426 817 426 888 q 344 697 426 733 q 421 642 392 681 q 450 552 450 603 "},"[":{x_min:0,x_max:273.609375,ha:371,o:"m 273 -281 l 0 -281 l 0 1013 l 273 1013 l 273 920 l 124 920 l 124 -187 l 273 -187 l 273 -281 "},L:{x_min:0,x_max:645.828125,ha:696,o:"m 645 0 l 0 0 l 0 1013 l 140 1013 l 140 126 l 645 126 l 645 0 "},σ:{x_min:0,x_max:803.390625,ha:894,o:"m 803 628 l 633 628 q 713 368 713 512 q 618 93 713 204 q 357 -25 518 -25 q 94 91 194 -25 q 0 368 0 201 q 94 644 0 533 q 356 761 194 761 q 481 750 398 761 q 608 739 564 739 l 803 739 l 803 628 m 360 85 q 529 180 467 85 q 584 374 584 262 q 527 566 584 490 q 352 651 463 651 q 187 559 247 651 q 135 368 135 478 q 189 175 135 254 q 360 85 251 85 "},ζ:{x_min:0,x_max:573,ha:642,o:"m 573 -40 q 553 -162 573 -97 q 510 -278 543 -193 l 400 -278 q 441 -187 428 -219 q 462 -90 462 -132 q 378 -14 462 -14 q 108 45 197 -14 q 0 290 0 117 q 108 631 0 462 q 353 901 194 767 l 55 901 l 55 1012 l 561 1012 l 561 924 q 261 669 382 831 q 128 301 128 489 q 243 117 128 149 q 458 98 350 108 q 573 -40 573 80 "},θ:{x_min:0,x_max:674,ha:778,o:"m 674 496 q 601 160 674 304 q 336 -26 508 -26 q 73 153 165 -26 q 0 485 0 296 q 72 840 0 683 q 343 1045 166 1045 q 605 844 516 1045 q 674 496 674 692 m 546 579 q 498 798 546 691 q 336 935 437 935 q 178 798 237 935 q 126 579 137 701 l 546 579 m 546 475 l 126 475 q 170 233 126 348 q 338 80 230 80 q 504 233 447 80 q 546 475 546 346 "},Ο:{x_min:0,x_max:958,ha:1054,o:"m 485 1042 q 834 883 703 1042 q 958 511 958 735 q 834 136 958 287 q 481 -26 701 -26 q 126 130 261 -26 q 0 504 0 279 q 127 880 0 729 q 485 1042 263 1042 m 480 98 q 731 225 638 98 q 815 504 815 340 q 733 783 815 670 q 480 913 640 913 q 226 785 321 913 q 142 504 142 671 q 226 224 142 339 q 480 98 319 98 "},Γ:{x_min:0,x_max:705.28125,ha:749,o:"m 705 886 l 140 886 l 140 0 l 0 0 l 0 1012 l 705 1012 l 705 886 "}," ":{x_min:0,x_max:0,ha:375},"%":{x_min:-3,x_max:1089,ha:1186,o:"m 845 0 q 663 76 731 0 q 602 244 602 145 q 661 412 602 344 q 845 489 728 489 q 1027 412 959 489 q 1089 244 1089 343 q 1029 76 1089 144 q 845 0 962 0 m 844 103 q 945 143 909 103 q 981 243 981 184 q 947 340 981 301 q 844 385 909 385 q 744 342 781 385 q 708 243 708 300 q 741 147 708 186 q 844 103 780 103 m 888 986 l 284 -25 l 199 -25 l 803 986 l 888 986 m 241 468 q 58 545 126 468 q -3 715 -3 615 q 56 881 -3 813 q 238 958 124 958 q 421 881 353 958 q 483 712 483 813 q 423 544 483 612 q 241 468 356 468 m 241 855 q 137 811 175 855 q 100 710 100 768 q 136 612 100 653 q 240 572 172 572 q 344 614 306 572 q 382 713 382 656 q 347 810 382 771 q 241 855 308 855 "},P:{x_min:0,x_max:726,ha:806,o:"m 424 1013 q 640 931 555 1013 q 726 719 726 850 q 637 506 726 587 q 413 426 548 426 l 140 426 l 140 0 l 0 0 l 0 1013 l 424 1013 m 379 889 l 140 889 l 140 548 l 372 548 q 522 589 459 548 q 593 720 593 637 q 528 845 593 801 q 379 889 463 889 "},Έ:{x_min:0,x_max:1078.21875,ha:1118,o:"m 1078 0 l 342 0 l 342 1013 l 1067 1013 l 1067 889 l 481 889 l 481 585 l 1019 585 l 1019 467 l 481 467 l 481 125 l 1078 125 l 1078 0 m 277 1040 l 83 799 l 0 799 l 140 1040 l 277 1040 "},Ώ:{x_min:.125,x_max:1136.546875,ha:1235,o:"m 1136 0 l 722 0 l 722 123 q 911 309 842 194 q 981 558 981 423 q 893 813 981 710 q 651 923 800 923 q 411 821 501 923 q 321 568 321 720 q 390 316 321 433 q 579 123 459 200 l 579 0 l 166 0 l 166 124 l 384 124 q 235 327 289 210 q 182 572 182 444 q 311 912 182 782 q 651 1042 441 1042 q 989 910 858 1042 q 1120 569 1120 778 q 1066 326 1120 443 q 917 124 1013 210 l 1136 124 l 1136 0 m 277 1040 l 83 800 l 0 800 l 140 1041 l 277 1040 "},_:{x_min:0,x_max:705.5625,ha:803,o:"m 705 -334 l 0 -334 l 0 -234 l 705 -234 l 705 -334 "},Ϊ:{x_min:-110,x_max:246,ha:275,o:"m 246 1046 l 118 1046 l 118 1189 l 246 1189 l 246 1046 m 18 1046 l -110 1046 l -110 1189 l 18 1189 l 18 1046 m 136 0 l 0 0 l 0 1012 l 136 1012 l 136 0 "},"+":{x_min:23,x_max:768,ha:792,o:"m 768 372 l 444 372 l 444 0 l 347 0 l 347 372 l 23 372 l 23 468 l 347 468 l 347 840 l 444 840 l 444 468 l 768 468 l 768 372 "},"½":{x_min:0,x_max:1050,ha:1149,o:"m 1050 0 l 625 0 q 712 178 625 108 q 878 277 722 187 q 967 385 967 328 q 932 456 967 429 q 850 484 897 484 q 759 450 798 484 q 721 352 721 416 l 640 352 q 706 502 640 448 q 851 551 766 551 q 987 509 931 551 q 1050 385 1050 462 q 976 251 1050 301 q 829 179 902 215 q 717 68 740 133 l 1050 68 l 1050 0 m 834 985 l 215 -28 l 130 -28 l 750 984 l 834 985 m 224 422 l 142 422 l 142 811 l 0 811 l 0 867 q 104 889 62 867 q 164 973 157 916 l 224 973 l 224 422 "},Ρ:{x_min:0,x_max:720,ha:783,o:"m 424 1013 q 637 933 554 1013 q 720 723 720 853 q 633 508 720 591 q 413 426 546 426 l 140 426 l 140 0 l 0 0 l 0 1013 l 424 1013 m 378 889 l 140 889 l 140 548 l 371 548 q 521 589 458 548 q 592 720 592 637 q 527 845 592 801 q 378 889 463 889 "},"'":{x_min:0,x_max:139,ha:236,o:"m 139 851 q 102 737 139 784 q 0 669 65 690 l 0 734 q 59 787 42 741 q 72 873 72 821 l 0 873 l 0 1013 l 139 1013 l 139 851 "},ª:{x_min:0,x_max:350,ha:397,o:"m 350 625 q 307 616 328 616 q 266 631 281 616 q 247 673 251 645 q 190 628 225 644 q 116 613 156 613 q 32 641 64 613 q 0 722 0 669 q 72 826 0 800 q 247 866 159 846 l 247 887 q 220 934 247 916 q 162 953 194 953 q 104 934 129 953 q 76 882 80 915 l 16 882 q 60 976 16 941 q 166 1011 104 1011 q 266 979 224 1011 q 308 891 308 948 l 308 706 q 311 679 308 688 q 331 670 315 670 l 350 672 l 350 625 m 247 757 l 247 811 q 136 790 175 798 q 64 726 64 773 q 83 682 64 697 q 132 667 103 667 q 207 690 174 667 q 247 757 247 718 "},"΅":{x_min:0,x_max:450,ha:553,o:"m 450 800 l 340 800 l 340 925 l 450 925 l 450 800 m 406 1040 l 212 800 l 129 800 l 269 1040 l 406 1040 m 110 800 l 0 800 l 0 925 l 110 925 l 110 800 "},T:{x_min:0,x_max:777,ha:835,o:"m 777 894 l 458 894 l 458 0 l 319 0 l 319 894 l 0 894 l 0 1013 l 777 1013 l 777 894 "},Φ:{x_min:0,x_max:915,ha:997,o:"m 527 0 l 389 0 l 389 122 q 110 231 220 122 q 0 509 0 340 q 110 785 0 677 q 389 893 220 893 l 389 1013 l 527 1013 l 527 893 q 804 786 693 893 q 915 509 915 679 q 805 231 915 341 q 527 122 696 122 l 527 0 m 527 226 q 712 310 641 226 q 779 507 779 389 q 712 705 779 627 q 527 787 641 787 l 527 226 m 389 226 l 389 787 q 205 698 275 775 q 136 505 136 620 q 206 308 136 391 q 389 226 276 226 "},"⁋":{x_min:0,x_max:0,ha:694},j:{x_min:-77.78125,x_max:167,ha:349,o:"m 167 871 l 42 871 l 42 1013 l 167 1013 l 167 871 m 167 -80 q 121 -231 167 -184 q -26 -278 76 -278 l -77 -278 l -77 -164 l -41 -164 q 26 -143 11 -164 q 42 -65 42 -122 l 42 737 l 167 737 l 167 -80 "},Σ:{x_min:0,x_max:756.953125,ha:819,o:"m 756 0 l 0 0 l 0 107 l 395 523 l 22 904 l 22 1013 l 745 1013 l 745 889 l 209 889 l 566 523 l 187 125 l 756 125 l 756 0 "},"›":{x_min:18.0625,x_max:774,ha:792,o:"m 774 376 l 18 40 l 18 149 l 631 421 l 18 692 l 18 799 l 774 465 l 774 376 "},"<":{x_min:17.984375,x_max:773.609375,ha:792,o:"m 773 40 l 18 376 l 17 465 l 773 799 l 773 692 l 159 420 l 773 149 l 773 40 "},"£":{x_min:0,x_max:704.484375,ha:801,o:"m 704 41 q 623 -10 664 5 q 543 -26 583 -26 q 359 15 501 -26 q 243 36 288 36 q 158 23 197 36 q 73 -21 119 10 l 6 76 q 125 195 90 150 q 175 331 175 262 q 147 443 175 383 l 0 443 l 0 512 l 108 512 q 43 734 43 623 q 120 929 43 854 q 358 1010 204 1010 q 579 936 487 1010 q 678 729 678 857 l 678 684 l 552 684 q 504 838 552 780 q 362 896 457 896 q 216 852 263 896 q 176 747 176 815 q 199 627 176 697 q 248 512 217 574 l 468 512 l 468 443 l 279 443 q 297 356 297 398 q 230 194 297 279 q 153 107 211 170 q 227 133 190 125 q 293 142 264 142 q 410 119 339 142 q 516 96 482 96 q 579 105 550 96 q 648 142 608 115 l 704 41 "},t:{x_min:0,x_max:367,ha:458,o:"m 367 0 q 312 -5 339 -2 q 262 -8 284 -8 q 145 28 183 -8 q 108 143 108 64 l 108 638 l 0 638 l 0 738 l 108 738 l 108 944 l 232 944 l 232 738 l 367 738 l 367 638 l 232 638 l 232 185 q 248 121 232 140 q 307 102 264 102 q 345 104 330 102 q 367 107 360 107 l 367 0 "},"¬":{x_min:0,x_max:706,ha:803,o:"m 706 411 l 706 158 l 630 158 l 630 335 l 0 335 l 0 411 l 706 411 "},λ:{x_min:0,x_max:750,ha:803,o:"m 750 -7 q 679 -15 716 -15 q 538 59 591 -15 q 466 214 512 97 l 336 551 l 126 0 l 0 0 l 270 705 q 223 837 247 770 q 116 899 190 899 q 90 898 100 899 l 90 1004 q 152 1011 125 1011 q 298 938 244 1011 q 373 783 326 901 l 605 192 q 649 115 629 136 q 716 95 669 95 l 736 95 q 750 97 745 97 l 750 -7 "},W:{x_min:0,x_max:1263.890625,ha:1351,o:"m 1263 1013 l 995 0 l 859 0 l 627 837 l 405 0 l 265 0 l 0 1013 l 136 1013 l 342 202 l 556 1013 l 701 1013 l 921 207 l 1133 1012 l 1263 1013 "},">":{x_min:18.0625,x_max:774,ha:792,o:"m 774 376 l 18 40 l 18 149 l 631 421 l 18 692 l 18 799 l 774 465 l 774 376 "},v:{x_min:0,x_max:675.15625,ha:761,o:"m 675 738 l 404 0 l 272 0 l 0 738 l 133 737 l 340 147 l 541 737 l 675 738 "},τ:{x_min:.28125,x_max:644.5,ha:703,o:"m 644 628 l 382 628 l 382 179 q 388 120 382 137 q 436 91 401 91 q 474 94 447 91 q 504 97 501 97 l 504 0 q 454 -9 482 -5 q 401 -14 426 -14 q 278 67 308 -14 q 260 233 260 118 l 260 628 l 0 628 l 0 739 l 644 739 l 644 628 "},ξ:{x_min:0,x_max:624.9375,ha:699,o:"m 624 -37 q 608 -153 624 -96 q 563 -278 593 -211 l 454 -278 q 491 -183 486 -200 q 511 -83 511 -126 q 484 -23 511 -44 q 370 1 452 1 q 323 0 354 1 q 283 -1 293 -1 q 84 76 169 -1 q 0 266 0 154 q 56 431 0 358 q 197 538 108 498 q 94 613 134 562 q 54 730 54 665 q 77 823 54 780 q 143 901 101 867 l 27 901 l 27 1012 l 576 1012 l 576 901 l 380 901 q 244 863 303 901 q 178 745 178 820 q 312 600 178 636 q 532 582 380 582 l 532 479 q 276 455 361 479 q 118 281 118 410 q 165 173 118 217 q 274 120 208 133 q 494 101 384 110 q 624 -37 624 76 "},"&":{x_min:-3,x_max:894.25,ha:992,o:"m 894 0 l 725 0 l 624 123 q 471 0 553 40 q 306 -41 390 -41 q 168 -7 231 -41 q 62 92 105 26 q 14 187 31 139 q -3 276 -3 235 q 55 433 -3 358 q 248 581 114 508 q 170 689 196 640 q 137 817 137 751 q 214 985 137 922 q 384 1041 284 1041 q 548 988 483 1041 q 622 824 622 928 q 563 666 622 739 q 431 556 516 608 l 621 326 q 649 407 639 361 q 663 493 653 426 l 781 493 q 703 229 781 352 l 894 0 m 504 818 q 468 908 504 877 q 384 940 433 940 q 293 907 331 940 q 255 818 255 875 q 289 714 255 767 q 363 628 313 678 q 477 729 446 682 q 504 818 504 771 m 556 209 l 314 499 q 179 395 223 449 q 135 283 135 341 q 146 222 135 253 q 183 158 158 192 q 333 80 241 80 q 556 209 448 80 "},Λ:{x_min:0,x_max:862.5,ha:942,o:"m 862 0 l 719 0 l 426 847 l 143 0 l 0 0 l 356 1013 l 501 1013 l 862 0 "},I:{x_min:41,x_max:180,ha:293,o:"m 180 0 l 41 0 l 41 1013 l 180 1013 l 180 0 "},G:{x_min:0,x_max:921,ha:1011,o:"m 921 0 l 832 0 l 801 136 q 655 15 741 58 q 470 -28 568 -28 q 126 133 259 -28 q 0 499 0 284 q 125 881 0 731 q 486 1043 259 1043 q 763 957 647 1043 q 905 709 890 864 l 772 709 q 668 866 747 807 q 486 926 589 926 q 228 795 322 926 q 142 507 142 677 q 228 224 142 342 q 483 94 323 94 q 712 195 625 94 q 796 435 796 291 l 477 435 l 477 549 l 921 549 l 921 0 "},ΰ:{x_min:0,x_max:617,ha:725,o:"m 524 800 l 414 800 l 414 925 l 524 925 l 524 800 m 183 800 l 73 800 l 73 925 l 183 925 l 183 800 m 617 352 q 540 93 617 199 q 308 -24 455 -24 q 76 93 161 -24 q 0 352 0 199 l 0 738 l 126 738 l 126 354 q 169 185 126 257 q 312 98 220 98 q 451 185 402 98 q 492 354 492 257 l 492 738 l 617 738 l 617 352 m 489 1040 l 300 819 l 216 819 l 351 1040 l 489 1040 "},"`":{x_min:0,x_max:138.890625,ha:236,o:"m 138 699 l 0 699 l 0 861 q 36 974 0 929 q 138 1041 72 1020 l 138 977 q 82 931 95 969 q 69 839 69 893 l 138 839 l 138 699 "},"·":{x_min:0,x_max:142,ha:239,o:"m 142 585 l 0 585 l 0 738 l 142 738 l 142 585 "},Υ:{x_min:.328125,x_max:819.515625,ha:889,o:"m 819 1013 l 482 416 l 482 0 l 342 0 l 342 416 l 0 1013 l 140 1013 l 411 533 l 679 1013 l 819 1013 "},r:{x_min:0,x_max:355.5625,ha:432,o:"m 355 621 l 343 621 q 179 569 236 621 q 122 411 122 518 l 122 0 l 0 0 l 0 737 l 117 737 l 117 604 q 204 719 146 686 q 355 753 262 753 l 355 621 "},x:{x_min:0,x_max:675,ha:764,o:"m 675 0 l 525 0 l 331 286 l 144 0 l 0 0 l 256 379 l 12 738 l 157 737 l 336 473 l 516 738 l 661 738 l 412 380 l 675 0 "},μ:{x_min:0,x_max:696.609375,ha:747,o:"m 696 -4 q 628 -14 657 -14 q 498 97 513 -14 q 422 8 470 41 q 313 -24 374 -24 q 207 3 258 -24 q 120 80 157 31 l 120 -278 l 0 -278 l 0 738 l 124 738 l 124 343 q 165 172 124 246 q 308 82 216 82 q 451 177 402 82 q 492 358 492 254 l 492 738 l 616 738 l 616 214 q 623 136 616 160 q 673 92 636 92 q 696 95 684 92 l 696 -4 "},h:{x_min:0,x_max:615,ha:724,o:"m 615 472 l 615 0 l 490 0 l 490 454 q 456 590 490 535 q 338 654 416 654 q 186 588 251 654 q 122 436 122 522 l 122 0 l 0 0 l 0 1013 l 122 1013 l 122 633 q 218 727 149 694 q 362 760 287 760 q 552 676 484 760 q 615 472 615 600 "},".":{x_min:0,x_max:142,ha:239,o:"m 142 0 l 0 0 l 0 151 l 142 151 l 142 0 "},φ:{x_min:-2,x_max:878,ha:974,o:"m 496 -279 l 378 -279 l 378 -17 q 101 88 204 -17 q -2 367 -2 194 q 68 626 -2 510 q 283 758 151 758 l 283 646 q 167 537 209 626 q 133 373 133 462 q 192 177 133 254 q 378 93 259 93 l 378 758 q 445 764 426 763 q 476 765 464 765 q 765 659 653 765 q 878 377 878 553 q 771 96 878 209 q 496 -17 665 -17 l 496 -279 m 496 93 l 514 93 q 687 183 623 93 q 746 380 746 265 q 691 569 746 491 q 522 658 629 658 l 496 656 l 496 93 "},";":{x_min:0,x_max:142,ha:239,o:"m 142 585 l 0 585 l 0 738 l 142 738 l 142 585 m 142 -12 q 105 -132 142 -82 q 0 -206 68 -182 l 0 -138 q 58 -82 43 -123 q 68 0 68 -56 l 0 0 l 0 151 l 142 151 l 142 -12 "},f:{x_min:0,x_max:378,ha:472,o:"m 378 638 l 246 638 l 246 0 l 121 0 l 121 638 l 0 638 l 0 738 l 121 738 q 137 935 121 887 q 290 1028 171 1028 q 320 1027 305 1028 q 378 1021 334 1026 l 378 908 q 323 918 346 918 q 257 870 273 918 q 246 780 246 840 l 246 738 l 378 738 l 378 638 "},"“":{x_min:1,x_max:348.21875,ha:454,o:"m 140 670 l 1 670 l 1 830 q 37 943 1 897 q 140 1011 74 990 l 140 947 q 82 900 97 940 q 68 810 68 861 l 140 810 l 140 670 m 348 670 l 209 670 l 209 830 q 245 943 209 897 q 348 1011 282 990 l 348 947 q 290 900 305 940 q 276 810 276 861 l 348 810 l 348 670 "},A:{x_min:.03125,x_max:906.953125,ha:1008,o:"m 906 0 l 756 0 l 648 303 l 251 303 l 142 0 l 0 0 l 376 1013 l 529 1013 l 906 0 m 610 421 l 452 867 l 293 421 l 610 421 "},"‘":{x_min:1,x_max:139.890625,ha:236,o:"m 139 670 l 1 670 l 1 830 q 37 943 1 897 q 139 1011 74 990 l 139 947 q 82 900 97 940 q 68 810 68 861 l 139 810 l 139 670 "},ϊ:{x_min:-70,x_max:283,ha:361,o:"m 283 800 l 173 800 l 173 925 l 283 925 l 283 800 m 40 800 l -70 800 l -70 925 l 40 925 l 40 800 m 283 3 q 232 -10 257 -5 q 181 -15 206 -15 q 84 26 118 -15 q 41 200 41 79 l 41 737 l 166 737 l 167 215 q 171 141 167 157 q 225 101 182 101 q 247 103 238 101 q 283 112 256 104 l 283 3 "},π:{x_min:-.21875,x_max:773.21875,ha:857,o:"m 773 -7 l 707 -11 q 575 40 607 -11 q 552 174 552 77 l 552 226 l 552 626 l 222 626 l 222 0 l 97 0 l 97 626 l 0 626 l 0 737 l 773 737 l 773 626 l 676 626 l 676 171 q 695 103 676 117 q 773 90 714 90 l 773 -7 "},ά:{x_min:0,x_max:765.5625,ha:809,o:"m 765 -4 q 698 -14 726 -14 q 564 97 586 -14 q 466 7 525 40 q 337 -26 407 -26 q 88 98 186 -26 q 0 369 0 212 q 88 637 0 525 q 337 760 184 760 q 465 727 407 760 q 563 637 524 695 l 563 738 l 685 738 l 685 222 q 693 141 685 168 q 748 94 708 94 q 765 95 760 94 l 765 -4 m 584 371 q 531 562 584 485 q 360 653 470 653 q 192 566 254 653 q 135 379 135 489 q 186 181 135 261 q 358 84 247 84 q 528 176 465 84 q 584 371 584 260 m 604 1040 l 415 819 l 332 819 l 466 1040 l 604 1040 "},O:{x_min:0,x_max:958,ha:1057,o:"m 485 1041 q 834 882 702 1041 q 958 512 958 734 q 834 136 958 287 q 481 -26 702 -26 q 126 130 261 -26 q 0 504 0 279 q 127 880 0 728 q 485 1041 263 1041 m 480 98 q 731 225 638 98 q 815 504 815 340 q 733 783 815 669 q 480 912 640 912 q 226 784 321 912 q 142 504 142 670 q 226 224 142 339 q 480 98 319 98 "},n:{x_min:0,x_max:615,ha:724,o:"m 615 463 l 615 0 l 490 0 l 490 454 q 453 592 490 537 q 331 656 410 656 q 178 585 240 656 q 117 421 117 514 l 117 0 l 0 0 l 0 738 l 117 738 l 117 630 q 218 728 150 693 q 359 764 286 764 q 552 675 484 764 q 615 463 615 593 "},l:{x_min:41,x_max:166,ha:279,o:"m 166 0 l 41 0 l 41 1013 l 166 1013 l 166 0 "},"¤":{x_min:40.09375,x_max:728.796875,ha:825,o:"m 728 304 l 649 224 l 512 363 q 383 331 458 331 q 256 363 310 331 l 119 224 l 40 304 l 177 441 q 150 553 150 493 q 184 673 150 621 l 40 818 l 119 898 l 267 749 q 321 766 291 759 q 384 773 351 773 q 447 766 417 773 q 501 749 477 759 l 649 898 l 728 818 l 585 675 q 612 618 604 648 q 621 553 621 587 q 591 441 621 491 l 728 304 m 384 682 q 280 643 318 682 q 243 551 243 604 q 279 461 243 499 q 383 423 316 423 q 487 461 449 423 q 525 553 525 500 q 490 641 525 605 q 384 682 451 682 "},κ:{x_min:0,x_max:632.328125,ha:679,o:"m 632 0 l 482 0 l 225 384 l 124 288 l 124 0 l 0 0 l 0 738 l 124 738 l 124 446 l 433 738 l 596 738 l 312 466 l 632 0 "},p:{x_min:0,x_max:685,ha:786,o:"m 685 364 q 598 96 685 205 q 350 -23 504 -23 q 121 89 205 -23 l 121 -278 l 0 -278 l 0 738 l 121 738 l 121 633 q 220 726 159 691 q 351 761 280 761 q 598 636 504 761 q 685 364 685 522 m 557 371 q 501 560 557 481 q 330 651 437 651 q 162 559 223 651 q 108 366 108 479 q 162 177 108 254 q 333 87 224 87 q 502 178 441 87 q 557 371 557 258 "},"‡":{x_min:0,x_max:777,ha:835,o:"m 458 238 l 458 0 l 319 0 l 319 238 l 0 238 l 0 360 l 319 360 l 319 681 l 0 683 l 0 804 l 319 804 l 319 1015 l 458 1013 l 458 804 l 777 804 l 777 683 l 458 683 l 458 360 l 777 360 l 777 238 l 458 238 "},ψ:{x_min:0,x_max:808,ha:907,o:"m 465 -278 l 341 -278 l 341 -15 q 87 102 180 -15 q 0 378 0 210 l 0 739 l 133 739 l 133 379 q 182 195 133 275 q 341 98 242 98 l 341 922 l 465 922 l 465 98 q 623 195 563 98 q 675 382 675 278 l 675 742 l 808 742 l 808 381 q 720 104 808 213 q 466 -13 627 -13 l 465 -278 "},η:{x_min:.78125,x_max:697,ha:810,o:"m 697 -278 l 572 -278 l 572 454 q 540 587 572 536 q 425 650 501 650 q 271 579 337 650 q 206 420 206 509 l 206 0 l 81 0 l 81 489 q 73 588 81 562 q 0 644 56 644 l 0 741 q 68 755 38 755 q 158 720 124 755 q 200 630 193 686 q 297 726 234 692 q 434 761 359 761 q 620 692 544 761 q 697 516 697 624 l 697 -278 "}},e$="normal",t$=1189,n$=-100,r$="normal",i$={yMin:-334,xMin:-111,yMax:1189,xMax:1672},s$=1e3,o$={postscript_name:"Helvetiker-Regular",version_string:"Version 1.00 2004 initial release",vendor_url:"http://www.magenta.gr/",full_font_name:"Helvetiker",font_family_name:"Helvetiker",copyright:"Copyright (c) Μagenta ltd, 2004",description:"",trademark:"",designer:"",designer_url:"",unique_font_identifier:"Μagenta ltd:Helvetiker:22-10-104",license_url:"http://www.ellak.gr/fonts/MgOpen/license.html",license_description:`Copyright (c) 2004 by MAGENTA Ltd. All Rights Reserved.\r
\r
Permission is hereby granted, free of charge, to any person obtaining a copy of the fonts accompanying this license ("Fonts") and associated documentation files (the "Font Software"), to reproduce and distribute the Font Software, including without limitation the rights to use, copy, merge, publish, distribute, and/or sell copies of the Font Software, and to permit persons to whom the Font Software is furnished to do so, subject to the following conditions: \r
\r
The above copyright and this permission notice shall be included in all copies of one or more of the Font Software typefaces.\r
\r
The Font Software may be modified, altered, or added to, and in particular the designs of glyphs or characters in the Fonts may be modified and additional glyphs or characters may be added to the Fonts, only if the fonts are renamed to names not containing the word "MgOpen", or if the modifications are accepted for inclusion in the Font Software itself by the each appointed Administrator.\r
\r
This License becomes null and void to the extent applicable to Fonts or Font Software that has been modified and is distributed under the "MgOpen" name.\r
\r
The Font Software may be sold as part of a larger software package but no copy of one or more of the Font Software typefaces may be sold by itself. \r
\r
THE FONT SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT OF COPYRIGHT, PATENT, TRADEMARK, OR OTHER RIGHT. IN NO EVENT SHALL MAGENTA OR PERSONS OR BODIES IN CHARGE OF ADMINISTRATION AND MAINTENANCE OF THE FONT SOFTWARE BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, INCLUDING ANY GENERAL, SPECIAL, INDIRECT, INCIDENTAL, OR CONSEQUENTIAL DAMAGES, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF THE USE OR INABILITY TO USE THE FONT SOFTWARE OR FROM OTHER DEALINGS IN THE FONT SOFTWARE.`,manufacturer_name:"Μagenta ltd",font_sub_family_name:"Regular"},a$=-334,A$="Helvetiker",l$=1522,u$=50,c$={glyphs:Jz,cssFontWeight:e$,ascender:t$,underlinePosition:n$,cssFontStyle:r$,boundingBox:i$,resolution:s$,original_font_information:o$,descender:a$,familyName:A$,lineHeight:l$,underlineThickness:u$},Ci=Vt(Vt({},window.THREE?window.THREE:{BoxGeometry:Vd,CircleGeometry:O6,DoubleSide:pi,Group:xs,Mesh:Sn,MeshLambertMaterial:Zs,TextGeometry:Dg,Vector3:Re}),{},{Font:Az,TextGeometry:Dg}),gx=dr({props:{labelsData:{default:[]},labelLat:{default:"lat"},labelLng:{default:"lng"},labelAltitude:{default:.002},labelText:{default:"text"},labelSize:{default:.5},labelTypeFace:{default:c$,onChange:function(e,t){t.font=new Ci.Font(e)}},labelColor:{default:function(){return"lightgrey"}},labelRotation:{default:0},labelResolution:{default:3},labelIncludeDot:{default:!0},labelDotRadius:{default:.1},labelDotOrientation:{default:function(){return"bottom"}},labelsTransitionDuration:{default:1e3,triggerUpdate:!1}},init:function(e,t,n){var i=n.tweenGroup;Zt(e),t.scene=e,t.tweenGroup=i;var s=new Ci.CircleGeometry(1,32);t.dataMapper=new qr(e,{objBindAttr:"__threeObjLabel"}).onCreateObj(function(){var o=new Ci.MeshLambertMaterial;o.side=pi;var u=new Ci.Group;u.add(new Ci.Mesh(s,o));var h=new Ci.Mesh(void 0,o);u.add(h);var d=new Ci.Mesh;return d.visible=!1,h.add(d),u.__globeObjType="label",u})},update:function(e){var t=Te(e.labelLat),n=Te(e.labelLng),i=Te(e.labelAltitude),s=Te(e.labelText),o=Te(e.labelSize),u=Te(e.labelRotation),h=Te(e.labelColor),d=Te(e.labelIncludeDot),m=Te(e.labelDotRadius),y=Te(e.labelDotOrientation),x=new Set(["right","top","bottom"]),b=2*Math.PI*rn/360;e.dataMapper.onUpdateObj(function(T,M){var N=un(T.children,2),C=N[0],B=N[1],P=un(B.children,1),I=P[0],D=h(M),q=Vi(D);B.material.color.set(vs(D)),B.material.transparent=q<1,B.material.opacity=q;var O=d(M),k=y(M);!O||!x.has(k)&&(k="bottom");var z=O?+m(M)*b:1e-12;C.scale.x=C.scale.y=z;var X=+o(M)*b;if(B.geometry&&B.geometry.dispose(),B.geometry=new Ci.TextGeometry(s(M),{font:e.font,size:X,depth:0,bevelEnabled:!0,bevelThickness:0,bevelSize:0,curveSegments:e.labelResolution}),I.geometry&&I.geometry.dispose(),B.geometry.computeBoundingBox(),I.geometry=B3(Ci.BoxGeometry,Qt(new Ci.Vector3().subVectors(B.geometry.boundingBox.max,B.geometry.boundingBox.min).clampScalar(0,1/0).toArray())),k!=="right"&&B.geometry.center(),O){var W=z+X/2;k==="right"&&(B.position.x=W),B.position.y={right:-X/2,top:W+X/2,bottom:-W-X/2}[k]}var K=function(oe){var he=T.__currentTargetD=oe,_e=he.lat,ye=he.lng,Pe=he.alt,qe=he.rot,Ye=he.scale;Object.assign(T.position,xi(_e,ye,Pe)),T.lookAt(e.scene.localToWorld(new Ci.Vector3(0,0,0))),T.rotateY(Math.PI),T.rotateZ(-qe*Math.PI/180),T.scale.x=T.scale.y=T.scale.z=Ye},Z={lat:+t(M),lng:+n(M),alt:+i(M),rot:+u(M),scale:1},se=T.__currentTargetD||Object.assign({},Z,{scale:1e-12});Object.keys(Z).some(function(Y){return se[Y]!==Z[Y]})&&(!e.labelsTransitionDuration||e.labelsTransitionDuration<0?K(Z):e.tweenGroup.add(new Yr(se).to(Z,e.labelsTransitionDuration).easing(er.Quadratic.InOut).onUpdate(K).start()))}).digest(e.labelsData)}}),h$=Vt(Vt({},window.THREE?window.THREE:{}),{},{CSS2DObject:cz}),yx=dr({props:{htmlElementsData:{default:[]},htmlLat:{default:"lat"},htmlLng:{default:"lng"},htmlAltitude:{default:0},htmlElement:{},htmlElementVisibilityModifier:{triggerUpdate:!1},htmlTransitionDuration:{default:1e3,triggerUpdate:!1},isBehindGlobe:{onChange:function(){this.updateObjVisibility()},triggerUpdate:!1}},methods:{updateObjVisibility:function(e,t){if(e.dataMapper){var n=t?[t]:e.dataMapper.entries().map(function(i){var s=un(i,2),o=s[1];return o}).filter(function(i){return i});n.forEach(function(i){var s=!e.isBehindGlobe||!e.isBehindGlobe(i.position);e.htmlElementVisibilityModifier?(i.visible=!0,e.htmlElementVisibilityModifier(i.element,s)):i.visible=s})}}},init:function(e,t,n){var i=n.tweenGroup;Zt(e),t.scene=e,t.tweenGroup=i,t.dataMapper=new qr(e,{objBindAttr:"__threeObjHtml"}).onCreateObj(function(s){var o=Te(t.htmlElement)(s),u=new h$.CSS2DObject(o);return u.__globeObjType="html",u})},update:function(e,t){var n=this,i=Te(e.htmlLat),s=Te(e.htmlLng),o=Te(e.htmlAltitude);t.hasOwnProperty("htmlElement")&&e.dataMapper.clear(),e.dataMapper.onUpdateObj(function(u,h){var d=function(x){var b=u.__currentTargetD=x,T=b.alt,M=b.lat,N=b.lng;Object.assign(u.position,xi(M,N,T)),n.updateObjVisibility(u)},m={lat:+i(h),lng:+s(h),alt:+o(h)};!e.htmlTransitionDuration||e.htmlTransitionDuration<0||!u.__currentTargetD?d(m):e.tweenGroup.add(new Yr(u.__currentTargetD).to(m,e.htmlTransitionDuration).easing(er.Quadratic.InOut).onUpdate(d).start())}).digest(e.htmlElementsData)}}),V0=window.THREE?window.THREE:{Group:xs,Mesh:Sn,MeshLambertMaterial:Zs,SphereGeometry:Ea},vx=dr({props:{objectsData:{default:[]},objectLat:{default:"lat"},objectLng:{default:"lng"},objectAltitude:{default:.01},objectFacesSurface:{default:!0},objectRotation:{},objectThreeObject:{default:new V0.Mesh(new V0.SphereGeometry(1,16,8),new V0.MeshLambertMaterial({color:"#ffffaa",transparent:!0,opacity:.7}))}},init:function(e,t){Zt(e),t.scene=e,t.dataMapper=new qr(e,{objBindAttr:"__threeObjObject"}).onCreateObj(function(n){var i=Te(t.objectThreeObject)(n);t.objectThreeObject===i&&(i=i.clone());var s=new V0.Group;return s.add(i),s.__globeObjType="object",s})},update:function(e,t){var n=Te(e.objectLat),i=Te(e.objectLng),s=Te(e.objectAltitude),o=Te(e.objectFacesSurface),u=Te(e.objectRotation);t.hasOwnProperty("objectThreeObject")&&e.dataMapper.clear(),e.dataMapper.onUpdateObj(function(h,d){var m=+n(d),y=+i(d),x=+s(d);Object.assign(h.position,xi(m,y,x)),o(d)?h.setRotationFromEuler(new Jl(Aa(-m),Aa(y),0,"YXZ")):h.rotation.set(0,0,0);var b=h.children[0],T=u(d);T&&b.setRotationFromEuler(new Jl(Aa(T.x||0),Aa(T.y||0),Aa(T.z||0)))}).digest(e.objectsData)}}),_x=dr({props:{customLayerData:{default:[]},customThreeObject:{},customThreeObjectUpdate:{triggerUpdate:!1}},init:function(e,t){Zt(e),t.scene=e,t.dataMapper=new qr(e,{objBindAttr:"__threeObjCustom"}).onCreateObj(function(n){var i=Te(t.customThreeObject)(n,rn);return i&&(t.customThreeObject===i&&(i=i.clone()),i.__globeObjType="custom"),i})},update:function(e,t){e.customThreeObjectUpdate||Zt(e.scene);var n=Te(e.customThreeObjectUpdate);t.hasOwnProperty("customThreeObject")&&e.dataMapper.clear(),e.dataMapper.onUpdateObj(function(i,s){return n(i,s,rn)}).digest(e.customLayerData)}}),z0=window.THREE?window.THREE:{Camera:Sd,Group:xs,Vector2:Ot,Vector3:Re},f$=["globeLayer","pointsLayer","arcsLayer","hexBinLayer","heatmapsLayer","polygonsLayer","hexedPolygonsLayer","pathsLayer","tilesLayer","particlesLayer","ringsLayer","labelsLayer","htmlElementsLayer","objectsLayer","customLayer"],xx=wr("globeLayer",ix),d$=Object.assign.apply(Object,Qt(["globeImageUrl","bumpImageUrl","globeCurvatureResolution","globeTileEngineUrl","globeTileEngineMaxLevel","showGlobe","showGraticules","showAtmosphere","atmosphereColor","atmosphereAltitude"].map(function(r){return Wn({},r,xx.linkProp(r))}))),p$=Object.assign.apply(Object,Qt(["globeMaterial"].map(function(r){return Wn({},r,xx.linkMethod(r))}))),m$=wr("pointsLayer",sx),g$=Object.assign.apply(Object,Qt(["pointsData","pointLat","pointLng","pointColor","pointAltitude","pointRadius","pointResolution","pointsMerge","pointsTransitionDuration"].map(function(r){return Wn({},r,m$.linkProp(r))}))),y$=wr("arcsLayer",ax),v$=Object.assign.apply(Object,Qt(["arcsData","arcStartLat","arcStartLng","arcStartAltitude","arcEndLat","arcEndLng","arcEndAltitude","arcColor","arcAltitude","arcAltitudeAutoScale","arcStroke","arcCurveResolution","arcCircularResolution","arcDashLength","arcDashGap","arcDashInitialGap","arcDashAnimateTime","arcsTransitionDuration"].map(function(r){return Wn({},r,y$.linkProp(r))}))),_$=wr("hexBinLayer",Ax),x$=Object.assign.apply(Object,Qt(["hexBinPointsData","hexBinPointLat","hexBinPointLng","hexBinPointWeight","hexBinResolution","hexMargin","hexTopCurvatureResolution","hexTopColor","hexSideColor","hexAltitude","hexBinMerge","hexTransitionDuration"].map(function(r){return Wn({},r,_$.linkProp(r))}))),b$=wr("heatmapsLayer",ux),T$=Object.assign.apply(Object,Qt(["heatmapsData","heatmapPoints","heatmapPointLat","heatmapPointLng","heatmapPointWeight","heatmapBandwidth","heatmapColorFn","heatmapColorSaturation","heatmapBaseAltitude","heatmapTopAltitude","heatmapsTransitionDuration"].map(function(r){return Wn({},r,b$.linkProp(r))}))),w$=wr("hexedPolygonsLayer",hx),S$=Object.assign.apply(Object,Qt(["hexPolygonsData","hexPolygonGeoJsonGeometry","hexPolygonColor","hexPolygonAltitude","hexPolygonResolution","hexPolygonMargin","hexPolygonUseDots","hexPolygonCurvatureResolution","hexPolygonDotResolution","hexPolygonsTransitionDuration"].map(function(r){return Wn({},r,w$.linkProp(r))}))),M$=wr("polygonsLayer",cx),E$=Object.assign.apply(Object,Qt(["polygonsData","polygonGeoJsonGeometry","polygonCapColor","polygonCapMaterial","polygonSideColor","polygonSideMaterial","polygonStrokeColor","polygonAltitude","polygonCapCurvatureResolution","polygonsTransitionDuration"].map(function(r){return Wn({},r,M$.linkProp(r))}))),N$=wr("pathsLayer",fx),R$=Object.assign.apply(Object,Qt(["pathsData","pathPoints","pathPointLat","pathPointLng","pathPointAlt","pathResolution","pathColor","pathStroke","pathDashLength","pathDashGap","pathDashInitialGap","pathDashAnimateTime","pathTransitionDuration"].map(function(r){return Wn({},r,N$.linkProp(r))}))),C$=wr("tilesLayer",dx),P$=Object.assign.apply(Object,Qt(["tilesData","tileLat","tileLng","tileAltitude","tileWidth","tileHeight","tileUseGlobeProjection","tileMaterial","tileCurvatureResolution","tilesTransitionDuration"].map(function(r){return Wn({},r,C$.linkProp(r))}))),B$=wr("particlesLayer",px),D$=Object.assign.apply(Object,Qt(["particlesData","particlesList","particleLat","particleLng","particleAltitude","particlesSize","particlesSizeAttenuation","particlesColor","particlesTexture"].map(function(r){return Wn({},r,B$.linkProp(r))}))),F$=wr("ringsLayer",mx),L$=Object.assign.apply(Object,Qt(["ringsData","ringLat","ringLng","ringAltitude","ringColor","ringResolution","ringMaxRadius","ringPropagationSpeed","ringRepeatPeriod"].map(function(r){return Wn({},r,F$.linkProp(r))}))),I$=wr("labelsLayer",gx),q$=Object.assign.apply(Object,Qt(["labelsData","labelLat","labelLng","labelAltitude","labelRotation","labelText","labelSize","labelTypeFace","labelColor","labelResolution","labelIncludeDot","labelDotRadius","labelDotOrientation","labelsTransitionDuration"].map(function(r){return Wn({},r,I$.linkProp(r))}))),O$=wr("htmlElementsLayer",yx),U$=Object.assign.apply(Object,Qt(["htmlElementsData","htmlLat","htmlLng","htmlAltitude","htmlElement","htmlElementVisibilityModifier","htmlTransitionDuration"].map(function(r){return Wn({},r,O$.linkProp(r))}))),k$=wr("objectsLayer",vx),G$=Object.assign.apply(Object,Qt(["objectsData","objectLat","objectLng","objectAltitude","objectRotation","objectFacesSurface","objectThreeObject"].map(function(r){return Wn({},r,k$.linkProp(r))}))),V$=wr("customLayer",_x),z$=Object.assign.apply(Object,Qt(["customLayerData","customThreeObject","customThreeObjectUpdate"].map(function(r){return Wn({},r,V$.linkProp(r))}))),$$=dr({props:Vt(Vt(Vt(Vt(Vt(Vt(Vt(Vt(Vt(Vt(Vt(Vt(Vt(Vt(Vt({onGlobeReady:{triggerUpdate:!1},rendererSize:{default:new z0.Vector2(window.innerWidth,window.innerHeight),onChange:function(e,t){t.pathsLayer.rendererSize(e)},triggerUpdate:!1}},d$),g$),v$),x$),T$),E$),S$),R$),P$),D$),L$),q$),U$),G$),z$),methods:Vt({getGlobeRadius:Ig,getCoords:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return xi.apply(void 0,n)},toGeoCoords:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return rx.apply(void 0,n)},setPointOfView:function(e,t){var n=t instanceof z0.Camera?t.position:t,i=Ig(),s=void 0;if(e.scene&&n){var o,u,h,d;s=function(y){o===void 0&&(o=n.clone().applyMatrix4(e.scene.matrixWorld.clone().invert())),u===void 0&&(u=o.length()),h===void 0&&(h=Math.sqrt(Math.pow(u,2)-Math.pow(i,2))),d===void 0&&(d=Math.acos(h/u));var x=o.distanceTo(y);if(x<h)return!1;var b=y.length(),T=Math.acos((Math.pow(u,2)+Math.pow(x,2)-Math.pow(b,2))/(2*u*x));return T<d}}e.layersThatNeedUpdatePov.forEach(function(m){return m.updatePov(t)}),e.layersThatNeedBehindGlobeChecker.forEach(function(m){return m.isBehindGlobe(s)})},pauseAnimation:function(e){return e.animationFrameRequestId!==null&&(cancelAnimationFrame(e.animationFrameRequestId),e.animationFrameRequestId=null),e.pausableLayers.forEach(function(t){var n;return(n=t.pauseAnimation)===null||n===void 0?void 0:n.call(t)}),this},resumeAnimation:function(e){return e.animationFrameRequestId===null&&this._animationCycle(),e.pausableLayers.forEach(function(t){var n;return(n=t.resumeAnimation)===null||n===void 0?void 0:n.call(t)}),this},_animationCycle:function(e){e.animationFrameRequestId=requestAnimationFrame(this._animationCycle),e.tweenGroup.update()},_destructor:function(e){this.pauseAnimation(),e.destructableLayers.forEach(function(t){return t._destructor()})}},p$),stateInit:function(){var e=new G6,t={tweenGroup:e},n={globeLayer:ix(t),pointsLayer:sx(t),arcsLayer:ax(t),hexBinLayer:Ax(t),heatmapsLayer:ux(t),polygonsLayer:cx(t),hexedPolygonsLayer:hx(t),pathsLayer:fx(t),tilesLayer:dx(t),particlesLayer:px(t),ringsLayer:mx(t),labelsLayer:gx(t),htmlElementsLayer:yx(t),objectsLayer:vx(t),customLayer:_x(t)};return Vt(Vt({tweenGroup:e},n),{},{layersThatNeedUpdatePov:Object.values(n).filter(function(i){return i.hasOwnProperty("updatePov")}),layersThatNeedBehindGlobeChecker:Object.values(n).filter(function(i){return i.hasOwnProperty("isBehindGlobe")}),destructableLayers:Object.values(n).filter(function(i){return i.hasOwnProperty("_destructor")}),pausableLayers:Object.values(n).filter(function(i){return i.hasOwnProperty("pauseAnimation")})})},init:function(e,t,n){var i=n.animateIn,s=i===void 0?!0:i,o=n.waitForGlobeReady,u=o===void 0?!0:o;Zt(e),t.scene=e,t.scene.visible=!1,f$.forEach(function(d){var m=new z0.Group;t.scene.add(m),t[d](m)});var h=function(){if(s){t.scene.scale.set(1e-6,1e-6,1e-6),t.tweenGroup.add(new Yr({k:1e-6}).to({k:1},600).easing(er.Quadratic.Out).onUpdate(function(y){var x=y.k;return t.scene.scale.set(x,x,x)}).start());var m=new z0.Vector3(0,1,0);t.tweenGroup.add(new Yr({rot:Math.PI*2}).to({rot:0},1200).easing(er.Quintic.Out).onUpdate(function(y){var x=y.rot;return t.scene.setRotationFromAxisAngle(m,x)}).start())}t.scene.visible=!0,t.onGlobeReady&&t.onGlobeReady()};u?t.globeLayer.onReady(h):h(),this._animationCycle()},update:function(e){}});function H$(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Object,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=(function(i){function s(){var o;i2(this,s);for(var u=arguments.length,h=new Array(u),d=0;d<u;d++)h[d]=arguments[d];return o=r2(this,s,[].concat(h)),o.__kapsuleInstance=B3(r,[].concat(Qt(t?[o]:[]),h)),o}return o2(s,i),s2(s)})(e);return Object.keys(r()).forEach(function(i){return n.prototype[i]=function(){var s,o=(s=this.__kapsuleInstance)[i].apply(s,arguments);return o===this.__kapsuleInstance?this:o}}),n}var j$=window.THREE?window.THREE:{Group:xs},W$=H$($$,j$.Group,!0),Q$=Object.defineProperty,X$=(r,e,t)=>e in r?Q$(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Y$=(r,e,t)=>(X$(r,e+"",t),t);class K${constructor(){Y$(this,"_listeners")}addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const n=this._listeners[e.type];if(n!==void 0){e.target=this;const i=n.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}}var Z$=Object.defineProperty,J$=(r,e,t)=>e in r?Z$(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Je=(r,e,t)=>(J$(r,typeof e!="symbol"?e+"":e,t),t);const $0=new Vw,Hg=new Bd,eH=Math.cos(70*(Math.PI/180)),jg=(r,e)=>(r%e+e)%e;let tH=class extends K${constructor(e,t){super(),Je(this,"object"),Je(this,"domElement"),Je(this,"enabled",!0),Je(this,"target",new Re),Je(this,"minDistance",0),Je(this,"maxDistance",1/0),Je(this,"minZoom",0),Je(this,"maxZoom",1/0),Je(this,"minPolarAngle",0),Je(this,"maxPolarAngle",Math.PI),Je(this,"minAzimuthAngle",-1/0),Je(this,"maxAzimuthAngle",1/0),Je(this,"enableDamping",!1),Je(this,"dampingFactor",.05),Je(this,"enableZoom",!0),Je(this,"zoomSpeed",1),Je(this,"enableRotate",!0),Je(this,"rotateSpeed",1),Je(this,"enablePan",!0),Je(this,"panSpeed",1),Je(this,"screenSpacePanning",!0),Je(this,"keyPanSpeed",7),Je(this,"zoomToCursor",!1),Je(this,"autoRotate",!1),Je(this,"autoRotateSpeed",2),Je(this,"reverseOrbit",!1),Je(this,"reverseHorizontalOrbit",!1),Je(this,"reverseVerticalOrbit",!1),Je(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),Je(this,"mouseButtons",{LEFT:$a.ROTATE,MIDDLE:$a.DOLLY,RIGHT:$a.PAN}),Je(this,"touches",{ONE:Ha.ROTATE,TWO:Ha.DOLLY_PAN}),Je(this,"target0"),Je(this,"position0"),Je(this,"zoom0"),Je(this,"_domElementKeyEvents",null),Je(this,"getPolarAngle"),Je(this,"getAzimuthalAngle"),Je(this,"setPolarAngle"),Je(this,"setAzimuthalAngle"),Je(this,"getDistance"),Je(this,"getZoomScale"),Je(this,"listenToKeyEvents"),Je(this,"stopListenToKeyEvents"),Je(this,"saveState"),Je(this,"reset"),Je(this,"update"),Je(this,"connect"),Je(this,"dispose"),Je(this,"dollyIn"),Je(this,"dollyOut"),Je(this,"getScale"),Je(this,"setScale"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>m.phi,this.getAzimuthalAngle=()=>m.theta,this.setPolarAngle=le=>{let De=jg(le,2*Math.PI),rt=m.phi;rt<0&&(rt+=2*Math.PI),De<0&&(De+=2*Math.PI);let ge=Math.abs(De-rt);2*Math.PI-ge<ge&&(De<rt?De+=2*Math.PI:rt+=2*Math.PI),y.phi=De-rt,n.update()},this.setAzimuthalAngle=le=>{let De=jg(le,2*Math.PI),rt=m.theta;rt<0&&(rt+=2*Math.PI),De<0&&(De+=2*Math.PI);let ge=Math.abs(De-rt);2*Math.PI-ge<ge&&(De<rt?De+=2*Math.PI:rt+=2*Math.PI),y.theta=De-rt,n.update()},this.getDistance=()=>n.object.position.distanceTo(n.target),this.listenToKeyEvents=le=>{le.addEventListener("keydown",Fa),this._domElementKeyEvents=le},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",Fa),this._domElementKeyEvents=null},this.saveState=()=>{n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=()=>{n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(i),n.update(),h=u.NONE},this.update=(()=>{const le=new Re,De=new Re(0,1,0),rt=new Uh().setFromUnitVectors(e.up,De),ge=rt.clone().invert(),Dn=new Re,ei=new Uh,Hi=2*Math.PI;return function(){const La=n.object.position;rt.setFromUnitVectors(e.up,De),ge.copy(rt).invert(),le.copy(La).sub(n.target),le.applyQuaternion(rt),m.setFromVector3(le),n.autoRotate&&h===u.NONE&&se(K()),n.enableDamping?(m.theta+=y.theta*n.dampingFactor,m.phi+=y.phi*n.dampingFactor):(m.theta+=y.theta,m.phi+=y.phi);let ti=n.minAzimuthAngle,ni=n.maxAzimuthAngle;isFinite(ti)&&isFinite(ni)&&(ti<-Math.PI?ti+=Hi:ti>Math.PI&&(ti-=Hi),ni<-Math.PI?ni+=Hi:ni>Math.PI&&(ni-=Hi),ti<=ni?m.theta=Math.max(ti,Math.min(ni,m.theta)):m.theta=m.theta>(ti+ni)/2?Math.max(ti,m.theta):Math.min(ni,m.theta)),m.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,m.phi)),m.makeSafe(),n.enableDamping===!0?n.target.addScaledVector(b,n.dampingFactor):n.target.add(b),n.zoomToCursor&&z||n.object.isOrthographicCamera?m.radius=He(m.radius):m.radius=He(m.radius*x),le.setFromSpherical(m),le.applyQuaternion(ge),La.copy(n.target).add(le),n.object.matrixAutoUpdate||n.object.updateMatrix(),n.object.lookAt(n.target),n.enableDamping===!0?(y.theta*=1-n.dampingFactor,y.phi*=1-n.dampingFactor,b.multiplyScalar(1-n.dampingFactor)):(y.set(0,0,0),b.set(0,0,0));let no=!1;if(n.zoomToCursor&&z){let ji=null;if(n.object instanceof Mo&&n.object.isPerspectiveCamera){const Ss=le.length();ji=He(Ss*x);const Mi=Ss-ji;n.object.position.addScaledVector(O,Mi),n.object.updateMatrixWorld()}else if(n.object.isOrthographicCamera){const Ss=new Re(k.x,k.y,0);Ss.unproject(n.object),n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/x)),n.object.updateProjectionMatrix(),no=!0;const Mi=new Re(k.x,k.y,0);Mi.unproject(n.object),n.object.position.sub(Mi).add(Ss),n.object.updateMatrixWorld(),ji=le.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),n.zoomToCursor=!1;ji!==null&&(n.screenSpacePanning?n.target.set(0,0,-1).transformDirection(n.object.matrix).multiplyScalar(ji).add(n.object.position):($0.origin.copy(n.object.position),$0.direction.set(0,0,-1).transformDirection(n.object.matrix),Math.abs(n.object.up.dot($0.direction))<eH?e.lookAt(n.target):(Hg.setFromNormalAndCoplanarPoint(n.object.up,n.target),$0.intersectPlane(Hg,n.target))))}else n.object instanceof Ul&&n.object.isOrthographicCamera&&(no=x!==1,no&&(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/x)),n.object.updateProjectionMatrix()));return x=1,z=!1,no||Dn.distanceToSquared(n.object.position)>d||8*(1-ei.dot(n.object.quaternion))>d?(n.dispatchEvent(i),Dn.copy(n.object.position),ei.copy(n.object.quaternion),no=!1,!0):!1}})(),this.connect=le=>{n.domElement=le,n.domElement.style.touchAction="none",n.domElement.addEventListener("contextmenu",Gu),n.domElement.addEventListener("pointerdown",Ba),n.domElement.addEventListener("pointercancel",Jr),n.domElement.addEventListener("wheel",ku)},this.dispose=()=>{var le,De,rt,ge,Dn,ei;n.domElement&&(n.domElement.style.touchAction="auto"),(le=n.domElement)==null||le.removeEventListener("contextmenu",Gu),(De=n.domElement)==null||De.removeEventListener("pointerdown",Ba),(rt=n.domElement)==null||rt.removeEventListener("pointercancel",Jr),(ge=n.domElement)==null||ge.removeEventListener("wheel",ku),(Dn=n.domElement)==null||Dn.ownerDocument.removeEventListener("pointermove",Da),(ei=n.domElement)==null||ei.ownerDocument.removeEventListener("pointerup",Jr),n._domElementKeyEvents!==null&&n._domElementKeyEvents.removeEventListener("keydown",Fa)};const n=this,i={type:"change"},s={type:"start"},o={type:"end"},u={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let h=u.NONE;const d=1e-6,m=new O4,y=new O4;let x=1;const b=new Re,T=new Ot,M=new Ot,N=new Ot,C=new Ot,B=new Ot,P=new Ot,I=new Ot,D=new Ot,q=new Ot,O=new Re,k=new Ot;let z=!1;const X=[],W={};function K(){return 2*Math.PI/60/60*n.autoRotateSpeed}function Z(){return Math.pow(.95,n.zoomSpeed)}function se(le){n.reverseOrbit||n.reverseHorizontalOrbit?y.theta+=le:y.theta-=le}function Y(le){n.reverseOrbit||n.reverseVerticalOrbit?y.phi+=le:y.phi-=le}const oe=(()=>{const le=new Re;return function(rt,ge){le.setFromMatrixColumn(ge,0),le.multiplyScalar(-rt),b.add(le)}})(),he=(()=>{const le=new Re;return function(rt,ge){n.screenSpacePanning===!0?le.setFromMatrixColumn(ge,1):(le.setFromMatrixColumn(ge,0),le.crossVectors(n.object.up,le)),le.multiplyScalar(rt),b.add(le)}})(),_e=(()=>{const le=new Re;return function(rt,ge){const Dn=n.domElement;if(Dn&&n.object instanceof Mo&&n.object.isPerspectiveCamera){const ei=n.object.position;le.copy(ei).sub(n.target);let Hi=le.length();Hi*=Math.tan(n.object.fov/2*Math.PI/180),oe(2*rt*Hi/Dn.clientHeight,n.object.matrix),he(2*ge*Hi/Dn.clientHeight,n.object.matrix)}else Dn&&n.object instanceof Ul&&n.object.isOrthographicCamera?(oe(rt*(n.object.right-n.object.left)/n.object.zoom/Dn.clientWidth,n.object.matrix),he(ge*(n.object.top-n.object.bottom)/n.object.zoom/Dn.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}})();function ye(le){n.object instanceof Mo&&n.object.isPerspectiveCamera||n.object instanceof Ul&&n.object.isOrthographicCamera?x=le:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function Pe(le){ye(x/le)}function qe(le){ye(x*le)}function Ye(le){if(!n.zoomToCursor||!n.domElement)return;z=!0;const De=n.domElement.getBoundingClientRect(),rt=le.clientX-De.left,ge=le.clientY-De.top,Dn=De.width,ei=De.height;k.x=rt/Dn*2-1,k.y=-(ge/ei)*2+1,O.set(k.x,k.y,1).unproject(n.object).sub(n.object.position).normalize()}function He(le){return Math.max(n.minDistance,Math.min(n.maxDistance,le))}function Rt(le){T.set(le.clientX,le.clientY)}function pt(le){Ye(le),I.set(le.clientX,le.clientY)}function Nt(le){C.set(le.clientX,le.clientY)}function It(le){M.set(le.clientX,le.clientY),N.subVectors(M,T).multiplyScalar(n.rotateSpeed);const De=n.domElement;De&&(se(2*Math.PI*N.x/De.clientHeight),Y(2*Math.PI*N.y/De.clientHeight)),T.copy(M),n.update()}function dn(le){D.set(le.clientX,le.clientY),q.subVectors(D,I),q.y>0?Pe(Z()):q.y<0&&qe(Z()),I.copy(D),n.update()}function Nn(le){B.set(le.clientX,le.clientY),P.subVectors(B,C).multiplyScalar(n.panSpeed),_e(P.x,P.y),C.copy(B),n.update()}function sn(le){Ye(le),le.deltaY<0?qe(Z()):le.deltaY>0&&Pe(Z()),n.update()}function Bn(le){let De=!1;switch(le.code){case n.keys.UP:_e(0,n.keyPanSpeed),De=!0;break;case n.keys.BOTTOM:_e(0,-n.keyPanSpeed),De=!0;break;case n.keys.LEFT:_e(n.keyPanSpeed,0),De=!0;break;case n.keys.RIGHT:_e(-n.keyPanSpeed,0),De=!0;break}De&&(le.preventDefault(),n.update())}function ir(){if(X.length==1)T.set(X[0].pageX,X[0].pageY);else{const le=.5*(X[0].pageX+X[1].pageX),De=.5*(X[0].pageY+X[1].pageY);T.set(le,De)}}function on(){if(X.length==1)C.set(X[0].pageX,X[0].pageY);else{const le=.5*(X[0].pageX+X[1].pageX),De=.5*(X[0].pageY+X[1].pageY);C.set(le,De)}}function Rn(){const le=X[0].pageX-X[1].pageX,De=X[0].pageY-X[1].pageY,rt=Math.sqrt(le*le+De*De);I.set(0,rt)}function Or(){n.enableZoom&&Rn(),n.enablePan&&on()}function to(){n.enableZoom&&Rn(),n.enableRotate&&ir()}function sr(le){if(X.length==1)M.set(le.pageX,le.pageY);else{const rt=KA(le),ge=.5*(le.pageX+rt.x),Dn=.5*(le.pageY+rt.y);M.set(ge,Dn)}N.subVectors(M,T).multiplyScalar(n.rotateSpeed);const De=n.domElement;De&&(se(2*Math.PI*N.x/De.clientHeight),Y(2*Math.PI*N.y/De.clientHeight)),T.copy(M)}function Ur(le){if(X.length==1)B.set(le.pageX,le.pageY);else{const De=KA(le),rt=.5*(le.pageX+De.x),ge=.5*(le.pageY+De.y);B.set(rt,ge)}P.subVectors(B,C).multiplyScalar(n.panSpeed),_e(P.x,P.y),C.copy(B)}function $i(le){const De=KA(le),rt=le.pageX-De.x,ge=le.pageY-De.y,Dn=Math.sqrt(rt*rt+ge*ge);D.set(0,Dn),q.set(0,Math.pow(D.y/I.y,n.zoomSpeed)),Pe(q.y),I.copy(D)}function a2(le){n.enableZoom&&$i(le),n.enablePan&&Ur(le)}function Si(le){n.enableZoom&&$i(le),n.enableRotate&&sr(le)}function Ba(le){var De,rt;n.enabled!==!1&&(X.length===0&&((De=n.domElement)==null||De.ownerDocument.addEventListener("pointermove",Da),(rt=n.domElement)==null||rt.ownerDocument.addEventListener("pointerup",Jr)),c2(le),le.pointerType==="touch"?l2(le):YA(le))}function Da(le){n.enabled!==!1&&(le.pointerType==="touch"?u2(le):A2(le))}function Jr(le){var De,rt,ge;h2(le),X.length===0&&((De=n.domElement)==null||De.releasePointerCapture(le.pointerId),(rt=n.domElement)==null||rt.ownerDocument.removeEventListener("pointermove",Da),(ge=n.domElement)==null||ge.ownerDocument.removeEventListener("pointerup",Jr)),n.dispatchEvent(o),h=u.NONE}function YA(le){let De;switch(le.button){case 0:De=n.mouseButtons.LEFT;break;case 1:De=n.mouseButtons.MIDDLE;break;case 2:De=n.mouseButtons.RIGHT;break;default:De=-1}switch(De){case $a.DOLLY:if(n.enableZoom===!1)return;pt(le),h=u.DOLLY;break;case $a.ROTATE:if(le.ctrlKey||le.metaKey||le.shiftKey){if(n.enablePan===!1)return;Nt(le),h=u.PAN}else{if(n.enableRotate===!1)return;Rt(le),h=u.ROTATE}break;case $a.PAN:if(le.ctrlKey||le.metaKey||le.shiftKey){if(n.enableRotate===!1)return;Rt(le),h=u.ROTATE}else{if(n.enablePan===!1)return;Nt(le),h=u.PAN}break;default:h=u.NONE}h!==u.NONE&&n.dispatchEvent(s)}function A2(le){if(n.enabled!==!1)switch(h){case u.ROTATE:if(n.enableRotate===!1)return;It(le);break;case u.DOLLY:if(n.enableZoom===!1)return;dn(le);break;case u.PAN:if(n.enablePan===!1)return;Nn(le);break}}function ku(le){n.enabled===!1||n.enableZoom===!1||h!==u.NONE&&h!==u.ROTATE||(le.preventDefault(),n.dispatchEvent(s),sn(le),n.dispatchEvent(o))}function Fa(le){n.enabled===!1||n.enablePan===!1||Bn(le)}function l2(le){switch(Vu(le),X.length){case 1:switch(n.touches.ONE){case Ha.ROTATE:if(n.enableRotate===!1)return;ir(),h=u.TOUCH_ROTATE;break;case Ha.PAN:if(n.enablePan===!1)return;on(),h=u.TOUCH_PAN;break;default:h=u.NONE}break;case 2:switch(n.touches.TWO){case Ha.DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;Or(),h=u.TOUCH_DOLLY_PAN;break;case Ha.DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;to(),h=u.TOUCH_DOLLY_ROTATE;break;default:h=u.NONE}break;default:h=u.NONE}h!==u.NONE&&n.dispatchEvent(s)}function u2(le){switch(Vu(le),h){case u.TOUCH_ROTATE:if(n.enableRotate===!1)return;sr(le),n.update();break;case u.TOUCH_PAN:if(n.enablePan===!1)return;Ur(le),n.update();break;case u.TOUCH_DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;a2(le),n.update();break;case u.TOUCH_DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;Si(le),n.update();break;default:h=u.NONE}}function Gu(le){n.enabled!==!1&&le.preventDefault()}function c2(le){X.push(le)}function h2(le){delete W[le.pointerId];for(let De=0;De<X.length;De++)if(X[De].pointerId==le.pointerId){X.splice(De,1);return}}function Vu(le){let De=W[le.pointerId];De===void 0&&(De=new Ot,W[le.pointerId]=De),De.set(le.pageX,le.pageY)}function KA(le){const De=le.pointerId===X[0].pointerId?X[1]:X[0];return W[De.pointerId]}this.dollyIn=(le=Z())=>{qe(le),n.update()},this.dollyOut=(le=Z())=>{Pe(le),n.update()},this.getScale=()=>x,this.setScale=le=>{ye(le),n.update()},this.getZoomScale=()=>Z(),t!==void 0&&this.connect(t),this.update()}};const nH=ui.forwardRef(({makeDefault:r,camera:e,regress:t,domElement:n,enableDamping:i=!0,keyEvents:s=!1,onChange:o,onStart:u,onEnd:h,...d},m)=>{const y=Cs(q=>q.invalidate),x=Cs(q=>q.camera),b=Cs(q=>q.gl),T=Cs(q=>q.events),M=Cs(q=>q.setEvents),N=Cs(q=>q.set),C=Cs(q=>q.get),B=Cs(q=>q.performance),P=e||x,I=n||T.connected||b.domElement,D=ui.useMemo(()=>new tH(P),[P]);return zw(()=>{D.enabled&&D.update()},-1),ui.useEffect(()=>(s&&D.connect(s===!0?I:s),D.connect(I),()=>void D.dispose()),[s,I,t,D,y]),ui.useEffect(()=>{const q=z=>{y(),t&&B.regress(),o&&o(z)},O=z=>{u&&u(z)},k=z=>{h&&h(z)};return D.addEventListener("change",q),D.addEventListener("start",O),D.addEventListener("end",k),()=>{D.removeEventListener("start",O),D.removeEventListener("end",k),D.removeEventListener("change",q)}},[o,u,h,D,y,M]),ui.useEffect(()=>{if(r){const q=C().controls;return N({controls:D}),()=>N({controls:q})}},[r,D]),ui.createElement("primitive",$w({ref:m,object:D,enableDamping:i},d))}),rH=JSON.parse(`[{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[74.92,37.24],[74.57,37.03],[72.56,36.82],[71.24,36.13],[71.65,35.42],[71.08,34.06],[69.91,34.04],[70.33,33.33],[69.51,33.03],[69.33,31.94],[66.72,31.21],[66.26,29.85],[62.48,29.41],[60.87,29.86],[61.85,31.02],[60.84,31.5],[60.58,33.07],[60.94,33.52],[60.51,34.14],[61.28,35.61],[62.72,35.25],[63.12,35.86],[64.5,36.28],[64.8,37.12],[66.54,37.37],[67.78,37.19],[69.32,37.12],[70.97,38.47],[71.59,37.9],[71.68,36.68],[73.31,37.46],[74.92,37.24]]]]},"properties":{"name":"Afghanistan"},"id":"AF"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[19.44,41.02],[19.37,41.85],[19.65,42.62],[20.07,42.56],[20.59,41.88],[20.82,40.91],[20.98,40.86],[20.01,39.69],[19.29,40.42],[19.44,41.02]]]]},"properties":{"name":"Albania"},"id":"AL"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[2.96,36.8],[8.62,36.94],[8.18,36.52],[8.25,34.64],[7.49,33.89],[9.06,32.1],[9.54,30.23],[9.95,27.82],[9.87,26.51],[9.4,26.15],[10.25,24.61],[11.56,24.3],[11.99,23.52],[5.81,19.45],[4.25,19.15],[3.33,18.98],[3.23,19.82],[1.8,20.31],[-4.81,25],[-6.66,26.13],[-8.67,27.29],[-8.67,27.67],[-8.67,28.71],[-3.63,30.97],[-3.82,31.7],[-1.18,32.11],[-1.75,34.75],[-2.21,35.09],[0.95,36.45],[2.96,36.8]]]]},"properties":{"name":"Algeria"},"id":"DZ"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-170.64,-14.29],[-170.83,-14.33],[-170.56,-14.27],[-170.64,-14.29]]],[[[-169.44,-14.26],[-169.51,-14.28],[-169.54,-14.23],[-169.44,-14.26]]]]},"properties":{"name":"Samoa"},"id":"WS"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[1.78,42.57],[1.72,42.51],[1.45,42.6],[1.78,42.57]]]]},"properties":{"name":"Andorra"},"id":"AD"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[14,-5.85],[16.58,-5.9],[17.62,-8.1],[19.37,-8],[19.54,-7],[21.78,-7.28],[22.25,-11.21],[23.99,-10.87],[24.02,-13.01],[22,-13],[22,-16.17],[23.48,-17.63],[23.28,-17.66],[20.85,-18.02],[18.45,-17.39],[13.99,-17.42],[13.16,-16.95],[11.75,-17.25],[12.51,-13.43],[13.79,-11.79],[12.98,-9.09],[13.39,-8.39],[12.24,-6.1],[13.18,-5.86],[14,-5.85]]],[[[13.09,-4.66],[12.21,-5.77],[12.03,-5.01],[12.78,-4.39],[13.09,-4.63],[13.09,-4.66]]]]},"properties":{"name":"Angola"},"id":"AO"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-61.69,17.02],[-61.89,17.11],[-61.79,17.16],[-61.69,17.02]]],[[[-61.73,17.61],[-61.85,17.58],[-61.87,17.7],[-61.73,17.61]]]]},"properties":{"name":"Antigua and Barbuda"},"id":"AG"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[45.08,39.77],[45.82,39.55],[46.18,38.84],[45,39.42],[44.81,39.63],[44.78,39.71],[45.08,39.77]]],[[[45.51,40.61],[45.52,40.67],[45.57,40.63],[45.51,40.61]]],[[[46.57,41.87],[47.77,41.2],[48.58,41.84],[50.37,40.26],[49.49,40.15],[48.89,38.44],[48.02,38.84],[48.36,39.39],[47.98,39.72],[46.54,38.88],[46.54,39.56],[45.6,39.98],[46,40.23],[45.15,41.2],[45.02,41.3],[46.52,41.05],[46.45,41.9],[46.57,41.87]]]]},"properties":{"name":"Azerbaijan"},"id":"AZ"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-68.26,-52.99],[-68.54,-53.23],[-67.36,-54.03],[-65.14,-54.65],[-66.45,-55.05],[-68.64,-54.79],[-68.62,-52.64],[-68.26,-52.99]]],[[[-65.75,-22.11],[-65.19,-22.09],[-64.59,-22.21],[-64.32,-22.87],[-63.94,-22],[-62.64,-22.24],[-61.01,-23.81],[-57.76,-25.18],[-57.58,-25.55],[-58.6,-27.32],[-55.74,-27.44],[-54.7,-26.44],[-54.6,-25.57],[-53.86,-25.68],[-53.81,-27.13],[-55.77,-28.23],[-57.61,-30.18],[-57.81,-30.75],[-58.2,-32.45],[-58.15,-33.05],[-58.43,-33.1],[-58.53,-33.52],[-58.47,-34.54],[-57.19,-35.32],[-57.38,-35.96],[-56.66,-36.9],[-58.3,-38.49],[-62.38,-38.8],[-62.02,-39.38],[-62.39,-40.9],[-65.13,-40.85],[-65.01,-42.09],[-64.45,-42.45],[-63.75,-42.09],[-63.58,-42.62],[-64.96,-42.67],[-64.3,-42.99],[-65.32,-43.65],[-65.6,-45.02],[-66.95,-45.26],[-67.58,-46],[-66.82,-46.99],[-65.78,-47.19],[-66.24,-47.86],[-65.79,-47.96],[-67.58,-49.03],[-67.9,-49.99],[-69.01,-50.01],[-68.37,-50.15],[-69.41,-51.08],[-68.97,-51.57],[-69.61,-51.63],[-68.99,-51.62],[-68.44,-52.38],[-71.91,-52],[-72.4,-51.51],[-72.29,-50.65],[-73.17,-50.75],[-73.58,-49.54],[-72.56,-48.8],[-72.36,-47.47],[-71.67,-46.68],[-71.78,-45.65],[-71.3,-45.29],[-72.08,-44.77],[-71.11,-44.54],[-71.86,-44.37],[-72.13,-42.29],[-71.73,-42.1],[-71.7,-39.58],[-70.82,-38.57],[-71.19,-36.84],[-70.42,-36.14],[-70.57,-35.25],[-69.81,-34.24],[-70.53,-31.19],[-69.83,-30.19],[-69.66,-28.4],[-68.29,-26.92],[-68.57,-24.77],[-67.34,-24.02],[-67.18,-22.82],[-66.22,-21.78],[-65.75,-22.11]]]]},"properties":{"name":"Argentina"},"id":"AR"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[145.11,-40.82],[146.59,-41.19],[148.22,-40.85],[148,-43.23],[147.32,-42.85],[146.92,-43.62],[146.04,-43.5],[144.68,-41.22],[144.7,-40.76],[145.11,-40.82]]],[[[142.51,-10.87],[143.78,-14.41],[144.51,-14.17],[145.32,-14.95],[146.28,-18.88],[148.78,-20.23],[149.66,-22.5],[150.64,-22.34],[150.87,-23.51],[153.18,-25.95],[153.03,-27.18],[153.63,-28.67],[153.05,-31.04],[150.16,-35.94],[149.97,-37.52],[147.76,-37.98],[146.22,-38.71],[146.39,-39.15],[145.45,-38.23],[144.9,-38.5],[144.93,-37.87],[143.54,-38.86],[141.57,-38.42],[139.81,-37.3],[139.82,-36.55],[139.08,-35.68],[139.67,-36.23],[139.1,-35.62],[139.36,-35.37],[138.09,-35.62],[138.51,-35.03],[138.1,-34.14],[137.74,-35.14],[136.83,-35.25],[137.44,-34.93],[137.95,-33.56],[137.77,-32.52],[135.95,-35.01],[135.11,-34.6],[135.51,-34.62],[134.18,-32.49],[131.15,-31.47],[125.97,-32.27],[124.28,-32.99],[123.54,-33.91],[120,-33.93],[117.93,-35.13],[115.01,-34.26],[114.99,-33.52],[115.71,-33.27],[115.74,-31.87],[114.89,-29.2],[113.22,-26.24],[113.86,-26.51],[113.47,-25.54],[114.22,-26.31],[113.39,-24.43],[114.02,-21.85],[114.15,-22.53],[116.71,-20.65],[121.03,-19.59],[122.35,-18.11],[122.17,-17.24],[122.92,-16.42],[123.58,-17.6],[123.6,-16.99],[123.92,-17.2],[123.57,-16.17],[123.73,-16.14],[123.89,-16.38],[123.96,-16.25],[124.24,-16.41],[124.9,-16.42],[124.4,-16.33],[124.43,-16.1],[124.59,-16.11],[124.73,-15.81],[124.4,-15.87],[124.45,-15.49],[125.18,-15.52],[124.83,-15.16],[125.43,-15.14],[125.14,-14.74],[125.61,-14.22],[125.64,-14.64],[126.04,-14.52],[126.02,-13.92],[126.29,-14.23],[126.86,-13.75],[127.42,-13.95],[128.17,-14.7],[128.01,-15.5],[128.53,-14.76],[129.73,-15.2],[129.94,-14.77],[129.37,-14.33],[130.58,-12.4],[132.75,-12.13],[131.98,-11.13],[135.23,-12.29],[135.91,-11.76],[135.67,-12.2],[136.04,-12.47],[136.56,-11.93],[136.98,-12.36],[136.46,-13.25],[135.92,-13.28],[135.46,-14.94],[139.26,-17.34],[140.49,-17.64],[141.43,-16.08],[141.58,-12.99],[141.94,-12.88],[141.59,-12.55],[142.51,-10.87]]]]},"properties":{"name":"Australia"},"id":"AU"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[13.83,48.77],[14.7,48.58],[15.03,49.02],[16.95,48.62],[17.17,48.01],[16.45,47.7],[16.51,47.01],[16.11,46.87],[13.72,46.53],[12.13,47],[10.47,46.87],[9.6,47.06],[9.53,47.27],[9.57,47.54],[13.02,47.47],[12.76,48.12],[13.83,48.77]]]]},"properties":{"name":"Austria"},"id":"AT"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-73.04,21.14],[-73.69,20.94],[-73.02,21.33],[-73.04,21.14]]],[[[-77.74,24.03],[-77.68,24.3],[-77.57,23.74],[-77.74,24.03]]],[[[-78.19,25.2],[-77.72,24.51],[-78.02,24.27],[-78.44,24.61],[-78.19,25.2]]],[[[-77.92,26.75],[-78.71,26.49],[-78.98,26.7],[-77.92,26.75]]],[[[-77.74,26.91],[-77.04,26.51],[-77.2,25.88],[-77.15,26.55],[-77.74,26.91]]]]},"properties":{"name":"Bahamas, The"},"id":"BS"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[50.53,26.23],[50.57,25.81],[50.46,25.97],[50.53,26.23]]]]},"properties":{"name":"Bahrain"},"id":"BH"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[90.76,22.06],[90.6,22.78],[90.88,22.46],[90.76,22.06]]],[[[88.43,26.55],[89.74,26.16],[89.85,25.29],[92.41,25.03],[91.16,23.64],[91.61,22.94],[92.28,23.71],[92.6,21.98],[92.26,21.05],[92.32,20.74],[91.7,22.49],[90.83,22.69],[90.59,23.6],[90.27,21.85],[90.02,21.86],[90.07,22.16],[89.93,22],[90,22.48],[89.58,21.7],[89.62,22.32],[89.25,21.64],[89.06,22.12],[88.75,24.22],[88.04,24.68],[89.01,25.29],[88.11,25.84],[88.43,26.55]],[[90.24,22.19],[90.06,21.99],[90.22,22.11],[90.24,22.19]]]]},"properties":{"name":"Bangladesh"},"id":"BD"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[45.15,41.2],[46,40.23],[45.6,39.98],[46.54,39.56],[46.54,38.88],[46.18,38.84],[45.82,39.55],[45.08,39.77],[44.78,39.71],[43.66,40.11],[43.46,41.11],[45.02,41.3],[45.15,41.2]],[[45.57,40.63],[45.52,40.67],[45.51,40.61],[45.57,40.63]]]]},"properties":{"name":"Armenia"},"id":"AM"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-59.53,13.05],[-59.64,13.33],[-59.43,13.16],[-59.53,13.05]]]]},"properties":{"name":"Barbados"},"id":"BB"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[4.3,51.26],[4.25,51.38],[5.04,51.49],[6.01,50.76],[6.13,50.13],[6.03,50.18],[5.81,49.55],[4.83,50.17],[4.15,49.98],[2.54,51.09],[3.37,51.37],[4.24,51.35],[4.3,51.26]]]]},"properties":{"name":"Belgium"},"id":"BE"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-64.78,32.27],[-64.86,32.27],[-64.67,32.38],[-64.78,32.27]]]]},"properties":{"name":"Bermuda"},"id":"BM"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[90.47,28.07],[91.66,27.76],[92.07,26.86],[89.64,26.72],[88.92,27.32],[89.59,28.14],[90.47,28.07]]]]},"properties":{"name":"Bhutan"},"id":"BT"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-65.19,-22.09],[-65.75,-22.11],[-66.22,-21.78],[-67.18,-22.82],[-67.88,-22.83],[-68.76,-20.41],[-68.44,-19.43],[-69.48,-17.64],[-69.5,-17.51],[-68.82,-16.34],[-69.42,-15.62],[-68.67,-12.5],[-69.57,-10.95],[-68.58,-11.11],[-66.63,-9.91],[-65.38,-9.7],[-64.99,-12.01],[-60.47,-13.81],[-60.16,-16.26],[-58.33,-16.28],[-58.4,-17.25],[-57.52,-18.2],[-58.16,-20.17],[-59.1,-19.35],[-61.74,-19.65],[-62.64,-22.24],[-63.94,-22],[-64.32,-22.87],[-64.59,-22.21],[-65.19,-22.09]]]]},"properties":{"name":"Bolivia"},"id":"BO"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[17.65,42.89],[17.58,42.94],[16.14,44.2],[15.79,45.17],[19.04,44.86],[19.62,44.05],[19.23,43.51],[18.46,42.57],[17.65,42.89]]]]},"properties":{"name":"Bosnia and Herzegovina"},"id":"BA"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[26.96,-23.75],[25.51,-25.68],[23.01,-25.3],[21.67,-26.86],[20.64,-26.83],[20.81,-25.88],[20,-24.77],[20,-22.01],[20.99,-22],[20.99,-18.32],[23.3,-18],[23.62,-18.49],[25.26,-17.8],[26.17,-19.53],[27.71,-20.51],[28.02,-21.57],[29.37,-22.19],[26.96,-23.75]]]]},"properties":{"name":"Botswana"},"id":"BW"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[3.36,-54.46],[3.37,-54.4],[3.48,-54.4],[3.36,-54.46]]]]},"properties":{"name":"Bouvet Island"},"id":"BV"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-51.9,-1.48],[-51.89,-1.18],[-51.66,-1.08],[-51.61,-0.73],[-51.2,-0.53],[-51.27,-1.01],[-51.9,-1.48]]],[[[-49.71,-0.23],[-48.37,-0.29],[-48.63,-1.06],[-49.17,-1.61],[-50.58,-1.8],[-50.66,-0.28],[-49.71,-0.23]]],[[[-60.1,5.22],[-60.15,4.52],[-59.57,3.9],[-59.99,2.69],[-59.64,1.73],[-58.81,1.19],[-56.47,1.94],[-55.9,1.89],[-55.97,2.53],[-54.6,2.33],[-52.91,2.2],[-51.68,4.03],[-51.54,4.39],[-51.09,3.91],[-50.68,2.16],[-49.93,1.71],[-49.9,1.17],[-51.26,-0.14],[-51.7,-0.75],[-51.71,-1.03],[-51.92,-1.17],[-51.94,-1.34],[-52.71,-1.6],[-52.21,-1.69],[-50.85,-0.92],[-50.66,-1.77],[-51.34,-1.65],[-51.45,-2.27],[-51.31,-1.76],[-50.85,-2.51],[-50.68,-1.81],[-49.29,-1.71],[-49.49,-2.56],[-48.7,-1.47],[-48.18,-1.47],[-48.5,-1.46],[-48.24,-0.87],[-47.43,-0.58],[-45.33,-1.31],[-45.35,-1.74],[-44.86,-1.43],[-44.36,-2.34],[-44.79,-3.3],[-44.06,-2.41],[-44.34,-2.83],[-43.35,-2.37],[-41.25,-3.02],[-40,-2.85],[-37.17,-4.92],[-35.42,-5.21],[-34.8,-7.63],[-35.29,-9.18],[-37.15,-10.75],[-38.04,-12.63],[-38.49,-13.02],[-38.9,-12.71],[-39.13,-17.68],[-40.97,-21.99],[-42.03,-22.92],[-43.08,-22.67],[-44.66,-23.05],[-44.58,-23.36],[-46.38,-23.87],[-48.21,-25.46],[-48.72,-25.42],[-48.36,-25.58],[-48.8,-26.07],[-48.49,-27.21],[-48.77,-28.52],[-52.07,-32.17],[-50.57,-30.46],[-51.28,-30.01],[-51.27,-30.8],[-53.37,-33.74],[-53.52,-33.15],[-53.09,-32.73],[-53.88,-31.97],[-55.58,-30.85],[-56.01,-31.08],[-56.81,-30.11],[-57.61,-30.18],[-55.77,-28.23],[-53.81,-27.13],[-53.86,-25.68],[-54.6,-25.57],[-54.33,-24.68],[-54.41,-23.92],[-55.41,-23.96],[-55.85,-22.29],[-57.99,-22.09],[-58.16,-20.17],[-57.52,-18.2],[-58.4,-17.25],[-58.33,-16.28],[-60.16,-16.26],[-60.47,-13.81],[-64.99,-12.01],[-65.38,-9.7],[-66.63,-9.91],[-68.58,-11.11],[-69.57,-10.95],[-70.63,-11.01],[-70.51,-9.43],[-72.14,-10],[-72.37,-9.49],[-73.21,-9.41],[-72.96,-8.98],[-74.01,-7.54],[-73.12,-6.45],[-72.85,-5.12],[-70.77,-4.15],[-69.96,-4.24],[-69.38,-1.34],[-70.04,0.59],[-69.12,0.65],[-69.84,1.07],[-69.85,1.71],[-67.91,1.75],[-67.42,2.14],[-66.87,1.22],[-65.52,0.65],[-63.39,2.15],[-64.05,2.48],[-64.8,4.28],[-62.88,3.56],[-62.75,4.03],[-60.99,4.52],[-60.73,5.2],[-60.1,5.22]]]]},"properties":{"name":"Brazil"},"id":"BR"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-88.38,18.48],[-88.3,18.48],[-88.21,16.97],[-88.91,15.89],[-89.22,15.89],[-89.14,17.82],[-88.38,18.48]]]]},"properties":{"name":"Belize"},"id":"BZ"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[72.49,-7.38],[72.36,-7.27],[72.45,-7.23],[72.49,-7.38]]]]},"properties":{"name":"British Indian Ocean Territory"},"id":"IO"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[161.55,-10.28],[162.39,-10.84],[161.28,-10.33],[161.55,-10.28]]],[[[159.94,-9.43],[160.83,-9.86],[159.83,-9.8],[159.6,-9.32],[159.94,-9.43]]],[[[160.97,-8.85],[161.38,-9.64],[160.58,-8.33],[160.97,-8.85]]],[[[157.63,-8.24],[157.81,-8.62],[157.21,-8.24],[157.63,-8.24]]],[[[159.85,-8.33],[159.89,-8.57],[158.49,-7.55],[159.85,-8.33]]],[[[157.43,-7.32],[156.94,-7.22],[156.44,-6.64],[157.43,-7.32]]]]},"properties":{"name":"Solomon Islands"},"id":"SB"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-64.42,18.44],[-64.41,18.51],[-64.32,18.51],[-64.42,18.44]]]]},"properties":{"name":"British Virgin Islands"},"id":"VG"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[115.22,4.8],[115.34,4.31],[115.03,4.82],[115.15,4.9],[115.22,4.8]]],[[[114.98,4.89],[115.02,4.9],[114.64,4.02],[114.1,4.59],[114.98,4.89]]]]},"properties":{"name":"Brunei"},"id":"BN"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[27.88,42.84],[27.45,42.47],[28.01,41.98],[27.39,42.01],[26.36,41.71],[26.29,41.71],[25.29,41.24],[22.94,41.34],[22.37,42.32],[23,43.19],[22.37,43.83],[22.68,44.22],[24.18,43.68],[27.04,44.15],[28.58,43.75],[27.88,42.84]]]]},"properties":{"name":"Bulgaria"},"id":"BG"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[97.81,28.34],[98.7,27.54],[98.78,26.64],[98.71,25.86],[97.55,24.74],[97.54,23.94],[98.89,24.16],[98.93,23.19],[99.57,22.94],[99.16,22.16],[99.96,22.05],[100.21,21.43],[101.15,21.57],[100.09,20.35],[100.08,20.35],[98.05,19.81],[97.77,18.57],[97.35,18.56],[98.93,16.39],[98.2,15.07],[99.17,13.73],[99.66,11.83],[98.74,10.35],[98.55,9.98],[98.89,11.7],[97.8,14.88],[97.74,16.56],[97.38,16.49],[96.88,17.45],[96.78,16.7],[96.24,16.8],[95.43,15.73],[95.36,16.14],[94.85,15.78],[94.99,16.25],[94.65,15.85],[94.63,16.34],[94.25,15.96],[94.61,17.55],[93.99,19.46],[93.73,19.93],[93.13,19.84],[93.08,20.55],[92.86,20.12],[92.26,21.05],[92.6,21.98],[93.2,22.26],[93.34,24.08],[94.15,23.86],[95.14,26.61],[96.19,27.27],[97.14,27.09],[96.89,27.61],[97.35,28.22],[97.81,28.34]]]]},"properties":{"name":"Burma"},"id":"MM"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[29.23,-3.75],[29.02,-2.74],[29.85,-2.76],[29.95,-2.31],[30.57,-2.4],[30.83,-3.26],[29.42,-4.45],[29.23,-3.75]]]]},"properties":{"name":"Burundi"},"id":"BI"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[26.61,55.67],[28.17,56.15],[30.93,55.6],[30.78,54.79],[32.74,53.46],[31.27,53.02],[31.78,52.11],[30.94,52.07],[30.55,51.25],[25.78,51.94],[23.6,51.53],[23.64,52.08],[23.17,52.28],[23.94,52.73],[23.5,53.95],[25.79,54.16],[25.79,54.87],[26.82,55.28],[26.61,55.67]]]]},"properties":{"name":"Belarus"},"id":"BY"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[107.49,14.45],[107.55,12.35],[105.85,11.66],[106.2,10.77],[105.1,10.96],[104.45,10.42],[103.62,10.5],[103.56,11.16],[103.13,10.88],[102.92,11.64],[102.38,13.57],[103.18,14.33],[105.21,14.35],[106.06,13.93],[106,14.37],[107.55,14.71],[107.49,14.45]]]]},"properties":{"name":"Cambodia"},"id":"KH"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[14.58,12.74],[15.68,9.99],[13.96,9.64],[15.2,8.49],[15.5,7.53],[14.42,6.04],[14.73,4.62],[16.21,2.22],[16.07,1.65],[13.29,2.16],[12.52,2.28],[11.34,2.17],[10.03,2.17],[9.81,2.34],[9.72,3.87],[8.98,4.1],[8.59,4.81],[9.8,6.8],[10.62,7.07],[11.34,6.44],[11.86,7.08],[13.81,11.06],[14.65,11.58],[14.07,13.08],[14.5,13],[14.58,12.74]]]]},"properties":{"name":"Cameroon"},"id":"CM"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-127.23,50.64],[-125.45,50.32],[-123.29,48.41],[-125.11,48.73],[-124.81,49.24],[-125.48,48.92],[-125.9,49.44],[-126.54,49.37],[-126.09,49.66],[-127.9,50.11],[-127.41,50.59],[-128.42,50.77],[-127.23,50.64]]],[[[-53.76,48.5],[-52.98,48.6],[-53.95,48.18],[-53.55,47.53],[-52.83,48.1],[-53.27,47.61],[-52.61,47.52],[-53.1,46.64],[-53.62,46.64],[-53.59,47.16],[-54.19,46.82],[-53.87,47.4],[-54.2,47.86],[-55.69,46.86],[-55.98,46.95],[-54.94,47.78],[-55.59,47.4],[-56.17,47.5],[-55.77,47.96],[-56.84,47.52],[-59.41,47.89],[-58.42,48.49],[-59.26,48.48],[-58.4,49.13],[-57.88,48.97],[-58.22,49.39],[-57.7,49.46],[-57.38,50.69],[-55.9,51.63],[-55.41,51.56],[-56.09,51.37],[-55.73,51.08],[-56.85,49.54],[-56.15,50.15],[-55.49,50.01],[-56.13,49.43],[-55.14,49.55],[-55.38,49.04],[-53.78,49.4],[-53.49,49.22],[-54.1,48.81],[-53.76,48.5]],[[-53.76,48.5],[-54.09,48.43],[-54.14,48.36],[-53.76,48.5]]],[[[-85.48,65.79],[-84.92,65.21],[-84.44,65.46],[-81.76,64.5],[-81.99,63.99],[-80.17,63.77],[-81.08,63.45],[-83.07,64.19],[-85.27,63.12],[-85.72,63.72],[-87.19,63.59],[-86.19,64.1],[-86.1,65.53],[-85.48,65.79]]],[[[-95.9,66.95],[-95.22,66.97],[-95.71,67.73],[-95.47,68.06],[-93.55,68.59],[-93.67,68.97],[-94.63,68.76],[-94.3,69.3],[-93.36,69.37],[-96.53,70.13],[-95.79,70.54],[-96.61,70.79],[-96.5,71.28],[-94.61,71.86],[-95.22,71.94],[-93.71,71.76],[-92.97,71.34],[-93.03,70.85],[-91.51,70.17],[-92.92,69.67],[-90.31,69.45],[-91.45,69.35],[-90.44,68.87],[-90.27,68.24],[-89.31,69.25],[-88.05,68.82],[-87.79,68.33],[-88.37,67.96],[-87.51,67.11],[-86.52,67.35],[-85.66,68.73],[-84.53,69.02],[-85.47,69.27],[-85.57,69.86],[-82.26,69.64],[-83.23,69.54],[-81.33,69.18],[-82.06,68.87],[-81.27,68.63],[-82.64,68.5],[-81.24,67.47],[-81.5,67],[-83.4,66.35],[-83.92,66.88],[-84.27,66.72],[-84.37,66.97],[-84.92,67.06],[-84.64,66.98],[-85.23,66.88],[-84.6,66.94],[-83.69,66.19],[-86.78,66.53],[-85.9,66.17],[-87.4,65.32],[-91.43,65.95],[-86.93,65.14],[-88.11,64.14],[-90.12,64.13],[-89.81,63.94],[-90.28,64],[-90.21,63.61],[-92.48,63.81],[-90.63,63.06],[-92.42,62.83],[-91.89,62.6],[-93.62,61.94],[-93.24,61.78],[-93.98,61.46],[-94.82,59.64],[-94.23,58.78],[-94.36,58.22],[-94.14,58.76],[-93.15,58.74],[-92.42,57.34],[-92.88,56.91],[-90.82,57.26],[-85.71,55.63],[-85.12,55.34],[-85.42,54.99],[-82.31,55.15],[-82.3,53.02],[-81.55,52.44],[-81.88,52.19],[-80.44,51.46],[-81.02,51.03],[-80.12,51.3],[-79.33,50.72],[-79.75,51.18],[-79.32,51.66],[-78.85,51.17],[-79.04,51.77],[-78.51,52.46],[-79.05,54.18],[-79.76,54.65],[-77.75,55.3],[-76.53,56.32],[-76.86,57.72],[-78.57,58.64],[-77.77,59.71],[-77.31,59.56],[-77.43,59.91],[-76.76,60.16],[-77.59,60.06],[-77.41,60.54],[-77.83,60.64],[-77.51,60.84],[-78.19,60.79],[-77.47,61.54],[-78.16,62.28],[-77.51,62.56],[-74.57,62.1],[-73.68,62.48],[-72.01,61.68],[-72.3,61.57],[-71.58,61.61],[-71.89,61.43],[-71.39,61.14],[-69.52,61.07],[-69.62,60.07],[-70.95,60.06],[-69.6,59.83],[-69.76,59.32],[-69.23,59.23],[-70.15,58.78],[-69.82,58.59],[-68.36,58.78],[-68.34,58.13],[-69.37,57.77],[-68.4,58.04],[-68,58.58],[-68.13,58.07],[-67.72,58.46],[-67.71,57.92],[-66.39,58.85],[-66.06,58.32],[-65.99,58.9],[-65.32,59.04],[-65.56,59.49],[-64.98,59.38],[-65.53,59.72],[-64.47,60.28],[-64.83,59.99],[-64.17,60.02],[-63.72,59.51],[-64.06,59.38],[-63.36,59.2],[-64.04,59.02],[-62.85,58.69],[-63.59,58.3],[-62.56,58.48],[-63.34,57.98],[-62.45,58.18],[-62.67,57.93],[-61.88,57.63],[-62.55,57.5],[-61.36,57.09],[-61.67,56.62],[-62.57,56.79],[-60.67,55.59],[-60.33,55.78],[-60.68,54.99],[-59.78,55.33],[-59.43,55.14],[-59.94,54.75],[-59.16,55.24],[-59.39,54.98],[-57.35,54.58],[-60.13,53.53],[-60.86,53.79],[-60.1,53.5],[-60.42,53.27],[-57.79,54.07],[-58.18,54.24],[-57.38,54.15],[-57.34,53.44],[-56.46,53.78],[-55.81,53.34],[-56.17,53.03],[-55.76,52.61],[-56.5,52.59],[-55.65,52.44],[-56.2,52.44],[-55.7,52.08],[-56.95,51.42],[-58.63,51.28],[-60.01,50.25],[-66.47,50.26],[-67.38,49.33],[-69.06,48.77],[-71.3,46.74],[-68.21,48.64],[-65,49.22],[-64.22,48.9],[-64.55,48.88],[-64.25,48.49],[-66.84,47.99],[-64.8,47.81],[-65.37,47.09],[-64.8,47.08],[-64.5,46.24],[-62.46,45.61],[-61.92,45.89],[-60.96,45.31],[-64.2,44.58],[-65.48,43.46],[-66.17,43.86],[-65.84,44.58],[-66.19,44.42],[-64.49,45.34],[-64.16,44.98],[-63.36,45.36],[-64.94,45.33],[-64.28,45.8],[-64.75,46.09],[-64.78,45.61],[-67.21,45.18],[-67.8,45.7],[-67.79,47.07],[-69.23,47.47],[-70.88,45.24],[-74.99,44.99],[-76.8,43.63],[-78.72,43.63],[-79.18,43.47],[-78.99,42.82],[-82.7,41.68],[-83.17,42.05],[-82.13,43.59],[-82.54,45.36],[-84.13,46.53],[-88.37,48.31],[-91.42,48.04],[-94.61,48.72],[-95.08,49.36],[-95.15,49],[-122.76,49],[-123.21,49.13],[-122.85,49.44],[-123.24,49.34],[-123.16,49.7],[-123.96,49.51],[-123.53,49.7],[-123.83,50.16],[-123.98,49.8],[-124.77,49.99],[-124.35,50.5],[-125.08,50.32],[-124.81,50.92],[-125.71,50.43],[-126.27,50.63],[-125.62,50.75],[-125.63,51.1],[-126.13,50.68],[-126.56,50.84],[-126.18,50.95],[-127.18,50.93],[-127.03,50.82],[-127.54,51.01],[-126.66,51.19],[-127.79,51.17],[-126.62,51.68],[-127.88,51.67],[-127.17,52.31],[-126.67,51.98],[-126.73,52.37],[-127.19,52.38],[-127.02,52.85],[-128.39,52.29],[-128.13,52.88],[-128.97,53.55],[-127.87,53.24],[-128.81,53.62],[-128.6,54.03],[-129.27,53.38],[-130.05,53.89],[-129.47,54.24],[-130.48,54.36],[-129.96,54.32],[-130.37,54.65],[-129.91,54.61],[-130.17,54.85],[-129.47,55.47],[-130.11,55],[-130.16,55.09],[-129.94,55.28],[-130.1,55.56],[-130.13,55.72],[-130.02,55.91],[-131.82,56.6],[-133.43,58.46],[-135.47,59.8],[-137.48,58.91],[-139.07,60.35],[-141,60.31],[-141,69.64],[-134.31,68.68],[-134.55,69.09],[-132.89,69.65],[-129.4,70.12],[-133.49,68.83],[-132.92,68.69],[-133.35,68.83],[-127.52,70.22],[-128,70.59],[-125.43,69.31],[-124.82,69.71],[-125.2,70],[-124.44,70.15],[-124.5,69.73],[-124.04,69.7],[-124.45,69.37],[-121.68,69.79],[-114.07,68.48],[-115.54,67.92],[-115.1,67.8],[-110.08,68.01],[-108.02,67.29],[-108.62,67.15],[-107.25,66.35],[-107.75,66.92],[-107.08,66.82],[-107.89,68.08],[-106.43,68.15],[-106.47,68.34],[-105.74,68.42],[-105.64,68.63],[-106.54,68.51],[-106.54,68.29],[-107.89,68.27],[-107.6,68.17],[-108.82,68.27],[-106.23,68.94],[-105.49,68.73],[-105.54,68.41],[-104.61,68.24],[-104.5,68.03],[-102.25,67.73],[-98.35,67.8],[-98.62,68.07],[-97.51,67.6],[-97.12,67.79],[-98.71,68.37],[-95.98,68.25],[-96.46,67.48],[-95.33,67.03],[-95.9,66.95]],[[-95.9,66.95],[-96.46,67.06],[-95.63,66.68],[-95.9,66.95]],[[-93.52,63.84],[-92.51,63.82],[-93.78,64.19],[-93.52,63.84]],[[-70.78,48.38],[-69.83,48.17],[-71.05,48.45],[-70.78,48.38]]],[[[-114,72.8],[-114.6,72.6],[-113.03,73.01],[-111.22,72.72],[-111.66,72.28],[-109.78,72.43],[-110.76,72.97],[-109.66,72.92],[-108.62,72.55],[-107.83,71.6],[-107.25,71.9],[-108.29,73.15],[-106.76,73.29],[-105.33,72.75],[-104.36,71.57],[-104.59,71.07],[-101,70.17],[-100.87,69.79],[-103.48,69.69],[-103.02,69.49],[-103.19,69.11],[-102.31,69.5],[-101.75,69.18],[-102.89,68.8],[-105.14,68.9],[-106.6,69.5],[-109.1,68.71],[-113.27,68.45],[-113.52,69.18],[-116.53,69.41],[-117.44,69.99],[-111.49,70.34],[-117.56,70.6],[-118.42,70.99],[-115.06,71.52],[-118.11,71.37],[-117.7,71.67],[-119.13,71.77],[-117.35,72.92],[-114.56,73.38],[-114,72.8]]],[[[-73.35,68.33],[-74.82,69.08],[-76.66,68.7],[-75.59,69.22],[-77.2,69.65],[-76.98,69.94],[-77.63,69.74],[-77.68,70.19],[-79.01,70.68],[-79.59,70.4],[-78.79,69.89],[-81.76,70.12],[-80.95,69.71],[-82.1,70.11],[-83.01,70.3],[-81.71,69.93],[-81.74,69.87],[-82.02,69.87],[-82.14,69.78],[-83.07,70.01],[-85.82,70],[-86.55,70.23],[-86.37,70.53],[-87.92,70.24],[-89.55,71.09],[-87,70.99],[-89.83,71.33],[-90.05,71.95],[-88.41,73.52],[-85.07,73.8],[-86.73,72.72],[-86.24,72.42],[-86.42,72.01],[-84.83,71.27],[-86.82,70.99],[-84.8,70.92],[-84.63,71.67],[-86.05,72.01],[-84.16,72.02],[-85.69,72.89],[-83.95,72.75],[-85.45,73.12],[-83.63,72.98],[-85.19,73.23],[-81.55,73.72],[-80.25,72.73],[-81.38,72.24],[-80.52,72.5],[-80.97,71.88],[-79.67,72.13],[-80.17,72.32],[-79.8,72.5],[-79.01,72.27],[-79.2,71.96],[-77.79,71.79],[-78.87,72.23],[-77,72.13],[-78.56,72.44],[-77.61,72.75],[-75.19,72.49],[-74.95,72.25],[-76.35,71.89],[-74.12,71.98],[-75.39,71.68],[-74.63,71.66],[-75.08,71.18],[-73.75,71.78],[-74.24,71.2],[-73.62,71.58],[-73.38,71.39],[-73.9,71.06],[-73.05,71.27],[-73.38,70.98],[-72.54,71.66],[-71.12,71.26],[-72.57,70.61],[-70.6,71.05],[-71.8,70.43],[-71.16,70.53],[-71.54,70.02],[-69.9,70.88],[-70.5,70.48],[-68.31,70.56],[-70.47,69.84],[-67.79,70.26],[-67.13,69.73],[-70.03,69.54],[-66.8,69.34],[-69.02,69.35],[-68.08,69.22],[-69.03,68.97],[-68.18,69.15],[-67.71,69.02],[-68.56,68.96],[-67.77,68.78],[-69.4,68.86],[-68.04,68.68],[-68.9,68.6],[-68.47,68.61],[-68.71,68.57],[-67.5,68.54],[-67.61,68.38],[-66.71,68.44],[-67.88,68.27],[-67.23,68.36],[-67.01,68.32],[-67.6,68.16],[-67.01,68.29],[-66.77,68.24],[-66.95,68.01],[-66.18,68.02],[-66.73,67.87],[-66.36,67.82],[-65.91,68.16],[-66.01,67.63],[-64.72,67.99],[-65.2,67.65],[-64.51,67.81],[-63.9,67.31],[-64.8,67.36],[-63.96,67.27],[-64.69,67],[-63.11,67.33],[-63.77,66.81],[-62.1,67.05],[-61.26,66.63],[-62.9,66.33],[-61.95,66.02],[-62.97,66.15],[-62.32,65.81],[-63.72,65.68],[-63.32,65.59],[-63.55,64.89],[-65.51,65.74],[-64.36,66.35],[-65.92,65.95],[-65.47,66.39],[-66.07,66.12],[-67.05,66.64],[-67.74,66.57],[-67.28,66.28],[-67.99,66.51],[-67.19,65.91],[-68.85,66.19],[-64.66,64.03],[-64.99,63.82],[-64.53,63.25],[-65.3,63.81],[-64.63,62.9],[-65.25,62.99],[-65.19,62.56],[-66.64,63.37],[-66.55,62.99],[-67.91,63.76],[-67.69,63.37],[-69,63.75],[-65.99,62.24],[-66.07,61.87],[-71.4,63.05],[-72.15,63.45],[-71.23,63.6],[-72.32,63.68],[-73.38,64.27],[-73.3,64.66],[-74.06,64.33],[-74.64,64.9],[-74.99,64.8],[-74.69,64.37],[-75.82,64.61],[-76.67,64.18],[-78.18,64.57],[-77.42,65.46],[-75.77,65.22],[-75.37,64.71],[-75.19,65.1],[-75.95,65.32],[-73.5,65.47],[-74.47,66.15],[-72.26,67.25],[-73.35,68.33]],[[-73.35,68.33],[-73.21,68.38],[-73.32,68.39],[-73.35,68.33]]],[[[-99.8,73.89],[-96.96,73.74],[-98.45,72.87],[-96.52,72.71],[-96.3,72.42],[-96.87,72.04],[-96.49,71.91],[-98.27,71.9],[-98.04,71.53],[-98.73,71.27],[-102.74,72.72],[-102.14,73.09],[-100.41,72.74],[-100.03,72.93],[-100.58,73.17],[-99.77,73.21],[-101.62,73.49],[-100.43,73.41],[-101.12,73.73],[-99.8,73.89]]],[[[-92.64,74.1],[-90.19,73.9],[-92.1,72.74],[-94.32,72.76],[-93.46,72.46],[-94.06,71.98],[-95.21,71.99],[-94.75,72.15],[-95.67,72.81],[-95.67,73.72],[-92.64,74.1]]],[[[-120.15,74.27],[-117.42,74.23],[-115.32,73.48],[-119.14,72.63],[-120.25,72.26],[-120.54,71.52],[-122.78,71.09],[-126,71.97],[-123.77,73.76],[-124.77,74.34],[-120.15,74.27]]],[[[-94.36,75.59],[-93.49,75.26],[-93.47,74.7],[-96.62,74.99],[-94.36,75.59]]],[[[-98.42,76.67],[-97.51,76.19],[-97.94,75.74],[-97.28,75.4],[-98.17,75.33],[-97.58,75.14],[-100.15,74.99],[-100.78,75.35],[-98.95,75.71],[-102.88,75.62],[-101.18,75.78],[-101.91,76.08],[-101.39,76.25],[-102.17,76.24],[-101.89,76.44],[-99.89,75.89],[-99.44,75.97],[-100.15,76.13],[-99.41,76.16],[-100.98,76.5],[-98.42,76.67]]],[[[-108.65,76.81],[-108.08,76.28],[-108.4,76.05],[-107.63,75.99],[-108.02,75.78],[-106.34,76.05],[-105.39,75.64],[-106.01,75.05],[-112.75,74.4],[-114.45,74.67],[-110.91,75.23],[-117.68,75.25],[-115,75.69],[-117.25,75.6],[-114.82,75.88],[-116.73,75.92],[-114.66,76.16],[-115.93,76.29],[-114.9,76.52],[-112.45,76.18],[-111.25,75.52],[-108.9,75.48],[-110.06,75.89],[-109.31,76.11],[-110.39,76.39],[-108.65,76.81]]],[[[-95.66,77.06],[-93.18,76.74],[-93.55,76.39],[-91.41,76.69],[-89.29,76.3],[-91.61,76.26],[-88.95,75.43],[-81.54,75.81],[-79.57,75.45],[-80.44,75.04],[-79.33,74.89],[-81.81,74.46],[-83.51,74.9],[-83.47,74.58],[-84.29,74.5],[-88.5,74.5],[-88.55,74.91],[-91.54,74.65],[-92.49,75.21],[-92.11,75.86],[-93.08,76.36],[-95.38,76.23],[-94.8,76.32],[-96.96,76.73],[-95.66,77.06]]],[[[-116.35,77.54],[-115.39,77.31],[-116.28,77.18],[-115.9,76.69],[-117.1,76.3],[-118.06,76.41],[-117.84,76.82],[-118.97,76.51],[-118.57,76.34],[-119.08,76.08],[-119.65,76.3],[-119.48,75.97],[-119.87,75.86],[-123.04,76.08],[-119.15,77.33],[-116.35,77.54]]],[[[-96.77,78.68],[-94.89,78.1],[-97.1,77.8],[-97.78,78.03],[-96.87,78.13],[-98.41,78.5],[-96.77,78.68]]],[[[-103.59,79.33],[-99.95,78.73],[-98.95,78.06],[-99.91,77.78],[-104.47,78.27],[-105.05,78.49],[-103.32,78.73],[-105.63,79.16],[-103.59,79.33]]],[[[-92.73,81.31],[-88.78,80.13],[-87.68,80.41],[-88.07,80.12],[-86.96,79.9],[-87.46,79.53],[-84.9,79.27],[-87.62,78.65],[-88,78.81],[-87.72,79.08],[-88.16,78.99],[-87.91,78.55],[-88.8,78.61],[-88.82,78.15],[-89.98,78.61],[-89.45,78.16],[-92.06,78.21],[-92.99,78.47],[-91.64,78.55],[-94.29,78.99],[-90.36,79.25],[-95.09,79.27],[-95.78,79.43],[-94.28,79.76],[-95.85,79.65],[-96.8,80.09],[-94.38,79.98],[-94.75,80.08],[-94.08,80.18],[-96.68,80.34],[-93.79,80.53],[-95.53,80.82],[-93.09,81.16],[-94.27,81.35],[-92.73,81.31]]],[[[-70.11,83.11],[-66.3,82.93],[-68.64,82.63],[-64.73,82.9],[-61.08,82.32],[-64.36,81.73],[-69.29,81.72],[-66.61,81.51],[-70.21,81.17],[-64.44,81.48],[-69.43,80.38],[-70.83,80.56],[-70.15,80.19],[-72.42,80.21],[-70.5,80.08],[-71.46,79.9],[-71.18,79.78],[-78.05,79.35],[-74.44,79.06],[-78.89,79.06],[-74.72,78.71],[-76.69,78.51],[-75.06,78.31],[-76.91,78.2],[-75.58,78.11],[-75.92,77.96],[-78.26,78],[-77.72,77.61],[-78.69,77.32],[-81.93,77.68],[-81.17,77.34],[-82.17,77.29],[-81.83,77.16],[-77.78,76.79],[-81.05,76.13],[-80.77,76.42],[-82.73,76.82],[-82.13,76.44],[-89.68,76.57],[-86.74,77.17],[-88.07,77.82],[-84.48,77.29],[-84.61,77.39],[-83.46,77.35],[-83.84,77.46],[-82.32,78.07],[-83.9,77.49],[-84.78,77.52],[-84.43,77.72],[-84.95,77.6],[-85.35,77.73],[-85.05,77.83],[-85.4,77.82],[-84.33,77.9],[-85.68,77.93],[-84.13,78.17],[-84.97,78.2],[-84.64,78.59],[-85.49,78.1],[-87.54,78.14],[-86.86,78.73],[-82.34,78.57],[-83.25,78.83],[-81.48,79.05],[-84.75,79.03],[-83.36,79.05],[-86.49,79.76],[-85.26,79.92],[-86.51,80.3],[-79.9,79.65],[-83.2,80.32],[-78.04,80.57],[-79.96,80.61],[-76.48,80.87],[-78.93,80.88],[-76.75,81.44],[-80.92,80.66],[-85.07,80.51],[-86.74,80.6],[-82.36,81.18],[-87.59,80.63],[-89.47,80.91],[-84.73,81.28],[-89.82,81.01],[-90.35,81.17],[-87.24,81.49],[-91.96,81.66],[-88.08,82.1],[-84.6,81.89],[-86.88,82.2],[-85.05,82.48],[-79.23,81.82],[-82.73,82.4],[-80.58,82.55],[-81.47,82.82],[-78.5,82.68],[-80.43,82.89],[-79.79,82.96],[-75.89,82.59],[-76.23,82.44],[-75.4,82.61],[-77.38,82.99],[-72.63,82.69],[-73.65,82.93],[-70.11,83.11]]]]},"properties":{"name":"Canada"},"id":"CA"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-24.37,14.81],[-24.53,14.92],[-24.38,15.05],[-24.37,14.81]]],[[[-23.45,14.98],[-23.68,14.94],[-23.77,15.25],[-23.45,14.98]]],[[[-22.71,16.04],[-22.96,16.09],[-22.8,16.24],[-22.71,16.04]]],[[[-24.03,16.59],[-24.32,16.48],[-24.43,16.64],[-24.03,16.59]]],[[[-25.28,16.91],[-25.33,17.1],[-24.97,17.11],[-25.28,16.91]]]]},"properties":{"name":"Cape Verde"},"id":"CV"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-81.1,19.31],[-81.4,19.29],[-81.25,19.35],[-81.1,19.31]]]]},"properties":{"name":"Cayman Islands"},"id":"KY"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[19.06,8.58],[18.99,8.96],[20.37,9.11],[21.72,10.64],[22.87,10.92],[23.67,9.87],[23.52,8.71],[25.25,7.85],[27.46,5.02],[25.89,5.19],[22.9,4.82],[22.38,4.13],[20.59,4.41],[19.42,5.13],[18.54,4.34],[18.62,3.48],[16.66,3.53],[16.21,2.22],[14.73,4.62],[14.42,6.04],[15.5,7.53],[18.59,8.04],[19.06,8.58]]]]},"properties":{"name":"Central African Republic"},"id":"CF"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[80.27,9.78],[80.82,9.26],[81.13,8.5],[81.36,8.49],[81.88,7.29],[81.66,6.44],[80.59,5.92],[80.05,6.24],[79.7,8.08],[80.05,9.59],[80.61,9.44],[79.93,9.74],[80.27,9.78]]]]},"properties":{"name":"Sri Lanka"},"id":"LK"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[14.5,13],[14.07,13.08],[13.63,13.72],[13.47,14.46],[15.49,16.91],[16,20.35],[15.2,21.5],[15,23],[16,23.45],[24,19.5],[24,15.7],[22.94,15.56],[21.83,12.8],[22.47,12.62],[22.87,10.92],[21.72,10.64],[20.37,9.11],[18.99,8.96],[19.06,8.58],[18.59,8.04],[15.5,7.53],[15.2,8.49],[13.96,9.64],[15.68,9.99],[14.58,12.74],[14.5,13]]]]},"properties":{"name":"Chad"},"id":"TD"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-68.4,-54.96],[-69.06,-55.06],[-68.21,-55.27],[-68.75,-55.27],[-68.16,-55.4],[-68.05,-55.71],[-68.38,-55.48],[-68.94,-55.46],[-68.78,-55.38],[-68.91,-55.34],[-68.8,-55.19],[-69.43,-55.16],[-69.17,-55.51],[-70.03,-55.16],[-68.4,-54.96]]],[[[-67.78,-54.92],[-67.05,-55.14],[-68.36,-54.94],[-67.78,-54.92]]],[[[-71.26,-54.08],[-71.12,-54.38],[-71.7,-54.16],[-71.26,-54.08]]],[[[-71.67,-53.94],[-71.85,-54.34],[-72.26,-53.94],[-71.67,-53.94]]],[[[-70.44,-53.86],[-70.37,-54.04],[-70.67,-53.93],[-70.52,-54.23],[-70.88,-54.05],[-70.53,-53.56],[-70.44,-53.86]]],[[[-72.91,-53.43],[-72.14,-53.8],[-72.87,-54.14],[-72.73,-53.84],[-73.59,-53.76],[-72.91,-53.43]]],[[[-74.36,-52.95],[-74.75,-52.76],[-73.09,-53.35],[-74.36,-52.95]]],[[[-70.92,-54.71],[-70.77,-54.68],[-70.87,-54.69],[-70.92,-54.71],[-72,-54.46],[-70.13,-54.55],[-70.88,-54.13],[-70.14,-54.43],[-70.06,-54.25],[-69.77,-54.56],[-69.86,-54.28],[-69.24,-54.45],[-69.38,-54.69],[-69.18,-54.58],[-69.16,-54.46],[-68.99,-54.43],[-70.04,-54.1],[-70.18,-53.81],[-69.36,-53.35],[-70.45,-53.37],[-70.1,-52.9],[-70.42,-52.77],[-68.62,-52.64],[-68.64,-54.79],[-70.92,-54.71]]],[[[-74.26,-51.25],[-74.32,-50.92],[-74.19,-51.2],[-74.26,-51.25]]],[[[-74.4,-50.86],[-74.41,-51.09],[-74.96,-50.97],[-74.4,-50.86]]],[[[-74.69,-50.89],[-74.95,-50.73],[-74.75,-50.7],[-74.69,-50.89]]],[[[-74.36,-50.49],[-74.19,-50.85],[-74.67,-50.48],[-74.36,-50.49]]],[[[-75.05,-50.17],[-75.46,-50.36],[-75.4,-50.04],[-75.05,-50.17]]],[[[-75.29,-49.1],[-75.66,-49.22],[-75.36,-48.99],[-75.29,-49.1]]],[[[-74.61,-48.46],[-74.41,-49.73],[-74.77,-50.06],[-74.65,-49.36],[-75.02,-49.9],[-75.47,-49.33],[-74.92,-49.34],[-75.05,-48.8],[-74.61,-48.7],[-75.03,-48.5],[-74.74,-48.12],[-74.61,-48.46]]],[[[-75.24,-48.27],[-75.23,-48.71],[-75.58,-48.09],[-75.24,-48.27]]],[[[-74.93,-48.16],[-75.04,-48.44],[-75.26,-48.07],[-74.93,-48.16]]],[[[-74.46,-45.78],[-74.39,-45.44],[-74.21,-45.64],[-74.46,-45.78]]],[[[-73.65,-45.76],[-73.78,-45.67],[-73.7,-45.44],[-73.65,-45.76]]],[[[-74.02,-45.43],[-73.82,-45.48],[-74.14,-45.58],[-74.02,-45.43]]],[[[-73.98,-45.27],[-73.78,-45.34],[-74.17,-45.25],[-73.98,-45.27]]],[[[-73.85,-45],[-73.73,-45.28],[-74.24,-45.16],[-73.85,-45]]],[[[-74.21,-44.78],[-74.41,-44.63],[-73.87,-44.69],[-74.21,-44.78]]],[[[-72.72,-44.55],[-72.98,-44.61],[-72.83,-44.69],[-73.22,-44.94],[-73.41,-44.82],[-73.21,-44.8],[-73.39,-44.79],[-73.46,-44.64],[-73.23,-44.42],[-72.72,-44.55]]],[[[-73.89,-41.82],[-73.37,-42.25],[-73.82,-42.51],[-73.49,-43.11],[-73.86,-43.4],[-74.41,-43.24],[-73.89,-41.82]]],[[[-69.48,-17.64],[-68.44,-19.43],[-68.76,-20.41],[-67.88,-22.83],[-67.18,-22.82],[-67.34,-24.02],[-68.57,-24.77],[-68.29,-26.92],[-69.66,-28.4],[-69.83,-30.19],[-70.53,-31.19],[-69.81,-34.24],[-70.57,-35.25],[-70.42,-36.14],[-71.19,-36.84],[-70.82,-38.57],[-71.7,-39.58],[-71.73,-42.1],[-72.13,-42.29],[-71.86,-44.37],[-71.11,-44.54],[-72.08,-44.77],[-71.3,-45.29],[-71.78,-45.65],[-71.67,-46.68],[-72.36,-47.47],[-72.56,-48.8],[-73.58,-49.54],[-73.17,-50.75],[-72.29,-50.65],[-72.4,-51.51],[-71.91,-52],[-68.44,-52.38],[-70.81,-52.73],[-71.28,-53.89],[-72.45,-53.4],[-71.8,-53.52],[-71.17,-52.81],[-72.55,-53.07],[-72.19,-53.18],[-72.65,-53.32],[-72.4,-53.54],[-73.22,-53.23],[-71.48,-52.63],[-72.8,-52.54],[-72.98,-53.07],[-73.45,-53.01],[-72.89,-52.52],[-73.69,-52.73],[-73.73,-52.03],[-73.33,-52.22],[-72.99,-52.07],[-72.86,-52.26],[-72.78,-52.06],[-72.94,-52.09],[-72.7,-51.98],[-72.9,-52.46],[-72.47,-51.79],[-73.24,-51.46],[-72.56,-51.78],[-73.28,-51.61],[-72.92,-51.86],[-73.24,-52.09],[-73.39,-51.66],[-73.28,-52.16],[-73.56,-52.05],[-73.64,-51.82],[-73.4,-52.02],[-73.46,-51.69],[-73.91,-51.62],[-73.89,-51.37],[-73.6,-51.62],[-73.71,-51.16],[-74.25,-50.94],[-73.53,-50.71],[-73.72,-50.56],[-73.57,-50.4],[-74.05,-50.83],[-74.29,-50.48],[-73.88,-50.54],[-74.69,-50.2],[-73.87,-50.29],[-74.33,-49.63],[-73.71,-49.76],[-74.11,-49.48],[-73.83,-49.03],[-74.37,-49.43],[-74.02,-48.41],[-74.65,-48.02],[-73.22,-48],[-73.72,-47.53],[-73.93,-47.85],[-74.74,-47.72],[-74.04,-47.62],[-74.53,-47.44],[-73.93,-47.04],[-74.27,-46.79],[-75.01,-46.75],[-74.94,-46.44],[-75.41,-46.93],[-75.72,-46.73],[-74.36,-45.79],[-74.14,-45.81],[-73.97,-46.09],[-74.08,-46.19],[-74.31,-46.25],[-74.49,-46.19],[-74.34,-46.27],[-74.05,-46.2],[-74,-46.29],[-73.85,-46.35],[-74.02,-46.22],[-73.88,-46.14],[-73.76,-46.24],[-73.77,-46.3],[-73.81,-46.39],[-74,-46.56],[-73.91,-46.6],[-73.84,-46.59],[-73.18,-45.67],[-73.59,-45.78],[-73.52,-45.46],[-72.83,-45.42],[-73.39,-44.98],[-73.14,-44.94],[-72.77,-44.75],[-72.61,-44.47],[-73.29,-44.14],[-72.54,-42.56],[-72.85,-42.28],[-72.42,-42.45],[-72.86,-41.91],[-72.31,-41.44],[-73.75,-41.75],[-73.49,-41.52],[-74,-40.97],[-73.22,-39.41],[-73.64,-37.21],[-73.19,-37.14],[-71.44,-32.64],[-71.52,-28.97],[-70.45,-25.36],[-70.62,-23.49],[-70.05,-21.43],[-70.41,-18.35],[-69.5,-17.51],[-69.48,-17.64]],[[-74.07,-46.01],[-74.16,-46.14],[-74.07,-46.1],[-74.07,-46.01]]]]},"properties":{"name":"Chile"},"id":"CL"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[110.72,20.06],[111.03,19.64],[110.05,18.38],[108.69,18.51],[108.63,19.28],[109.26,19.9],[110.72,20.06]]],[[[123.38,53.53],[126.1,52.76],[127.53,49.79],[130.67,48.86],[130.99,47.69],[134.74,48.27],[133.12,45.13],[131.86,45.35],[130.95,44.84],[131.31,43.39],[130.41,42.72],[130.6,42.42],[129.91,43.01],[129.71,42.44],[128.06,42],[128.16,41.38],[126.91,41.8],[124.37,40.09],[121.15,38.72],[121.75,39.35],[121.23,39.54],[122.3,40.51],[121.18,40.92],[118.92,39.13],[117.74,39.1],[117.67,38.39],[118.84,38.15],[119.23,37.14],[120.74,37.84],[122.56,37.4],[122.5,36.89],[120.09,36.2],[119.18,34.88],[120.25,34.31],[120.84,32.64],[121.9,31.75],[119.63,32.26],[121.88,30.97],[120.15,30.19],[122.13,29.89],[121.45,29.51],[121.98,29.59],[121.41,29.16],[121.61,28.72],[121.14,28.84],[121.58,28.27],[120.59,28.08],[120.84,27.88],[120.13,26.64],[119.55,26.75],[119.94,26.35],[119.09,26.14],[119.71,25.99],[119.65,25.36],[119.31,25.61],[118.62,24.54],[117.79,24.46],[118.12,24.26],[116.52,23.42],[116.48,22.94],[114.22,22.55],[114.03,22.51],[113.48,23.05],[113.55,22.21],[113.53,22.19],[113.17,22.57],[113.39,22.18],[112.94,21.87],[110.4,21.38],[110.28,20.25],[109.92,20.23],[109.57,21.72],[109.14,21.4],[108.48,21.94],[107.99,21.54],[106.69,22.03],[106.71,22.86],[105.58,23.06],[105.35,23.33],[103.96,22.5],[102.48,22.77],[102.14,22.4],[101.57,22.21],[101.79,21.14],[101.15,21.57],[100.21,21.43],[99.96,22.05],[99.16,22.16],[99.57,22.94],[98.93,23.19],[98.89,24.16],[97.54,23.94],[97.55,24.74],[98.71,25.86],[98.78,26.64],[98.7,27.54],[97.81,28.34],[97.35,28.22],[96.4,28.35],[96.62,28.79],[96.08,29.47],[95.39,29.04],[94.65,29.33],[92.54,27.86],[91.66,27.76],[90.47,28.07],[89.59,28.14],[88.92,27.32],[88.83,28.01],[88.14,27.87],[86.01,27.88],[82.1,30.34],[81.03,30.2],[78.77,31.31],[78.4,32.55],[79.53,32.75],[78.08,35.45],[77.82,35.5],[76.17,35.82],[75.86,36.66],[74.82,37.02],[74.57,37.03],[74.92,37.24],[74.86,38.47],[73.82,38.61],[73.66,39.45],[74.86,40.52],[76.35,40.35],[76.87,41.01],[78.08,41.04],[80.23,42.2],[80.38,43.03],[80.82,43.16],[80.52,44.73],[79.87,44.9],[82.56,45.13],[82.32,45.57],[83.04,47.21],[85.53,47.06],[85.76,48.39],[87.35,49.09],[87.84,49.17],[88.65,48.18],[90.07,47.89],[91.02,46.6],[90.9,45.25],[95.42,44.29],[96.38,42.73],[100.84,42.68],[105.01,41.58],[107.47,42.47],[110.44,42.78],[111.96,43.69],[111.42,44.38],[111.98,45.09],[113.64,44.75],[117.42,46.58],[119.9,46.68],[118.54,47.99],[117.37,47.65],[115.59,47.92],[116.71,49.83],[117.87,49.52],[119.21,50.02],[120.78,52.11],[120.03,52.77],[120.86,53.28],[123.38,53.53]]]]},"properties":{"name":"China"},"id":"CN"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[121.73,25.14],[121.84,24.48],[120.72,21.93],[120.11,23.62],[121.01,25.01],[121.73,25.14]]]]},"properties":{"name":"Taiwan"},"id":"TW"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[105.7,-10.51],[105.63,-10.44],[105.74,-10.38],[105.7,-10.51]]]]},"properties":{"name":"Christmas Island"},"id":"CX"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[96.86,-12.2],[96.82,-12.18],[96.83,-12.13],[96.86,-12.2]]]]},"properties":{"name":"Cocos (Keeling) Islands"},"id":"CC"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-71.56,12.45],[-71.32,11.85],[-71.98,11.66],[-72.49,11.12],[-73.38,9.17],[-72.78,9.08],[-72,7.02],[-70.12,6.98],[-69.25,6.08],[-67.45,6.19],[-67.86,4.56],[-67.29,3.4],[-67.83,2.83],[-67.19,2.39],[-66.87,1.22],[-67.42,2.14],[-67.91,1.75],[-69.85,1.71],[-69.84,1.07],[-69.12,0.65],[-70.04,0.59],[-69.38,-1.34],[-69.96,-4.24],[-70.72,-3.78],[-70.29,-2.51],[-71.7,-2.15],[-72.88,-2.51],[-73.56,-1.37],[-75.29,-0.12],[-77.38,0.38],[-78.59,1.24],[-78.81,1.44],[-78.57,2.43],[-77.74,2.6],[-77.03,3.92],[-77.43,4.03],[-77.34,6.57],[-77.89,7.23],[-77.22,7.94],[-77.37,8.67],[-76.76,7.92],[-76.93,8.57],[-75.63,9.45],[-75.27,10.8],[-74.86,11.13],[-74.39,10.74],[-74.16,11.33],[-73.28,11.3],[-71.56,12.45]]]]},"properties":{"name":"Colombia"},"id":"CO"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[44.49,-12.09],[44.51,-12.38],[44.21,-12.16],[44.49,-12.09]]],[[[43.46,-11.94],[43.22,-11.76],[43.28,-11.38],[43.46,-11.94]]]]},"properties":{"name":"Comoros"},"id":"KM"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[45.2,-12.85],[45.1,-12.99],[45.08,-12.66],[45.2,-12.85]]]]},"properties":{"name":"Mayotte"},"id":"YT"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[12.78,-4.39],[12.03,-5.01],[11.14,-3.93],[11.93,-3.64],[11.57,-2.33],[12.48,-2.33],[12.65,-1.82],[13,-2.37],[13.76,-2.09],[14.11,-2.49],[14.43,-1.89],[14.52,-0.61],[13.85,-0.2],[14.49,0.91],[14.19,1.39],[13.19,1.22],[13.29,2.16],[16.07,1.65],[16.21,2.22],[16.66,3.53],[18.62,3.48],[17.71,-0.54],[16.2,-2.18],[15.89,-3.94],[14.66,-4.91],[14.4,-4.28],[13.41,-4.88],[13.09,-4.63],[12.78,-4.39]]]]},"properties":{"name":"Congo, Republic of the"},"id":"CG"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[25.89,5.19],[27.46,5.02],[28.36,4.29],[29.64,4.64],[30.86,3.49],[30.73,2.45],[31.3,2.12],[29.96,0.83],[29.6,-1.39],[29.02,-2.74],[29.23,-3.75],[29.42,-4.45],[29.55,-6.3],[30.77,-8.19],[28.9,-8.48],[28.37,-9.26],[28.7,-10.65],[28.36,-11.55],[29.03,-12.38],[29.81,-12.16],[29.8,-13.45],[29.02,-13.4],[27.2,-11.57],[26.87,-11.97],[26,-11.9],[25.33,-11.19],[24.45,-11.46],[23.99,-10.87],[22.25,-11.21],[21.78,-7.28],[19.54,-7],[19.37,-8],[17.62,-8.1],[16.58,-5.9],[14,-5.85],[13.18,-5.86],[12.21,-5.77],[13.09,-4.66],[13.09,-4.63],[13.41,-4.88],[14.4,-4.28],[14.66,-4.91],[15.89,-3.94],[16.2,-2.18],[17.71,-0.54],[18.62,3.48],[18.54,4.34],[19.42,5.13],[20.59,4.41],[22.38,4.13],[22.9,4.82],[25.89,5.19]]]]},"properties":{"name":"Congo, Democratic Republic of the"},"id":"CD"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-157.89,-21.94],[-157.96,-21.9],[-157.92,-21.88],[-157.89,-21.94]]],[[[-159.74,-21.25],[-159.83,-21.2],[-159.75,-21.19],[-159.74,-21.25]]],[[[-157.32,-20.19],[-157.33,-20.13],[-157.31,-20.15],[-157.32,-20.19]]]]},"properties":{"name":"Cook Islands"},"id":"CK"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-85.09,11.01],[-83.65,10.92],[-82.56,9.56],[-82.93,9.47],[-82.9,8.03],[-84.74,9.97],[-85.24,10.2],[-85.14,9.59],[-85.66,9.91],[-85.69,11.08],[-85.09,11.01]]]]},"properties":{"name":"Costa Rica"},"id":"CR"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[17.3,43.01],[17.65,42.89],[18.46,42.57],[18.5,42.45],[17.3,43.01]]],[[[16.85,43.27],[16.4,43.33],[16.75,43.36],[16.85,43.27]]],[[[14.46,44.91],[14.49,44.61],[14.29,44.91],[14.4,44.92],[14.32,45.17],[14.46,44.91]]],[[[14.76,44.94],[14.43,45.08],[14.54,45.24],[14.76,44.94]]],[[[16.57,46.48],[16.61,46.48],[17.67,45.83],[18.82,45.91],[19.42,45.23],[19.04,44.86],[15.79,45.17],[16.14,44.2],[17.58,42.94],[16.88,43.4],[15.99,43.5],[14.48,45.31],[14.29,45.32],[14.17,44.98],[13.9,44.77],[13.59,45.48],[15.17,45.43],[15.65,46.22],[16.57,46.48]]]]},"properties":{"name":"Croatia"},"id":"HR"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-82.55,21.57],[-83.19,21.62],[-82.97,21.94],[-82.55,21.57]]],[[[-82,23.19],[-80.03,22.95],[-74.13,20.19],[-77.72,19.83],[-77.24,20.66],[-78.05,20.7],[-78.75,21.64],[-81.82,22.18],[-82.16,22.4],[-81.65,22.49],[-81.89,22.68],[-82.76,22.7],[-83.37,22.2],[-83.93,22.16],[-84.03,21.91],[-84.95,21.86],[-84.34,22.01],[-84.4,22.33],[-84.08,22.66],[-82,23.19]]]]},"properties":{"name":"Cuba"},"id":"CU"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[33.65,35.35],[34.59,35.69],[33.03,34.56],[32.27,35.04],[33.65,35.35]]]]},"properties":{"name":"Cyprus"},"id":"CY"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[14.7,48.58],[13.83,48.77],[12.09,50.32],[14.83,50.87],[16.34,50.66],[16.64,50.11],[17.72,50.32],[18.85,49.52],[16.95,48.62],[15.03,49.02],[14.7,48.58]]]]},"properties":{"name":"Czech Republic"},"id":"CZ"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[2.48,6.34],[1.64,6.22],[1.4,9.43],[0.78,10.38],[0.92,11],[2.4,11.9],[2.84,12.4],[3.6,11.69],[3.86,10.58],[2.79,9.04],[2.72,6.37],[2.48,6.34]]]]},"properties":{"name":"Benin"},"id":"BJ"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[10.75,55.48],[10.5,55.03],[9.68,55.5],[10.75,55.48]]],[[[12.57,55.99],[12.07,54.97],[10.87,55.73],[12.57,55.99]]],[[[8.92,56.92],[8.77,56.69],[8.51,56.74],[8.92,56.92]]],[[[9.97,57.07],[10.31,56.98],[10.31,56.75],[9.87,56.65],[10.96,56.44],[9.55,55.71],[9.77,54.89],[9.45,54.83],[8.66,54.91],[8.62,55.43],[8.09,55.55],[8.17,56.65],[8.73,56.48],[8.68,56.62],[9.08,56.81],[9.15,56.7],[9.06,56.57],[9.27,56.63],[9.32,56.53],[9.18,56.92],[9.97,57.07]]],[[[10.43,57.59],[10.34,56.99],[10.01,57.09],[9.12,57.05],[8.67,56.95],[8.42,56.68],[8.59,56.69],[8.55,56.58],[8.24,56.71],[8.62,57.12],[9.39,57.15],[9.95,57.58],[10.65,57.74],[10.43,57.59]]]]},"properties":{"name":"Denmark"},"id":"DK"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-61.36,15.2],[-61.45,15.63],[-61.25,15.46],[-61.36,15.2]]]]},"properties":{"name":"Dominica"},"id":"DM"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-70.78,19.85],[-69.22,19.36],[-69.63,19.1],[-68.73,18.95],[-68.45,18.36],[-70.69,18.43],[-71.42,17.6],[-71.77,18.04],[-71.75,19.71],[-70.78,19.85]]]]},"properties":{"name":"Dominican Republic"},"id":"DO"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-91.22,-0.01],[-90.81,-0.73],[-91.38,-1.03],[-91.08,-0.59],[-91.61,0],[-91.22,-0.01]]],[[[-78.59,1.24],[-77.38,0.38],[-75.29,-0.12],[-75.63,-0.11],[-75.22,-0.97],[-75.56,-1.53],[-78.34,-3.42],[-78.71,-4.58],[-79.05,-5.01],[-79.65,-4.43],[-80.47,-4.44],[-80.34,-3.38],[-79.76,-2.01],[-80.26,-2.74],[-80.89,-2.32],[-80.91,-1.03],[-80.26,-0.63],[-80.06,0.83],[-78.81,1.44],[-78.59,1.24]]]]},"properties":{"name":"Ecuador"},"id":"EC"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-89.34,14.42],[-87.75,13.86],[-87.82,13.41],[-88.54,13.19],[-90.1,13.75],[-89.35,14.43],[-89.34,14.42]]]]},"properties":{"name":"El Salvador"},"id":"SV"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[10.03,2.17],[11.34,2.17],[11.35,1],[9.8,1],[9.36,1.17],[9.81,2.34],[10.03,2.17]]]]},"properties":{"name":"Equatorial Guinea"},"id":"GQ"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[36.54,14.26],[37.29,14.45],[37.57,14.1],[37.91,14.88],[38.45,14.42],[40.23,14.44],[42.4,12.47],[41.79,11.01],[42.94,11],[42.85,10.22],[44.01,9.01],[47.99,8],[44.95,4.9],[43.69,4.89],[41.91,3.98],[40.78,4.29],[39.52,3.41],[35.94,4.62],[34.7,6.68],[32.99,7.92],[33.25,8.46],[34.12,8.58],[34.29,10.55],[34.86,10.73],[35.1,11.83],[36.14,12.71],[36.54,14.26]]]]},"properties":{"name":"Ethiopia"},"id":"ET"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[38.8,17.65],[39.72,15.08],[39.88,15.49],[41.17,14.63],[43.12,12.71],[42.4,12.47],[40.23,14.44],[38.45,14.42],[37.91,14.88],[37.57,14.1],[37.29,14.45],[36.54,14.26],[37,17.07],[38.6,17.99],[38.8,17.65]]]]},"properties":{"name":"Eritrea"},"id":"ER"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[22.99,58.6],[23.33,58.44],[21.99,57.92],[21.83,58.5],[22.99,58.6]]],[[[22.75,59],[23.05,58.84],[22.04,58.94],[22.75,59]]],[[[25.78,59.63],[28.02,59.48],[27.43,58.81],[27.82,57.87],[27.37,57.54],[25.29,58.08],[24.31,57.87],[24.56,58.33],[23.73,58.37],[23.46,59.21],[25.78,59.63]]]]},"properties":{"name":"Estonia"},"id":"EE"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-7.05,62.07],[-7.2,62.02],[-7.44,62.14],[-7.05,62.07]]],[[[-6.71,61.94],[-7.23,62.17],[-7.21,62.28],[-6.71,61.94]]],[[[-6.66,62.09],[-7.06,62.31],[-6.6,62.2],[-6.66,62.09]]]]},"properties":{"name":"Faroe Islands"},"id":"FO"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-59.21,-51.41],[-60.37,-52.16],[-60.98,-52.06],[-60.18,-51.76],[-60.64,-51.36],[-59.21,-51.41]]],[[[-58.7,-51.34],[-57.73,-51.69],[-59.72,-52.12],[-58.7,-51.34]]]]},"properties":{"name":"Falkland Islands (Islas Malvinas)"},"id":"FK"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-37.5,-54.01],[-35.78,-54.77],[-38.03,-54.05],[-37.5,-54.01]]]]},"properties":{"name":"South Georgia South Sandwich Islands"},"id":"GS"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[179.96,-16.2],[179.48,-16.7],[179.93,-16.46],[179.9,-16.77],[178.48,-16.78],[179.96,-16.2]]],[[[-179.97,-16.17],[-180,-16.15],[-179.94,-16.13],[-179.97,-16.17]]]]},"properties":{"name":"Fiji"},"id":"FJ"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[28.17,69.91],[29.18,69.64],[28.96,69.05],[28.43,68.9],[28.82,68.84],[28.69,68.2],[30.03,67.69],[29.07,66.9],[30.13,65.72],[29.64,64.93],[30.58,64.22],[29.99,63.74],[31.59,62.91],[27.81,60.55],[22.91,59.8],[23.34,60.02],[23.09,60.35],[21.36,60.65],[21.67,61.55],[21.06,62.61],[21.5,63.21],[25.45,64.95],[25.31,65.51],[24.17,65.81],[23.66,66.31],[24.01,66.8],[23.43,67.47],[23.67,67.94],[21.81,68.57],[20.58,69.06],[21.32,69.33],[22.4,68.71],[24.93,68.58],[26.45,69.93],[28.17,69.91]]]]},"properties":{"name":"Finland"},"id":"FI"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[20.08,60.35],[19.94,60.04],[19.65,60.26],[20.08,60.35]]]]},"properties":{"name":"Aland Islands"},"id":"AX"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[9.45,42.68],[9.18,41.36],[8.58,42.38],[9.35,43],[9.45,42.68]]],[[[2.54,51.09],[4.15,49.98],[4.83,50.17],[5.81,49.55],[6.36,49.46],[8.23,48.96],[7.59,47.58],[6.99,47.5],[5.97,46.21],[6.79,46.43],[7.04,45.93],[7.13,45.26],[6.62,45.11],[6.98,44.28],[7.66,44.17],[7.53,43.79],[7.44,43.76],[7.42,43.77],[7.39,43.73],[6.17,43.05],[3.96,43.54],[3.08,43.07],[3.18,42.44],[1.72,42.51],[1.78,42.57],[1.45,42.6],[-1.78,43.36],[-1.04,44.68],[-1.25,44.66],[-1.08,45.56],[-0.54,44.9],[-0.78,45.46],[-1.24,45.7],[-1.11,46.32],[-2.13,46.84],[-2.13,47.28],[-1.73,47.21],[-4.37,47.8],[-4.73,48.04],[-4.19,48.3],[-4.78,48.51],[-1.37,48.64],[-1.94,49.72],[0.42,49.45],[0.07,49.53],[1.46,50.12],[1.63,50.88],[2.54,51.09]]]]},"properties":{"name":"France"},"id":"FR"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-53.49,5.57],[-52.29,4.94],[-52.04,4.33],[-51.85,4.65],[-51.68,4.03],[-52.91,2.2],[-54.6,2.33],[-54,3.45],[-54.48,4.75],[-54.17,5.35],[-53.94,5.74],[-53.49,5.57]]]]},"properties":{"name":"French Guiana"},"id":"GF"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-149.21,-17.73],[-149.18,-17.87],[-149.63,-17.55],[-149.21,-17.73]]],[[[-151.4,-16.89],[-151.48,-16.9],[-151.48,-16.74],[-151.4,-16.89]]],[[[-138.96,-9.74],[-138.81,-9.74],[-139.17,-9.78],[-138.96,-9.74]]],[[[-140.03,-8.9],[-140.19,-8.95],[-140.25,-8.8],[-140.03,-8.9]]]]},"properties":{"name":"French Polynesia"},"id":"PF"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[69,-48.8],[69.58,-49.3],[70.57,-49.25],[69.77,-49.39],[70.25,-49.69],[68.8,-49.72],[69,-48.8]]]]},"properties":{"name":"French Southern and Antarctic Lands"},"id":"TF"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[42.87,11.59],[43.25,11.47],[42.94,11],[41.79,11.01],[42.4,12.47],[43.12,12.71],[43.41,12.06],[42.51,11.57],[42.87,11.59]]]]},"properties":{"name":"Djibouti"},"id":"DJ"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[12.52,2.28],[13.29,2.16],[13.19,1.22],[14.19,1.39],[14.49,0.91],[13.85,-0.2],[14.52,-0.61],[14.43,-1.89],[14.11,-2.49],[13.76,-2.09],[13,-2.37],[12.65,-1.82],[12.48,-2.33],[11.57,-2.33],[11.93,-3.64],[11.14,-3.93],[9.62,-2.38],[8.71,-0.64],[9.3,-0.37],[9.35,0.36],[9.92,0.19],[9.3,0.53],[9.8,1],[11.35,1],[11.34,2.17],[12.52,2.28]]]]},"properties":{"name":"Gabon"},"id":"GA"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[41.55,42.41],[40,43.38],[42.85,43.18],[43.91,42.58],[44.93,42.76],[46.45,41.9],[46.52,41.05],[45.02,41.3],[43.46,41.11],[42.83,41.58],[41.53,41.52],[41.55,42.41]]]]},"properties":{"name":"Georgia"},"id":"GE"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-16.73,13.45],[-16.2,13.25],[-16.16,13.43],[-15.3,13.49],[-16.14,13.45],[-16.39,13.33],[-16.57,13.59],[-15.07,13.83],[-13.8,13.41],[-15.11,13.6],[-15.29,13.37],[-15.8,13.35],[-15.81,13.16],[-16.75,13.06],[-16.73,13.45]]]]},"properties":{"name":"Gambia, The"},"id":"GM"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[34.33,31.26],[34.27,31.22],[34.22,31.32],[34.49,31.6],[34.33,31.26]]],[[[35.28,32.52],[35.55,32.39],[35.48,31.5],[34.88,31.39],[35.28,32.52]],[[35.25,31.79],[35.26,31.79],[35.25,31.81],[35.25,31.79]]]]},"properties":{"name":"Palestine"},"id":"PS"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[10.98,54.38],[10.82,53.89],[12.53,54.47],[14.28,53.7],[14.83,50.87],[12.09,50.32],[13.83,48.77],[12.76,48.12],[13.02,47.47],[9.57,47.54],[7.7,47.54],[7.59,47.58],[8.23,48.96],[6.36,49.46],[6.13,50.13],[6.01,50.76],[5.96,51.81],[6.83,51.97],[7.07,52.39],[6.69,52.55],[7.21,53.24],[7.3,53.69],[8.5,53.35],[8.67,53.89],[9.83,53.54],[8.9,53.94],[8.6,54.33],[9.02,54.5],[8.28,54.75],[8.66,54.91],[9.45,54.83],[10.98,54.38]]]]},"properties":{"name":"Germany"},"id":"DE"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[0.64,5.85],[0.66,5.75],[0.26,5.76],[-0.8,5.21],[-1.61,5.02],[-2.06,4.73],[-2.93,5.1],[-3.25,6.61],[-2.49,8.2],[-2.69,9.48],[-2.83,11],[-0.15,11.14],[0.73,8.32],[0.53,6.95],[1.2,6.1],[0.69,5.75],[0.63,5.95],[0.51,6.06],[0.41,6.08],[0.37,6.04],[0.26,6.1],[0.21,6.09],[0.36,6.02],[0.42,6.07],[0.49,6.04],[0.61,5.95],[0.64,5.85]]]]},"properties":{"name":"Ghana"},"id":"GH"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-5.33,36.16],[-5.34,36.11],[-5.36,36.16],[-5.33,36.16]]]]},"properties":{"name":"Gibraltar"},"id":"GI"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[175.59,-1.92],[175.55,-1.82],[175.59,-1.88],[175.59,-1.92]]],[[[175.04,-1.55],[175,-1.53],[175.05,-1.43],[175.04,-1.55]]],[[[173.62,0.13],[173.6,0.21],[173.63,0.22],[173.62,0.13]]],[[[173.02,1.01],[173.08,0.95],[172.98,0.82],[173.02,1.01]]],[[[173.01,1.71],[172.93,1.94],[173.03,1.82],[173.01,1.71]]],[[[172.87,3.06],[172.77,3],[172.75,3.02],[172.87,3.06]]]]},"properties":{"name":"Kiribati"},"id":"KI"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[23.86,35.52],[26.29,35.13],[24.75,34.94],[23.52,35.29],[23.86,35.52]]],[[[23.46,38.85],[24.56,37.99],[22.83,38.83],[23.46,38.85]]],[[[26.29,41.71],[26.36,41.71],[26.63,41.35],[26.04,40.74],[23.74,40.75],[24.4,40.15],[23.35,40.25],[23.71,39.91],[22.59,40.48],[23.34,39.18],[22.94,39.36],[23.07,39.04],[22.52,38.86],[24.07,38.2],[24.03,37.65],[23.52,38.04],[22.99,37.88],[23.51,37.43],[22.73,37.57],[23.2,36.43],[22.63,36.8],[22.49,36.39],[22.15,37.02],[21.7,36.82],[21.11,37.85],[21.86,38.34],[23.23,38.15],[22.4,38.45],[21.15,38.3],[20.73,38.8],[21.15,39],[20.01,39.69],[20.98,40.86],[22.94,41.34],[25.29,41.24],[26.29,41.71]]]]},"properties":{"name":"Greece"},"id":"GR"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-52.69,69.92],[-51.83,69.63],[-53.57,69.23],[-54.27,69.4],[-53.35,69.58],[-54.99,69.69],[-54.39,69.68],[-54.94,69.85],[-54.23,69.91],[-54.83,70.08],[-54.43,70.31],[-52.69,69.92]]],[[[-23.61,72.83],[-21.93,72.4],[-22.76,72.44],[-22.13,72.27],[-22.56,72.14],[-24.48,72.83],[-23.61,72.83]]],[[[-32.3,83.57],[-25.65,83.29],[-35.62,82.9],[-25.14,83.16],[-24.75,83],[-25.9,82.78],[-21.31,82.61],[-25.07,82.15],[-31.62,82.21],[-29.9,82.09],[-33.1,81.77],[-25.2,81.99],[-27.63,81.49],[-27.33,81.38],[-22.02,81.93],[-22.23,81.47],[-24.51,80.54],[-19.94,81.68],[-20.31,81.45],[-16.7,81.93],[-12.16,81.6],[-16.01,80.73],[-21.25,80.58],[-16.11,80.5],[-20.55,80.11],[-20.33,79.76],[-17.45,80.06],[-19.63,79.66],[-19.87,79.15],[-19.08,79.2],[-21.18,78.81],[-20.91,78.62],[-22.04,77.69],[-19.24,77.76],[-18.96,77.63],[-21.05,77.54],[-18.4,77.34],[-18.31,76.81],[-22.74,76.7],[-19.81,76.23],[-21.98,75.99],[-19.83,75.91],[-19.34,75.4],[-19.88,75.15],[-22.25,75.66],[-20.52,75.14],[-22.44,75.16],[-18.98,74.48],[-22.48,74.31],[-21.82,73.65],[-21.75,74.06],[-20.28,73.88],[-20.5,73.45],[-22.38,73.25],[-24.03,73.7],[-22.18,73.62],[-24.04,73.81],[-24.46,73.54],[-25.69,73.95],[-24.67,73.51],[-27.34,73.49],[-26.39,73.24],[-27.73,73.13],[-25.05,73.08],[-27.39,72.84],[-24.84,72.72],[-24.61,72.52],[-25.91,72.41],[-22.49,71.89],[-23.13,71.63],[-21.9,71.74],[-22.47,71.26],[-21.81,71.51],[-21.69,71.15],[-22.33,71.05],[-21.68,71.07],[-21.93,70.8],[-21.47,70.54],[-22.38,70.44],[-22.51,70.85],[-22.62,70.45],[-23.35,70.44],[-24.74,71.33],[-28.64,72.12],[-27.33,71.71],[-28.47,71.55],[-25.41,71.35],[-28.41,70.98],[-27.91,70.87],[-29.21,70.39],[-26.32,70.37],[-28.54,70.04],[-25.23,70.41],[-22.08,70.13],[-26.36,68.67],[-29.38,68.2],[-31.57,68.07],[-32.49,68.62],[-32.12,67.86],[-33.2,67.69],[-34.72,66.34],[-35.85,66.43],[-35.59,66.11],[-37.19,65.77],[-37.81,66.03],[-37.18,66.34],[-38.11,66.39],[-37.69,66.26],[-38.48,66.01],[-38.24,65.63],[-40.1,65.57],[-39.76,65.24],[-41.16,64.96],[-40.36,64.35],[-41.57,64.27],[-40.57,64.11],[-40.52,63.7],[-41.62,63.79],[-40.75,63.51],[-41.91,63.46],[-41.43,63.13],[-42.17,63.2],[-41.76,62.84],[-43.15,62.76],[-42.16,62.38],[-42.98,62.52],[-42.12,62.01],[-43.08,61.59],[-42.51,61.36],[-43.25,61.34],[-42.63,61.1],[-43.61,61.13],[-42.7,61.06],[-43.53,60.84],[-42.75,60.68],[-44.2,60.59],[-43.14,60.08],[-44.1,60.38],[-45.15,60.07],[-44.47,60.56],[-45.19,60.13],[-44.63,60.73],[-45.98,60.57],[-45.25,60.9],[-46.22,60.75],[-45.2,61.19],[-46.07,60.92],[-45.77,61.33],[-46.86,60.8],[-48.24,60.82],[-47.69,61],[-48.41,60.99],[-47.92,61.32],[-49.3,61.56],[-48.6,61.64],[-49.15,61.72],[-48.76,61.98],[-49.44,61.84],[-48.84,62.08],[-49.67,62],[-49.29,62.17],[-50.32,62.5],[-49.7,63.06],[-50.38,62.78],[-50.15,63.02],[-50.61,63.09],[-50.06,63.23],[-51.11,63.34],[-50.28,63.4],[-51.22,63.44],[-50.5,63.67],[-51.56,63.71],[-50.92,63.93],[-51.6,64.03],[-50.05,64.19],[-51.76,64.18],[-50.17,64.45],[-50.86,64.63],[-49.58,64.34],[-50,64.87],[-50.98,65.22],[-50.64,64.75],[-52.01,64.2],[-52.12,64.72],[-51.25,65.02],[-52.21,64.81],[-52.1,65.24],[-52.56,65.33],[-50.55,65.71],[-52.5,65.39],[-53.27,65.75],[-51.83,66.06],[-53.46,66.03],[-50,66.98],[-53.48,66.1],[-53.12,66.29],[-53.63,66.5],[-52.42,66.55],[-53.45,66.64],[-52.23,66.84],[-53.97,67.07],[-50.35,67.18],[-53.88,67.26],[-52.5,67.77],[-50.07,67.51],[-51.23,67.7],[-50.42,67.84],[-51.06,67.97],[-53.75,67.6],[-53.19,68.04],[-52.06,67.98],[-53.32,68.18],[-50.15,67.93],[-51.43,68.2],[-50.82,68.5],[-53.39,68.33],[-50.87,68.61],[-51.29,68.75],[-51.07,69.13],[-50.21,68.96],[-50.69,69.12],[-50.38,69.34],[-51.12,69.2],[-50.2,69.52],[-50.88,69.49],[-50.21,70.02],[-54.63,70.65],[-50.49,70.51],[-51.95,71.02],[-50.93,70.99],[-51.23,71.14],[-52.25,71.12],[-51.65,71.36],[-52.56,71.17],[-51.35,71.49],[-52.98,71.42],[-51.64,71.71],[-53.25,71.7],[-52.68,72],[-53.32,71.82],[-53.56,72.36],[-53.96,72.32],[-53.4,71.85],[-54.1,71.71],[-53.92,71.44],[-55.91,71.68],[-54.38,72.22],[-55.3,71.93],[-54.68,72.37],[-55.63,72.46],[-54.3,72.48],[-55.7,73.07],[-55.09,73.36],[-56.08,73.65],[-55.61,73.72],[-56.41,74.07],[-56.13,74.28],[-57.33,74.11],[-56.19,74.55],[-58.7,75.35],[-58.21,75.44],[-58.41,75.72],[-60.88,76.15],[-68.5,76.09],[-69.63,76.38],[-67.98,76.68],[-71.38,77.06],[-66.45,77.13],[-69.1,77.27],[-66.06,77.49],[-69.25,77.45],[-73.05,78.16],[-65.98,79.1],[-64.82,79.53],[-65.07,80.01],[-63.78,80.15],[-67.48,80.33],[-63.68,81.14],[-62.79,80.75],[-63.37,81.16],[-61.06,81.12],[-61.31,81.36],[-60.77,81.5],[-61.45,81.75],[-60.81,81.88],[-56.48,81.33],[-59.47,82],[-54.51,82.37],[-53.56,82.12],[-53.63,81.51],[-52.9,82.03],[-49.61,81.64],[-51.07,81.93],[-49.43,81.93],[-51.12,82.49],[-50.32,82.52],[-44.64,81.75],[-44.18,81.83],[-44.93,81.99],[-44.62,82.28],[-42.3,82.22],[-45.77,82.76],[-39.75,82.4],[-46.89,82.96],[-43.39,82.91],[-45.52,83.12],[-42.7,83.27],[-38.57,82.74],[-39.15,82.98],[-36.88,83.15],[-38.86,83.43],[-32.3,83.57]]]]},"properties":{"name":"Greenland"},"id":"GL"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-61.75,12],[-61.61,12.23],[-61.63,12.05],[-61.75,12]]],[[[-61.43,12.45],[-61.5,12.44],[-61.43,12.53],[-61.43,12.45]]]]},"properties":{"name":"Grenada"},"id":"GD"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-61.35,16.33],[-61.7,15.95],[-61.78,16.33],[-61.35,16.33]]]]},"properties":{"name":"Guadeloupe"},"id":"GP"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[144.71,13.23],[144.66,13.43],[144.88,13.65],[144.71,13.23]]]]},"properties":{"name":"Guam"},"id":"GU"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-90.63,13.93],[-92.25,14.55],[-91.73,16.07],[-90.44,16.09],[-91.44,17.24],[-90.98,17.26],[-90.98,17.82],[-89.14,17.82],[-89.22,15.89],[-88.91,15.89],[-88.21,15.72],[-89.35,14.43],[-90.1,13.75],[-90.63,13.93]]]]},"properties":{"name":"Guatemala"},"id":"GT"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-13.6,9.73],[-15.02,10.96],[-14.69,11.51],[-13.71,11.72],[-13.71,12.68],[-11.37,12.41],[-10.65,11.89],[-9.16,12.49],[-8.53,11.49],[-8.68,10.97],[-8.29,11.01],[-7.97,10.17],[-7.65,8.38],[-8.2,8.5],[-7.95,8.02],[-8.47,7.56],[-9.49,7.36],[-9.48,8.35],[-10.27,8.49],[-10.7,8.3],[-10.57,9.06],[-11.21,10],[-12.46,9.89],[-13.3,9.03],[-13.6,9.73]]]]},"properties":{"name":"Guinea"},"id":"GN"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-59.79,8.34],[-58.47,7.35],[-58.65,6.43],[-58.31,6.89],[-57.2,6.15],[-57.25,5.49],[-58.05,4.01],[-56.47,1.94],[-58.81,1.19],[-59.64,1.73],[-59.99,2.69],[-59.57,3.9],[-60.15,4.52],[-60.1,5.22],[-60.73,5.2],[-61.39,5.94],[-61.13,6.71],[-60.29,7.06],[-60.72,7.54],[-59.83,8.24],[-59.99,8.54],[-59.79,8.34]]]]},"properties":{"name":"Guyana"},"id":"GY"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-72.67,19.92],[-71.75,19.71],[-71.77,18.04],[-74.45,18.34],[-74.27,18.67],[-72.35,18.53],[-72.72,19.45],[-73.47,19.69],[-72.67,19.92]]]]},"properties":{"name":"Haiti"},"id":"HT"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[73.77,-53.13],[73.47,-53.19],[73.23,-52.99],[73.77,-53.13]]]]},"properties":{"name":"Heard Island and McDonald Islands"},"id":"HM"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[12.45,41.9],[12.45,41.91],[12.46,41.9],[12.45,41.9]]]]},"properties":{"name":"Holy See (Vatican City)"},"id":"VA"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-85.84,16.01],[-84.26,15.83],[-83.13,14.99],[-83.24,14.98],[-84.91,14.81],[-87.3,12.99],[-87.82,13.41],[-87.75,13.86],[-89.34,14.42],[-89.35,14.43],[-88.21,15.72],[-85.84,16.01]]]]},"properties":{"name":"Honduras"},"id":"HN"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[114.25,22.2],[114.12,22.28],[114.2,22.29],[114.25,22.2]]],[[[113.9,22.2],[113.83,22.23],[114.05,22.34],[113.9,22.2]]],[[[114.22,22.47],[114.03,22.51],[114.22,22.55],[114.22,22.47]]]]},"properties":{"name":"Hong Kong"},"id":"HK"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[18.82,45.91],[17.67,45.83],[16.61,46.48],[16.11,46.87],[16.51,47.01],[16.45,47.7],[17.17,48.01],[17.25,48.02],[18.66,47.76],[20.66,48.56],[22.15,48.41],[22.89,47.95],[20.73,46.18],[20.26,46.11],[18.82,45.91]]]]},"properties":{"name":"Hungary"},"id":"HU"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-15.07,66.14],[-14.34,65.78],[-14.56,65.49],[-13.61,65.51],[-14.03,65.19],[-13.5,65.07],[-14.93,64.26],[-18.71,63.39],[-21.05,63.95],[-22.69,63.81],[-21.51,64.65],[-24.06,64.89],[-21.84,65.03],[-22.56,65.17],[-21.7,65.45],[-24.54,65.5],[-23.23,65.74],[-23.87,65.87],[-23.21,65.84],[-23.82,66.01],[-23.47,66.2],[-22.42,65.85],[-22.94,66.47],[-21.4,66.03],[-21.78,65.77],[-21.08,65.16],[-20.18,66.13],[-19.45,65.73],[-18.78,66.19],[-18.07,65.64],[-18.3,66.17],[-16.59,66.09],[-16.53,66.51],[-14.71,66.37],[-15.07,66.14]]]]},"properties":{"name":"Iceland"},"id":"IS"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[78.08,35.45],[79.53,32.75],[78.4,32.55],[78.77,31.31],[81.03,30.2],[80.06,28.84],[82.07,27.91],[83.29,27.34],[84.15,27.51],[85.86,26.57],[88.01,26.36],[88.14,27.87],[88.83,28.01],[88.92,27.32],[89.64,26.72],[92.07,26.86],[91.66,27.76],[92.54,27.86],[94.65,29.33],[95.39,29.04],[96.08,29.47],[96.62,28.79],[96.4,28.35],[97.35,28.22],[96.89,27.61],[97.14,27.09],[96.19,27.27],[95.14,26.61],[94.15,23.86],[93.34,24.08],[93.2,22.26],[92.6,21.98],[92.28,23.71],[91.61,22.94],[91.16,23.64],[92.41,25.03],[89.85,25.29],[89.74,26.16],[88.43,26.55],[88.11,25.84],[89.01,25.29],[88.04,24.68],[88.75,24.22],[89.06,22.12],[89.07,21.61],[88.71,21.57],[88.67,22.2],[88.25,21.55],[88.2,22.16],[87.91,22.42],[88.17,22.09],[86.96,21.38],[87.03,20.67],[86.42,19.98],[85.43,19.89],[82.36,17.1],[82.3,16.58],[80.28,15.7],[79.86,10.29],[79.32,10.28],[78.91,9.48],[79.45,9.15],[78.4,9.09],[77.54,8.07],[76.58,8.88],[73.45,16.06],[72.66,19.87],[72.93,20.77],[72.56,21.38],[73.13,21.75],[72.5,21.98],[72.92,22.27],[72.15,22.28],[72.11,21.2],[70.82,20.7],[68.94,22.29],[70.17,22.55],[70.51,23.1],[69.22,22.84],[68.43,23.43],[68.74,23.84],[68.2,23.77],[68.78,24.33],[71.11,24.42],[69.58,27.17],[70.37,28.02],[71.9,27.96],[74.69,31.05],[74.61,31.88],[75.38,32.21],[74.02,33.19],[74.3,33.98],[73.94,34.65],[76.87,34.66],[77.82,35.5],[78.08,35.45]]]]},"properties":{"name":"India"},"id":"IN"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[120.03,-9.38],[120.72,-10.2],[118.93,-9.56],[120.03,-9.38]]],[[[125.16,-9.07],[125.13,-9.44],[124.44,-10.16],[123.49,-10.32],[124.05,-9.34],[124.34,-9.46],[124.45,-9.18],[124.95,-8.95],[125.16,-9.07]]],[[[116.55,-8.78],[115.84,-8.76],[116.39,-8.2],[116.55,-8.78]]],[[[124.58,-8.14],[125.14,-8.33],[124.35,-8.45],[124.58,-8.14]]],[[[118.31,-8.37],[119,-8.31],[119.18,-8.72],[116.75,-9.01],[117.12,-8.38],[117.97,-8.75],[118.28,-8.59],[117.74,-8.15],[118.31,-8.37]]],[[[122.98,-8.15],[122.83,-8.6],[121.77,-8.89],[119.8,-8.72],[120.52,-8.26],[122.29,-8.64],[122.98,-8.15]]],[[[115.5,-8.18],[115.13,-8.85],[114.45,-8.1],[115.5,-8.18]]],[[[126.72,-7.67],[125.77,-8.01],[125.97,-7.66],[126.72,-7.67]]],[[[138.97,-7.56],[138.44,-8.38],[137.64,-8.43],[138.15,-7.51],[138.97,-7.56]]],[[[131.74,-7.21],[131.11,-8],[131.24,-7.48],[131.74,-7.21]]],[[[113.99,-6.88],[113.5,-7.23],[112.69,-7.05],[113.99,-6.88]]],[[[106.16,-6.01],[108.31,-6.26],[108.73,-6.82],[110.39,-6.98],[110.92,-6.41],[112.56,-6.91],[112.85,-7.6],[114.45,-7.8],[114.37,-8.52],[114.62,-8.75],[108.16,-7.78],[105.24,-6.81],[106.16,-6.01]]],[[[134.58,-5.43],[134.73,-5.97],[134.3,-6.03],[134.58,-5.43]]],[[[123.21,-4.7],[122.65,-5.69],[122.9,-4.49],[123.21,-4.7]]],[[[126.99,-3.14],[127.24,-3.62],[126.7,-3.83],[126.02,-3.35],[126.99,-3.14]]],[[[129.81,-2.92],[130.58,-3.13],[130.83,-3.87],[128.17,-3.07],[127.91,-3.54],[128.17,-2.86],[129.81,-2.92]]],[[[107.83,-2.54],[108.27,-2.76],[108.07,-3.24],[107.61,-3.21],[107.83,-2.54]]],[[[133.59,-2.53],[133.5,-2.43],[133.61,-2.48],[133.59,-2.53]]],[[[134.57,-2.45],[134.52,-2.4],[134.57,-2.29],[134.57,-2.45]]],[[[134.37,-2.16],[134.33,-2.09],[134.39,-2],[134.37,-2.16]]],[[[130.19,-2.06],[129.72,-1.89],[130.35,-1.68],[130.19,-2.06]]],[[[125.01,-1.72],[125.32,-1.89],[124.33,-1.88],[125.01,-1.72]]],[[[136.29,-1.69],[136.9,-1.8],[135.42,-1.61],[136.29,-1.69]]],[[[106.09,-1.77],[106.72,-3.1],[105.13,-2.07],[105.57,-1.53],[106.09,-1.77]]],[[[127.88,-1.43],[128.15,-1.68],[127.38,-1.63],[127.88,-1.43]]],[[[133.11,-0.54],[134.11,-0.84],[134.16,-2.32],[135,-3.34],[137.86,-1.47],[141,-2.61],[141.01,-9.13],[139.99,-8.19],[140.15,-7.88],[138.91,-8.3],[139.1,-7.56],[138.66,-7.2],[139.22,-7.16],[138.56,-6.91],[139.19,-6.97],[138.06,-5.41],[134.22,-3.96],[133.64,-3.49],[133.83,-2.96],[132.9,-4.09],[132.82,-3.3],[131.96,-2.78],[133.24,-2.42],[133.68,-2.72],[133.94,-2.1],[132.3,-2.27],[130.96,-1.4],[132.27,-0.38],[133.11,-0.54]]],[[[130.88,-0.02],[131.26,-0.39],[130.21,-0.21],[130.88,-0.02]]],[[[97.53,1.42],[97.81,0.55],[97.11,1.39],[97.53,1.42]]],[[[125.14,1.42],[124.25,0.38],[120.24,0.35],[120.07,-0.61],[120.67,-1.4],[121.62,-0.8],[123.45,-0.84],[121.3,-1.8],[122.9,-4.4],[121.55,-4.75],[120.77,-2.61],[120.2,-2.96],[120.46,-5.62],[119.46,-5.56],[119.51,-3.53],[118.92,-3.57],[118.76,-2.77],[119.86,-0.84],[119.62,-0.01],[120.03,0.71],[120.95,1.34],[123.84,0.83],[124.97,1.69],[125.14,1.42]]],[[[127.89,1.8],[127.79,0.8],[128.73,1.56],[128.21,0.78],[128.91,0.2],[127.88,0.31],[128.4,-0.89],[127.67,-0.23],[127.39,1.05],[128.05,2.2],[127.89,1.8]]],[[[116.05,4.28],[117.59,4.17],[117.83,3.7],[117.03,3.59],[118.1,2.31],[117.87,1.88],[119.01,0.98],[117.89,1.12],[117.62,-0.78],[116.74,-1.02],[116.22,-1.78],[116.6,-2.23],[115.98,-3.59],[114.71,-4.18],[114.48,-3.5],[113.06,-2.99],[111.89,-3.57],[111.75,-2.74],[110.24,-2.98],[110.06,-1.33],[109.27,-0.86],[108.85,0.81],[109.65,2.07],[110.56,0.85],[111.83,1],[112.47,1.57],[114.56,1.43],[116.05,4.28]]],[[[95.74,5.59],[97.52,5.25],[100,2.6],[100.94,1.82],[101.06,2.29],[102.93,0.7],[102.54,0.17],[103.74,0.28],[103.36,-0.7],[104.38,-1.04],[104.88,-2.15],[104.53,-2.77],[104.86,-2.29],[105.61,-2.39],[106.06,-3.03],[105.73,-5.9],[105.27,-5.44],[105.14,-5.8],[104.54,-5.51],[104.56,-5.93],[101.63,-3.25],[100.29,-0.81],[99.14,0.26],[98.77,1.75],[95.53,4.68],[95.23,5.57],[95.74,5.59]]]]},"properties":{"name":"Indonesia"},"id":"ID"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[45,39.42],[46.18,38.84],[46.54,38.88],[47.98,39.72],[48.36,39.39],[48.02,38.84],[48.89,38.44],[49.1,37.64],[51.1,36.73],[53.94,36.8],[53.91,37.35],[57.21,38.28],[59.34,37.54],[60.33,36.66],[61.16,36.65],[61.28,35.61],[60.51,34.14],[60.94,33.52],[60.58,33.07],[60.84,31.5],[61.85,31.02],[60.87,29.86],[61.91,28.55],[62.78,28.27],[62.78,27.26],[63.34,27.12],[63.18,26.63],[61.86,26.23],[61.61,25.2],[57.32,25.77],[56.69,27.15],[54.79,26.49],[53.75,26.71],[51.43,27.94],[50.05,30.21],[49.55,30.01],[48.98,30.51],[48.55,29.96],[47.69,31],[47.86,31.8],[47.43,32.4],[46.11,32.97],[45.4,33.98],[45.8,34.91],[46.35,35.82],[45.41,35.99],[44.79,37.15],[44.03,39.38],[44.81,39.63],[45,39.42]]]]},"properties":{"name":"Iran"},"id":"IR"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[45.8,34.91],[45.4,33.98],[46.11,32.97],[47.43,32.4],[47.86,31.8],[47.69,31],[48.55,29.96],[47.94,30.02],[47.93,30.02],[47.17,30.02],[46.55,29.1],[44.72,29.2],[42.08,31.11],[39.2,32.15],[38.79,33.38],[41,34.42],[41.29,36.36],[42.36,37.11],[44.79,37.15],[45.41,35.99],[46.35,35.82],[45.8,34.91]]]]},"properties":{"name":"Iraq"},"id":"IQ"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-7.41,54.95],[-8.16,54.44],[-6.27,54.1],[-6.01,52.95],[-6.36,52.18],[-9.23,51.48],[-10.34,51.78],[-9.76,52.15],[-10.46,52.18],[-8.82,52.67],[-9.94,52.56],[-8.94,53.26],[-10.18,53.41],[-9.56,53.86],[-10.11,54.23],[-8.47,54.27],[-8.19,54.63],[-8.8,54.69],[-8.32,55.11],[-6.93,55.24],[-7.25,55.07],[-7.41,54.95]]]]},"properties":{"name":"Ireland"},"id":"IE"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[35.26,31.79],[35.25,31.79],[35.25,31.81],[35.26,31.79]]],[[[35.62,33.25],[35.65,32.69],[35.55,32.39],[35.28,32.52],[34.88,31.39],[35.48,31.5],[34.98,29.55],[34.9,29.49],[34.27,31.22],[34.33,31.26],[34.49,31.6],[35.1,33.09],[35.62,33.25]]]]},"properties":{"name":"Israel"},"id":"IL"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[15.53,38.14],[15.08,36.65],[12.42,37.8],[13.32,38.22],[15.53,38.14]]],[[[9.51,41.15],[9.57,39.15],[8.41,38.96],[8.19,40.91],[9.51,41.15]]],[[[12.13,47],[13.72,46.53],[13.38,46.3],[13.72,45.6],[12.28,45.47],[12.37,44.25],[13.62,43.55],[14.74,42.09],[16.14,41.91],[15.93,41.48],[18.51,40.14],[18.35,39.79],[16.91,40.45],[16.49,39.77],[17.17,38.96],[16.06,37.92],[15.63,38.01],[16.22,38.91],[15.67,40.03],[11.1,42.39],[10.11,44.01],[8.75,44.43],[7.53,43.79],[7.66,44.17],[6.98,44.28],[6.62,45.11],[7.13,45.26],[7.04,45.93],[7.86,45.92],[8.44,46.46],[9.04,45.84],[9.28,46.5],[10.13,46.23],[10.47,46.87],[12.13,47]],[[12.46,43.9],[12.51,43.99],[12.42,43.96],[12.46,43.9]],[[12.45,41.9],[12.46,41.9],[12.45,41.91],[12.45,41.9]]]]},"properties":{"name":"Italy"},"id":"IT"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-4.79,5.17],[-7.53,4.35],[-7.42,5.84],[-8.61,6.51],[-8.47,7.56],[-7.95,8.02],[-8.2,8.5],[-7.65,8.38],[-7.97,10.17],[-6.99,10.15],[-6.24,10.74],[-6.11,10.2],[-5.52,10.44],[-4.7,9.7],[-3.63,9.95],[-2.69,9.48],[-2.49,8.2],[-3.25,6.61],[-2.93,5.1],[-4.79,5.17]]]]},"properties":{"name":"Cote d'Ivoire"},"id":"CI"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-77.13,17.88],[-78.34,18.36],[-76.95,18.39],[-76.22,17.9],[-77.13,17.88]]]]},"properties":{"name":"Jamaica"},"id":"JM"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[131.21,33.6],[131.67,33.65],[131.99,32.83],[131.34,31.37],[130.67,31],[130.81,31.68],[130.64,31.18],[130.23,31.25],[130.16,32.01],[130.61,32.79],[130.21,33.17],[130.35,32.66],[129.75,32.56],[129.58,33.35],[130.69,33.94],[131.21,33.6]]],[[[134.22,34.34],[134.75,33.83],[134.19,33.24],[133.6,33.5],[132.8,32.74],[132.37,33.47],[132.02,33.34],[132.9,34.11],[134.22,34.34]]],[[[141.27,41.34],[142.07,39.55],[141.53,38.27],[140.95,38.15],[140.84,35.74],[140.33,35.13],[139.77,34.95],[139.97,35.66],[138.85,34.59],[138.74,35.12],[138.21,34.6],[137.04,34.56],[137.35,34.72],[136.85,35.08],[136.52,34.69],[136.9,34.27],[135.77,33.45],[135.06,33.88],[135.33,34.72],[132.37,34.36],[132.05,33.77],[130.89,33.92],[130.95,34.42],[133.09,35.58],[136.07,35.65],[136.79,37.36],[137.36,37.5],[136.86,37.09],[137.3,36.75],[138.58,37.4],[140.02,39.38],[139.85,40.6],[140.35,41.25],[141.15,40.86],[141.23,41.23],[140.76,41.17],[141.27,41.34]]],[[[142.05,45.4],[143.77,44.09],[144.78,43.91],[145.34,44.34],[145.26,43.31],[145.82,43.37],[143.99,42.91],[143.24,41.92],[141.79,42.61],[140.46,42.57],[140.28,42.25],[141.2,41.8],[140.07,41.42],[139.84,42.62],[140.47,43.37],[141.41,43.29],[141.58,45.23],[142.05,45.4]]]]},"properties":{"name":"Japan"},"id":"JP"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[69.19,55.34],[70.84,55.3],[71.19,54.1],[73.76,54.07],[73.44,53.44],[76.81,54.45],[76.52,53.99],[77.91,53.27],[80.08,50.76],[80.69,51.31],[81.47,50.74],[83.46,51],[85.26,49.59],[86.77,49.79],[87.35,49.09],[85.76,48.39],[85.53,47.06],[83.04,47.21],[82.32,45.57],[82.56,45.13],[79.87,44.9],[80.52,44.73],[80.82,43.16],[80.38,43.03],[80.23,42.2],[79.19,42.8],[74.29,43.22],[73.58,43.04],[73.52,42.41],[71.75,42.82],[70.97,42.25],[69.06,41.38],[68.46,40.6],[67.94,41.18],[66.72,41.17],[66.53,42],[66.03,42],[66.12,43],[64.93,43.74],[62.03,43.48],[58.57,45.57],[56,45],[56,41.33],[54.17,42.34],[53.01,42.14],[52.44,41.74],[52.74,42.71],[51.27,43.15],[50.24,44.58],[51.57,44.51],[50.95,44.86],[51.41,45.37],[53.23,45.34],[52.73,45.55],[53.19,46.71],[51.19,47.11],[49.22,46.35],[48.56,46.56],[49.03,46.78],[48.2,47.7],[47.38,47.69],[46.5,48.42],[47.52,50.44],[48.8,49.94],[48.7,50.59],[50.77,51.77],[53.43,51.49],[54.52,50.53],[54.65,51.04],[55.69,50.53],[56.51,51.08],[58.34,51.16],[59.54,50.48],[61.38,50.78],[61.69,51.27],[60,51.96],[61.06,52.34],[60.69,52.68],[61.1,52.98],[62.12,53],[61.18,53.31],[61.58,53.51],[60.91,53.62],[61.01,53.95],[65.22,54.32],[69.19,55.34]]]]},"properties":{"name":"Kazakhstan"},"id":"KZ"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[34.96,29.36],[34.98,29.55],[35.48,31.5],[35.55,32.39],[35.65,32.69],[36.84,32.31],[38.79,33.38],[39.2,32.15],[37.01,31.51],[38,30.5],[37.5,30],[36.07,29.19],[34.96,29.36]]]]},"properties":{"name":"Jordan"},"id":"JO"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[35.94,4.62],[39.52,3.41],[40.78,4.29],[41.91,3.98],[40.99,2.83],[41,-0.87],[41.56,-1.67],[40.24,-2.66],[39.2,-4.67],[37.61,-3.5],[37.6,-3],[33.92,-1],[33.91,0.1],[35.01,1.9],[34,4.22],[34.39,4.61],[35.94,4.62]]]]},"properties":{"name":"Kenya"},"id":"KE"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[130.64,42.41],[130.7,42.29],[129.7,41.65],[129.71,40.83],[127.51,39.72],[127.39,39.2],[128.36,38.63],[126.69,37.83],[125.59,38.03],[125.34,37.67],[124.66,38.12],[125.65,38.63],[125.14,38.8],[125.45,39.58],[124.62,39.59],[124.37,40.09],[126.91,41.8],[128.16,41.38],[128.06,42],[129.71,42.44],[129.91,43.01],[130.6,42.42],[130.64,42.41]]]]},"properties":{"name":"Korea, North"},"id":"KP"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[128.53,38.33],[129.43,37.06],[129.44,35.48],[126.56,34.3],[126.25,35.12],[126.87,36.05],[126.12,36.71],[126.99,36.91],[126.69,37.83],[128.36,38.63],[128.53,38.33]]]]},"properties":{"name":"Korea, South"},"id":"KR"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[47.93,30.02],[47.94,30.02],[48.17,29.55],[47.71,29.38],[48.42,28.55],[46.55,29.1],[47.17,30.02],[47.93,30.02]]]]},"properties":{"name":"Kuwait"},"id":"KW"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[80.23,42.2],[78.08,41.04],[76.87,41.01],[76.35,40.35],[74.86,40.52],[73.66,39.45],[69.31,39.54],[69.54,40.13],[70.98,40.24],[73.17,40.82],[71.69,41.56],[71.42,41.12],[70.19,41.53],[71.28,42.2],[70.97,42.25],[71.75,42.82],[73.52,42.41],[73.58,43.04],[74.29,43.22],[79.19,42.8],[80.23,42.2]]]]},"properties":{"name":"Kyrgyzstan"},"id":"KG"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[107.55,14.71],[106,14.37],[106.06,13.93],[105.21,14.35],[105.64,15.66],[104.75,16.53],[104.72,17.5],[103.4,18.43],[102.68,17.82],[102.09,18.21],[100.92,17.57],[101.28,19.56],[100.5,19.53],[100.58,20.16],[100.09,20.35],[101.15,21.57],[101.79,21.14],[101.57,22.21],[102.14,22.4],[102.98,21.74],[103.17,20.85],[104.64,20.66],[104.38,20.44],[104.98,20],[103.88,19.29],[105.19,18.64],[106.69,16.46],[107.46,16.08],[107.18,15.78],[107.7,15.27],[107.55,14.71]]]]},"properties":{"name":"Laos"},"id":"LA"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[35.62,33.25],[35.1,33.09],[35.97,34.65],[36.62,34.2],[35.62,33.25]]]]},"properties":{"name":"Lebanon"},"id":"LB"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[27.56,-30.4],[27.01,-29.63],[28.57,-28.61],[29.43,-29.28],[29.17,-29.91],[28.08,-30.65],[27.56,-30.4]]]]},"properties":{"name":"Lesotho"},"id":"LS"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[21.07,56.44],[21.73,57.58],[22.61,57.76],[23.79,56.97],[24.41,57.26],[24.31,57.87],[25.29,58.08],[27.37,57.54],[27.86,57.3],[28.17,56.15],[26.61,55.67],[25,56.3],[21.05,56.08],[21.07,56.44]]]]},"properties":{"name":"Latvia"},"id":"LV"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-10.81,6.4],[-11.49,6.93],[-10.27,8.49],[-9.48,8.35],[-9.49,7.36],[-8.47,7.56],[-8.61,6.51],[-7.42,5.84],[-7.53,4.35],[-10.81,6.4]]]]},"properties":{"name":"Liberia"},"id":"LR"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[9.95,27.82],[9.54,30.23],[10.21,30.73],[10.29,31.69],[11.57,32.44],[11.53,33.17],[15.17,32.4],[15.76,31.39],[19,30.27],[20.06,30.86],[20.08,32.18],[21.62,32.93],[25.15,31.65],[24.71,30.17],[25,22],[25,20],[24,20],[24,19.5],[16,23.45],[15,23],[14.23,22.61],[11.99,23.52],[11.56,24.3],[10.25,24.61],[9.4,26.15],[9.87,26.51],[9.95,27.82]]]]},"properties":{"name":"Libya"},"id":"LY"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[9.53,47.27],[9.6,47.06],[9.47,47.06],[9.53,47.27]]]]},"properties":{"name":"Liechtenstein"},"id":"LI"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[25,56.3],[26.61,55.67],[26.82,55.28],[25.79,54.87],[25.79,54.16],[23.5,53.95],[22.79,54.36],[22.84,54.9],[21.43,55.25],[21.26,55.25],[21.05,56.08],[25,56.3]]]]},"properties":{"name":"Lithuania"},"id":"LT"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[6.03,50.18],[6.13,50.13],[6.36,49.46],[5.81,49.55],[6.03,50.18]]]]},"properties":{"name":"Luxembourg"},"id":"LU"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[113.53,22.19],[113.55,22.21],[113.55,22.18],[113.53,22.19]]]]},"properties":{"name":"Macau"},"id":"MO"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[49.36,-12.09],[50.43,-15.58],[50.17,-15.98],[49.63,-15.56],[49.79,-16.83],[47.13,-24.93],[45.21,-25.59],[44.02,-24.99],[43.24,-22.28],[44.48,-19.97],[43.94,-17.48],[44.46,-16.18],[46.48,-15.97],[46.34,-15.62],[47.22,-15.45],[47.45,-14.67],[47.43,-15.11],[48,-14.77],[47.91,-13.6],[48.74,-13.43],[48.73,-12.43],[49.36,-12.09]]]]},"properties":{"name":"Madagascar"},"id":"MG"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[34.73,-12.1],[34.7,-12.08],[34.72,-12.03],[34.75,-12.04],[34.73,-12.1]]],[[[34.62,-12.04],[34.6,-12.01],[34.63,-12.01],[34.62,-12.04]]],[[[33.13,-9.49],[34.33,-9.73],[34.97,-11.57],[34.38,-12.16],[34.57,-13.34],[35.92,-14.89],[35.81,-16.02],[35.14,-16.55],[35.29,-17.13],[34.26,-15.9],[34.52,-14.57],[33.63,-14.54],[33.22,-14.01],[32.68,-13.61],[33.55,-12.36],[33.25,-10.89],[33.7,-10.56],[32.94,-9.41],[33.13,-9.49]]]]},"properties":{"name":"Malawi"},"id":"MW"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[100.65,6.45],[101.14,5.63],[102.1,6.24],[103.41,4.86],[103.44,2.93],[104.28,1.37],[103.96,1.65],[103.51,1.27],[101.28,2.84],[100.13,6.42],[100.65,6.45]]],[[[116.79,6.58],[117.18,6.99],[117.74,6.39],[117.5,5.9],[118.01,6.06],[117.96,5.68],[119.28,5.34],[118.14,4.89],[118.55,4.35],[117.59,4.17],[116.05,4.28],[114.56,1.43],[112.47,1.57],[111.83,1],[110.56,0.85],[109.65,2.07],[111.38,1.34],[111,1.58],[111.44,2.69],[113.01,3.16],[114.1,4.59],[114.64,4.02],[115.02,4.9],[115.03,4.82],[115.34,4.31],[115.22,4.8],[115.15,4.9],[116.76,7.02],[116.79,6.58]]]]},"properties":{"name":"Malaysia"},"id":"MY"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[73.18,-0.69],[73.16,-0.68],[73.17,-0.68],[73.18,-0.69]]],[[[73.2,-0.68],[73.19,-0.68],[73.2,-0.67],[73.2,-0.68]]],[[[73.13,-0.67],[73.13,-0.67],[73.12,-0.65],[73.13,-0.67]]],[[[73.23,-0.65],[73.23,-0.63],[73.24,-0.62],[73.23,-0.65]]],[[[73.12,-0.64],[73.09,-0.61],[73.09,-0.58],[73.12,-0.64]]],[[[73.25,-0.61],[73.24,-0.59],[73.25,-0.58],[73.25,-0.61]]]]},"properties":{"name":"Maldives"},"id":"MV"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-8.53,11.49],[-9.16,12.49],[-10.65,11.89],[-11.37,12.41],[-12.24,14.76],[-11.49,15.65],[-10.9,15.11],[-9.34,15.7],[-5.5,15.5],[-6.58,25],[-4.81,25],[1.8,20.31],[3.23,19.82],[3.33,18.98],[4.25,19.15],[4.25,18.65],[4.2,16.39],[3.52,15.36],[0.24,14.92],[-0.73,15.08],[-2.47,14.29],[-3.44,13.17],[-3.96,13.5],[-4.42,12.3],[-5.27,11.84],[-5.52,10.44],[-6.11,10.2],[-6.24,10.74],[-6.99,10.15],[-7.97,10.17],[-8.29,11.01],[-8.68,10.97],[-8.53,11.49]]]]},"properties":{"name":"Mali"},"id":"ML"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[14.56,35.82],[14.37,35.85],[14.33,35.98],[14.56,35.82]]],[[[14.27,36.01],[14.18,36.06],[14.34,36.03],[14.27,36.01]]]]},"properties":{"name":"Malta"},"id":"MT"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-60.86,14.4],[-61.17,14.88],[-60.94,14.74],[-60.86,14.4]]]]},"properties":{"name":"Martinique"},"id":"MQ"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-6.66,26.13],[-4.81,25],[-6.58,25],[-5.5,15.5],[-9.34,15.7],[-10.9,15.11],[-11.49,15.65],[-12.24,14.76],[-14.35,16.64],[-16.28,16.52],[-16.53,16.06],[-16.04,17.73],[-16.51,19.35],[-16.2,20.22],[-16.92,21.16],[-17.05,20.76],[-16.95,21.34],[-15.74,21.34],[-13,21.34],[-13.11,22.89],[-12,23.45],[-12,26],[-8.67,26],[-8.67,27.29],[-6.66,26.13]]]]},"properties":{"name":"Mauritania"},"id":"MR"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[57.57,-20.51],[57.3,-20.45],[57.62,-19.99],[57.57,-20.51]]]]},"properties":{"name":"Mauritius"},"id":"MU"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-113.05,31.97],[-111.05,31.33],[-106.4,31.75],[-103.38,29.02],[-102.31,29.89],[-101.41,29.77],[-99.51,27.57],[-99.1,26.43],[-97.14,25.97],[-97.89,22.6],[-95.91,18.83],[-94.48,18.15],[-92,18.73],[-91.48,18.44],[-90.45,19.98],[-90.33,21.03],[-87.03,21.59],[-86.77,21.15],[-87.74,19.67],[-87.41,19.58],[-87.85,18.19],[-88.04,18.87],[-88.3,18.48],[-88.38,18.48],[-89.14,17.82],[-90.98,17.82],[-90.98,17.26],[-91.44,17.24],[-90.44,16.09],[-91.73,16.07],[-92.25,14.55],[-92.77,15.17],[-93.93,16.09],[-94.37,16.29],[-94.06,16.04],[-94.72,16.2],[-94.58,16.32],[-94.79,16.26],[-94.86,16.43],[-96.48,15.64],[-97.79,15.97],[-104.98,19.34],[-105.68,20.39],[-105.24,20.57],[-105.54,20.79],[-105.19,21.44],[-105.82,22.66],[-108.04,25.07],[-109.11,25.53],[-108.83,25.8],[-109.39,25.76],[-109.1,26.28],[-110.53,27.37],[-110.51,27.87],[-112.16,28.97],[-113.09,31.23],[-115.03,31.97],[-114.55,30],[-111.56,26.72],[-110.66,24.34],[-109.41,23.47],[-110,22.89],[-112.09,24.76],[-112.4,26.27],[-114.99,27.72],[-113.98,27.7],[-114.31,27.87],[-114.06,28.53],[-115.69,29.77],[-117.12,32.54],[-114.72,32.72],[-113.05,31.97]]]]},"properties":{"name":"Mexico"},"id":"MX"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[7.44,43.76],[7.39,43.73],[7.42,43.77],[7.44,43.76]]]]},"properties":{"name":"Monaco"},"id":"MC"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[91.02,46.6],[90.07,47.89],[88.65,48.18],[87.84,49.17],[92.32,50.81],[97.34,49.73],[98.29,50.29],[97.83,51],[98.93,52.14],[102.22,51.33],[102.33,50.57],[102.92,50.32],[106.66,50.34],[108.57,49.33],[110.79,49.15],[114.31,50.28],[116.71,49.83],[115.59,47.92],[117.37,47.65],[118.54,47.99],[119.9,46.68],[117.42,46.58],[113.64,44.75],[111.98,45.09],[111.42,44.38],[111.96,43.69],[110.44,42.78],[107.47,42.47],[105.01,41.58],[100.84,42.68],[96.38,42.73],[95.42,44.29],[90.9,45.25],[91.02,46.6]]]]},"properties":{"name":"Mongolia"},"id":"MN"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[28.12,46.85],[26.63,48.26],[27.76,48.45],[29.14,47.99],[29.95,46.81],[30.12,46.39],[28.99,46.48],[28.21,45.45],[28.12,46.85]]]]},"properties":{"name":"Moldova"},"id":"MD"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[18.46,42.57],[19.23,43.51],[20.35,42.89],[20.07,42.56],[19.65,42.62],[19.37,41.85],[18.5,42.45],[18.46,42.57]]]]},"properties":{"name":"Montenegro"},"id":"ME"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-62.17,16.67],[-62.24,16.71],[-62.2,16.81],[-62.17,16.67]]]]},"properties":{"name":"Montserrat"},"id":"MS"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-9.05,32.73],[-6.81,34.05],[-5.92,35.79],[-5.4,35.92],[-4.42,35.15],[-2.99,35.42],[-2.21,35.09],[-1.75,34.75],[-1.18,32.11],[-3.82,31.7],[-3.63,30.97],[-8.67,28.71],[-8.67,27.67],[-13.17,27.67],[-10.14,29.43],[-9.64,30.17],[-9.81,31.45],[-9.05,32.73]]]]},"properties":{"name":"Morocco"},"id":"MA"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[40.5,-11.03],[40.59,-15.48],[39.09,-16.99],[36.84,-17.88],[36.25,-18.89],[34.9,-19.86],[34.62,-19.62],[35.55,-22.23],[35.5,-24.11],[32.81,-25.61],[32.89,-26.85],[32.13,-26.84],[31.97,-25.96],[32.02,-24.46],[31.3,-22.41],[32.49,-21.34],[33.02,-19.94],[32.7,-18.94],[32.99,-17.27],[32.98,-16.71],[30.42,-16.01],[30.42,-15.63],[30.21,-14.98],[33.22,-14.01],[33.63,-14.54],[34.52,-14.57],[34.26,-15.9],[35.29,-17.13],[35.14,-16.55],[35.81,-16.02],[35.92,-14.89],[34.57,-13.34],[34.38,-12.16],[34.97,-11.57],[37.46,-11.73],[40.44,-10.48],[40.5,-11.03]],[[34.6,-12.01],[34.62,-12.04],[34.63,-12.01],[34.6,-12.01]],[[34.72,-12.03],[34.7,-12.08],[34.73,-12.1],[34.75,-12.04],[34.72,-12.03]]]]},"properties":{"name":"Mozambique"},"id":"MZ"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[56.04,24.94],[56.37,24.98],[57.16,23.94],[58.61,23.63],[59.81,22.23],[58.52,20.41],[57.83,20.22],[57.8,18.97],[56.81,18.75],[56.35,17.93],[55.44,17.83],[55.04,17.02],[53.11,16.64],[52,19],[55,20],[55.67,22],[55.2,22.7],[56.04,24.94]]],[[[56.37,26.38],[56.27,25.64],[56.18,25.65],[56.08,26.07],[56.37,26.38]]]]},"properties":{"name":"Oman"},"id":"OM"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[23.28,-17.66],[23.48,-17.63],[24.97,-17.56],[25.26,-17.8],[23.62,-18.49],[23.3,-18],[20.99,-18.32],[20.99,-22],[20,-22.01],[20,-24.77],[20,-28.42],[18.18,-28.91],[17.4,-28.71],[17.06,-28.03],[16.49,-28.58],[15.29,-27.32],[14.51,-22.55],[11.8,-18.08],[11.75,-17.25],[13.16,-16.95],[13.99,-17.42],[18.45,-17.39],[20.85,-18.02],[23.28,-17.66]]]]},"properties":{"name":"Namibia"},"id":"NA"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[166.93,-0.55],[166.93,-0.49],[166.96,-0.51],[166.93,-0.55]]]]},"properties":{"name":"Nauru"},"id":"NR"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[82.07,27.91],[80.06,28.84],[81.03,30.2],[82.1,30.34],[86.01,27.88],[88.14,27.87],[88.01,26.36],[85.86,26.57],[84.15,27.51],[83.29,27.34],[82.07,27.91]]]]},"properties":{"name":"Nepal"},"id":"NP"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[3.76,51.35],[3.37,51.37],[4.24,51.35],[3.76,51.35]]],[[[5.76,52.42],[5.43,52.26],[5.14,52.38],[5.64,52.6],[5.86,52.54],[5.76,52.42]]],[[[5.42,52.64],[5.05,52.39],[5.04,52.63],[5.42,52.64]]],[[[6.87,53.42],[7.21,53.24],[6.69,52.55],[7.07,52.39],[6.83,51.97],[5.96,51.81],[6.01,50.76],[5.04,51.49],[4.25,51.38],[3.44,51.54],[4.29,51.45],[3.69,51.71],[4.17,51.69],[3.87,51.81],[4.58,52.46],[5.42,52.25],[5.77,52.41],[5.88,52.51],[5.86,52.61],[5.6,52.66],[5.6,52.76],[5.72,52.84],[5.37,52.88],[5.42,52.96],[5.36,53.07],[5.1,52.95],[5.3,52.71],[5.03,52.63],[5.03,52.38],[4.58,52.47],[4.73,52.96],[6.87,53.42]]]]},"properties":{"name":"Netherlands"},"id":"NL"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-68.2,12.22],[-68.25,12.02],[-68.42,12.26],[-68.2,12.22]]],[[[-68.97,12.2],[-69.16,12.37],[-68.75,12.04],[-68.97,12.2]]]]},"properties":{"name":"Netherlands Antilles"},"id":"AN"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-69.88,12.41],[-70.06,12.54],[-70.06,12.63],[-69.88,12.41]]]]},"properties":{"name":"Aruba"},"id":"AW"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[164.32,-20.33],[167.01,-22.32],[165.26,-21.56],[163.99,-20.09],[164.32,-20.33]]]]},"properties":{"name":"New Caledonia"},"id":"NC"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[167.42,-16.11],[167.77,-16.54],[167.18,-15.9],[167.42,-16.11]]],[[[166.8,-15.16],[167.06,-14.95],[167.24,-15.52],[166.76,-15.64],[166.59,-14.62],[166.8,-15.16]]]]},"properties":{"name":"Vanuatu"},"id":"VU"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[172.86,-40.51],[173.11,-41.31],[174.32,-41],[174.29,-41.75],[172.76,-43.24],[173.09,-43.86],[171.29,-44.34],[170.78,-45.88],[169.01,-46.68],[166.48,-46.01],[168.37,-44.04],[170.79,-42.9],[172.11,-40.89],[172.86,-40.51]]],[[[173.04,-34.44],[173.27,-35.02],[174.32,-35.23],[174.85,-36.85],[175.58,-37.24],[175.35,-36.48],[175.84,-36.75],[175.99,-37.64],[177.16,-38.01],[178.57,-37.71],[177.91,-39.26],[177.05,-39.2],[176.83,-40.18],[175.32,-41.61],[174.59,-41.28],[175.16,-40.1],[173.75,-39.29],[174.59,-38.82],[174.97,-37.75],[174.55,-37.07],[174.89,-37.06],[174.19,-36.5],[174.51,-36.23],[173.91,-35.87],[174.08,-36.41],[173.4,-35.57],[173.66,-35.31],[173.09,-35.21],[172.72,-34.5],[173.04,-34.44]]]]},"properties":{"name":"New Zealand"},"id":"NZ"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-83.24,14.98],[-83.13,14.99],[-83.83,11.87],[-83.65,10.92],[-85.09,11.01],[-85.69,11.08],[-87.69,12.91],[-87.3,12.99],[-84.91,14.81],[-83.24,14.98]]]]},"properties":{"name":"Nicaragua"},"id":"NI"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[4.25,18.65],[4.25,19.15],[5.81,19.45],[11.99,23.52],[14.23,22.61],[15,23],[15.2,21.5],[16,20.35],[15.49,16.91],[13.47,14.46],[13.63,13.72],[12.46,13.07],[10.72,13.39],[9.63,12.8],[7.82,13.35],[6.93,13],[5.87,13.75],[4.14,13.48],[3.6,11.69],[2.84,12.4],[2.4,11.9],[2.14,12.69],[0.99,13.05],[1.29,13.35],[0.6,13.7],[0.24,14.92],[3.52,15.36],[4.2,16.39],[4.25,18.65]]]]},"properties":{"name":"Niger"},"id":"NE"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[5.87,13.75],[6.93,13],[7.82,13.35],[9.63,12.8],[10.72,13.39],[12.46,13.07],[13.63,13.72],[14.07,13.08],[14.65,11.58],[13.81,11.06],[11.86,7.08],[11.34,6.44],[10.62,7.07],[9.8,6.8],[8.59,4.81],[6.96,4.73],[7.01,4.37],[6.77,4.77],[6.85,4.35],[6.1,4.27],[5.45,4.92],[5.64,5.54],[5.26,5.44],[5.5,5.62],[4.53,6.3],[2.72,6.37],[2.79,9.04],[3.86,10.58],[3.6,11.69],[4.14,13.48],[5.87,13.75]]]]},"properties":{"name":"Nigeria"},"id":"NG"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-169.89,-19.15],[-169.93,-19.02],[-169.82,-18.97],[-169.89,-19.15]]]]},"properties":{"name":"Niue"},"id":"NU"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[167.96,-29.08],[167.91,-29.01],[168,-29.03],[167.96,-29.08]]]]},"properties":{"name":"Norfolk Island"},"id":"NF"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[13.97,68.24],[14.14,68.24],[13.45,68.07],[13.97,68.24]]],[[[15.03,68.35],[14.2,68.15],[15.17,68.45],[15.03,68.35]]],[[[15.38,68.85],[15.06,68.57],[14.37,68.68],[15.38,68.85]]],[[[15.99,68.75],[15.74,68.53],[16.57,68.65],[14.99,68.25],[15.64,68.95],[15.99,68.75]]],[[[17.64,69.52],[18.07,69.43],[17.88,69.24],[18,69.19],[16.78,69.06],[17.64,69.52]]],[[[18.89,69.69],[18,69.59],[18.69,69.88],[18.89,69.69]]],[[[23.6,70.58],[23.23,70.28],[22.85,70.41],[23.6,70.58]]],[[[23.45,70.78],[22.78,70.52],[21.95,70.65],[23.45,70.78]]],[[[5.34,61.59],[4.94,61.68],[6.76,61.87],[5.15,61.89],[5.15,62.21],[6.36,62.06],[5.92,62.22],[6.31,62.37],[6.54,62.1],[6.39,62.37],[6.7,62.45],[6.87,62.42],[7,62.25],[6.94,62.11],[7.04,62.09],[7.42,62.23],[6.98,62.31],[6.92,62.36],[6.97,62.37],[6.78,62.48],[6.26,62.45],[6.65,62.5],[6.25,62.57],[8.15,62.69],[7.04,62.97],[8.55,62.65],[7.88,63.01],[8.53,62.84],[8.16,63.12],[9.65,63.62],[10.26,63.26],[10.05,63.41],[10.91,63.45],[11.49,64.02],[11.31,64.12],[10.57,63.8],[11.08,63.84],[10.94,63.74],[10.05,63.5],[9.79,63.66],[10.1,63.76],[9.54,63.76],[12.94,65.31],[12.25,65.23],[12.67,65.92],[13.18,65.85],[12.67,66.07],[14.15,66.32],[13.03,66.19],[13.54,66.3],[12.97,66.52],[13.73,66.6],[13.23,66.71],[13.99,66.78],[13.55,66.93],[15.74,67.17],[14.36,67.23],[15.9,67.56],[14.76,67.81],[15.97,68.25],[16.22,67.89],[16.5,67.79],[16.21,68],[16.52,67.95],[16.36,68.03],[16.72,68.07],[16.1,68.28],[16.81,68.13],[16.32,68.37],[17.35,68.17],[17.55,68.52],[16.46,68.51],[17.68,68.65],[17.24,68.75],[17.79,68.76],[17.43,68.91],[18.15,69.15],[18,69.28],[18.26,69.49],[19.44,69.23],[18.94,69.61],[19.76,69.81],[19.68,69.43],[20.3,69.97],[19.95,69.26],[21.31,70.02],[22.1,69.74],[21.8,70.03],[22.1,70.11],[21.3,70.25],[23.31,69.94],[24.73,70.62],[24.25,70.78],[24.59,70.96],[25.91,70.89],[25.07,70.5],[25.23,70.09],[26.57,70.94],[26.5,70.36],[27.03,70.47],[27.65,71.11],[28.55,70.97],[27.65,70.61],[28.3,70.71],[27.85,70.48],[28.34,70.51],[28.04,70.06],[29.04,70.87],[31.08,70.29],[28.61,70.11],[29.67,69.97],[29.49,69.66],[30.85,69.79],[28.96,69.05],[29.18,69.64],[28.17,69.91],[26.45,69.93],[24.93,68.58],[22.4,68.71],[21.32,69.33],[20.58,69.06],[20.1,69.04],[20.35,68.79],[19.94,68.34],[18.09,68.51],[17.88,67.95],[16.73,67.9],[15.47,66.28],[14.5,66.13],[14.49,65.31],[13.66,64.58],[14.12,64.47],[13.99,64.02],[12.14,63.58],[12.12,61.73],[12.86,61.36],[12.21,61],[12.49,60.11],[11.82,59.85],[11.43,58.99],[10.8,59.19],[10.53,59.88],[10.23,59.04],[9.54,59.11],[8.21,58.12],[6.6,58.07],[5.46,58.74],[6.62,59.05],[5.87,59.07],[6.47,59.56],[5.18,59.51],[7.11,60.49],[5.75,59.99],[5.73,60.39],[5.14,60.35],[5.7,60.69],[4.93,60.8],[6.59,61.15],[7.11,60.86],[7.57,61.48],[5.4,61.07],[4.95,61.26],[5.63,61.36],[4.95,61.41],[5.8,61.45],[5.34,61.59]],[[5.34,61.59],[5.35,61.59],[5.28,61.59],[5.34,61.59]]]]},"properties":{"name":"Norway"},"id":"NO"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[145.28,14.16],[145.12,14.12],[145.24,14.19],[145.28,14.16]]],[[[145.62,14.91],[145.57,15.01],[145.63,15.08],[145.62,14.91]]],[[[145.74,15.13],[145.68,15.11],[145.82,15.27],[145.74,15.13]]],[[[145.74,18.04],[145.78,18.17],[145.82,18.16],[145.74,18.04]]],[[[145.68,18.72],[145.66,18.81],[145.71,18.77],[145.68,18.72]]]]},"properties":{"name":"Northern Mariana Islands"},"id":"MP"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[163.01,5.26],[162.9,5.31],[163.02,5.38],[163.01,5.26]]],[[[158.3,6.79],[158.12,6.93],[158.32,6.93],[158.3,6.79]]],[[[138.21,9.52],[138.06,9.42],[138.13,9.57],[138.21,9.52]]]]},"properties":{"name":"Micronesia, Federated States of"},"id":"FM"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[168.77,7.3],[168.79,7.29],[168.67,7.33],[168.77,7.3]]],[[[168.57,7.4],[168.55,7.42],[168.56,7.47],[168.57,7.4]]],[[[168.97,7.57],[168.94,7.62],[168.97,7.6],[168.97,7.57]]]]},"properties":{"name":"Marshall Islands"},"id":"MH"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[134.56,7.37],[134.49,7.44],[134.63,7.73],[134.56,7.37]]]]},"properties":{"name":"Palau"},"id":"PW"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[74.82,37.02],[75.86,36.66],[76.17,35.82],[77.82,35.5],[76.87,34.66],[73.94,34.65],[74.3,33.98],[74.02,33.19],[75.38,32.21],[74.61,31.88],[74.69,31.05],[71.9,27.96],[70.37,28.02],[69.58,27.17],[71.11,24.42],[68.78,24.33],[68.2,23.77],[67.49,23.89],[66.36,25.61],[64.65,25.16],[61.61,25.2],[61.86,26.23],[63.18,26.63],[63.34,27.12],[62.78,27.26],[62.78,28.27],[61.91,28.55],[60.87,29.86],[62.48,29.41],[66.26,29.85],[66.72,31.21],[69.33,31.94],[69.51,33.03],[70.33,33.33],[69.91,34.04],[71.08,34.06],[71.65,35.42],[71.24,36.13],[72.56,36.82],[74.57,37.03],[74.82,37.02]]]]},"properties":{"name":"Pakistan"},"id":"PK"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-79.46,9.57],[-77.37,8.67],[-77.22,7.94],[-77.89,7.23],[-78.43,8.05],[-78.14,8.4],[-77.78,8.15],[-78.98,9.14],[-80.47,8.21],[-79.99,7.52],[-80.43,7.24],[-81.74,8.16],[-82.9,8.03],[-82.93,9.47],[-82.56,9.56],[-82.24,9],[-81.2,8.78],[-79.46,9.57]]]]},"properties":{"name":"Panama"},"id":"PA"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[152.24,-4.21],[152.1,-5.46],[150.47,-6.28],[148.32,-5.68],[149.88,-5.54],[150.09,-5.01],[150.16,-5.55],[150.92,-5.49],[151.68,-4.91],[151.51,-4.2],[152.24,-4.21]]],[[[141.89,-2.97],[144.51,-3.82],[145.74,-4.8],[145.77,-5.49],[147.48,-5.97],[147.87,-6.66],[146.96,-6.75],[147.18,-7.46],[148.14,-8.07],[148.6,-9.08],[149.31,-9.02],[149.22,-9.47],[150.01,-9.63],[149.91,-10.05],[150.88,-10.23],[150.21,-10.7],[147.95,-10.15],[146.09,-8.09],[144.52,-7.5],[144.21,-7.8],[143.66,-7.47],[143.96,-7.98],[143.36,-7.9],[143.61,-8.24],[142.14,-8.23],[143.11,-8.47],[143.33,-9.03],[141.01,-9.13],[141,-2.61],[141.89,-2.97]]]]},"properties":{"name":"Papua New Guinea"},"id":"PG"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-54.33,-24.68],[-54.6,-25.57],[-54.7,-26.44],[-55.74,-27.44],[-58.6,-27.32],[-57.58,-25.55],[-57.76,-25.18],[-61.01,-23.81],[-62.64,-22.24],[-61.74,-19.65],[-59.1,-19.35],[-58.16,-20.17],[-57.99,-22.09],[-55.85,-22.29],[-55.41,-23.96],[-54.41,-23.92],[-54.33,-24.68]]]]},"properties":{"name":"Paraguay"},"id":"PY"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-78.71,-4.58],[-78.34,-3.42],[-75.56,-1.53],[-75.22,-0.97],[-75.63,-0.11],[-75.29,-0.12],[-73.56,-1.37],[-72.88,-2.51],[-71.7,-2.15],[-70.29,-2.51],[-70.72,-3.78],[-69.96,-4.24],[-70.77,-4.15],[-72.85,-5.12],[-73.12,-6.45],[-74.01,-7.54],[-72.96,-8.98],[-73.21,-9.41],[-72.37,-9.49],[-72.14,-10],[-70.51,-9.43],[-70.63,-11.01],[-69.57,-10.95],[-68.67,-12.5],[-69.42,-15.62],[-68.82,-16.34],[-69.5,-17.51],[-70.41,-18.35],[-75.93,-14.66],[-78.99,-8.23],[-79.98,-6.76],[-81.17,-6.09],[-80.87,-5.65],[-81.29,-4.31],[-80.34,-3.38],[-80.47,-4.44],[-79.65,-4.43],[-79.05,-5.01],[-78.71,-4.58]]]]},"properties":{"name":"Peru"},"id":"PE"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[126.05,9.23],[126.59,7.28],[126.19,6.27],[125.65,7.24],[125.41,5.56],[125.26,6.09],[124.19,6.21],[124.27,7.37],[123.68,7.81],[122.83,7.28],[122.62,7.77],[121.92,6.99],[122.22,7.96],[123.38,8.73],[123.82,8.48],[123.67,7.95],[124.73,8.49],[124.8,9],[125.51,9.01],[125.44,9.81],[126.05,9.23]]],[[[124.48,10.05],[124.37,9.63],[123.79,9.73],[124.48,10.05]]],[[[123.56,10.79],[123.01,9.03],[122.45,9.97],[122.95,10.89],[123.56,10.79]]],[[[124.02,11.12],[124.03,10.38],[123.31,9.41],[124.02,11.12]]],[[[119.51,11.34],[119.71,10.5],[117.19,8.33],[119.31,10.58],[119.22,10.96],[119.46,10.72],[119.51,11.34]]],[[[124.64,11.29],[125.03,11.2],[125.01,10.03],[124.29,11.54],[124.64,11.29]]],[[[122.23,11.8],[123.15,11.6],[123.13,11.17],[121.94,10.42],[121.85,11.76],[122.23,11.8]]],[[[124.46,12.52],[125.3,12.46],[125.76,11.01],[124.84,11.47],[124.46,12.52]]],[[[123.67,12.35],[124.08,11.72],[123.53,12.21],[123.16,11.91],[123.24,12.61],[123.67,12.35]]],[[[120.72,13.48],[121.5,13.15],[121.22,12.23],[120.3,13.44],[120.72,13.48]]],[[[121.26,18.57],[122.24,18.51],[122.53,17.1],[121.38,15.33],[121.73,14.17],[122.23,13.9],[122.71,14.34],[123.1,13.67],[123.34,14.09],[123.92,13.79],[123.53,13.58],[124.2,13.06],[124.08,12.54],[122.56,13.94],[122.61,13.16],[121.75,13.96],[120.66,13.77],[120.96,14.64],[120.09,14.79],[119.79,16.32],[120.42,16.16],[120.57,18.49],[121.26,18.57]]]]},"properties":{"name":"Philippines"},"id":"PH"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-128.29,-24.41],[-128.34,-24.33],[-128.3,-24.33],[-128.29,-24.41]]]]},"properties":{"name":"Pitcairn Islands"},"id":"PN"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[18.85,49.52],[17.72,50.32],[16.64,50.11],[16.34,50.66],[14.83,50.87],[14.28,53.7],[17.9,54.82],[19.8,54.44],[22.79,54.36],[23.5,53.95],[23.94,52.73],[23.17,52.28],[23.64,52.08],[23.6,51.53],[24.11,50.57],[22.56,49.08],[18.85,49.52]]]]},"properties":{"name":"Poland"},"id":"PL"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-8.2,41.87],[-6.59,41.95],[-6.19,41.58],[-6.93,41.02],[-7.02,39.67],[-7.53,39.67],[-6.95,39.03],[-7.43,37.25],[-8.99,37.02],[-8.67,38.41],[-9.18,38.42],[-8.98,38.95],[-9.48,38.71],[-8.66,40.69],[-8.75,41.95],[-8.2,41.87]]]]},"properties":{"name":"Portugal"},"id":"PT"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-14.52,12.68],[-13.71,12.68],[-13.71,11.72],[-14.69,11.51],[-15.02,10.96],[-15.51,11.34],[-15.03,11.59],[-15.56,11.72],[-15,11.97],[-15.96,11.73],[-15.7,12],[-16.25,11.93],[-16.11,12.33],[-16.72,12.32],[-14.52,12.68]]]]},"properties":{"name":"Guinea-Bissau"},"id":"GW"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[124.45,-9.18],[124.34,-9.46],[124.05,-9.34],[124.45,-9.18]]],[[[127.25,-8.48],[125.13,-9.44],[125.16,-9.07],[124.95,-8.95],[127.25,-8.48]]]]},"properties":{"name":"Timor-Leste"},"id":"TL"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-67,18.5],[-65.6,18.23],[-67.19,17.93],[-67,18.5]]]]},"properties":{"name":"Puerto Rico"},"id":"PR"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[51.52,25.38],[51.22,24.62],[50.83,24.75],[51.04,26.05],[51.57,25.91],[51.52,25.38]]]]},"properties":{"name":"Qatar"},"id":"QA"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[55.71,-21],[55.67,-21.37],[55.22,-21.03],[55.71,-21]]]]},"properties":{"name":"Reunion"},"id":"RE"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[20.73,46.18],[22.89,47.95],[24.92,47.71],[26.63,48.26],[28.12,46.85],[28.21,45.45],[29.66,45.21],[29.55,44.82],[28.87,44.94],[28.58,43.75],[27.04,44.15],[24.18,43.68],[22.68,44.22],[22.48,44.71],[21.4,44.78],[21.51,45.15],[20.26,46.11],[20.73,46.18]]]]},"properties":{"name":"Romania"},"id":"RO"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[143.66,49.31],[143.02,49.14],[142.53,48],[143.09,46.8],[143.49,46.81],[143.47,46.09],[142.71,46.74],[142.08,45.89],[141.85,48.75],[142.27,51.12],[141.64,52.32],[141.77,53.37],[142.8,53.7],[142.39,54.24],[142.7,54.42],[143.29,53.13],[143.22,51.52],[144.75,48.64],[143.66,49.31]],[[143.66,49.31],[143.25,49.38],[143.32,49.31],[143.66,49.31]]],[[[21.43,55.25],[22.84,54.9],[22.79,54.36],[19.8,54.44],[20.4,54.68],[19.87,54.64],[19.97,54.96],[20.94,55.29],[20.53,54.97],[21.09,54.89],[21.26,55.25],[21.43,55.25]]],[[[-179.63,68.91],[-175.46,67.71],[-174.83,67.38],[-175,66.67],[-174.46,66.3],[-173.76,66.45],[-174.65,67.06],[-173.67,67.13],[-171.73,66.96],[-169.69,66.07],[-170.64,65.61],[-171.54,65.83],[-171.12,65.48],[-172.8,65.68],[-172.13,65.09],[-173.2,64.79],[-172.36,64.46],[-173.19,64.25],[-173.41,64.62],[-175.45,64.78],[-176.08,65.47],[-178.56,65.52],[-178.91,65.99],[-178.52,66.4],[-179.7,66.18],[-179.32,65.54],[-180,65.07],[-180,68.98],[-179.63,68.91]]],[[[55.33,73.33],[56.59,73.14],[55.62,72.96],[56.26,72.96],[55.43,72.78],[55.95,72.67],[55.12,72.45],[55.58,72.2],[55.22,71.93],[57.64,70.73],[53.46,70.81],[54.24,71.13],[51.42,71.74],[53.22,72.65],[52.38,72.72],[53.38,72.88],[53.15,73.16],[55.33,73.33]]],[[[139.19,76.07],[140.48,75.64],[141.62,76.01],[141.36,76.18],[145.39,75.52],[143.95,75.03],[142.9,75.13],[142.5,75.36],[142.51,75.45],[143.04,75.67],[142.45,75.71],[142.16,75.38],[142.61,75.1],[143.71,74.94],[139.1,74.65],[136.86,75.35],[137.4,75.35],[136.96,75.6],[137.74,75.75],[137.45,75.95],[139.19,76.07]]],[[[68.27,76.96],[68.86,76.54],[61.29,75.33],[59.15,74.44],[58.18,74.57],[58.74,74.27],[57.26,74.08],[57.72,73.71],[56.56,73.88],[57.61,73.66],[56.72,73.67],[57.25,73.49],[56.76,73.25],[55.91,73.44],[54.22,73.32],[55.18,73.71],[53.63,73.76],[55.87,74.1],[55.07,74.26],[56.98,74.69],[55.83,74.8],[56.68,74.95],[55.8,75.15],[58,75.67],[68.27,76.96]]],[[[104.27,77.68],[106.29,77.36],[104.12,77.09],[107.5,76.92],[106.4,76.51],[111.1,76.76],[113.89,75.85],[113.51,75.53],[112.34,75.85],[113.72,75.41],[105.21,72.76],[110.91,73.7],[109.53,73.77],[110.2,74.02],[112.89,73.96],[113.5,73.33],[113.49,72.96],[113.1,72.85],[113.18,72.72],[113.53,72.63],[114.04,72.6],[113.36,72.69],[113.23,72.74],[113.15,72.83],[113.53,72.96],[113.55,73.24],[114.03,73.34],[113.48,73.5],[118.63,73.57],[118.99,73.49],[118.39,73.24],[119.82,72.94],[126.37,72.35],[127.22,71.39],[127.33,71.9],[126.72,72.39],[127.66,72.35],[131.13,70.73],[132.73,71.94],[133.68,71.43],[135.86,71.64],[137.85,71.11],[138.07,71.57],[139.93,71.48],[139.34,71.95],[140.2,72.2],[139.09,72.23],[141.02,72.59],[140.75,72.89],[146.85,72.35],[144.39,72.17],[146.93,72.31],[144.96,71.96],[145.32,71.66],[147.14,72.32],[149.19,72.22],[150.08,71.88],[148.82,71.67],[152.54,70.84],[159.05,70.87],[160.04,70.41],[159.73,69.83],[161,69.59],[161.41,68.98],[160.85,68.52],[161.58,68.91],[161.45,69.39],[164.01,69.77],[167.79,69.78],[168.28,69.24],[170.61,68.76],[171.03,69.04],[170.12,69.61],[170.47,70.13],[176.11,69.89],[180,68.98],[180,65.07],[178.52,64.59],[176.9,65.08],[176.3,65.05],[177.3,64.83],[174.44,64.69],[177.49,64.76],[179.56,62.62],[179.06,62.28],[176.98,62.87],[177.27,62.57],[172.71,61.43],[170.25,59.91],[169.21,60.62],[166.14,59.82],[166.35,60.49],[164.83,59.78],[163.64,60.05],[163.19,59.05],[161.94,58.07],[162.35,57.68],[163.21,57.84],[162.74,57.36],[163.35,56.2],[162.39,56.4],[161.71,55.5],[162.11,54.76],[160.01,54.14],[160.06,53.09],[158.43,53.02],[158.28,51.94],[156.67,50.88],[155.54,55.3],[155.95,56.67],[156.98,57.41],[156.75,57.73],[158.23,58.02],[161.91,60.42],[163.66,60.87],[164.13,62.28],[165.64,62.45],[163.26,62.54],[162.95,61.81],[163.29,61.66],[160.14,60.58],[160.39,61.03],[159.78,60.94],[159.83,61.26],[160.35,61.95],[157.49,61.8],[154.23,59.88],[154.11,59.46],[155.19,59.36],[154.74,59.13],[151.31,58.84],[151.07,59.11],[152.29,59.23],[149.6,59.77],[148.9,59.24],[142.16,59.07],[135.15,54.86],[136.82,54.65],[136.76,53.77],[137.74,54.32],[137.31,53.53],[138.55,53.99],[138.44,53.51],[138.64,54.3],[139.75,54.31],[141.42,53.29],[140.71,53.11],[141.51,52.21],[140.46,50.71],[140.7,50.09],[140.18,48.45],[135.13,43.5],[133.15,42.68],[131.81,43.33],[130.7,42.29],[130.64,42.41],[130.6,42.42],[130.41,42.72],[131.31,43.39],[130.95,44.84],[131.86,45.35],[133.12,45.13],[134.74,48.27],[130.99,47.69],[130.67,48.86],[127.53,49.79],[126.1,52.76],[123.38,53.53],[120.86,53.28],[120.03,52.77],[120.78,52.11],[119.21,50.02],[117.87,49.52],[116.71,49.83],[114.31,50.28],[110.79,49.15],[108.57,49.33],[106.66,50.34],[102.92,50.32],[102.33,50.57],[102.22,51.33],[98.93,52.14],[97.83,51],[98.29,50.29],[97.34,49.73],[92.32,50.81],[87.84,49.17],[87.35,49.09],[86.77,49.79],[85.26,49.59],[83.46,51],[81.47,50.74],[80.69,51.31],[80.08,50.76],[77.91,53.27],[76.52,53.99],[76.81,54.45],[73.44,53.44],[73.76,54.07],[71.19,54.1],[70.84,55.3],[69.19,55.34],[65.22,54.32],[61.01,53.95],[60.91,53.62],[61.58,53.51],[61.18,53.31],[62.12,53],[61.1,52.98],[60.69,52.68],[61.06,52.34],[60,51.96],[61.69,51.27],[61.38,50.78],[59.54,50.48],[58.34,51.16],[56.51,51.08],[55.69,50.53],[54.65,51.04],[54.52,50.53],[53.43,51.49],[50.77,51.77],[48.7,50.59],[48.8,49.94],[47.52,50.44],[46.5,48.42],[47.38,47.69],[48.2,47.7],[49.03,46.78],[48.56,46.56],[49.22,46.35],[48.71,45.83],[47.38,45.74],[46.68,44.52],[47.41,43.5],[47.7,43.87],[47.46,43.02],[48.58,41.84],[47.77,41.2],[46.57,41.87],[46.45,41.9],[44.93,42.76],[43.91,42.58],[42.85,43.18],[40,43.38],[36.58,45.18],[37.74,45.3],[37.94,46.03],[38.57,46.09],[37.73,46.67],[39.3,47.08],[38.24,47.11],[38.85,47.86],[39.8,47.86],[39.66,48.62],[40.08,48.87],[39.7,49.01],[40.14,49.6],[38.02,49.9],[37.46,50.44],[35.61,50.37],[35.37,51.04],[34.38,51.26],[34.1,51.65],[34.42,51.81],[33.42,52.36],[31.78,52.11],[31.27,53.02],[32.74,53.46],[30.78,54.79],[30.93,55.6],[28.17,56.15],[27.86,57.3],[27.37,57.54],[27.82,57.87],[27.43,58.81],[28.02,59.48],[30.25,59.98],[28.6,60.38],[28.69,60.74],[27.81,60.55],[31.59,62.91],[29.99,63.74],[30.58,64.22],[29.64,64.93],[30.13,65.72],[29.07,66.9],[30.03,67.69],[28.69,68.2],[28.82,68.84],[28.43,68.9],[28.96,69.05],[30.85,69.79],[33.09,69.75],[32.03,69.64],[33.52,69.42],[33.02,68.95],[33.72,69.33],[35.97,69.17],[40.99,67.72],[41.22,66.84],[38.61,66.05],[31.85,67.15],[34.85,65.9],[34.38,65.38],[34.79,64.55],[37.41,63.8],[37.98,64.32],[36.44,64.94],[37.03,65.21],[38.41,64.86],[38.05,64.64],[40.51,64.54],[39.75,65.55],[42.17,66.52],[44.17,65.87],[44.5,66.91],[43.75,67.32],[44.25,68.27],[43.31,68.68],[46.52,68.14],[46.71,67.81],[44.91,67.37],[46.39,66.74],[47.7,66.99],[47.99,67.65],[49.1,67.63],[48.59,67.93],[52.27,68.31],[52.73,68.47],[52.49,68.59],[52.65,68.65],[52.29,68.61],[53.78,68.97],[54.56,68.99],[53.59,68.9],[54.02,68.86],[53.95,68.4],[53.21,68.26],[54.79,68.16],[58.9,69],[59.43,68.75],[59.07,68.42],[59.84,68.37],[60.91,68.9],[60.14,69.57],[60.87,69.86],[64.15,69.54],[68.44,68.22],[69.22,68.96],[66.8,69.57],[67.34,70.75],[66.62,71.05],[68.47,71.82],[69.33,72.95],[71.56,72.91],[72.83,72.71],[72.88,72.28],[71.8,71.47],[72.84,70.87],[72.42,70.27],[72.55,68.98],[73.65,68.46],[71.41,66.97],[71.56,66.65],[68.97,66.8],[72,66.22],[74.74,67.69],[74.33,68.38],[74.64,68.77],[76.59,68.97],[77.32,68.52],[77.09,67.78],[79.04,67.57],[77.46,67.76],[78.17,68.26],[77.63,68.91],[73.75,69.17],[73.52,69.76],[74.31,70.67],[73.02,71.42],[74.96,72.11],[74.83,72.83],[75.72,72.56],[75.24,71.38],[76.92,71.07],[79.11,71],[76.1,71.93],[78.1,71.88],[77.37,72.1],[78.54,72.4],[83.26,71.72],[82.26,71.26],[82.08,70.57],[82.35,70.2],[82.16,70.58],[83.12,70.89],[82.64,70.17],[83.11,70.07],[83.75,70.46],[83.15,71.24],[83.63,71.62],[80.72,72.53],[80.82,72.97],[80.23,73.17],[80.51,73.57],[87.09,73.86],[85.78,73.46],[86.78,72.99],[85.85,73.48],[87.66,73.89],[85.95,74.28],[87.13,74.37],[85.79,74.63],[86.03,74.81],[86.91,74.61],[87.79,75.02],[86.99,75.15],[94.16,75.94],[92.87,75.95],[93.16,76.1],[99.28,76.21],[99.77,76.03],[99.09,75.55],[100.19,75.17],[99.17,75.57],[99.88,76.09],[98.81,76.49],[102.23,76.38],[100.85,76.88],[104.27,77.68]]],[[[102.97,79.33],[102.39,78.83],[103.95,79.13],[105.41,78.56],[99.34,78.02],[101.62,78.98],[100.99,79.06],[101.55,79.35],[102.97,79.33]]],[[[97.61,80.17],[98.03,80.07],[97.19,79.7],[100.02,79.82],[99.04,79.29],[99.94,78.95],[97.3,78.85],[92.85,79.55],[97.61,80.17]]]]},"properties":{"name":"Russia"},"id":"RU"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[29.95,-2.31],[29.85,-2.76],[29.02,-2.74],[29.6,-1.39],[30.48,-1.06],[30.89,-2.08],[30.57,-2.4],[29.95,-2.31]]]]},"properties":{"name":"Rwanda"},"id":"RW"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-63.03,18.02],[-63.14,18.06],[-63.01,18.07],[-63.03,18.02]]]]},"properties":{"name":"Saint Barthelemy"},"id":"BL"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-5.66,-15.99],[-5.79,-15.99],[-5.7,-15.9],[-5.66,-15.99]]]]},"properties":{"name":"Saint Helena"},"id":"SH"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-62.55,17.09],[-62.62,17.11],[-62.6,17.2],[-62.55,17.09]]],[[[-62.7,17.34],[-62.63,17.22],[-62.86,17.37],[-62.7,17.34]]]]},"properties":{"name":"Saint Kitts and Nevis"},"id":"KN"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-63.17,18.16],[-62.97,18.27],[-62.99,18.23],[-63.17,18.16]]]]},"properties":{"name":"Anguilla"},"id":"AI"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-60.95,13.71],[-61.08,13.88],[-60.93,14.11],[-60.95,13.71]]]]},"properties":{"name":"Saint Lucia"},"id":"LC"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-63.01,18.08],[-63.01,18.07],[-63.14,18.06],[-63.01,18.08]]]]},"properties":{"name":"Saint Martin"},"id":"MF"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-56.15,46.76],[-56.24,46.76],[-56.17,46.81],[-56.15,46.76]]],[[[-56.27,46.99],[-56.37,46.78],[-56.39,47.12],[-56.27,46.99]]]]},"properties":{"name":"Saint Pierre and Miquelon"},"id":"PM"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-61.17,13.13],[-61.28,13.21],[-61.18,13.38],[-61.17,13.13]]]]},"properties":{"name":"Saint Vincent and the Grenadines"},"id":"VC"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[12.42,43.96],[12.51,43.99],[12.46,43.9],[12.42,43.96]]]]},"properties":{"name":"San Marino"},"id":"SM"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[6.52,0.02],[6.47,0.26],[6.69,0.4],[6.52,0.02]]],[[[7.42,1.56],[7.33,1.61],[7.41,1.7],[7.42,1.56]]]]},"properties":{"name":"Sao Tome and Principe"},"id":"ST"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[44.72,29.2],[46.55,29.1],[48.42,28.55],[48.84,27.62],[50.16,26.66],[49.99,26.02],[50.83,24.75],[51.22,24.62],[51.58,24.26],[52.58,22.94],[55.2,22.7],[55.67,22],[55,20],[52,19],[48.77,18.27],[46.33,15.62],[46.33,16.67],[44.47,17.41],[43.31,17.46],[42.79,16.38],[40.76,19.76],[39.18,21.1],[38.45,23.78],[37.44,24.37],[35.16,28.06],[34.57,28.09],[34.96,29.36],[36.07,29.19],[37.5,30],[38,30.5],[37.01,31.51],[39.2,32.15],[42.08,31.11],[44.72,29.2]]]]},"properties":{"name":"Saudi Arabia"},"id":"SA"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-17.15,14.61],[-17.54,14.76],[-16.53,16.06],[-16.28,16.52],[-14.35,16.64],[-12.24,14.76],[-11.37,12.41],[-13.71,12.68],[-14.52,12.68],[-16.72,12.32],[-15.39,12.83],[-16.76,12.56],[-16.75,13.06],[-15.81,13.16],[-15.8,13.35],[-15.29,13.37],[-15.11,13.6],[-13.8,13.41],[-15.07,13.83],[-16.57,13.59],[-16.36,14.17],[-16.78,14.01],[-17.15,14.61]]]]},"properties":{"name":"Senegal"},"id":"SN"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[20.07,42.56],[20.35,42.89],[19.23,43.51],[19.62,44.05],[19.04,44.86],[19.42,45.23],[18.82,45.91],[20.26,46.11],[21.51,45.15],[21.4,44.78],[22.48,44.71],[22.68,44.22],[22.37,43.83],[23,43.19],[22.37,42.32],[20.59,41.88],[20.07,42.56]]]]},"properties":{"name":"Serbia"},"id":"RS"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[55.54,-4.76],[55.38,-4.63],[55.46,-4.55],[55.54,-4.76]]]]},"properties":{"name":"Seychelles"},"id":"SC"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-11.21,10],[-10.57,9.06],[-10.7,8.3],[-10.27,8.49],[-11.49,6.93],[-12.96,7.9],[-13.3,9.03],[-12.46,9.89],[-11.21,10]]]]},"properties":{"name":"Sierra Leone"},"id":"SL"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[103.99,1.38],[103.64,1.32],[103.71,1.43],[103.99,1.38]]]]},"properties":{"name":"Singapore"},"id":"SG"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[17.25,48.02],[17.17,48.01],[16.95,48.62],[18.85,49.52],[22.56,49.08],[22.15,48.41],[20.66,48.56],[18.66,47.76],[17.25,48.02]]]]},"properties":{"name":"Slovakia"},"id":"SK"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[105.58,23.06],[106.71,22.86],[106.69,22.03],[107.99,21.54],[106.64,21.02],[105.61,18.98],[108.83,15.42],[109.47,12.89],[109.27,11.89],[108,10.7],[107.27,10.38],[106.74,10.67],[106.42,10.31],[106.78,10.08],[106.29,10.25],[106.62,9.81],[106.12,10.24],[106.54,9.58],[105.82,10],[106.19,9.37],[105.02,8.59],[105.11,9.95],[104.45,10.42],[105.1,10.96],[106.2,10.77],[105.85,11.66],[107.55,12.35],[107.49,14.45],[107.55,14.71],[107.7,15.27],[107.18,15.78],[107.46,16.08],[106.69,16.46],[105.19,18.64],[103.88,19.29],[104.98,20],[104.38,20.44],[104.64,20.66],[103.17,20.85],[102.98,21.74],[102.14,22.4],[102.48,22.77],[103.96,22.5],[105.35,23.33],[105.58,23.06]]]]},"properties":{"name":"Vietnam"},"id":"VN"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[13.72,46.53],[16.11,46.87],[16.61,46.48],[16.57,46.48],[15.65,46.22],[15.17,45.43],[13.59,45.48],[13.72,45.6],[13.38,46.3],[13.72,46.53]]]]},"properties":{"name":"Slovenia"},"id":"SI"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[42.94,11],[43.25,11.47],[44.28,10.45],[44.9,10.42],[50.77,11.98],[51.28,11.84],[51.01,10.44],[51.41,10.45],[50.9,10.32],[50.84,9.43],[47.95,4.46],[43.49,0.65],[41.56,-1.67],[41,-0.87],[40.99,2.83],[41.91,3.98],[43.69,4.89],[44.95,4.9],[47.99,8],[44.01,9.01],[42.85,10.22],[42.94,11]]]]},"properties":{"name":"Somalia"},"id":"SO"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[29.89,-22.19],[31.3,-22.41],[32.02,-24.46],[31.97,-25.96],[31.33,-25.75],[30.9,-26.31],[31.16,-27.2],[31.99,-27.32],[32.13,-26.84],[32.89,-26.85],[32.39,-28.54],[27.9,-33.04],[25.7,-34.03],[22.54,-34.01],[20,-34.82],[18.79,-34.09],[18.4,-34.3],[17.85,-32.83],[18.29,-32.62],[18.28,-31.89],[16.49,-28.58],[17.06,-28.03],[17.4,-28.71],[18.18,-28.91],[20,-28.42],[20,-24.77],[20.81,-25.88],[20.64,-26.83],[21.67,-26.86],[23.01,-25.3],[25.51,-25.68],[26.96,-23.75],[29.37,-22.19],[29.89,-22.19]],[[28.57,-28.61],[27.01,-29.63],[27.56,-30.4],[28.08,-30.65],[29.17,-29.91],[29.43,-29.28],[28.57,-28.61]]]]},"properties":{"name":"South Africa"},"id":"ZA"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[32.99,-17.27],[32.7,-18.94],[33.02,-19.94],[32.49,-21.34],[31.3,-22.41],[29.89,-22.19],[29.37,-22.19],[28.02,-21.57],[27.71,-20.51],[26.17,-19.53],[25.26,-17.8],[27.04,-17.96],[28.93,-15.97],[30.42,-15.63],[30.42,-16.01],[32.98,-16.71],[32.99,-17.27]]]]},"properties":{"name":"Zimbabwe"},"id":"ZW"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-16.34,28.37],[-16.67,27.98],[-16.91,28.34],[-16.34,28.37]]],[[[3.25,39.73],[3.06,39.26],[2.36,39.56],[3.25,39.73]]],[[[-7.86,43.76],[-1.78,43.36],[1.45,42.6],[1.72,42.51],[3.18,42.44],[3.18,41.87],[0.96,41.03],[0.05,40.04],[-0.34,39.44],[0.21,38.73],[-0.72,37.61],[-2.13,36.73],[-4.4,36.72],[-5.33,36.16],[-5.36,36.16],[-6.04,36.18],[-6.36,36.86],[-7.43,37.25],[-6.95,39.03],[-7.53,39.67],[-7.02,39.67],[-6.93,41.02],[-6.19,41.58],[-6.59,41.95],[-8.2,41.87],[-8.75,41.95],[-9.21,43.15],[-7.86,43.76]]]]},"properties":{"name":"Spain"},"id":"ES"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-15.74,21.34],[-16.95,21.34],[-17.05,20.76],[-16.92,21.94],[-16.49,22.33],[-16.36,22.57],[-16.28,22.9],[-16.16,22.99],[-16.18,23.08],[-16.08,23.32],[-15.77,23.78],[-15.78,23.91],[-16.01,23.67],[-15.84,23.9],[-15.58,24.06],[-15.18,24.49],[-15.03,24.54],[-14.9,24.69],[-14.48,26.17],[-13.57,26.73],[-13.17,27.67],[-8.67,27.67],[-8.67,27.29],[-8.67,26],[-12,26],[-12,23.45],[-13.11,22.89],[-13,21.34],[-15.74,21.34]]]]},"properties":{"name":"Western Sahara"},"id":"EH"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[31.45,22],[36.89,22],[37.43,18.86],[38.6,17.99],[37,17.07],[36.54,14.26],[36.14,12.71],[35.1,11.83],[34.86,10.73],[34.29,10.55],[34.12,8.58],[33.25,8.46],[32.99,7.92],[34.7,6.68],[35.94,4.62],[34.39,4.61],[34,4.22],[33.52,3.75],[30.86,3.49],[29.64,4.64],[28.36,4.29],[27.46,5.02],[25.25,7.85],[23.52,8.71],[23.67,9.87],[22.87,10.92],[22.47,12.62],[21.83,12.8],[22.94,15.56],[24,15.7],[24,19.5],[24,20],[25,20],[25,22],[31.45,22]]]]},"properties":{"name":"Sudan"},"id":"SD"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-55.13,5.82],[-54.03,5.82],[-54.17,5.35],[-54.48,4.75],[-54,3.45],[-54.6,2.33],[-55.97,2.53],[-55.9,1.89],[-56.47,1.94],[-58.05,4.01],[-57.25,5.49],[-56.97,6],[-55.13,5.82]]]]},"properties":{"name":"Suriname"},"id":"SR"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[23.34,78.2],[23.06,78.02],[24.91,77.75],[22.64,77.25],[22.78,77.55],[20.86,77.46],[21.64,77.91],[20.9,78.11],[23.34,78.2]]],[[[21.5,78.57],[22.27,78.26],[20.12,78.47],[21.5,78.57]]],[[[16.82,79.87],[18.1,79.72],[17.64,79.37],[18.36,79.63],[18.92,79.16],[21.55,78.77],[18.97,78.46],[19.09,78.1],[16.61,76.57],[15.5,76.88],[16.52,77],[13.91,77.53],[16.22,77.43],[14.74,77.66],[17.01,77.93],[13.94,77.72],[13.59,78.05],[17.3,78.42],[16.33,78.45],[16.83,78.67],[15.46,78.45],[15.38,78.84],[13.01,78.2],[12.36,78.48],[13.2,78.54],[11.33,78.96],[12.51,78.91],[11.76,79.08],[12.11,79.3],[11.24,79.09],[10.68,79.54],[13.82,79.88],[12.45,79.57],[14.06,79.26],[13.89,79.54],[14.58,79.8],[16.45,78.9],[15.64,79.83],[16.82,79.87]]],[[[20.04,80.46],[22.23,79.98],[22.89,80.49],[23.36,80.43],[23.1,80.12],[24.84,80.35],[27.24,79.9],[23.51,79.18],[19.64,79.6],[22.31,79.8],[18.77,79.72],[17.78,80.13],[20.04,80.46]]]]},"properties":{"name":"Svalbard"},"id":"SJ"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[30.9,-26.31],[31.33,-25.75],[31.97,-25.96],[32.13,-26.84],[31.99,-27.32],[31.16,-27.2],[30.9,-26.31]]]]},"properties":{"name":"Swaziland"},"id":"SZ"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[21.81,68.57],[23.67,67.94],[23.43,67.47],[24.01,66.8],[23.66,66.31],[24.17,65.81],[21.77,65.72],[22.2,65.55],[21.26,65.34],[21.62,65.14],[21.04,64.82],[21.58,64.44],[20.78,63.87],[18.21,62.78],[17.7,62.99],[18.05,62.6],[17.33,62.49],[17.65,62.23],[17.15,60.95],[19.08,59.76],[17.94,59.34],[17.59,59.81],[17.73,59.44],[16.02,59.49],[17.38,59.25],[18.65,59.32],[16.19,58.63],[16.94,58.48],[16.41,58.47],[16.82,58.2],[16.42,57.89],[16.69,57.47],[15.87,56.09],[14.7,56.16],[14.19,55.39],[12.98,55.4],[12.45,56.3],[12.89,56.64],[11.7,57.7],[11.8,58.32],[11.2,58.4],[11.11,59],[11.43,58.99],[11.82,59.85],[12.49,60.11],[12.21,61],[12.86,61.36],[12.12,61.73],[12.14,63.58],[13.99,64.02],[14.12,64.47],[13.66,64.58],[14.49,65.31],[14.5,66.13],[15.47,66.28],[16.73,67.9],[17.88,67.95],[18.09,68.51],[19.94,68.34],[20.35,68.79],[20.1,69.04],[20.58,69.06],[21.81,68.57]]]]},"properties":{"name":"Sweden"},"id":"SE"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[7.7,47.54],[9.57,47.54],[9.53,47.27],[9.47,47.06],[9.6,47.06],[10.47,46.87],[10.13,46.23],[9.28,46.5],[9.04,45.84],[8.44,46.46],[7.86,45.92],[7.04,45.93],[6.79,46.43],[5.97,46.21],[6.99,47.5],[7.59,47.58],[7.7,47.54]]],[[[8.71,47.7],[8.68,47.69],[8.67,47.71],[8.71,47.7]]]]},"properties":{"name":"Switzerland"},"id":"CH"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[42.36,37.11],[41.29,36.36],[41,34.42],[38.79,33.38],[36.84,32.31],[35.65,32.69],[35.62,33.25],[36.62,34.2],[35.97,34.65],[35.92,35.93],[36.69,36.24],[36.66,36.83],[42.36,37.11]]]]},"properties":{"name":"Syria"},"id":"SY"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[74.92,37.24],[73.31,37.46],[71.68,36.68],[71.59,37.9],[70.97,38.47],[69.32,37.12],[67.78,37.19],[68.38,38.2],[67.44,39.48],[68.54,39.55],[69.01,40.09],[68.6,40.18],[70.42,41.05],[70.8,40.73],[70.38,40.38],[70.98,40.24],[69.54,40.13],[69.31,39.54],[73.66,39.45],[73.82,38.61],[74.86,38.47],[74.92,37.24]]]]},"properties":{"name":"Tajikistan"},"id":"TJ"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[100.08,20.35],[100.09,20.35],[100.58,20.16],[100.5,19.53],[101.28,19.56],[100.92,17.57],[102.09,18.21],[102.68,17.82],[103.4,18.43],[104.72,17.5],[104.75,16.53],[105.64,15.66],[105.21,14.35],[103.18,14.33],[102.38,13.57],[102.92,11.64],[102.06,12.57],[100.85,12.68],[100.98,13.46],[100.07,13.42],[100.02,12.19],[99.15,10.37],[99.24,9.25],[99.85,9.3],[100.42,7.16],[102.1,6.24],[101.14,5.63],[100.65,6.45],[100.13,6.42],[98.66,8.38],[98.27,8.27],[98.74,10.35],[99.66,11.83],[99.17,13.73],[98.2,15.07],[98.93,16.39],[97.35,18.56],[97.77,18.57],[98.05,19.81],[100.08,20.35]]]]},"properties":{"name":"Thailand"},"id":"TH"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[1.4,9.43],[1.64,6.22],[1.2,6.1],[0.53,6.95],[0.73,8.32],[-0.15,11.14],[0.92,11],[0.78,10.38],[1.4,9.43]]]]},"properties":{"name":"Togo"},"id":"TG"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-171.84,-9.21],[-171.86,-9.21],[-171.85,-9.17],[-171.84,-9.21]]]]},"properties":{"name":"Tokelau"},"id":"TK"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-175.15,-21.18],[-175.36,-21.1],[-175.05,-21.14],[-175.15,-21.18]]]]},"properties":{"name":"Tonga"},"id":"TO"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-60.92,10.8],[-61.01,10.14],[-61.92,10.04],[-61.46,10.28],[-61.66,10.71],[-60.92,10.8]]],[[[-60.64,11.2],[-60.85,11.16],[-60.53,11.35],[-60.64,11.2]]]]},"properties":{"name":"Trinidad and Tobago"},"id":"TT"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[56.18,25.65],[56.27,25.64],[56.37,24.98],[56.04,24.94],[55.2,22.7],[52.58,22.94],[51.58,24.26],[54.12,24.14],[56.08,26.07],[56.18,25.65]]]]},"properties":{"name":"United Arab Emirates"},"id":"AE"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[9.85,37.14],[10.38,36.72],[11.07,37.05],[10.46,36.12],[11.13,35.24],[10.01,34.17],[11.53,33.17],[11.57,32.44],[10.29,31.69],[10.21,30.73],[9.54,30.23],[9.06,32.1],[7.49,33.89],[8.25,34.64],[8.18,36.52],[8.62,36.94],[9.85,37.14]]]]},"properties":{"name":"Tunisia"},"id":"TN"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[35.1,41.96],[38.36,40.91],[40.15,40.92],[41.53,41.52],[42.83,41.58],[43.46,41.11],[43.66,40.11],[44.78,39.71],[44.81,39.63],[44.03,39.38],[44.79,37.15],[42.36,37.11],[36.66,36.83],[36.69,36.24],[35.92,35.93],[36.02,36.93],[32.81,36.03],[31.05,36.85],[29.68,36.12],[28.45,36.88],[27.38,36.68],[28.33,37.04],[27.25,36.97],[27.6,37.23],[27.19,37.35],[27.27,37.96],[26.28,38.26],[26.37,38.66],[27.16,38.44],[26.73,38.65],[26.95,39.55],[26.07,39.48],[26.71,40.38],[29.94,40.72],[29.17,41.23],[31.23,41.09],[33.33,42.02],[35.1,41.96]]],[[[27.39,42.01],[28.01,41.98],[29.04,41.06],[27.51,40.98],[26.18,40.05],[26.83,40.59],[26.04,40.74],[26.63,41.35],[26.36,41.71],[27.39,42.01]]]]},"properties":{"name":"Turkey"},"id":"TR"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[58.78,42.66],[60.01,42.22],[60.14,41.38],[61.87,41.13],[62.55,39.93],[64.38,38.95],[66.64,38],[66.54,37.37],[64.8,37.12],[64.5,36.28],[63.12,35.86],[62.72,35.25],[61.28,35.61],[61.16,36.65],[60.33,36.66],[59.34,37.54],[57.21,38.28],[53.91,37.35],[53.98,38.92],[53.16,39.18],[53.26,39.66],[53.73,39.52],[53.58,39.97],[53,39.76],[52.72,40.45],[52.92,41.08],[53.75,40.62],[54.73,41.1],[53.8,42.12],[52.95,41.97],[52.88,41.05],[52.44,41.74],[53.01,42.14],[54.17,42.34],[56,41.33],[57.04,41.26],[56.99,41.89],[58.78,42.66]]]]},"properties":{"name":"Turkmenistan"},"id":"TM"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-71.66,21.82],[-71.66,21.74],[-71.85,21.85],[-71.66,21.82]]],[[[-71.88,21.85],[-72.03,21.94],[-71.91,21.94],[-71.88,21.85]]]]},"properties":{"name":"Turks and Caicos Islands"},"id":"TC"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[179.22,-8.55],[179.2,-8.46],[179.23,-8.5],[179.22,-8.55]]]]},"properties":{"name":"Tuvalu"},"id":"TV"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[34,4.22],[35.01,1.9],[33.91,0.1],[33.92,-1],[31.68,-1],[30.48,-1.06],[29.6,-1.39],[29.96,0.83],[31.3,2.12],[30.73,2.45],[30.86,3.49],[33.52,3.75],[34,4.22]]]]},"properties":{"name":"Uganda"},"id":"UG"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[33.42,52.36],[34.42,51.81],[34.1,51.65],[34.38,51.26],[35.37,51.04],[35.61,50.37],[37.46,50.44],[38.02,49.9],[40.14,49.6],[39.7,49.01],[40.08,48.87],[39.66,48.62],[39.8,47.86],[38.85,47.86],[38.24,47.11],[35.91,46.65],[34.99,46.08],[35.34,46.32],[35.2,46.44],[35.21,46.39],[35.05,46.26],[34.7,46.18],[34.56,45.98],[33.67,46.22],[35.13,45.33],[35.34,45.33],[35.05,45.61],[34.76,46.02],[34.67,46.09],[34.83,46.07],[34.9,45.88],[35.05,45.65],[35.31,45.38],[35.48,45.29],[36.64,45.38],[33.96,44.38],[33.37,44.58],[33.54,45.11],[32.48,45.4],[33.61,46.15],[31.79,46.28],[32.06,46.4],[31.51,46.58],[32.36,46.46],[32.65,46.64],[32.02,46.63],[31.75,47.25],[31.91,46.65],[31.48,46.63],[31.59,46.8],[30.83,46.55],[30.25,45.88],[29.75,45.62],[29.63,45.82],[29.66,45.21],[28.21,45.45],[28.99,46.48],[30.12,46.39],[29.95,46.81],[29.14,47.99],[27.76,48.45],[26.63,48.26],[24.92,47.71],[22.89,47.95],[22.15,48.41],[22.56,49.08],[24.11,50.57],[23.6,51.53],[25.78,51.94],[30.55,51.25],[30.94,52.07],[31.78,52.11],[33.42,52.36]]]]},"properties":{"name":"Ukraine"},"id":"UA"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[20.82,40.91],[20.59,41.88],[22.37,42.32],[22.94,41.34],[20.98,40.86],[20.82,40.91]]]]},"properties":{"name":"Macedonia"},"id":"MK"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[25.32,31.5],[29.07,30.82],[31.03,31.6],[31.92,31.53],[32.14,31.07],[34.22,31.32],[34.27,31.22],[34.9,29.49],[34.25,27.73],[33.24,28.55],[32.57,30.01],[32.34,29.6],[35.81,23.92],[35.48,23.94],[35.67,22.97],[36.89,22],[31.45,22],[25,22],[24.71,30.17],[25.15,31.65],[25.32,31.5]]]]},"properties":{"name":"Egypt"},"id":"EG"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-6.35,55.24],[-5.43,54.48],[-6.27,54.1],[-8.16,54.44],[-7.41,54.95],[-7.25,55.07],[-6.35,55.24]]],[[[-5.78,56.51],[-6.37,56.31],[-6.32,56.6],[-5.78,56.51]]],[[[-6.14,57.57],[-5.66,57.2],[-6.79,57.45],[-6.14,57.57]]],[[[-6.2,58.36],[-7.12,57.82],[-7.04,58.23],[-6.2,58.36]]],[[[-3.01,58.63],[-4.44,57.57],[-1.77,57.46],[-3.28,56.36],[-2.58,56.27],[-3.73,56.03],[-1.63,55.58],[-1.3,54.76],[-0.07,54.11],[0.12,53.56],[-0.72,53.7],[0.24,53.4],[0.000037000000134,52.88],[1.68,52.75],[1.59,52.08],[0.38,51.45],[1.41,51.18],[-5.68,50.04],[-4.23,51.19],[-3.03,51.21],[-2.38,51.76],[-3.35,51.38],[-5.25,51.73],[-4.13,52.33],[-4.13,52.91],[-4.76,52.79],[-4.2,53.21],[-2.7,53.35],[-3.11,53.55],[-2.81,54.22],[-3.63,54.51],[-3.04,54.98],[-4.95,54.65],[-5.17,55],[-4.61,55.49],[-4.92,55.7],[-4.88,55.94],[-4.48,55.92],[-4.83,56.11],[-5.3,55.85],[-5.03,56.23],[-5.78,55.3],[-5.12,56.82],[-6.24,56.71],[-5.4,57.11],[-5.82,57.82],[-5.1,57.85],[-5.46,58.08],[-5,58.62],[-3.01,58.63]]],[[[-2.79,58.95],[-3.19,58.91],[-3.35,59.11],[-2.79,58.95]]],[[[-1.3,60.49],[-1.27,59.85],[-1.69,60.28],[-1.3,60.49]]]]},"properties":{"name":"United Kingdom"},"id":"GB"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-2.59,49.42],[-2.67,49.43],[-2.5,49.51],[-2.59,49.42]]]]},"properties":{"name":"Guernsey"},"id":"GG"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-2.01,49.21],[-2.21,49.18],[-2.25,49.25],[-2.01,49.21]]]]},"properties":{"name":"Jersey"},"id":"JE"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-4.78,54.06],[-4.35,54.41],[-4.39,54.19],[-4.78,54.06]]]]},"properties":{"name":"Isle of Man"},"id":"IM"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[31.68,-1],[33.92,-1],[37.6,-3],[37.61,-3.5],[39.2,-4.67],[38.78,-6.05],[39.55,-6.99],[39.39,-8.9],[40.44,-10.48],[37.46,-11.73],[34.97,-11.57],[34.33,-9.73],[33.13,-9.49],[32.94,-9.41],[30.77,-8.19],[29.55,-6.3],[29.42,-4.45],[30.83,-3.26],[30.57,-2.4],[30.89,-2.08],[30.48,-1.06],[31.68,-1]]]]},"properties":{"name":"Tanzania"},"id":"TZ"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-155.01,19.33],[-155.86,19.03],[-155.86,20.27],[-155.16,19.96],[-155.01,19.33]]],[[[-156.47,20.9],[-155.99,20.75],[-156.42,20.59],[-156.47,20.9]]],[[[-157.73,21.41],[-158.1,21.3],[-158.27,21.58],[-157.73,21.41]]],[[[-159.43,21.88],[-159.79,22.06],[-159.35,22.22],[-159.43,21.88]]],[[[-95.08,49.36],[-94.61,48.72],[-91.42,48.04],[-88.37,48.31],[-84.13,46.53],[-82.54,45.36],[-82.13,43.59],[-83.17,42.05],[-82.7,41.68],[-78.99,42.82],[-79.18,43.47],[-78.72,43.63],[-76.8,43.63],[-74.99,44.99],[-70.88,45.24],[-69.23,47.47],[-67.79,47.07],[-67.8,45.7],[-67.21,45.18],[-67.19,44.66],[-68.8,44.58],[-70.73,43.12],[-70.58,42.65],[-71.04,42.31],[-69.94,41.67],[-71.19,41.47],[-71.39,41.81],[-71.51,41.37],[-74,40.71],[-73.96,41.31],[-74.42,39.36],[-74.96,38.92],[-75.56,39.62],[-75.03,40.01],[-75.59,39.65],[-75.04,38.42],[-75.96,37.15],[-75.64,37.96],[-76.36,38.86],[-75.83,39.58],[-76.62,39.25],[-76.31,38.05],[-77.24,38.4],[-77.06,38.91],[-77.32,38.35],[-76.24,37.9],[-76.35,37.62],[-77.13,38.17],[-76.27,37.08],[-77.23,37.3],[-75.99,36.91],[-75.53,35.8],[-75.94,36.72],[-75.79,36.07],[-76.71,36.26],[-76.73,35.94],[-75.72,35.81],[-76.15,35.34],[-77.05,35.53],[-76.47,35.27],[-76.94,34.98],[-76.34,34.89],[-77.43,34.74],[-77.93,33.93],[-78.83,33.73],[-80.47,32.32],[-80.84,32.52],[-81.5,31.13],[-80.03,26.79],[-80.4,25.18],[-81.09,25.12],[-81.74,25.96],[-81.78,26.71],[-82.06,26.54],[-82.66,27.46],[-82.42,27.92],[-82.85,27.86],[-82.63,28.88],[-83.67,29.91],[-85.35,29.68],[-86.26,30.5],[-88.02,30.22],[-88.02,30.7],[-88.13,30.31],[-90.42,30.2],[-89.4,30.05],[-89.75,29.63],[-89.01,29.18],[-89.4,28.93],[-90.18,29.57],[-90.21,29.09],[-91.25,29.24],[-91.84,29.83],[-92.31,29.54],[-93.85,29.99],[-93.86,29.68],[-94.77,29.36],[-94.48,29.56],[-95.06,29.72],[-95.14,29.06],[-96.21,28.49],[-96.64,28.72],[-96.4,28.44],[-97.52,27.87],[-97.41,27.33],[-97.77,27.46],[-97.14,25.97],[-99.1,26.43],[-99.51,27.57],[-101.41,29.77],[-102.31,29.89],[-103.38,29.02],[-106.4,31.75],[-111.05,31.33],[-113.05,31.97],[-114.72,32.72],[-117.12,32.54],[-118.53,34.05],[-120.62,34.57],[-120.61,35.14],[-122.49,37.52],[-122.39,37.82],[-122.01,37.47],[-122.39,37.96],[-122.24,38.06],[-121.42,38.01],[-122.37,38.16],[-122.49,37.83],[-123,38.01],[-124.33,40.27],[-124.04,41.43],[-124.52,42.87],[-123.95,46.18],[-123.16,46.2],[-124,46.32],[-123.8,46.98],[-124.16,46.94],[-124.72,48.4],[-122.75,48.16],[-123.15,47.37],[-122.45,47.77],[-122.88,47.06],[-122.31,47.4],[-122.76,49],[-95.15,49],[-95.08,49.36]]],[[[-156.45,71.26],[-155.59,71.16],[-155.97,70.76],[-155.09,71.15],[-152.25,70.84],[-152.5,70.65],[-152.08,70.57],[-152.63,70.56],[-151.97,70.44],[-143.28,70.12],[-141,69.64],[-141,60.31],[-139.07,60.35],[-137.48,58.91],[-135.47,59.8],[-133.43,58.46],[-131.82,56.6],[-130.02,55.91],[-130.17,55.75],[-130.14,55.54],[-129.99,55.28],[-130.36,54.91],[-130.69,54.76],[-131.01,55],[-130.46,55.33],[-131.06,55.12],[-130.61,55.3],[-131.01,56.11],[-132.16,55.58],[-131.77,56.2],[-133.51,57.19],[-133.06,57.35],[-133.64,57.7],[-133,57.51],[-133.56,57.9],[-133.12,57.86],[-134.05,58.07],[-133.77,58.52],[-134.76,58.38],[-135.34,59.47],[-135.09,58.23],[-135.92,58.38],[-135.77,58.9],[-137.06,59.07],[-136.03,58.39],[-136.65,58.22],[-139.71,59.5],[-139.49,59.98],[-139.29,59.57],[-138.89,59.81],[-139.5,60.03],[-140.4,59.7],[-141.39,60.14],[-143.92,59.99],[-144.94,60.3],[-144.61,60.72],[-145.29,60.35],[-146.65,60.7],[-146.12,60.84],[-146.76,60.96],[-146.3,61.13],[-147.87,60.83],[-147.72,61.28],[-148.7,60.79],[-148.2,60.63],[-148.68,60.45],[-147.94,60.46],[-148.44,59.95],[-149.42,60.12],[-150.91,59.24],[-151.98,59.28],[-150.99,59.78],[-151.88,59.75],[-151.41,60.73],[-149.03,60.85],[-150.06,61.15],[-149.42,61.51],[-153.1,60.29],[-152.58,60.06],[-154.26,59.14],[-153.27,58.85],[-156.55,56.98],[-158.42,56.44],[-158.12,56.23],[-158.51,55.99],[-161.25,55.35],[-161.56,55.62],[-161.97,55.1],[-162.63,55.3],[-162.56,54.96],[-163.36,54.81],[-161.8,55.89],[-160.25,55.77],[-160.35,56.29],[-157.4,57.49],[-157.61,58.09],[-157.14,58.16],[-157.55,58.38],[-156.78,59.15],[-158.19,58.61],[-158.49,59],[-157.99,58.9],[-158.54,59.18],[-158.9,58.4],[-160.33,59.06],[-162.17,58.65],[-161.57,59.1],[-161.99,59.14],[-161.71,59.5],[-162.24,60.06],[-162.15,60.25],[-162.37,60.18],[-161.88,60.7],[-162.57,60.32],[-162.52,59.99],[-164.07,59.82],[-165.43,60.56],[-163.55,60.9],[-165.15,60.93],[-164.82,61.11],[-165.12,61.08],[-165.14,61.26],[-165.16,61.17],[-165.37,61.2],[-165.29,61.25],[-165.15,61.42],[-165.06,61.42],[-165,61.47],[-164.85,61.49],[-164.72,61.63],[-164.76,61.63],[-165.02,61.5],[-165.08,61.43],[-165.16,61.43],[-165.29,61.33],[-165.27,61.31],[-165.31,61.26],[-165.41,61.21],[-165.34,61.16],[-165.39,61.07],[-166.2,61.59],[-165.25,62.45],[-164.64,62.42],[-164.48,62.75],[-164.88,62.84],[-164.41,63.21],[-161.15,63.51],[-160.78,63.87],[-161.53,64.42],[-160.78,64.72],[-162.79,64.34],[-166.12,64.57],[-166.96,65.19],[-166.06,65.26],[-168.13,65.67],[-164.35,66.59],[-163.63,66.57],[-164.19,66.2],[-163.66,66.07],[-161,66.2],[-161.91,66.27],[-162.64,66.87],[-162.34,66.96],[-161.6,66.45],[-160.23,66.4],[-161.51,66.53],[-161.9,66.73],[-161.5,66.98],[-162.35,67.16],[-163.73,67.11],[-164.12,67.61],[-166.83,68.35],[-166.22,68.88],[-163.65,69.11],[-161.94,70.31],[-159.94,70.59],[-159.84,70.27],[-159.29,70.53],[-160.12,70.62],[-159.67,70.8],[-156.45,71.26]]]]},"properties":{"name":"United States"},"id":"US"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-64.76,17.77],[-64.56,17.75],[-64.9,17.68],[-64.76,17.77]]]]},"properties":{"name":"Virgin Islands"},"id":"VI"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-2.83,11],[-2.69,9.48],[-3.63,9.95],[-4.7,9.7],[-5.52,10.44],[-5.27,11.84],[-4.42,12.3],[-3.96,13.5],[-3.44,13.17],[-2.47,14.29],[-0.73,15.08],[0.24,14.92],[0.6,13.7],[1.29,13.35],[0.99,13.05],[2.14,12.69],[2.4,11.9],[0.92,11],[-0.15,11.14],[-2.83,11]]]]},"properties":{"name":"Burkina Faso"},"id":"BF"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-57.81,-30.75],[-57.61,-30.18],[-56.81,-30.11],[-56.01,-31.08],[-55.58,-30.85],[-53.88,-31.97],[-53.09,-32.73],[-53.52,-33.15],[-53.37,-33.74],[-54.15,-34.67],[-56.32,-34.91],[-57.12,-34.46],[-57.84,-34.49],[-58.4,-33.93],[-58.36,-33.13],[-58.15,-33.1],[-58.05,-32.93],[-58.2,-32.45],[-57.81,-30.75]]]]},"properties":{"name":"Uruguay"},"id":"UY"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[64.38,38.95],[62.55,39.93],[61.87,41.13],[60.14,41.38],[60.01,42.22],[58.78,42.66],[56.99,41.89],[57.04,41.26],[56,41.33],[56,45],[58.57,45.57],[62.03,43.48],[64.93,43.74],[66.12,43],[66.03,42],[66.53,42],[66.72,41.17],[67.94,41.18],[68.46,40.6],[69.06,41.38],[70.97,42.25],[71.28,42.2],[70.19,41.53],[71.42,41.12],[71.69,41.56],[73.17,40.82],[70.98,40.24],[70.38,40.38],[70.8,40.73],[70.42,41.05],[68.6,40.18],[69.01,40.09],[68.54,39.55],[67.44,39.48],[68.38,38.2],[67.78,37.19],[66.54,37.37],[66.64,38],[64.38,38.95]]]]},"properties":{"name":"Uzbekistan"},"id":"UZ"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-69.77,11.7],[-68.42,11.18],[-68.16,10.5],[-66.24,10.64],[-65.08,10.06],[-63.7,10.49],[-64.26,10.66],[-61.88,10.73],[-62.92,10.53],[-62.62,10.12],[-63.02,10.1],[-60.85,9.44],[-61.6,8.55],[-59.99,8.54],[-59.83,8.24],[-60.72,7.54],[-60.29,7.06],[-61.13,6.71],[-61.39,5.94],[-60.73,5.2],[-60.99,4.52],[-62.75,4.03],[-62.88,3.56],[-64.8,4.28],[-64.05,2.48],[-63.39,2.15],[-65.52,0.65],[-66.87,1.22],[-67.19,2.39],[-67.83,2.83],[-67.29,3.4],[-67.86,4.56],[-67.45,6.19],[-69.25,6.08],[-70.12,6.98],[-72,7.02],[-72.78,9.08],[-73.38,9.17],[-72.49,11.12],[-71.98,11.66],[-71.32,11.85],[-71.97,11.56],[-71.58,10.71],[-72.13,9.81],[-71.62,9.04],[-71.06,9.34],[-71.5,10.96],[-69.8,11.43],[-70.24,11.63],[-70.03,12.2],[-69.77,11.7]]]]},"properties":{"name":"Venezuela"},"id":"VE"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-178.04,-14.32],[-178.14,-14.32],[-178.19,-14.24],[-178.04,-14.32]]],[[[-176.16,-13.35],[-176.16,-13.21],[-176.12,-13.26],[-176.16,-13.35]]]]},"properties":{"name":"Wallis and Futuna"},"id":"WF"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-171.43,-14.02],[-172.06,-13.87],[-171.82,-13.81],[-171.43,-14.02]]],[[[-172.29,-13.49],[-172.21,-13.81],[-172.78,-13.53],[-172.29,-13.49]]]]},"properties":{"name":"Samoa"},"id":"WS"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[52.23,15.67],[43.96,12.59],[43.25,13.21],[42.79,16.38],[43.31,17.46],[44.47,17.41],[46.33,16.67],[46.33,15.62],[48.77,18.27],[52,19],[53.11,16.64],[52.3,16.27],[52.23,15.67]]]]},"properties":{"name":"Yemen"},"id":"YE"},{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[24.97,-17.56],[23.48,-17.63],[22,-16.17],[22,-13],[24.02,-13.01],[23.99,-10.87],[24.45,-11.46],[25.33,-11.19],[26,-11.9],[26.87,-11.97],[27.2,-11.57],[29.02,-13.4],[29.8,-13.45],[29.81,-12.16],[29.03,-12.38],[28.36,-11.55],[28.7,-10.65],[28.37,-9.26],[28.9,-8.48],[30.77,-8.19],[32.94,-9.41],[33.7,-10.56],[33.25,-10.89],[33.55,-12.36],[32.68,-13.61],[33.22,-14.01],[30.21,-14.98],[30.42,-15.63],[28.93,-15.97],[27.04,-17.96],[25.26,-17.8],[24.97,-17.56]]]]},"properties":{"name":"Zambia"},"id":"ZM"}]`),iH={features:rH};Ww({ThreeGlobe:W$});const sH=3,oH=1.2,Wg=300;let Qg=[0];function aH({globeConfig:r,data:e}){const[t,n]=ui.useState(null),i=ui.useRef(null),s={pointSize:1,atmosphereColor:"#ffffff",showAtmosphere:!0,atmosphereAltitude:.1,polygonColor:"rgba(255,255,255,0.7)",arcTime:2e3,arcLength:.9,rings:1,maxRings:3,...r};ui.useEffect(()=>{i.current&&(u(),o())},[i.current]);const o=()=>{if(!i.current)return;const d=i.current.globeMaterial();d.color=new Un(r.globeColor),d.emissive=new Un(r.emissive),d.emissiveIntensity=r.emissiveIntensity||.1,d.shininess=r.shininess||.9},u=()=>{const d=e;let m=[];for(let x=0;x<d.length;x++){const b=d[x],T=lH(b.color);m.push({size:s.pointSize,order:b.order,color:M=>`rgba(${T.r}, ${T.g}, ${T.b}, ${1-M})`,lat:b.startLat,lng:b.startLng}),m.push({size:s.pointSize,order:b.order,color:M=>`rgba(${T.r}, ${T.g}, ${T.b}, ${1-M})`,lat:b.endLat,lng:b.endLng})}const y=m.filter((x,b,T)=>T.findIndex(M=>["lat","lng"].every(N=>M[N]===x[N]))===b);n(y)};ui.useEffect(()=>{i.current&&t&&(i.current.hexPolygonsData(iH.features).hexPolygonResolution(3).hexPolygonMargin(.7).showAtmosphere(s.showAtmosphere).atmosphereColor(s.atmosphereColor).atmosphereAltitude(s.atmosphereAltitude).hexPolygonColor(d=>s.polygonColor),h())},[t]);const h=()=>{!i.current||!t||(i.current.arcsData(e).arcStartLat(d=>d.startLat*1).arcStartLng(d=>d.startLng*1).arcEndLat(d=>d.endLat*1).arcEndLng(d=>d.endLng*1).arcColor(d=>d.color).arcAltitude(d=>d.arcAlt*1).arcStroke(d=>[.32,.28,.3][Math.round(Math.random()*2)]).arcDashLength(s.arcLength).arcDashInitialGap(d=>d.order*1).arcDashGap(15).arcDashAnimateTime(d=>s.arcTime),i.current.pointsData(e).pointColor(d=>d.color).pointsMerge(!0).pointAltitude(0).pointRadius(2),i.current.ringsData([]).ringColor(d=>m=>d.color(m)).ringMaxRadius(s.maxRings).ringPropagationSpeed(sH).ringRepeatPeriod(s.arcTime*s.arcLength/s.rings))};return ui.useEffect(()=>{if(!i.current||!t)return;const d=setInterval(()=>{!i.current||!t||(Qg=uH(0,e.length,Math.floor(e.length*4/5)),i.current.ringsData(t.filter((m,y)=>Qg.includes(y))))},2e3);return()=>{clearInterval(d)}},[i.current,t]),Di.jsx(Di.Fragment,{children:Di.jsx("threeGlobe",{ref:i})})}function AH(){const{gl:r,size:e}=Cs();return ui.useEffect(()=>{r.setPixelRatio(window.devicePixelRatio),r.setSize(e.width,e.height),r.setClearColor(16755455,0)},[]),null}function dH(r){const{globeConfig:e}=r,t=new g1;return t.fog=new Hw(16777215,400,2e3),Di.jsxs(jw,{scene:t,camera:new Mo(50,oH,180,1800),children:[Di.jsx(AH,{}),Di.jsx("ambientLight",{color:e.ambientLight,intensity:.6}),Di.jsx("directionalLight",{color:e.directionalLeftLight,position:new Re(-400,100,400)}),Di.jsx("directionalLight",{color:e.directionalTopLight,position:new Re(-200,500,200)}),Di.jsx("pointLight",{color:e.pointLight,position:new Re(-200,500,200),intensity:.8}),Di.jsx(aH,{...r}),Di.jsx(nH,{enablePan:!1,enableZoom:!1,minDistance:Wg,maxDistance:Wg,autoRotateSpeed:1,autoRotate:!0,minPolarAngle:Math.PI/3.5,maxPolarAngle:Math.PI-Math.PI/3})]})}function lH(r){var e=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;r=r.replace(e,function(n,i,s,o){return i+i+s+s+o+o});var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(r);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}function uH(r,e,t){const n=[];for(;n.length<t;){const i=Math.floor(Math.random()*(e-r))+r;n.indexOf(i)===-1&&n.push(i)}return n}export{aH as Globe,AH as WebGLRendererConfig,dH as World,uH as genRandomNumbers,lH as hexToRgb};
